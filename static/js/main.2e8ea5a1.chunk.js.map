{"version":3,"sources":["log.ts","components/Translator.tsx","conf.ts","images/white-paperboard.png","video/intro.webm","utils.ts","api.ts","components/DetailsDialog.tsx","store/actions.ts","editorConfig.ts","components/PublishDialog.tsx","components/GiftBox.tsx","templateContent.ts","components/Home.tsx","components/Progress.tsx","components/AppBar.tsx","components/StatusPage.tsx","components/App.tsx","serviceWorker.ts","store/reducers.ts","components/DevTools.tsx","store/configureStore.tsx","index.tsx"],"names":["log","logging","IS_DEBUG","enableAll","disableAll","mapStateToProps","state","mapDispatchToProps","dispatch","connector","connect","Translator","props","useState","selectorVisible","setSelectorVisible","useCookies","cookies","setCookie","translator","lang","event","translate","preventDefault","eval","useEffect","chosenLanguage","getNavigatorLanguage","flags","title","xOffset","yOffset","renderFlag","href","key","className","onClick","style","backgroundPosition","src","height","width","alt","map","flag","path","mdiDotsHorizontal","size","horizontal","vertical","rotate","display","onChange","target","value","process","DEBUG","STATIC_PAGES","VERSION","API_ROOT","module","exports","isStaticPage","includes","isShareAvailable","Boolean","navigator","share","navigatorShare","shareData","a","debug","error","languages","length","userLanguage","language","browserLanguage","absurl","suburl","res","urljoin","info","requests","url","superagent","get","body","put","post","needEditDetails","app","giftTitle","actionSaveGift","needSave","type","setGiftTitle","handleCancel","Dialog","open","onClose","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","TextField","autoFocus","margin","label","fullWidth","multiline","rows","rowsMax","DialogActions","Button","color","AlloyEditor","require","SelectionTest","SelectionSetPosition","SelectionGetArrowBoxClasses","EDITOR_CONFIG","toolbars","add","buttons","tabIndex","styles","selections","name","test","embed","embedUrl","link","setPosition","image","full","simple","text","getArrowBoxClasses","table","embedUrlTemplate","spritemap","needPublishGift","actionPublishGift","getState","actionPublishCancel","dividers","giftIdExtractor","match","createMatchSelector","params","giftId","openEnvelope","closeEnvelope","giftFetched","giftPublished","hasContent","fetchedGiftId","giftIsFetching","failedToFetchGift","giftFetchingError","actionGiftSaved","actionGiftIsSaving","actionGiftWasModified","actionFailedSaveGift","giftSavingErrors","withSnackbar","isEnvelopeOpen","setIsEnvelopeOpen","content","setContent","alloyEditor","setAlloyEditor","letter","useRef","flip","contentData","toggleEnvelope","current","classList","remove","setTimeout","zIndex","enableLetterEditor","ae","editable","on","editor","focus","disableLetterEditor","replace","removeAllListeners","destroy","isGiftFetching","fetchGift","data","giftContent","giftData","document","saveGift","_contentData","getData","innerHTML","isGiftPublishing","enqueueSnackbar","variant","needSaveGift","isGiftSaving","needOpenEnvelope","needEditLetter","Paper","String","inspect","elevation","ref","mdiEmailVariant","dangerouslySetInnerHTML","__html","dompurify","sanitize","paperBackground","introVideo","introVideoSize","useStyles","makeStyles","theme","createStyles","root","flexGrow","container","maxWidth","textBox","minWidth","paper","backgroundColor","backgroundImage","padding","spacing","textAlign","palette","primary","video","minHeight","createButton","position","left","right","bottom","router","actionCreateGift","redirectTo","classes","useSnackbar","giftCreationError","Box","justifyContent","flexWrap","p","m","flexBasis","playing","loop","muted","square","ProgressBackdrop","withStyles","Backdrop","Progress","show","CircularProgress","speedDial","top","flex","giftWasSaved","location","pathname","actionEditLetter","actionGoHome","actionEditDetails","React","setOpen","openCopyClipboardTooltip","setOpenCopyClipboardTooltip","handleOpen","handleClose","shareThis","copyToClipboard","clipboard","writeText","startIcon","Tooltip","leaveDelay","placement","ariaLabel","hidden","icon","SpeedDialIcon","onOpen","SpeedDialAction","tooltipTitle","tooltipOpen","page","testShareData","testCopyClipboard","data-for","data-tip","data-event","redirect","push","history","exact","component","Home","StatusPage","GiftBox","when","message","window","hostname","newGiftState","initialState","appReducers","action","_giftTitle","createDevTools","toggleVisibilityKey","changePositionKey","defaultIsVisible","createBrowserHistory","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","preloadedState","enhancer","applyMiddleware","routerMiddleware","thunkMiddleware","logger","DevTools","instrument","createStore","combineReducers","connectRouter","configureStore","ReactDOM","render","getElementById","serviceWorker","ready","then","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.2e8ea5a1.chunk.js","sourcesContent":["import * as logging from 'loglevel';\nimport {IS_DEBUG} from \"./conf\";\n\nconst log = logging.getLogger('main');\nif(IS_DEBUG) {\n    log.enableAll();\n}\nelse {\n    log.disableAll();\n}\n\nexport default log;\n\n","import React, {FC, MouseEvent, useEffect, useState} from \"react\";\nimport {connect, ConnectedProps} from \"react-redux\";\nimport {useCookies} from 'react-cookie';\n\nimport {RootState} from \"../store/reducers\";\nimport Icon from \"@mdi/react\";\nimport {mdiDotsHorizontal} from \"@mdi/js\";\nimport {getNavigatorLanguage} from \"../utils\";\n\nconst mapStateToProps = (state: RootState) => ({});\n\nconst mapDispatchToProps = (dispatch: any) => ({});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype TranslatorProps = ConnectedProps<typeof connector> & {\n};\n\nconst Translator: FC<TranslatorProps> = (props: TranslatorProps) => {\n    const [selectorVisible, setSelectorVisible] = useState(false);\n    const [cookies, setCookie] = useCookies(['chosenLanguage']);\n\n    const translator = (lang: string) => (event: MouseEvent) => {\n        translate(lang);\n        event.preventDefault();\n        return false;\n    };\n\n    const translate = (lang: string) => {\n        // tslint:disable-next-line:no-eval\n        eval(`doGTranslate(\"en|${lang}\")`);\n        setCookie('chosenLanguage', lang);\n    };\n\n    useEffect(() => {\n        let lang = cookies.chosenLanguage;\n        if (!cookies.chosenLanguage) {\n            lang = getNavigatorLanguage();\n        }\n\n        if (lang !== 'en') {\n            translate(lang);\n        }\n    }, [cookies.chosenLanguage, translate]);\n\n    const flags = [\n        {lang: 'en', title: 'English', xOffset: 0, yOffset: 0},\n        {lang: 'zh-CN', title: 'Chinese (Simplified)', xOffset: -300, yOffset: 0},\n        {lang: 'fr', title: 'French', xOffset: -200, yOffset: -100},\n        {lang: 'de', title: 'German', xOffset: -300, yOffset: -100},\n        {lang: 'it', title: 'Italian', xOffset: -600, yOffset: -100},\n        {lang: 'ja', title: 'Japanese', xOffset: -700, yOffset: -100},\n        {lang: 'ko', title: 'Korean', xOffset: 0, yOffset: -200},\n        {lang: 'es', title: 'Spanish', xOffset: -600, yOffset: -200},\n        {lang: 'ru', title: 'Russian', xOffset: -500, yOffset: -200},\n    ];\n\n    const renderFlag = ({lang, title, xOffset, yOffset}: typeof flags[0]) => {\n        return (\n            <a href=\"#\"\n               key={lang}\n               className=\"gflag nturl\"\n               onClick={translator(lang)}\n               title={title}\n               style={{backgroundPosition: `${xOffset}px ${yOffset}px`}}>\n                <img src=\"//gtranslate.net/flags/blank.png\" height=\"16\" width=\"16\" alt={title}/>\n            </a>\n        )\n    };\n\n    return (\n        <div className=\"language-container\">\n            <div className=\"language-selector\">\n                <div className=\"language-selector-flags\">\n                    {flags.map((flag) => renderFlag(flag))}\n\n                    <a onClick={(event: MouseEvent) => {\n                        setSelectorVisible(!selectorVisible);\n                        event.preventDefault();\n                    }} href=\"#\" key={\"more\"}>\n                        <Icon path={mdiDotsHorizontal}\n                              size={'16px'}\n                              horizontal\n                              vertical\n                              rotate={180}\n                        />\n                    </a>\n\n                </div>\n                <div className=\"language-selector-select\" style={{\n                    display: selectorVisible ? \"flex\" : \"none\"\n                }}>\n                    <select onChange={(event) => {\n                        translate(event.target.value);\n                    }}>\n                        <option value=\"\">Select Language</option>\n                        <option value=\"af\">Afrikaans</option>\n                        <option value=\"sq\">Albanian</option>\n                        <option value=\"ar\">Arabic</option>\n                        <option value=\"hy\">Armenian</option>\n                        <option value=\"az\">Azerbaijani</option>\n                        <option value=\"eu\">Basque</option>\n                        <option value=\"be\">Belarusian</option>\n                        <option value=\"bg\">Bulgarian</option>\n                        <option value=\"ca\">Catalan</option>\n                        <option value=\"zh-CN\">Chinese (Simplified)</option>\n                        <option value=\"zh-TW\">Chinese (Traditional)</option>\n                        <option value=\"hr\">Croatian</option>\n                        <option value=\"cs\">Czech</option>\n                        <option value=\"da\">Danish</option>\n                        <option value=\"nl\">Dutch</option>\n                        <option value=\"en\">English</option>\n                        <option value=\"et\">Estonian</option>\n                        <option value=\"tl\">Filipino</option>\n                        <option value=\"fi\">Finnish</option>\n                        <option value=\"fr\">French</option>\n                        <option value=\"gl\">Galician</option>\n                        <option value=\"ka\">Georgian</option>\n                        <option value=\"de\">German</option>\n                        <option value=\"el\">Greek</option>\n                        <option value=\"ht\">Haitian Creole</option>\n                        <option value=\"iw\">Hebrew</option>\n                        <option value=\"hi\">Hindi</option>\n                        <option value=\"hu\">Hungarian</option>\n                        <option value=\"is\">Icelandic</option>\n                        <option value=\"id\">Indonesian</option>\n                        <option value=\"ga\">Irish</option>\n                        <option value=\"it\">Italian</option>\n                        <option value=\"ja\">Japanese</option>\n                        <option value=\"ko\">Korean</option>\n                        <option value=\"lv\">Latvian</option>\n                        <option value=\"lt\">Lithuanian</option>\n                        <option value=\"mk\">Macedonian</option>\n                        <option value=\"ms\">Malay</option>\n                        <option value=\"mt\">Maltese</option>\n                        <option value=\"no\">Norwegian</option>\n                        <option value=\"fa\">Persian</option>\n                        <option value=\"pl\">Polish</option>\n                        <option value=\"pt\">Portuguese</option>\n                        <option value=\"ro\">Romanian</option>\n                        <option value=\"ru\">Russian</option>\n                        <option value=\"sr\">Serbian</option>\n                        <option value=\"sk\">Slovak</option>\n                        <option value=\"sl\">Slovenian</option>\n                        <option value=\"es\">Spanish</option>\n                        <option value=\"sw\">Swahili</option>\n                        <option value=\"sv\">Swedish</option>\n                        <option value=\"th\">Thai</option>\n                        <option value=\"tr\">Turkish</option>\n                        <option value=\"uk\">Ukrainian</option>\n                        <option value=\"ur\">Urdu</option>\n                        <option value=\"vi\">Vietnamese</option>\n                        <option value=\"cy\">Welsh</option>\n                        <option value=\"yi\">Yiddish</option>\n                        <option value=\"eo\">Esperanto</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default connector(Translator);\n","\nexport const IS_DEBUG = process.env.DEBUG === 'true' || process.env.NODE_ENV === 'development';\n\nexport const STATIC_PAGES = [\n    '/',\n    '/status/'\n];\n\nexport const VERSION = '1.0.0';\n\nexport const API_ROOT = process.env.REACT_APP_VGIFT_API_ROOT || '';\n\n// export const API_ROOT = 'http://192.168.17.100:3010/api';\n// const API_ROOT = 'http://vgift.us/api';\n// const API_ROOT = 'http://localhost:3010/api';\n\n","module.exports = __webpack_public_path__ + \"static/media/white-paperboard.f0454931.png\";","module.exports = __webpack_public_path__ + \"static/media/intro.2726696a.webm\";","import log from \"./log\";\nimport {STATIC_PAGES} from \"./conf\";\n\nexport const trimTrailingSlashes = (str: string) => {\n    return str.replace(/\\/+$/g, '');\n};\n\nexport const isHomePage = (path: string) : boolean => {\n    return path === '/';\n};\n\nexport const isStaticPage = (path: string) : boolean => {\n    return STATIC_PAGES.includes(path);\n};\n\nexport const textToHtml = (text: string) : string => {\n    const html = text\n        .replace(/\\s/g, '&nbsp;')\n        .replace(/\\n/g, '<br/>');\n    return html\n};\n\nexport const htmlToText = (html: string) : string => {\n    const text = html\n        .replace(/&nbsp;/g, ' ')\n        .replace(/<br\\/>/g, '/n');\n    return text\n};\n\nexport const isShareAvailable = () : boolean => {\n    return Boolean(navigator && navigator.share);\n};\n\nexport const navigatorShare = async (shareData: ShareData) => {\n\n    log.debug('navigatorShare: ', navigator, navigator.share);\n\n    try {\n        if(navigator && navigator.share) {\n            await navigator.share(shareData);\n        }\n    } catch(e) {\n        log.error('Failed to invoke navigator.share with: ', e);\n    }\n};\n\nexport const getNavigatorLanguage = () => {\n    if (navigator.languages && navigator.languages.length) {\n        return navigator.languages[0];\n    } else {\n        return (navigator as any).userLanguage\n            || navigator.language\n            || (navigator as any).browserLanguage\n            || 'en';\n    }\n};\n","import superagent from 'superagent';\nimport urljoin from 'url-join';\nimport log from './log';\nimport {API_ROOT} from \"./conf\";\n\nconst absurl = (suburl: string) => {\n    const res = urljoin(API_ROOT, suburl);\n    log.info(`absurl = ${res}`);\n    return res;\n};\n\nexport const requests = {\n    get: (url: string) =>\n        superagent.get(absurl(url)),\n\n    put: (url: string, body: any) =>\n        superagent.put(absurl(url), body),\n\n    post: (url: string, body: any = null) =>\n        superagent.post(absurl(url), body)\n};\n","import React, {FC, useEffect, useState} from 'react';\nimport {connect, ConnectedProps} from \"react-redux\";\nimport {\n    DialogTitle,\n    TextField,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    Button,\n    DialogContentText\n} from \"@material-ui/core\";\n\nimport {RootState} from \"../store/reducers\";\nimport {SAVE_GIFT_TITLE} from \"../store/actions\";\n\nconst mapStateToProps = (state: RootState) => ({\n    needEditDetails: state.app.needEditDetails,\n    giftTitle: state.app.giftTitle\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    actionSaveGift: (giftTitle: string | null, needSave: boolean) =>\n        dispatch({type: SAVE_GIFT_TITLE, giftTitle, needSave}),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype DetailsDialogProps = ConnectedProps<typeof connector> & {};\n\nconst DetailsDialog: FC<DetailsDialogProps> = (props: DetailsDialogProps) => {\n    const [giftTitle, setGiftTitle] = useState(props.giftTitle);\n\n\n    const handleSave = () => {\n        props.actionSaveGift(\n            giftTitle,\n            true);\n    };\n\n    const handleCancel = () => {\n        props.actionSaveGift(\n            '',\n            false);\n    };\n\n    useEffect(() => {\n        setGiftTitle(props.giftTitle);\n    }, [props.giftTitle, props.needEditDetails]);\n\n    return (\n        <Dialog open={props.needEditDetails} onClose={handleCancel} aria-labelledby=\"form-gift-details-dialog\">\n            <DialogTitle id=\"form-gift-details-dialog\">Virtual Gift Details</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Enter details of you Virtual Gift:\n                </DialogContentText>\n                <TextField autoFocus\n                           margin=\"dense\"\n                           id=\"form-gift-details-dialog-gift-title\"\n                           label=\"Gift title\"\n                           type=\"text\"\n                           fullWidth\n                           multiline\n                           rows={3}\n                           rowsMax={3}\n                           value={giftTitle}\n                           onChange={(event) =>\n                               setGiftTitle(event.target.value)}\n                />\n\n\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCancel} color=\"primary\">\n                    Cancel\n                </Button>\n                <Button onClick={handleSave} color=\"primary\">\n                    Save\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default connector(DetailsDialog);\n","import {requests} from \"../api\";\nimport log from \"../log\";\n\nexport const OPEN_ENVELOPE = 'OPEN_ENVELOPE';\nexport const CLOSE_ENVELOPE = 'CLOSE_ENVELOPE';\nexport const EDIT_LETTER = 'EDIT_LETTER';\nexport const FAILED_FETCH_GIFT = 'FAILED_FETCH_GIFT';\nexport const GIFT_FETCHED = 'GIFT_FETCHED';\nexport const GIFT_IS_FETCHING = 'GIFT_IS_FETCHING';\nexport const SAVE_GIFT_CONTENT = 'SAVE_GIFT_CONTENT';\nexport const SAVE_GIFT_TITLE = 'SAVE_GIFT_TITLE';\nexport const GIFT_IS_SAVING = 'GIFT_IS_SAVING';\nexport const GIFT_WAS_SAVED = 'GIFT_WAS_SAVED';\nexport const GIFT_WAS_MODIFIED = 'GIFT_WAS_MODIFIED';\nexport const FAILED_SAVE_GIFT = 'FAILED_SAVE_GIFT';\nexport const CREATE_GIFT = 'CREATE_GIFT';\nexport const CREATE_GIFT_ERROR = 'CREATE_GIFT_ERROR';\nexport const GO_HOME = 'GO_HOME';\nexport const EDIT_DETAILS = 'EDIT_DETAILS';\nexport const CLEAR_REDIRECT = 'CLEAR_REDIRECT';\nexport const PUBLISH_GIFT = 'PUBLISH_GIFT';\nexport const PUBLISH_GIFT_CANCEL = 'PUBLISH_GIFT_CANCEL';\nexport const PUBLISH_GIFT_START = 'PUBLISH_GIFT_START';\n\n\n// used as example too\nexport const openEnvelopeAction = () => {\n    return async (dispatch: any, getState: any) => {\n        return dispatch({type: OPEN_ENVELOPE})\n    }\n};\n\nexport const giftWasModifiedAction = () =>\n     async (dispatch: any, getState: any) => {\n        return dispatch({type: OPEN_ENVELOPE})\n};\n\nexport const closeEnvelopeAction = () => ({type: CLOSE_ENVELOPE});\n\nexport const createGift = () => {\n    return async (dispatch: any, getState: any) => {\n        try {\n            const data = await requests.post('gift/create');\n            const giftId = data.body.giftId;\n            log.debug(`Created gift ${giftId}`);\n            const redirectTo = `/${giftId}/`;\n            return dispatch({type: CREATE_GIFT, redirectTo});\n        } catch (e) {\n            log.error(`Failed to create gift with error: ${e}`);\n            return dispatch({type: CREATE_GIFT_ERROR, error: e});\n        }\n    };\n};\n\nexport const publishGift = () => {\n    return async (dispatch: any, getState: any) => {\n        dispatch({type: PUBLISH_GIFT_START});\n        dispatch({type: SAVE_GIFT_CONTENT});\n        /* setTimeout(async () => {\n             try {\n                 const giftId = getState().fetchedGiftId;\n                 if(!giftId) {\n                     return dispatch({type: PUBLISH_GIFT_FAILED,\n                         error: `There is no current gift to publish`});\n                 }\n\n                 const data = await requests.put(`/gift/${giftId}/publish/`,\n                     {});\n\n                 log.debug(`Published gift ${giftId}`);\n                 const redirectTo = `/${giftId}/`;\n                 return dispatch({type: CREATE_GIFT, redirectTo});\n             } catch (e) {\n                 log.error(`Failed to create gift with error: ${e}`);\n                 return dispatch({type: CREATE_GIFT, redirectTo: ''});\n             }\n\n             dispatch({type: PUBLISH_GIFT_SUCCEED});\n         }, 400);*/\n        /*try {\n            const data = await requests.post('gift/create');\n            const giftId = data.body.giftId;\n            log.debug(`Created gift ${giftId}`);\n            const redirectTo = `/${giftId}/`;\n            return dispatch({type: CREATE_GIFT, redirectTo});\n        } catch (e) {\n            log.error(`Failed to create gift with error: ${e}`);\n            return dispatch({type: CREATE_GIFT, redirectTo: ''});\n        }*/\n    };\n};\n/*\n\nexport const giftFetched = (giftId: string) => ({\n    type: GIFT_FETCHED,\n    fetchedGiftId: giftId,\n    giftFetchingErrors: '',\n    isGiftFetching: false\n});\n\nexport const failedToFetchGift = (giftId: string, error: string) => ({\n    type: FAILED_FETCH_GIFT,\n    fetchedGiftId: giftId,\n    giftFetchingErrors: error,\n    isGiftFetching: false\n});\n\nexport const giftIsFetching = (giftId: string) => ({\n    type: GIFT_IS_FETCHING,\n    fetchedGiftId: giftId,\n    giftFetchingErrors: '',\n    isGiftFetching: true\n});\n*/\n","// @ts-ignore\n// tslint:disable-next-line:no-var-requires\nconst alloyeditor = require(\"alloyeditor\");\nconst AlloyEditor = alloyeditor.AlloyEditor;\n\nconst SelectionTest = AlloyEditor.SelectionTest;\nconst SelectionSetPosition = AlloyEditor.SelectionSetPosition;\nconst SelectionGetArrowBoxClasses = AlloyEditor.SelectionGetArrowBoxClasses;\n\nconst EditorSelections = [\n    {\n        name: 'embed',\n        buttons: ['embedRemove', 'embedEdit'],\n        test: SelectionTest.embed,\n    },\n    {\n        name: 'embedUrl',\n        buttons: ['embedVideo', 'embedVideoEdit'],\n        test: SelectionTest.embedUrl,\n    },\n    {\n        name: 'link',\n        buttons: ['linkEdit'],\n        test: SelectionTest.link,\n    },\n    {\n        name: 'image',\n        buttons: ['imageLeft', 'imageCenter', 'imageRight', 'removeImage'],\n        setPosition: SelectionSetPosition.image,\n        test: SelectionTest.image,\n    },\n    {\n        name: 'text',\n        buttons: {\n            full: [\n                [\n                    'Font',\n                    'FontSize',\n                    'separator',\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strike',\n                    'separator',\n                    'link',\n                ],\n                [\n                    'paragraphAlign',\n                    'separator',\n                    'ul',\n                    'ol',\n                    'separator',\n                    'h1',\n                    'h2',\n                    'separator',\n                    'indentBlock',\n                    'outdentBlock',\n                    'separator',\n                    'TextColor',\n                    'BGColor',\n                    'separator',\n                    'code',\n                    'quote',\n                    'separator',\n                    'removeFormat',\n                ],\n            ],\n\n            simple:[\n                [\n                    'styles',\n                    'bold',\n                    'italic',\n                    'underline',\n                    'link',\n                ],\n                [\n                    'paragraphAlign',\n                    'separator',\n                    'indentBlock',\n                    'outdentBlock',\n                    'separator',\n                    'TextColor',\n                    'BGColor',\n                    'separator',\n                    'removeFormat',\n                ]\n            ],\n        },\n        test: SelectionTest.text,\n    },\n    {\n        name: 'table',\n        buttons: [\n            'tableHeading',\n            'tableRow',\n            'tableColumn',\n            'tableCell',\n            'tableRemove',\n        ],\n        getArrowBoxClasses: SelectionGetArrowBoxClasses.table,\n        setPosition: SelectionSetPosition.table,\n        test: SelectionTest.table,\n    },\n];\n\n\nconst AE_EMBED_URL_TPL = 'https://iframely.vgift.us/oembed?url={url}&callback={callback}';\n\nconst EDITOR_TOOLBARS = {\n    add: {\n        buttons: [\n            'imageFromFile',\n            'embed',\n            'camera',\n            'hline',\n            'smiley',\n            'table',\n        ],\n        tabIndex: 2,\n    },\n    styles: {\n        selections: EditorSelections,\n        tabIndex: 1\n    }\n};\n\nconst EDITOR_CONFIG = {\n    toolbars: EDITOR_TOOLBARS,\n    embedUrlTemplate: AE_EMBED_URL_TPL,\n    spritemap: '/alloy-editor/assets/icons/icons.svg',\n    // mode: 'full',\n/*    fitImageMaxWidth: 280,\n    fitImageMaxHeight: 350,*/\n};\n\nexport {AlloyEditor, EDITOR_CONFIG};\n","import React, {FC} from 'react';\nimport {connect, ConnectedProps} from \"react-redux\";\nimport {\n    DialogTitle,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    Button,\n} from \"@material-ui/core\";\n\nimport {RootState} from \"../store/reducers\";\nimport {PUBLISH_GIFT_CANCEL, publishGift} from \"../store/actions\";\n\nconst mapStateToProps = (state: RootState) => ({\n    needPublishGift: state.app.needPublishGift\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    actionPublishGift: () =>\n        dispatch(publishGift()),\n    actionPublishCancel: () =>\n        dispatch({type: PUBLISH_GIFT_CANCEL}),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PublishDialogProps = ConnectedProps<typeof connector> & {};\n\nconst PublishDialog: FC<PublishDialogProps> = (props: PublishDialogProps) => {\n    const handleCancel = () => {\n        props.actionPublishCancel();\n    };\n\n    const handlePublish = () => {\n        props.actionPublishGift();\n    };\n\n    return (\n        <Dialog open={props.needPublishGift} onClose={handleCancel}\n                aria-labelledby=\"form-gift-publish-dialog\">\n            <DialogTitle id=\"form-gift-publish-dialog\">Publish Virtual Gift</DialogTitle>\n            <DialogContent dividers>\n                <h2>Now you are about to publish your Virtual Gift.</h2>\n\n                <p>It is an <strong>irreversible action</strong>.\n                    Once you have done it, you can't undo it back.</p>\n                <p>After publishing the gift will not be able for editing by someone, including you!</p>\n                <p>Publish it if you already made all the changes you want an ready to share the gift.</p>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCancel} color=\"primary\">\n                    Cancel\n                </Button>\n                <Button onClick={handlePublish} color=\"primary\">\n                    Publish\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default connector(PublishDialog);\n","import React, {FC, useRef, useState, useEffect} from \"react\";\nimport {connect, ConnectedProps} from 'react-redux'\nimport {createMatchSelector} from \"connected-react-router\";\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport { withSnackbar } from 'notistack';\n\nimport DetailsDialog from \"./DetailsDialog\";\nimport dompurify from 'dompurify';\nimport {mdiEmailVariant} from '@mdi/js';\n\nimport {\n    openEnvelopeAction,\n    closeEnvelopeAction,\n    GIFT_FETCHED,\n    FAILED_FETCH_GIFT,\n    GIFT_IS_FETCHING,\n    GIFT_IS_SAVING,\n    GIFT_WAS_SAVED,\n    GIFT_WAS_MODIFIED,\n    FAILED_SAVE_GIFT\n} from '../store/actions';\nimport {RootState} from \"../store/reducers\";\nimport {requests} from \"../api\";\nimport {DEFAULT_LETTER_CONTENT} from '../templateContent';\nimport log from '../log';\nimport {AlloyEditor, EDITOR_CONFIG} from \"../editorConfig\";\nimport 'alloyeditor/dist/alloy-editor/assets/alloy-editor-ocean-min.css'\nimport 'react-perfect-scrollbar/dist/css/styles.css';\n\nimport '../style/envelope.scss';\nimport {Paper, Button} from \"@material-ui/core\";\nimport PublishDialog from \"./PublishDialog\";\nimport Icon from \"@mdi/react\";\nimport {inspect} from \"util\";\n\nconst giftIdExtractor = (state: RootState) => {\n    const match = createMatchSelector(\"/:giftId\")(state);\n    return match && match.params && (match.params as any).giftId ?\n        (match.params as any).giftId :\n        null;\n};\n\nconst mapStateToProps = (state: RootState) => ({\n    giftId: giftIdExtractor(state),\n    ...state.app\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    openEnvelope: () =>\n        dispatch(openEnvelopeAction()),\n    closeEnvelope: () =>\n        dispatch(closeEnvelopeAction()),\n    giftFetched: (giftId: string, giftTitle: string, giftPublished: boolean, hasContent: boolean) =>\n        dispatch({type: GIFT_FETCHED, fetchedGiftId: giftId, giftTitle, giftPublished, hasContent}),\n    giftIsFetching: (giftId: string) =>\n        dispatch({type: GIFT_IS_FETCHING, fetchedGiftId: giftId}),\n    failedToFetchGift: (giftId: string, error: string) =>\n        dispatch({type: FAILED_FETCH_GIFT, fetchedGiftId: giftId, giftFetchingError: error}),\n    actionGiftSaved: (giftId: string, giftTitle: string, giftPublished: boolean) =>\n        dispatch({type: GIFT_WAS_SAVED, fetchedGiftId: giftId, giftTitle, giftPublished}),\n    actionGiftIsSaving: () =>\n        dispatch({type: GIFT_IS_SAVING}),\n    actionGiftWasModified: () =>\n        dispatch({type: GIFT_WAS_MODIFIED}),\n    actionFailedSaveGift: (error: string) =>\n        dispatch({type: FAILED_SAVE_GIFT, giftSavingErrors: error}),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype GiftBoxProps = ConnectedProps<typeof connector> & {};\n\nconst GiftBox: FC<GiftBoxProps> = (props: GiftBoxProps) => {\n    const [isEnvelopeOpen, setIsEnvelopeOpen] = useState(false);\n    const [content, setContent] = useState(DEFAULT_LETTER_CONTENT);\n\n    const [alloyEditor, setAlloyEditor] = useState<any>(null);\n    const letter = useRef<HTMLDivElement>(null);\n    const flip = useRef<HTMLDivElement>(null);\n    const contentData = useRef<HTMLDivElement>(null);\n\n    const toggleEnvelope = () => {\n        if (isEnvelopeOpen) {\n            props.closeEnvelope();\n        } else {\n            props.openEnvelope();\n        }\n    };\n\n    const openEnvelope = () => {\n        if (isEnvelopeOpen) {\n            return;\n        }\n        setIsEnvelopeOpen(true);\n        if (letter.current !== null && flip.current !== null) {\n            flip.current.classList.add('envelope-open');\n            flip.current.classList.remove('envelope-close');\n            setTimeout(() => {\n                if (letter.current !== null && flip.current !== null) {\n                    // flip.current.style.zIndex = '10';\n                    flip.current.style.zIndex = '-50';\n                    letter.current.classList.add('letter-moved-up');\n                    letter.current.classList.remove('letter-moved-down');\n\n                    setTimeout(() => {\n                        if (letter.current !== null && flip.current !== null) {\n                            // letter.current.style.zIndex = '50';\n                            letter.current.style.zIndex = '0';\n                            letter.current.classList.add('letter-moved-down');\n                            letter.current.classList.remove('letter-moved-up');\n                        }\n                    }, 400);\n                }\n            }, 400);\n        }\n    };\n\n    const closeEnvelope = () => {\n        if (!isEnvelopeOpen) {\n            return;\n        }\n        setIsEnvelopeOpen(false);\n        if (letter.current !== null && flip.current !== null) {\n            letter.current.classList.add('letter-moved-up');\n            letter.current.classList.remove('letter-moved-down');\n\n            setTimeout(() => {\n                if (letter.current !== null && flip.current !== null) {\n                    // letter.current.style.zIndex = '20';\n                    letter.current.style.zIndex = '-40';\n                    letter.current.classList.add('letter-moved-down');\n                    letter.current.classList.remove('letter-moved-up');\n\n                    setTimeout(() => {\n                        if (letter.current !== null && flip.current !== null) {\n                            // flip.current.style.zIndex = '40';\n                            flip.current.style.zIndex = '0';\n                            flip.current.classList.add('envelope-close');\n                            flip.current.classList.remove('envelope-open');\n                        }\n                    }, 400);\n                }\n            }, 400);\n        }\n    };\n\n    const enableLetterEditor = () => {\n        if (alloyEditor == null) {\n            const ae = AlloyEditor.editable('letter-content-view', EDITOR_CONFIG);\n\n            setAlloyEditor(ae);\n            const editor = ae.get('nativeEditor');\n            editor.on('instanceReady', (event: any) => {\n                if (event.editor.focus)\n                    event.editor.focus();\n            });\n            props.actionGiftWasModified();\n        }\n    };\n\n    const disableLetterEditor = () => {\n        if (alloyEditor !== null) {\n            const editor = alloyEditor.get('nativeEditor');\n            editor.on('instanceDestroyed', (event: any) => {\n                editor.replace('letter-content-view');\n            });\n\n            editor.removeAllListeners();\n            alloyEditor.destroy(true);\n            setAlloyEditor(null);\n        }\n    };\n\n    const {\n        isGiftFetching, giftFetchingError, fetchedGiftId, giftId, giftIsFetching,\n        giftFetched, failedToFetchGift\n    } = props;\n    useEffect(() => {\n        const fetchGift = async () => {\n            try {\n                const data = await requests.get(`/gift/${giftId}`);\n                const giftContent = data.body.giftData;\n                if (giftContent) {\n                    setContent(giftContent);\n                }\n                giftFetched(data.body.giftId, data.body.giftTitle, data.body.giftPublished, !!giftContent);\n            } catch (e) {\n                log.error(`Failed to receive gift ${giftId} with error: ${e}`);\n                failedToFetchGift(giftId, e);\n            }\n        };\n\n        if (fetchedGiftId !== giftId && !isGiftFetching && !giftFetchingError) {\n            giftIsFetching(giftId);\n            fetchGift();\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isGiftFetching, giftFetchingError, giftId, giftIsFetching,\n        giftFetched, failedToFetchGift]);\n\n    useEffect(() => {\n        const updateTitle = () => {\n            const basicTitle = 'Virtual Gift Online';\n            document.title = props.giftTitle\n                ? `${props.giftTitle}  ${basicTitle}`\n                : basicTitle;\n            log.debug(`Updated title: ${document.title}, props.giftTitle: ${props.giftTitle}`);\n        };\n        updateTitle();\n    }, [props.giftTitle]);\n\n    useEffect(() => {\n        const saveGift = async () => {\n            try {\n                let _contentData = null;\n                if (alloyEditor) {\n                    const editor = alloyEditor.get('nativeEditor');\n                    _contentData = editor.getData(false);\n                }\n                if (!_contentData && contentData.current) {\n                    _contentData = contentData.current.innerHTML;\n                }\n                await requests.put(`/gift/${giftId}/update/`, {\n                    giftData: _contentData,\n                    giftTitle: props.giftTitle,\n                    giftPublished: props.isGiftPublishing\n                });\n                const text: string = `Virtual Gift has been ${props.isGiftPublishing ? 'published' : 'saved'}`;\n                props.actionGiftSaved(giftId, props.giftTitle, props.isGiftPublishing);\n                (props as any).enqueueSnackbar(text, {\n                    variant: 'success',\n                    vertical: 'bottom',\n                    horizontal: 'center',\n                });\n            } catch (e) {\n                const text: string = `Failed to save gift ${giftId} with error: ${e}`;\n                log.error(text);\n                props.actionFailedSaveGift(e);\n                (props as any).enqueueSnackbar(text, {\n                    variant: 'error',\n                    vertical: 'bottom',\n                    horizontal: 'center',\n                });\n            }\n        };\n\n        if (giftId && props.needSaveGift && !props.isGiftSaving && !props.giftSavingErrors) {\n            props.actionGiftIsSaving();\n            saveGift();\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.needSaveGift]);\n\n    useEffect(() => {\n        if (props.needOpenEnvelope) {\n            openEnvelope()\n        } else {\n            closeEnvelope()\n        }\n    }, [props, openEnvelope, closeEnvelope]);\n\n    useEffect(() => {\n        if (props.needEditLetter) {\n            enableLetterEditor();\n        } else {\n            disableLetterEditor();\n        }\n    }, [props, enableLetterEditor, disableLetterEditor]);\n\n    const renderTitle = () => (\n        <Paper className=\"envelope-body-front-title\" elevation={5} >\n            <p>{props.giftTitle}</p>\n        </Paper>\n    );\n\n    const renderGiftBox = () => (\n        <div className=\"gift-box\">\n            <div className={'container'}>\n                <div className=\"envelope\">\n                    <div className=\"envelope-body-bg\"/>\n                    <div className=\"envelope-body-front notranslate\">\n                        { props.giftTitle && renderTitle() }\n                    </div>\n                    <div className=\"envelope-flip\" ref={flip} onClick={toggleEnvelope}>\n                        <div className=\"envelope-flip-face envelope-flip-face-back\">\n                            <Button className=\"cover-button\">\n                                <Icon path={mdiEmailVariant}\n                                      size={2}\n                                      horizontal\n                                      vertical\n                                      rotate={180}\n                                />\n                            </Button>\n                        </div>\n                        <div className=\"envelope-flip-face envelope-flip-face-front\">\n                        </div>\n                    </div>\n                    <div className=\"envelope-letter\" ref={letter}>\n                        <PerfectScrollbar>\n                            <div id=\"letter-content-view\" className=\"envelope-text notranslate\"\n                                 ref={contentData}\n                                 dangerouslySetInnerHTML={{__html: dompurify.sanitize(content)}}>\n                            </div>\n                        </PerfectScrollbar>\n                    </div>\n                </div>\n            </div>\n\n            <DetailsDialog/>\n            <PublishDialog/>\n        </div>\n    );\n\n    const renderGiftLoadError = () => (\n        <div className=\"gift-box\">\n            <div className={'container'}>\n                <Paper className=\"gift-load-error\">\n                    <h2>Virtual Gift was failed to load</h2>\n                    <p><strong>{String(props.giftFetchingError)}</strong></p>\n                    <p>You can <a href=\"/\">create another gift</a> or write us about the accident:\n                        <a href=\"mailto:info@vgift.us\">info@vgift.us</a>.</p>\n                    <p>Full text of the error:</p>\n                    <p className=\"gift-full-error notranslate\"> {inspect(props.giftFetchingError)}</p>\n                </Paper>\n            </div>\n        </div>\n    );\n\n    return (\n        props.giftFetchingError ? renderGiftLoadError() : renderGiftBox()\n    );\n};\n\nexport default withSnackbar(connector(GiftBox));\n","\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst LETTER_CONTENT_LONG = `\n    <h2>This is a Live Demo</h2>\n    <h3>Click/Tap here to edit</h3>\n    <p>Cupcake ipsum dolor sit amet halvah. Icing I love carrot cake cotton candy danish brownie wafer\n    I love. Cake chocolate cake biscuit tiramisu ice cream pudding pastry. Gingerbread muffin candy canes tart\n    tootsie roll.</p>\n    <p>\n        <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAeCAYAAABUgfKPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACgElEQVRo3u2az2vUQBTH50+y/gIRPHn2UBVbldYf4Enw6NWDguDFtlgPFZGqXVEE8VBE8UdF8BeiiIgWd2Wp66qlu2vd3WaSzPvKSxGTbNqdpOlurPOFt4dkZzL5ZN6bNz+EEEJUmnSo0qQfMNJWw0YJwAHmJ+oSg/k5avRPSKwfsrDurLF2xpz25SRm6/QFwICoNqm867I0cBJY/4SUipAXikA9BkjiHskS/GOAJDcD0UD8RyDGUdMGyvOER3mF45N25EgfVrvGxdVSZd+WlXbmsf+ahCJotzVViGExzHDDuwWRNfTEaQtw84iFzxVatu6OQmSdfuhkBqJ0gZ1tUrnxV27bulctJvIX3HFJYvKDCjz4dUmlBjFunIrS+++EDcPRZQ5etyPduGMQ/9jW0eAL1BYoUxBZo09b3XrLOQszNdLq5R0Znf1yFDIB0d/DuE17rgbdOvfGbXH9VYuJSV4gCxAvvgxSmZ4lbBpZ/O+RmzbCffDkfWdtQtQdVKLKbhy28O5bENXYc9cLP1/ng9fvfFSx2vrfQORrPPA17KCLPysGB8JilTywBuIyzzlxz1myPMfBPl+szAzErAws/nt3p1UkxFMPkuW0qUPcPiZDKU72IG47b3nT06g42FWInGz3jks8LgS/MgfzrEFkO3zjb2Ltj4MdgRhXZ6b0XERn6pYmRLYLL9yWOJg5iFMF/QWIbkDktOfoLXvFnpAaRFctTvEKc+TNn4/dttETo2HdgJhWHWZR1qxsG4hrC6IiKLNlusIt058WSruvmM37JLY3J38pwifhKAzM1KjKa2zmGIl+D+TTD7UFFAEMeudxAPTWJcrmmJK+bNcD2Mf8fgNkcZEz0kEM0wAAAABJRU5ErkJggg==\"\n            className=\"\" />\n    </p>\n    <p>Muffin cotton candy cotton candy wafer lollipop cheesecake bear claw. Pastry caramels toffee cake drage\n    toffee chocolate cake cupcake. Pastry lemon drops I love wafer macaroon bonbon marzipan.</p>\n    <p>Muffin souffl jelly beans macaroon I love I love. Cheesecake brownie sugar plum. Cookie donut carrot cake\n    gummies. Biscuit jelly sweet dessert sesame snaps tiramisu I love ice cream.</p>\n`;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst LETTER_CONTENT_SHORT = `\n    <h2>This is a Live Demo</h2>\n    <p>Cupcake ipsum dolor sit amet halvah. Icing I love carrot cake cotton candy danish brownie wafer\n    </p>\n    <p>\n        <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAeCAYAAABUgfKPAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACgElEQVRo3u2az2vUQBTH50+y/gIRPHn2UBVbldYf4Enw6NWDguDFtlgPFZGqXVEE8VBE8UdF8BeiiIgWd2Wp66qlu2vd3WaSzPvKSxGTbNqdpOlurPOFt4dkZzL5ZN6bNz+EEEJUmnSo0qQfMNJWw0YJwAHmJ+oSg/k5avRPSKwfsrDurLF2xpz25SRm6/QFwICoNqm867I0cBJY/4SUipAXikA9BkjiHskS/GOAJDcD0UD8RyDGUdMGyvOER3mF45N25EgfVrvGxdVSZd+WlXbmsf+ahCJotzVViGExzHDDuwWRNfTEaQtw84iFzxVatu6OQmSdfuhkBqJ0gZ1tUrnxV27bulctJvIX3HFJYvKDCjz4dUmlBjFunIrS+++EDcPRZQ5etyPduGMQ/9jW0eAL1BYoUxBZo09b3XrLOQszNdLq5R0Znf1yFDIB0d/DuE17rgbdOvfGbXH9VYuJSV4gCxAvvgxSmZ4lbBpZ/O+RmzbCffDkfWdtQtQdVKLKbhy28O5bENXYc9cLP1/ng9fvfFSx2vrfQORrPPA17KCLPysGB8JilTywBuIyzzlxz1myPMfBPl+szAzErAws/nt3p1UkxFMPkuW0qUPcPiZDKU72IG47b3nT06g42FWInGz3jks8LgS/MgfzrEFkO3zjb2Ltj4MdgRhXZ6b0XERn6pYmRLYLL9yWOJg5iFMF/QWIbkDktOfoLXvFnpAaRFctTvEKc+TNn4/dttETo2HdgJhWHWZR1qxsG4hrC6IiKLNlusIt058WSruvmM37JLY3J38pwifhKAzM1KjKa2zmGIl+D+TTD7UFFAEMeudxAPTWJcrmmJK+bNcD2Mf8fgNkcZEz0kEM0wAAAABJRU5ErkJggg==\"\n            className=\"\" />\n    </p>\n`;\n\nconst EXAMPLE_CONGRATS_ALICE = `<p>Modify text, images, videos, smiles with different styling here...</p>\n    <h1>Dear Alice</h1>\n    <p>May all your wishes come true! Happy Birthday!&nbsp;<img src=\"/alloy-editor/plugins/smiley/images/angel_smile.png\" title=\"angel\" alt=\"angel\" width=\"23\" height=\"23\"></p>\n    <p style=\"text-align: right;\">Tom&nbsp; &nbsp; &nbsp; &nbsp;</p>\n    <p>\n        <img src=\"/media/blue-baloons.jpeg\"></p><p>Photo by Sofiya Levchenko on\n        <a href=\"https://unsplash.com/photos/Meeycb5dpXs\">Unsplash</a>\n    </p>`;\n\nexport const DEFAULT_LETTER_CONTENT = EXAMPLE_CONGRATS_ALICE;\n","import {RootState} from \"../store/reducers\";\nimport {connect, ConnectedProps} from \"react-redux\";\nimport React, {FC, useEffect} from \"react\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport {Box, Button, Paper} from \"@material-ui/core\";\n// tslint:disable-next-line:no-var-requires\nimport ReactPlayer from 'react-player';\nimport {createGift} from \"../store/actions\";\nimport {useSnackbar} from \"notistack\";\n\n// tslint:disable-next-line:no-var-requires\nconst paperBackground = require(\"../images/white-paperboard.png\");\n\n// tslint:disable-next-line:no-var-requires\nconst introVideo = require(\"../video/intro.webm\");\nconst introVideoSize = {\n    width: 290,\n    height: 500,\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            flexGrow: 1\n        },\n        container: {\n            maxWidth: 800,\n        },\n        textBox: {\n            // maxWidth: 700,\n            minWidth: 300,\n        },\n        paper: {\n            backgroundColor: '#f2f2f2',\n            backgroundImage: `url(${paperBackground})`,\n            padding: theme.spacing(2),\n            textAlign: 'left',\n            color: theme.palette.text.primary,\n        },\n        video: {\n            minHeight: 250,\n        },\n        createButton: {\n            position: 'fixed',\n            width: 250,\n            // height: 20,\n            margin: '5% auto',\n            left: 0,\n            right: 0,\n            bottom: '5%',\n            backgroundColor: '#e7290f',\n            '&:hover': {\n                backgroundColor: '#b3200c',\n            },\n        }\n    }),\n);\n\nconst mapStateToProps = (state: RootState) => ({\n    state: state.app,\n    router: state.router\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    actionCreateGift: () =>\n        dispatch(createGift()),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype HomeProps = ConnectedProps<typeof connector> & {};\n\nconst Home: FC<HomeProps> = (props: HomeProps) => {\n    const classes = useStyles();\n    const { enqueueSnackbar } = useSnackbar();\n\n    useEffect( () => {\n        if(props.state.giftCreationError) {\n            const text: string = String(props.state.giftCreationError);\n            enqueueSnackbar(text, {\n                variant: 'error',\n                vertical: 'bottom',\n                horizontal: 'center',\n            } as any);\n        }\n    }, [props.state.giftCreationError, enqueueSnackbar]);\n\n    return (\n        <div>\n            <Box display=\"flex\" justifyContent=\"center\">\n                <Box display=\"flex\" flexWrap=\"wrap\" justifyContent=\"center\" p={1} m={1} className={classes.container}>\n                    <Box p={1} flexBasis={300} justifyContent=\"center\">\n                        <ReactPlayer url={introVideo}\n                                     playing={true}\n                                     loop={true}\n                                     muted={true}\n                                     width={introVideoSize.width}\n                                     height={introVideoSize.height}/>\n                    </Box>\n                    <Box display=\"flex\" flexWrap=\"wrap\" flexBasis={300} flexGrow={1} justifyContent=\"center\">\n                        <Box p={1} flexBasis={300} flexGrow={1} className={classes.textBox}>\n                            <Paper className={classes.paper} square={true} elevation={5}>\n                                <h1>Virtual Gift online</h1>\n                                <p>Do you want to present something online? Envelope it with Virtual Gift:</p>\n                                <ul>\n                                    <li>Include desired gift, e.g. digital certificate link, game's key in Steam,\n                                        new account's credentials etc.\n                                    </li>\n                                    <li>Write words of congratulations</li>\n                                    <li>Style your text</li>\n                                    <li>Add photo or just fun picture</li>\n                                    <li>Embed video from any resource</li>\n                                    <li>Share link to gift</li>\n                                    <li>Created gifts easy accessible from any device</li>\n                                    <li>Gifts stored under unique unguessable links, so can not be picked up by bad\n                                        guys\n                                    </li>\n                                </ul>\n                            </Paper>\n                        </Box>\n                        <Box p={1} flexBasis={300} flexGrow={1} className={classes.textBox}>\n                            <Paper className={classes.paper} square={true} elevation={5}>\n                                <h1>Features</h1>\n                                <ul>\n                                    <li>Created gifts easy accessible from any device, including mobile\n                                    </li>\n                                    <li>Gifts stored under unique unguessable links, so can not be picked up by bad\n                                        guys</li>\n                                    <li>After publishing gifts can not be modified by anyone, including you</li>\n                                </ul>\n                            </Paper>\n                        </Box>\n                    </Box>\n                </Box>\n            </Box>\n            <Button variant=\"contained\" size=\"large\"  color=\"secondary\"\n                    className={classes.createButton}\n                    onClick={props.actionCreateGift}>\n                Create Virtual Gift\n            </Button>\n\n        </div>\n    );\n};\n\nexport default connector(Home);\n","import React, {FC} from \"react\";\nimport {withStyles} from \"@material-ui/core/styles\";\nimport {Backdrop, CircularProgress} from \"@material-ui/core\";\n\nconst ProgressBackdrop = withStyles({\n    root: {\n        zIndex: 1,\n    }\n})(Backdrop);\n\ntype ProgressProps = {\n    show: boolean\n}\n\nconst Progress: FC<ProgressProps> = ({show = true}) => {\n    return (\n        <ProgressBackdrop open={show} >\n            <CircularProgress color=\"inherit\" />\n        </ProgressBackdrop>\n    )\n};\n\nexport default Progress;\n","import React, {FC, useState} from 'react';\nimport {connect, ConnectedProps} from \"react-redux\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport SaveIcon from '@material-ui/icons/Save';\nimport AddIcon from '@material-ui/icons/Add';\nimport ShareIcon from '@material-ui/icons/Share';\nimport EditIcon from '@material-ui/icons/Edit'\nimport DetailsIcon from '@material-ui/icons/Details'\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport {Backdrop, Box, Button, Tooltip} from \"@material-ui/core\";\nimport {SpeedDial as MSpeedDial} from \"@material-ui/lab\";\n\nimport {RootState} from \"../store/reducers\";\nimport {EDIT_LETTER, SAVE_GIFT_CONTENT, GO_HOME, EDIT_DETAILS, PUBLISH_GIFT} from \"../store/actions\";\nimport {isShareAvailable, isStaticPage, navigatorShare} from \"../utils\";\nimport log from \"../log\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        speedDial: {\n            position: 'absolute',\n            // bottom: theme.spacing(8),\n            // right: theme.spacing(3),\n            bottom: theme.spacing(3),\n            right: theme.spacing(3),\n        },\n        margin: {\n            margin: theme.spacing(2),\n        },\n        buttons: {\n            position: 'relative',\n            // width: 340,\n            top: theme.spacing(-3),\n            flex: '0 0 auto'\n        }\n    }),\n);\n\nconst mapStateToProps = (state: RootState) => ({\n    giftWasSaved: state.app.giftWasSaved,\n    needEditLetter: state.app.needEditLetter,\n    isStaticPage: isStaticPage(state.router.location.pathname),\n    giftPublished: state.app.giftPublished,\n    giftTitle: state.app.giftTitle,\n    fetchedGiftId: state.app.fetchedGiftId,\n    giftFetchingError: state.app.giftFetchingError\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    actionEditLetter: () =>\n        dispatch({type: EDIT_LETTER}),\n    actionSaveGift: () =>\n        dispatch({type: SAVE_GIFT_CONTENT}),\n    actionGoHome: () =>\n        dispatch({type: GO_HOME}),\n    actionEditDetails: () =>\n        dispatch({type: EDIT_DETAILS}),\n    actionPublishGift: () =>\n        dispatch({type: PUBLISH_GIFT}),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype SpeedDialProps = ConnectedProps<typeof connector> & {};\n\nconst AppBar: FC<SpeedDialProps> = (props: SpeedDialProps) => {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(false);\n    const [openCopyClipboardTooltip, setOpenCopyClipboardTooltip] = useState(false);\n\n    const handleOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const shareData = {\n        title: 'Gift for you!',\n        text: `${props.giftTitle}`,\n        url: `https://vgift.us/${props.fetchedGiftId}/`,\n    };\n\n\n    const shareThis = () => {\n        navigatorShare(shareData);\n        setOpen(false);\n    };\n\n    const copyToClipboard = async () => {\n        const text = `${shareData.title}\\n${shareData.url}`;\n        log.debug('To copy: ', text);\n        await navigator.clipboard.writeText(text);\n        setOpenCopyClipboardTooltip(true);\n    };\n\n    const renderEditMenu = () => {\n        return (\n            <div className=\"buttons-container\">\n\n                <div className=\"buttons-bar\">\n                    <Backdrop open={open}/>\n                    <MSpeedDial\n                        ariaLabel=\"SpeedDial tooltip example\"\n                        className={classes.speedDial}\n                        hidden={props.isStaticPage}\n                        icon={<SpeedDialIcon/>}\n                        onClose={handleClose}\n                        onOpen={handleOpen}\n                        open={open}\n                    >\n                        {!props.needEditLetter &&\n                        <SpeedDialAction key=\"Edit\" tooltipTitle=\"Edit\" icon={<EditIcon/>} tooltipOpen\n                                         onClick={() => {\n                                             handleClose();\n                                             props.actionEditLetter();\n                                         }}\n                        />}\n\n                        {!props.giftWasSaved &&\n                        <SpeedDialAction key=\"Save\" tooltipTitle=\"Save\" icon={<SaveIcon/>} tooltipOpen\n                                         onClick={() => {\n                                             handleClose();\n                                             props.actionSaveGift();\n                                         }}/>}\n                        <SpeedDialAction key=\"Details\" tooltipTitle=\"Details\" icon={<DetailsIcon/>} tooltipOpen\n                                         onClick={() => {\n                                             handleClose();\n                                             props.actionEditDetails();\n                                         }}/>\n                        <SpeedDialAction key=\"Publish\" tooltipTitle=\"Publish\" icon={<ShareIcon/>} tooltipOpen\n                                         onClick={() => {\n                                             handleClose();\n                                             props.actionPublishGift();\n                                         }}/>\n                        <SpeedDialAction key=\"Create\" tooltipTitle=\"Create\" icon={<AddIcon/>} tooltipOpen\n                                         onClick={() => {\n                                             handleClose();\n                                             props.actionGoHome();\n                                         }}/>\n                    </MSpeedDial>\n                </div>\n            </div>\n        )\n    };\n\n    const renderPublishedMenu = () => {\n        return (\n            <Box p={1} display=\"flex\" justifyContent=\"center\">\n                <Box p={1} className={classes.buttons}>\n                    {isShareAvailable() &&\n                    <Button\n                        size=\"small\"\n                        className={classes.margin}\n                        startIcon={<ShareIcon/>}\n                        onClick={shareThis}\n                    >\n                        Share\n                    </Button>}\n                    <Tooltip title=\"Gift has been copied to clipboard\"\n                             leaveDelay={2000}\n                             placement=\"top\"\n                             onClose={() => {\n                                 setOpenCopyClipboardTooltip(false);\n                             }}\n                             open={openCopyClipboardTooltip}\n                    >\n                        <Button\n                            size=\"small\"\n                            className={classes.margin}\n                            startIcon={<FileCopyIcon/>}\n                            onClick={copyToClipboard}\n                        >\n                            Copy\n                        </Button>\n                    </Tooltip>\n                    <Tooltip title=\"Create new virtual gift\"\n                             leaveDelay={400}\n                             placement=\"top\"\n                    >\n                        <Button\n                            size=\"small\"\n                            className={classes.margin}\n                            startIcon={<AddIcon/>}\n                            onClick={() => {\n                                props.actionGoHome();\n                            }}\n                        >\n                            Create\n                        </Button>\n                    </Tooltip>\n                </Box>\n            </Box>\n        )\n    };\n\n    return (\n        // <div className={props.isHomePage ? \"hidden\" : \"buttons-container\"}>\n        <div>\n            {!props.giftFetchingError && (props.giftPublished ? renderPublishedMenu() : renderEditMenu())}\n        </div>\n    );\n    /*\n{icon: <EditIcon/>, name: 'Edit', handler: props.actionEditLetter},\n{icon: <SaveIcon/>, name: 'Save', handler: props.actionSaveGift},\n{icon: <DetailsIcon/>, name: 'Details', handler: props.actionEditDetails},\n{icon: <ShareIcon/>, name: 'Publish', handler: props.actionPublishGift},\n{icon: <AddIcon/>, name: 'Create', handler: props.actionGoHome},*/\n};\n\nexport default connector(AppBar);\n\n/*\nicon={<EditIcon/>}\nopenIcon={<SpeedDialIcon />}*/\n","import {connect, ConnectedProps} from \"react-redux\";\nimport React, {FC, useState} from \"react\";\nimport {Box, Button, Paper, TextField, Tooltip} from \"@material-ui/core\";\nimport {createStyles, makeStyles, Theme} from \"@material-ui/core/styles\";\nimport ShareIcon from \"@material-ui/icons/Share\";\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport {isShareAvailable, navigatorShare} from '../utils';\nimport {RootState} from \"../store/reducers\";\nimport {VERSION} from \"../conf\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        page: {\n            maxWidth: 800,\n            padding: theme.spacing(3)\n        },\n    })\n);\n\nconst mapStateToProps = (state: RootState) => ({});\n\nconst mapDispatchToProps = (dispatch: any) => ({});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype StatusPageProps = ConnectedProps<typeof connector> & {};\n\nconst StatusPage: FC<StatusPageProps> = (props: StatusPageProps) => {\n    const [openCopyClipboardTooltip, setOpenCopyClipboardTooltip] = useState(false);\n\n    const styles = useStyles();\n    const testShareData = {\n        title: 'Share title',\n        text: `Share text`,\n        url: `http://example.org/test-url/`,\n    };\n\n    const testShareHandler = () => {\n        navigatorShare(testShareData);\n    };\n\n    const testCopyClipboard = async () => {\n        const text = `${testShareData.text}\\n${testShareData.url}`;\n        await navigator.clipboard.writeText(text);\n        setOpenCopyClipboardTooltip(true);\n    };\n\n    return (\n        <Box display=\"flex\" justifyContent=\"center\">\n            <Box>\n                <Paper className={styles.page}>\n                    <h1>Status Virtual Gift</h1>\n                    <p>Version: {VERSION}</p>\n\n                    <p>navigator.share {isShareAvailable() ? \"available\" : \"unavailable\"} <br/>\n                        <Button\n                            startIcon={<ShareIcon/>}\n                            onClick={testShareHandler}\n                        >\n                            Test Share\n                        </Button></p>\n\n                    <p>\n                        <Tooltip title=\"Content copied to clipboard\" leaveDelay={1000}\n                                onClose={() => {\n                                    setOpenCopyClipboardTooltip(false);\n                                }}\n                                open={openCopyClipboardTooltip}\n                            >\n                            <Button\n                                startIcon={<FileCopyIcon/>}\n                                onClick={testCopyClipboard}\n                                data-for=\"custom-event\"\n                                data-tip=\"custom show\"\n                                data-event=\"click focus\"\n                            >\n                                Test Copy\n                            </Button>\n                        </Tooltip>\n                    </p>\n                    <p>\n                        <TextField autoFocus\n                                   margin=\"dense\"\n                                   type=\"text\"\n                                   fullWidth\n                                   multiline\n                                   rows={4}\n                                   rowsMax={4}\n                        />\n                    </p>\n\n                </Paper>\n            </Box>\n        </Box>\n    )\n};\n\nexport default connector(StatusPage);\n","import React, {FC, useEffect} from 'react';\nimport {Prompt, Route, Switch} from 'react-router'\nimport {ConnectedRouter, push} from \"connected-react-router\";\n\nimport {History} from \"../store/configureStore\";\nimport GiftBox from \"./GiftBox\";\nimport Home from \"./Home\";\nimport {RootState} from \"../store/reducers\";\nimport {connect, ConnectedProps} from \"react-redux\";\nimport Progress from \"./Progress\";\nimport AppBar from \"./AppBar\";\n\nimport '../style/app.scss';\nimport {CLEAR_REDIRECT} from \"../store/actions\";\nimport StatusPage from \"./StatusPage\";\nimport Translator from \"./Translator\";\n\nconst mapStateToProps = (state : RootState) => ({\n    redirectTo: state.app.redirectTo,\n    location: state.router.location,\n    isGiftFetching: state.app.isGiftFetching,\n    isGiftSaving: state.app.isGiftSaving,\n    giftWasSaved: state.app.giftWasSaved,\n});\n\nconst mapDispatchToProps = (dispatch: any) => ({\n    redirect: (url:string) => {\n        dispatch(push(url));\n        dispatch({type: CLEAR_REDIRECT});\n    }\n\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype AppProps = ConnectedProps<typeof connector> & {\n    history: History;\n};\n\nconst App: FC<AppProps> = ({redirectTo, history, redirect, giftWasSaved, isGiftFetching, isGiftSaving}: AppProps) => {\n    // const history = props.history;\n\n    useEffect(() => {\n        if(redirectTo) {\n            redirect(redirectTo);\n        }\n    }, [redirectTo, redirect]);\n\n    return (\n        <ConnectedRouter history={history}>\n            <Switch>\n                <Route exact path=\"/\" component={Home}/>\n                <Route exact path=\"/status/\" component={StatusPage}/>\n                <Route exact path=\"/:id/\" component={GiftBox}/>\n            </Switch>\n            <AppBar />\n            <Prompt\n                when={!giftWasSaved}\n                message={\"Your gift is unsaved now. \\nAre you sure you want to leave?\"}\n            />\n            <Progress show={isGiftFetching || isGiftSaving}/>\n            <Translator />\n        </ConnectedRouter>\n    );\n};\n\nexport default connector(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux';\nimport {connectRouter, RouterState} from 'connected-react-router';\nimport { History } from './configureStore';\nimport {\n    OPEN_ENVELOPE,\n    CLOSE_ENVELOPE,\n    EDIT_LETTER,\n    GIFT_FETCHED,\n    FAILED_FETCH_GIFT,\n    GIFT_IS_FETCHING,\n    GIFT_IS_SAVING,\n    GIFT_WAS_SAVED,\n    GIFT_WAS_MODIFIED,\n    FAILED_SAVE_GIFT,\n    CREATE_GIFT,\n    GO_HOME,\n    CLEAR_REDIRECT,\n    EDIT_DETAILS,\n    SAVE_GIFT_CONTENT,\n    SAVE_GIFT_TITLE,\n    PUBLISH_GIFT,\n    PUBLISH_GIFT_CANCEL,\n    PUBLISH_GIFT_START, CREATE_GIFT_ERROR,\n} from \"./actions\";\n\ninterface AppTypes {\n    type: string\n}\n\nconst newGiftState = {\n    needOpenEnvelope: true,\n    needEditLetter: true,\n    needEditDetails: false,\n    needPublishGift: false,\n    fetchedGiftId: '',\n    giftTitle: '',\n    giftPublished: false,\n    giftFetchingError: null,\n    isGiftFetching: false,\n    needSaveGift: false,\n    isGiftSaving: false,\n    giftSavingErrors: '',\n    giftWasSaved: true,\n    isGiftPublishing: false,\n    giftCreationError: null\n};\n\nexport const initialState = {\n    ...newGiftState,\n    needOpenEnvelope: false,\n    needEditLetter: false,\n    redirectTo: '',\n};\n\nfunction appReducers(\n    state = initialState,\n    action: any\n): typeof initialState {\n    switch (action.type) {\n        case OPEN_ENVELOPE:\n            return {...state, needOpenEnvelope: true};\n        case CLOSE_ENVELOPE:\n            return {\n                ...state,\n                needOpenEnvelope: false,\n                needEditLetter: false,\n            };\n        case EDIT_LETTER:\n            return {\n                ...state,\n                needEditLetter: true,\n                needOpenEnvelope: true,\n            };\n        case GIFT_FETCHED:\n            return {\n                ...state,\n                fetchedGiftId: action.fetchedGiftId,\n                giftTitle: action.giftTitle,\n                giftPublished: action.giftPublished,\n                giftFetchingError: null,\n                isGiftFetching: false,\n                giftWasSaved: action.hasContent,\n            };\n        case GIFT_IS_FETCHING:\n            return {\n                ...state,\n                fetchedGiftId: action.fetchedGiftId,\n                giftTitle: '',\n                giftFetchingError: null,\n                isGiftFetching: true\n            };\n        case FAILED_FETCH_GIFT:\n            return {\n                ...state,\n                fetchedGiftId: action.fetchedGiftId,\n                giftTitle: '',\n                giftFetchingError: action.giftFetchingError,\n                isGiftFetching: false\n            };\n        case SAVE_GIFT_CONTENT:\n            return {\n                ...state,\n                needSaveGift: true,\n                needEditLetter: false,\n                needEditDetails: false,\n                giftSavingErrors: '',\n            };\n        case SAVE_GIFT_TITLE:\n            const _giftTitle = action.needSave ? action.giftTitle : state.giftTitle;\n            return {\n                ...state,\n                needSaveGift: action.needSave,\n                giftTitle: _giftTitle,\n                needEditLetter: false,\n                needEditDetails: false,\n                giftSavingErrors: '',\n            };\n        case GIFT_IS_SAVING:\n            return {\n                ...state,\n                needSaveGift: false,\n                needEditDetails: false,\n                isGiftSaving: true,\n                giftSavingErrors: '',\n                giftWasSaved: false,\n            };\n        case GIFT_WAS_SAVED:\n            return {\n                ...state,\n                fetchedGiftId: action.fetchedGiftId,\n                giftTitle: action.giftTitle,\n                giftPublished: action.giftPublished,\n                isGiftSaving: false,\n                giftSavingErrors: '',\n                giftWasSaved: true,\n                isGiftPublishing: false,\n            };\n        case GIFT_WAS_MODIFIED:\n            return {\n                ...state,\n                giftWasSaved: false,\n            };\n        case FAILED_SAVE_GIFT:\n            return {\n                ...state,\n                isGiftSaving: false,\n                giftSavingErrors: action.giftSavingErrors,\n                giftWasSaved: false,\n                isGiftPublishing: false,\n            };\n        case CREATE_GIFT:\n            return {\n                ...newGiftState,\n                giftCreationError: null,\n                redirectTo: action.redirectTo\n            };\n        case CREATE_GIFT_ERROR:\n            return {\n                ...newGiftState,\n                redirectTo: '',\n                giftCreationError: action.error,\n            };\n        case GO_HOME:\n            return {\n                ...state,\n                // giftWasSaved: state.giftWasSaved,\n                redirectTo: '/'\n            };\n        case CLEAR_REDIRECT:\n            return {\n                ...state,\n                redirectTo: ''\n            };\n        case EDIT_DETAILS:\n            return {\n                ...state,\n                needEditDetails: true\n            };\n        case PUBLISH_GIFT:\n            return {\n                ...state,\n                needPublishGift: true\n            };\n        case PUBLISH_GIFT_CANCEL:\n            return {\n                ...state,\n                needPublishGift: false\n            };\n        case PUBLISH_GIFT_START:\n            return {\n                ...state,\n                needPublishGift: false,\n                isGiftPublishing: true,\n            };\n        default:\n            return {...state};\n    }\n}\n\nexport const createRootReducer = (history: History) => combineReducers({\n    router: connectRouter(history),\n    app: appReducers\n});\n\nexport interface RootState {\n    router: RouterState,\n    app: typeof initialState\n}\n","import React from 'react';\nimport {createDevTools} from 'redux-devtools';\nimport LogMonitor from 'redux-devtools-log-monitor';\nimport DockMonitor from 'redux-devtools-dock-monitor';\n\n/**\n * Create the DevTools component and export it.\n */\nexport default createDevTools(\n    <DockMonitor\n        /**\n         * Hide or show the dock with \"ctrl-h\".\n         */\n        toggleVisibilityKey='ctrl-h'\n        /**\n         * Change the position of the dock with \"ctrl-q\".\n         */\n        changePositionKey='ctrl-q'\n        defaultIsVisible={false}\n>\n<LogMonitor theme='tomorrow' />\n    </DockMonitor>\n);\n","import {createBrowserHistory} from 'history';\nimport {applyMiddleware, compose, createStore} from 'redux';\nimport {routerMiddleware} from 'connected-react-router';\nimport thunkMiddleware from 'redux-thunk';\nimport logger from \"redux-logger\";\n\nimport {IS_DEBUG} from '../conf';\n\nimport {createRootReducer} from './reducers'\nimport DevTools from \"../components/DevTools\";\n\nexport const history = createBrowserHistory();\nexport type History = typeof history;\n\nconst composeEnhancer: typeof compose = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport function configureStore(preloadedState?: any) {\n    const enhancer = IS_DEBUG ?\n        composeEnhancer(\n            applyMiddleware(\n                routerMiddleware(history),\n            ),\n            applyMiddleware(thunkMiddleware),\n            applyMiddleware(logger),\n            DevTools.instrument()\n        ) :\n        composeEnhancer(\n            applyMiddleware(\n                routerMiddleware(history),\n            ),\n            applyMiddleware(thunkMiddleware)\n        );\n\n    const store = createStore(\n        createRootReducer(history),\n        preloadedState,\n        enhancer\n    );\n\n    // Hot reloading\n    if (module.hot) {\n        // Enable Webpack hot module replacement for reducers\n        module.hot.accept('./reducers', () => {\n            store.replaceReducer(createRootReducer(history));\n        });\n    }\n\n    return store\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {AppContainer} from 'react-hot-loader';\nimport {SnackbarProvider} from 'notistack';\n\nimport {IS_DEBUG} from './conf';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nimport {configureStore, history} from './store/configureStore';\nimport DevTools from './components/DevTools';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n// const ghspa = require('ghspa');\n\nconst store = configureStore();\n\nReactDOM.render(\n    <AppContainer>\n        <Provider store={store}>\n            <SnackbarProvider>\n                <App history={history}/>\n            </SnackbarProvider>\n            {IS_DEBUG && <DevTools/>}\n        </Provider>\n    </AppContainer>\n    , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}