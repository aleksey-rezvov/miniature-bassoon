(this["webpackJsonpvgift-front"]=this["webpackJsonpvgift-front"]||[]).push([[0],{26:function(e,t,a){"use strict";var n=a(252),r=a(30),i=n.getLogger("main");r.b?i.enableAll():i.disableAll(),t.a=i},262:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_runner_work_vgift_front_vgift_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),react_cookie__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(558),_mdi_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(120),_mdi_react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_mdi_react__WEBPACK_IMPORTED_MODULE_4__),_mdi_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(121),_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(47),mapStateToProps=function(e){return{}},mapDispatchToProps=function(e){return{}},connector=Object(react_redux__WEBPACK_IMPORTED_MODULE_2__.connect)(mapStateToProps,mapDispatchToProps),Translator=function Translator(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),_useState2=Object(_home_runner_work_vgift_front_vgift_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),selectorVisible=_useState2[0],setSelectorVisible=_useState2[1],_useCookies=Object(react_cookie__WEBPACK_IMPORTED_MODULE_3__.a)(["chosenLanguage"]),_useCookies2=Object(_home_runner_work_vgift_front_vgift_front_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1],translator=function(e){return function(t){return translate(e),t.preventDefault(),!1}},translate=function translate(lang){eval('doGTranslate("en|'.concat(lang,'")')),setCookie("chosenLanguage",lang)};Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var e=cookies.chosenLanguage;cookies.chosenLanguage||(e=Object(_utils__WEBPACK_IMPORTED_MODULE_6__.a)()),"en"!==e&&translate(e)}),[cookies.chosenLanguage,translate]);var flags=[{lang:"en",title:"English",xOffset:0,yOffset:0},{lang:"zh-CN",title:"Chinese (Simplified)",xOffset:-300,yOffset:0},{lang:"fr",title:"French",xOffset:-200,yOffset:-100},{lang:"de",title:"German",xOffset:-300,yOffset:-100},{lang:"it",title:"Italian",xOffset:-600,yOffset:-100},{lang:"ja",title:"Japanese",xOffset:-700,yOffset:-100},{lang:"ko",title:"Korean",xOffset:0,yOffset:-200},{lang:"es",title:"Spanish",xOffset:-600,yOffset:-200},{lang:"ru",title:"Russian",xOffset:-500,yOffset:-200}],renderFlag=function(e){var t=e.lang,a=e.title,n=e.xOffset,r=e.yOffset;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a",{href:"#",key:t,className:"gflag nturl",onClick:translator(t),title:a,style:{backgroundPosition:"".concat(n,"px ").concat(r,"px")}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("img",{src:"//gtranslate.net/flags/blank.png",height:"16",width:"16",alt:a}))};return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"language-container"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"language-selector"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"language-selector-flags"},flags.map((function(e){return renderFlag(e)})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a",{onClick:function(e){setSelectorVisible(!selectorVisible),e.preventDefault()},href:"#",key:"more"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_mdi_react__WEBPACK_IMPORTED_MODULE_4___default.a,{path:_mdi_js__WEBPACK_IMPORTED_MODULE_5__.a,size:"16px",horizontal:!0,vertical:!0,rotate:180}))),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"language-selector-select",style:{display:selectorVisible?"flex":"none"}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select",{onChange:function(e){translate(e.target.value)}},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:""},"Select Language"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"af"},"Afrikaans"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sq"},"Albanian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ar"},"Arabic"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"hy"},"Armenian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"az"},"Azerbaijani"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"eu"},"Basque"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"be"},"Belarusian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"bg"},"Bulgarian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ca"},"Catalan"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"zh-CN"},"Chinese (Simplified)"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"zh-TW"},"Chinese (Traditional)"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"hr"},"Croatian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"cs"},"Czech"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"da"},"Danish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"nl"},"Dutch"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"en"},"English"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"et"},"Estonian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"tl"},"Filipino"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"fi"},"Finnish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"fr"},"French"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"gl"},"Galician"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ka"},"Georgian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"de"},"German"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"el"},"Greek"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ht"},"Haitian Creole"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"iw"},"Hebrew"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"hi"},"Hindi"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"hu"},"Hungarian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"is"},"Icelandic"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"id"},"Indonesian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ga"},"Irish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"it"},"Italian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ja"},"Japanese"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ko"},"Korean"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"lv"},"Latvian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"lt"},"Lithuanian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"mk"},"Macedonian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ms"},"Malay"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"mt"},"Maltese"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"no"},"Norwegian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"fa"},"Persian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"pl"},"Polish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"pt"},"Portuguese"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ro"},"Romanian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ru"},"Russian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sr"},"Serbian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sk"},"Slovak"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sl"},"Slovenian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"es"},"Spanish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sw"},"Swahili"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"sv"},"Swedish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"th"},"Thai"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"tr"},"Turkish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"uk"},"Ukrainian"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"ur"},"Urdu"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"vi"},"Vietnamese"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"cy"},"Welsh"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"yi"},"Yiddish"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option",{value:"eo"},"Esperanto")))))};__webpack_exports__.a=connector(Translator)},286:function(e,t,a){e.exports=a(552)},30:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return l}));var n="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VGIFT_API_ROOT:"https://vgift.us/api"}).DEBUG||!1,r=["/","/status/"],i="1.0.0",l="https://vgift.us/api"},317:function(e,t,a){},326:function(e,t,a){e.exports=a.p+"static/media/white-paperboard.f0454931.png"},327:function(e,t,a){e.exports=a.p+"static/media/intro.2726696a.webm"},329:function(e,t,a){},47:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return _})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return s}));var n=a(12),r=a.n(n),i=a(25),l=a(26),c=a(30),o=function(e){return c.c.includes(e)},_=function(){return Boolean(navigator&&navigator.share)},u=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.a.debug("navigatorShare: ",navigator,navigator.share),e.prev=1,!navigator||!navigator.share){e.next=5;break}return e.next=5,navigator.share(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l.a.error("Failed to invoke navigator.share with: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en"}},552:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),c=a(14),o=a(266),_=a(74),u=a(30),s=a(38),f=a(21),E=a(62),d=a(12),p=a.n(d),m=a(25),g=a(27),O=a(11),v=a(250),b=a.n(v),h=a(588),P=a(590),T=a(591),D=a(592),I=a(598),C=a(593),M=a(594),L=a(124),y=a.n(L),A=a(251),S=a.n(A),G=a(26),R=function(e){var t=S()(u.a,e);return G.a.info("absurl = ".concat(t)),t},W=function(e){return y.a.get(R(e))},B=function(e,t){return y.a.put(R(e),t)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y.a.post(R(e),t)},j=Object(c.connect)((function(e){return{needEditDetails:e.app.needEditDetails,giftTitle:e.app.giftTitle}}),(function(e){return{actionSaveGift:function(t,a){return e({type:"SAVE_GIFT_TITLE",giftTitle:t,needSave:a})}}}))((function(e){var t=Object(n.useState)(e.giftTitle),a=Object(g.a)(t,2),i=a[0],l=a[1],c=function(){e.actionSaveGift("",!1)};return Object(n.useEffect)((function(){l(e.giftTitle)}),[e.giftTitle,e.needEditDetails]),r.a.createElement(h.a,{open:e.needEditDetails,onClose:c,"aria-labelledby":"form-gift-details-dialog"},r.a.createElement(P.a,{id:"form-gift-details-dialog"},"Virtual Gift Details"),r.a.createElement(T.a,null,r.a.createElement(D.a,null,"Enter details of you Virtual Gift:"),r.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"form-gift-details-dialog-gift-title",label:"Gift title",type:"text",fullWidth:!0,multiline:!0,rows:3,rowsMax:3,value:i,onChange:function(e){return l(e.target.value)}})),r.a.createElement(C.a,null,r.a.createElement(M.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(M.a,{onClick:function(){e.actionSaveGift(i,!0)},color:"primary"},"Save")))})),U=a(254),w=a.n(U),x=a(121),K=a(314).AlloyEditor,F=K.SelectionTest,N=K.SelectionSetPosition,V=K.SelectionGetArrowBoxClasses,H={toolbars:{add:{buttons:["imageFromFile","embed","camera","hline","smiley","table"],tabIndex:2},styles:{selections:[{name:"embed",buttons:["embedRemove","embedEdit"],test:F.embed},{name:"embedUrl",buttons:["embedVideo","embedVideoEdit"],test:F.embedUrl},{name:"link",buttons:["linkEdit"],test:F.link},{name:"image",buttons:["imageLeft","imageCenter","imageRight","removeImage"],setPosition:N.image,test:F.image},{name:"text",buttons:{full:[["Font","FontSize","separator","bold","italic","underline","strike","separator","link"],["paragraphAlign","separator","ul","ol","separator","h1","h2","separator","indentBlock","outdentBlock","separator","TextColor","BGColor","separator","code","quote","separator","removeFormat"]],simple:[["styles","bold","italic","underline","link"],["paragraphAlign","separator","indentBlock","outdentBlock","separator","TextColor","BGColor","separator","removeFormat"]]},test:F.text},{name:"table",buttons:["tableHeading","tableRow","tableColumn","tableCell","tableRemove"],getArrowBoxClasses:V.table,setPosition:N.table,test:F.table}],tabIndex:1}},embedUrlTemplate:"https://iframely.vgift.us/oembed?url={url}&callback={callback}",spritemap:"/alloy-editor/assets/icons/icons.svg"},z=(a(315),a(316),a(317),a(267)),q=Object(c.connect)((function(e){return{needPublishGift:e.app.needPublishGift}}),(function(e){return{actionPublishGift:function(){return e(function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"PUBLISH_GIFT_START"}),t({type:"SAVE_GIFT_CONTENT"});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},actionPublishCancel:function(){return e({type:"PUBLISH_GIFT_CANCEL"})}}}))((function(e){var t=function(){e.actionPublishCancel()};return r.a.createElement(h.a,{open:e.needPublishGift,onClose:t,"aria-labelledby":"form-gift-publish-dialog"},r.a.createElement(P.a,{id:"form-gift-publish-dialog"},"Publish Virtual Gift"),r.a.createElement(T.a,{dividers:!0},r.a.createElement("h2",null,"Now you are about to publish your Virtual Gift."),r.a.createElement("p",null,"It is an ",r.a.createElement("strong",null,"irreversible action"),". Once you have done it, you can't undo it back."),r.a.createElement("p",null,"After publishing the gift will not be able for editing by someone, including you!"),r.a.createElement("p",null,"Publish it if you already made all the changes you want an ready to share the gift.")),r.a.createElement(C.a,null,r.a.createElement(M.a,{onClick:t,color:"primary"},"Cancel"),r.a.createElement(M.a,{onClick:function(){e.actionPublishGift()},color:"primary"},"Publish")))})),J=a(120),X=a.n(J),Y=a(255),$=function(e){var t=Object(E.c)("/:giftId")(e);return t&&t.params&&t.params.giftId?t.params.giftId:null},Q=Object(c.connect)((function(e){return Object(O.a)({giftId:$(e)},e.app)}),(function(e){return{openEnvelope:function(){return e(function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"OPEN_ENVELOPE"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},closeEnvelope:function(){return e({type:"CLOSE_ENVELOPE"})},giftFetched:function(t,a,n,r){return e({type:"GIFT_FETCHED",fetchedGiftId:t,giftTitle:a,giftPublished:n,hasContent:r})},giftIsFetching:function(t){return e({type:"GIFT_IS_FETCHING",fetchedGiftId:t})},failedToFetchGift:function(t,a){return e({type:"FAILED_FETCH_GIFT",fetchedGiftId:t,giftFetchingError:a})},actionGiftSaved:function(t,a,n){return e({type:"GIFT_WAS_SAVED",fetchedGiftId:t,giftTitle:a,giftPublished:n})},actionGiftIsSaving:function(){return e({type:"GIFT_IS_SAVING"})},actionGiftWasModified:function(){return e({type:"GIFT_WAS_MODIFIED"})},actionFailedSaveGift:function(t){return e({type:"FAILED_SAVE_GIFT",giftSavingErrors:t})}}})),Z=Object(_.withSnackbar)(Q((function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)('<p>Modify text, images, videos, smiles with different styling here...</p>\n    <h1>Dear Alice</h1>\n    <p>May all your wishes come true! Happy Birthday!&nbsp;<img src="/alloy-editor/plugins/smiley/images/angel_smile.png" title="angel" alt="angel" width="23" height="23"></p>\n    <p style="text-align: right;">Tom&nbsp; &nbsp; &nbsp; &nbsp;</p>\n    <p>\n        <img src="/media/blue-baloons.jpeg"></p><p>Photo by Sofiya Levchenko on\n        <a href="https://unsplash.com/photos/Meeycb5dpXs">Unsplash</a>\n    </p>'),o=Object(g.a)(c,2),_=o[0],u=o[1],s=Object(n.useState)(null),f=Object(g.a)(s,2),E=f[0],d=f[1],O=Object(n.useRef)(null),v=Object(n.useRef)(null),h=Object(n.useRef)(null),P=function(){i?e.closeEnvelope():e.openEnvelope()},T=function(){i||(l(!0),null!==O.current&&null!==v.current&&(v.current.classList.add("envelope-open"),v.current.classList.remove("envelope-close"),setTimeout((function(){null!==O.current&&null!==v.current&&(v.current.style.zIndex="-50",O.current.classList.add("letter-moved-up"),O.current.classList.remove("letter-moved-down"),setTimeout((function(){null!==O.current&&null!==v.current&&(O.current.style.zIndex="0",O.current.classList.add("letter-moved-down"),O.current.classList.remove("letter-moved-up"))}),400))}),400)))},D=function(){i&&(l(!1),null!==O.current&&null!==v.current&&(O.current.classList.add("letter-moved-up"),O.current.classList.remove("letter-moved-down"),setTimeout((function(){null!==O.current&&null!==v.current&&(O.current.style.zIndex="-40",O.current.classList.add("letter-moved-down"),O.current.classList.remove("letter-moved-up"),setTimeout((function(){null!==O.current&&null!==v.current&&(v.current.style.zIndex="0",v.current.classList.add("envelope-close"),v.current.classList.remove("envelope-open"))}),400))}),400)))},I=function(){if(null==E){var t=K.editable("letter-content-view",H);d(t),t.get("nativeEditor").on("instanceReady",(function(e){e.editor.focus&&e.editor.focus()})),e.actionGiftWasModified()}},C=function(){if(null!==E){var e=E.get("nativeEditor");e.on("instanceDestroyed",(function(t){e.replace("letter-content-view")})),e.removeAllListeners(),E.destroy(!0),d(null)}},L=e.isGiftFetching,y=e.giftFetchingError,A=e.fetchedGiftId,S=e.giftId,R=e.giftIsFetching,k=e.giftFetched,U=e.failedToFetchGift;Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W("/gift/".concat(S));case 3:t=e.sent,(a=t.body.giftData)&&u(a),k(t.body.giftId,t.body.giftTitle,t.body.giftPublished,!!a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),G.a.error("Failed to receive gift ".concat(S," with error: ").concat(e.t0)),U(S,e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();A===S||L||y||(R(S),e())}),[L,y,S,R,k,U]),Object(n.useEffect)((function(){document.title=e.giftTitle?"".concat(e.giftTitle," \u2014 ").concat("Virtual Gift Online"):"Virtual Gift Online",G.a.debug("Updated title: ".concat(document.title,", props.giftTitle: ").concat(e.giftTitle))}),[e.giftTitle]),Object(n.useEffect)((function(){var t=function(){var t=Object(m.a)(p.a.mark((function t(){var a,n,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=null,E&&(n=E.get("nativeEditor"),a=n.getData(!1)),!a&&h.current&&(a=h.current.innerHTML),t.next=6,B("/gift/".concat(S,"/update/"),{giftData:a,giftTitle:e.giftTitle,giftPublished:e.isGiftPublishing});case 6:r="Virtual Gift has been ".concat(e.isGiftPublishing?"published":"saved"),e.actionGiftSaved(S,e.giftTitle,e.isGiftPublishing),e.enqueueSnackbar(r,{variant:"success",vertical:"bottom",horizontal:"center"}),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),i="Failed to save gift ".concat(S," with error: ").concat(t.t0),G.a.error(i),e.actionFailedSaveGift(t.t0),e.enqueueSnackbar(i,{variant:"error",vertical:"bottom",horizontal:"center"});case 17:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();S&&e.needSaveGift&&!e.isGiftSaving&&!e.giftSavingErrors&&(e.actionGiftIsSaving(),t())}),[e.needSaveGift]),Object(n.useEffect)((function(){e.needOpenEnvelope?T():D()}),[e,T,D]),Object(n.useEffect)((function(){e.needEditLetter?I():C()}),[e,I,C]);return e.giftFetchingError?r.a.createElement("div",{className:"gift-box"},r.a.createElement("div",{className:"container"},r.a.createElement(z.a,{className:"gift-load-error"},r.a.createElement("h2",null,"Virtual Gift was failed to load"),r.a.createElement("p",null,r.a.createElement("strong",null,String(e.giftFetchingError))),r.a.createElement("p",null,"You can ",r.a.createElement("a",{href:"/"},"create another gift")," or write us about the accident:",r.a.createElement("a",{href:"mailto:info@vgift.us"},"info@vgift.us"),"."),r.a.createElement("p",null,"Full text of the error:"),r.a.createElement("p",{className:"gift-full-error notranslate"}," ",Object(Y.inspect)(e.giftFetchingError))))):r.a.createElement("div",{className:"gift-box"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"envelope"},r.a.createElement("div",{className:"envelope-body-bg"}),r.a.createElement("div",{className:"envelope-body-front notranslate"},e.giftTitle&&r.a.createElement(z.a,{className:"envelope-body-front-title",elevation:5},r.a.createElement("p",null,e.giftTitle))),r.a.createElement("div",{className:"envelope-flip",ref:v,onClick:P},r.a.createElement("div",{className:"envelope-flip-face envelope-flip-face-back"},r.a.createElement(M.a,{className:"cover-button"},r.a.createElement(X.a,{path:x.b,size:2,horizontal:!0,vertical:!0,rotate:180}))),r.a.createElement("div",{className:"envelope-flip-face envelope-flip-face-front"})),r.a.createElement("div",{className:"envelope-letter",ref:O},r.a.createElement(b.a,null,r.a.createElement("div",{id:"letter-content-view",className:"envelope-text notranslate",ref:h,dangerouslySetInnerHTML:{__html:w.a.sanitize(_)}}))))),r.a.createElement(j,null),r.a.createElement(q,null))}))),ee=a(179),te=a(244),ae=a(599),ne=a(257),re=a.n(ne),ie=a(326),le=a(327),ce=290,oe=500,_e=Object(ee.a)((function(e){return Object(te.a)({root:{flexGrow:1},container:{maxWidth:800},textBox:{minWidth:300},paper:{backgroundColor:"#f2f2f2",backgroundImage:"url(".concat(ie,")"),padding:e.spacing(2),textAlign:"left",color:e.palette.text.primary},video:{minHeight:250},createButton:{position:"fixed",width:250,margin:"5% auto",left:0,right:0,bottom:"5%",backgroundColor:"#e7290f","&:hover":{backgroundColor:"#b3200c"}}})})),ue=Object(c.connect)((function(e){return{state:e.app,router:e.router}}),(function(e){return{actionCreateGift:function(){return e(function(){var e=Object(m.a)(p.a.mark((function e(t,a){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("gift/create");case 3:return n=e.sent,r=n.body.giftId,G.a.debug("Created gift ".concat(r)),i="/".concat(r,"/"),e.abrupt("return",t({type:"CREATE_GIFT",redirectTo:i}));case 10:return e.prev=10,e.t0=e.catch(0),G.a.error("Failed to create gift with error: ".concat(e.t0)),e.abrupt("return",t({type:"CREATE_GIFT_ERROR",error:e.t0}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())}}}))((function(e){var t=_e(),a=Object(_.useSnackbar)().enqueueSnackbar;return Object(n.useEffect)((function(){if(e.state.giftCreationError){var t=String(e.state.giftCreationError);a(t,{variant:"error",vertical:"bottom",horizontal:"center"})}}),[e.state.giftCreationError,a]),r.a.createElement("div",null,r.a.createElement(ae.a,{display:"flex",justifyContent:"center"},r.a.createElement(ae.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",p:1,m:1,className:t.container},r.a.createElement(ae.a,{p:1,flexBasis:300,justifyContent:"center"},r.a.createElement(re.a,{url:le,playing:!0,loop:!0,muted:!0,width:ce,height:oe})),r.a.createElement(ae.a,{display:"flex",flexWrap:"wrap",flexBasis:300,flexGrow:1,justifyContent:"center"},r.a.createElement(ae.a,{p:1,flexBasis:300,flexGrow:1,className:t.textBox},r.a.createElement(z.a,{className:t.paper,square:!0,elevation:5},r.a.createElement("h1",null,"Virtual Gift online"),r.a.createElement("p",null,"Do you want to present something online? Envelope it with Virtual Gift:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Include desired gift, e.g. digital certificate link, game's key in Steam, new account's credentials etc."),r.a.createElement("li",null,"Write words of congratulations"),r.a.createElement("li",null,"Style your text"),r.a.createElement("li",null,"Add photo or just fun picture"),r.a.createElement("li",null,"Embed video from any resource"),r.a.createElement("li",null,"Share link to gift"),r.a.createElement("li",null,"Created gifts easy accessible from any device"),r.a.createElement("li",null,"Gifts stored under unique unguessable links, so can not be picked up by bad guys")))),r.a.createElement(ae.a,{p:1,flexBasis:300,flexGrow:1,className:t.textBox},r.a.createElement(z.a,{className:t.paper,square:!0,elevation:5},r.a.createElement("h1",null,"Features"),r.a.createElement("ul",null,r.a.createElement("li",null,"Created gifts easy accessible from any device, including mobile"),r.a.createElement("li",null,"Gifts stored under unique unguessable links, so can not be picked up by bad guys"),r.a.createElement("li",null,"After publishing gifts can not be modified by anyone, including you"))))))),r.a.createElement(M.a,{variant:"contained",size:"large",color:"secondary",className:t.createButton,onClick:e.actionCreateGift},"Create Virtual Gift"))})),se=a(5),fe=a(557),Ee=a(595),de=Object(se.a)({root:{zIndex:1}})(fe.a),pe=function(e){var t=e.show,a=void 0===t||t;return r.a.createElement(de,{open:a},r.a.createElement(Ee.a,{color:"inherit"}))},me=a(600),ge=a(597),Oe=a(260),ve=a.n(Oe),be=a(171),he=a.n(be),Pe=a(87),Te=a.n(Pe),De=a(259),Ie=a.n(De),Ce=a(261),Me=a.n(Ce),Le=a(122),ye=a.n(Le),Ae=a(561),Se=a(596),Ge=a(47),Re=Object(ee.a)((function(e){return Object(te.a)({speedDial:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},margin:{margin:e.spacing(2)},buttons:{position:"relative",top:e.spacing(-3),flex:"0 0 auto"}})})),We=Object(c.connect)((function(e){return{giftWasSaved:e.app.giftWasSaved,needEditLetter:e.app.needEditLetter,isStaticPage:Object(Ge.c)(e.router.location.pathname),giftPublished:e.app.giftPublished,giftTitle:e.app.giftTitle,fetchedGiftId:e.app.fetchedGiftId,giftFetchingError:e.app.giftFetchingError}}),(function(e){return{actionEditLetter:function(){return e({type:"EDIT_LETTER"})},actionSaveGift:function(){return e({type:"SAVE_GIFT_CONTENT"})},actionGoHome:function(){return e({type:"GO_HOME"})},actionEditDetails:function(){return e({type:"EDIT_DETAILS"})},actionPublishGift:function(){return e({type:"PUBLISH_GIFT"})}}}))((function(e){var t=Re(),a=r.a.useState(!1),i=Object(g.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(!1),_=Object(g.a)(o,2),u=_[0],s=_[1],f=function(){c(!0)},E=function(){c(!1)},d={title:"Gift for you!",text:"".concat(e.giftTitle),url:"https://vgift.us/".concat(e.fetchedGiftId,"/")},O=function(){Object(Ge.d)(d),c(!1)},v=function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(d.title,"\n").concat(d.url),G.a.debug("To copy: ",t),e.next=4,navigator.clipboard.writeText(t);case 4:s(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,!e.giftFetchingError&&(e.giftPublished?r.a.createElement(ae.a,{p:1,display:"flex",justifyContent:"center"},r.a.createElement(ae.a,{p:1,className:t.buttons},Object(Ge.b)()&&r.a.createElement(M.a,{size:"small",className:t.margin,startIcon:r.a.createElement(Te.a,null),onClick:O},"Share"),r.a.createElement(Ae.a,{title:"Gift has been copied to clipboard",leaveDelay:2e3,placement:"top",onClose:function(){s(!1)},open:u},r.a.createElement(M.a,{size:"small",className:t.margin,startIcon:r.a.createElement(ye.a,null),onClick:v},"Copy")),r.a.createElement(Ae.a,{title:"Create new virtual gift",leaveDelay:400,placement:"top"},r.a.createElement(M.a,{size:"small",className:t.margin,startIcon:r.a.createElement(he.a,null),onClick:function(){e.actionGoHome()}},"Create")))):r.a.createElement("div",{className:"buttons-container"},r.a.createElement("div",{className:"buttons-bar"},r.a.createElement(fe.a,{open:l}),r.a.createElement(Se.a,{ariaLabel:"SpeedDial tooltip example",className:t.speedDial,hidden:e.isStaticPage,icon:r.a.createElement(me.a,null),onClose:E,onOpen:f,open:l},!e.needEditLetter&&r.a.createElement(ge.a,{key:"Edit",tooltipTitle:"Edit",icon:r.a.createElement(Ie.a,null),tooltipOpen:!0,onClick:function(){E(),e.actionEditLetter()}}),!e.giftWasSaved&&r.a.createElement(ge.a,{key:"Save",tooltipTitle:"Save",icon:r.a.createElement(ve.a,null),tooltipOpen:!0,onClick:function(){E(),e.actionSaveGift()}}),r.a.createElement(ge.a,{key:"Details",tooltipTitle:"Details",icon:r.a.createElement(Me.a,null),tooltipOpen:!0,onClick:function(){E(),e.actionEditDetails()}}),r.a.createElement(ge.a,{key:"Publish",tooltipTitle:"Publish",icon:r.a.createElement(Te.a,null),tooltipOpen:!0,onClick:function(){E(),e.actionPublishGift()}}),r.a.createElement(ge.a,{key:"Create",tooltipTitle:"Create",icon:r.a.createElement(he.a,null),tooltipOpen:!0,onClick:function(){E(),e.actionGoHome()}}))))))})),Be=(a(329),Object(ee.a)((function(e){return Object(te.a)({page:{maxWidth:800,padding:e.spacing(3)}})}))),ke=Object(c.connect)((function(e){return{}}),(function(e){return{}}))((function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),i=a[0],l=a[1],c=Be(),o={title:"Share title",text:"Share text",url:"http://example.org/test-url/"},_=function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o.text,"\n").concat(o.url),e.next=3,navigator.clipboard.writeText(t);case 3:l(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ae.a,{display:"flex",justifyContent:"center"},r.a.createElement(ae.a,null,r.a.createElement(z.a,{className:c.page},r.a.createElement("h1",null,"Status Virtual Gift"),r.a.createElement("p",null,"Version: ",u.d),r.a.createElement("p",null,"navigator.share ",Object(Ge.b)()?"available":"unavailable"," ",r.a.createElement("br",null),r.a.createElement(M.a,{startIcon:r.a.createElement(Te.a,null),onClick:function(){Object(Ge.d)(o)}},"Test Share")),r.a.createElement("p",null,r.a.createElement(Ae.a,{title:"Content copied to clipboard",leaveDelay:1e3,onClose:function(){l(!1)},open:i},r.a.createElement(M.a,{startIcon:r.a.createElement(ye.a,null),onClick:_,"data-for":"custom-event","data-tip":"custom show","data-event":"click focus"},"Test Copy"))),r.a.createElement("p",null,r.a.createElement(I.a,{autoFocus:!0,margin:"dense",type:"text",fullWidth:!0,multiline:!0,rows:4,rowsMax:4})))))})),je=a(262),Ue=Object(c.connect)((function(e){return{redirectTo:e.app.redirectTo,location:e.router.location,isGiftFetching:e.app.isGiftFetching,isGiftSaving:e.app.isGiftSaving,giftWasSaved:e.app.giftWasSaved}}),(function(e){return{redirect:function(t){e(Object(f.d)(t)),e({type:"CLEAR_REDIRECT"})}}}))((function(e){var t=e.redirectTo,a=e.history,i=e.redirect,l=e.giftWasSaved,c=e.isGiftFetching,o=e.isGiftSaving;return Object(n.useEffect)((function(){t&&i(t)}),[t,i]),r.a.createElement(E.a,{history:a},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:ue}),r.a.createElement(s.b,{exact:!0,path:"/status/",component:ke}),r.a.createElement(s.b,{exact:!0,path:"/:id/",component:Z})),r.a.createElement(We,null),r.a.createElement(s.a,{when:!l,message:"Your gift is unsaved now. \nAre you sure you want to leave?"}),r.a.createElement(pe,{show:c||o}),r.a.createElement(je.a,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=a(40),xe=a(33),Ke=a(243),Fe=a(172),Ne=a(263),Ve=a.n(Ne),He={needOpenEnvelope:!0,needEditLetter:!0,needEditDetails:!1,needPublishGift:!1,fetchedGiftId:"",giftTitle:"",giftPublished:!1,giftFetchingError:null,isGiftFetching:!1,needSaveGift:!1,isGiftSaving:!1,giftSavingErrors:"",giftWasSaved:!0,isGiftPublishing:!1,giftCreationError:null},ze=Object(O.a)({},He,{needOpenEnvelope:!1,needEditLetter:!1,redirectTo:""});function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_ENVELOPE":return Object(O.a)({},e,{needOpenEnvelope:!0});case"CLOSE_ENVELOPE":return Object(O.a)({},e,{needOpenEnvelope:!1,needEditLetter:!1});case"EDIT_LETTER":return Object(O.a)({},e,{needEditLetter:!0,needOpenEnvelope:!0});case"GIFT_FETCHED":return Object(O.a)({},e,{fetchedGiftId:t.fetchedGiftId,giftTitle:t.giftTitle,giftPublished:t.giftPublished,giftFetchingError:null,isGiftFetching:!1,giftWasSaved:t.hasContent});case"GIFT_IS_FETCHING":return Object(O.a)({},e,{fetchedGiftId:t.fetchedGiftId,giftTitle:"",giftFetchingError:null,isGiftFetching:!0});case"FAILED_FETCH_GIFT":return Object(O.a)({},e,{fetchedGiftId:t.fetchedGiftId,giftTitle:"",giftFetchingError:t.giftFetchingError,isGiftFetching:!1});case"SAVE_GIFT_CONTENT":return Object(O.a)({},e,{needSaveGift:!0,needEditLetter:!1,needEditDetails:!1,giftSavingErrors:""});case"SAVE_GIFT_TITLE":var a=t.needSave?t.giftTitle:e.giftTitle;return Object(O.a)({},e,{needSaveGift:t.needSave,giftTitle:a,needEditLetter:!1,needEditDetails:!1,giftSavingErrors:""});case"GIFT_IS_SAVING":return Object(O.a)({},e,{needSaveGift:!1,needEditDetails:!1,isGiftSaving:!0,giftSavingErrors:"",giftWasSaved:!1});case"GIFT_WAS_SAVED":return Object(O.a)({},e,{fetchedGiftId:t.fetchedGiftId,giftTitle:t.giftTitle,giftPublished:t.giftPublished,isGiftSaving:!1,giftSavingErrors:"",giftWasSaved:!0,isGiftPublishing:!1});case"GIFT_WAS_MODIFIED":return Object(O.a)({},e,{giftWasSaved:!1});case"FAILED_SAVE_GIFT":return Object(O.a)({},e,{isGiftSaving:!1,giftSavingErrors:t.giftSavingErrors,giftWasSaved:!1,isGiftPublishing:!1});case"CREATE_GIFT":return Object(O.a)({},He,{giftCreationError:null,redirectTo:t.redirectTo});case"CREATE_GIFT_ERROR":return Object(O.a)({},He,{redirectTo:"",giftCreationError:t.error});case"GO_HOME":return Object(O.a)({},e,{redirectTo:"/"});case"CLEAR_REDIRECT":return Object(O.a)({},e,{redirectTo:""});case"EDIT_DETAILS":return Object(O.a)({},e,{needEditDetails:!0});case"PUBLISH_GIFT":return Object(O.a)({},e,{needPublishGift:!0});case"PUBLISH_GIFT_CANCEL":return Object(O.a)({},e,{needPublishGift:!1});case"PUBLISH_GIFT_START":return Object(O.a)({},e,{needPublishGift:!1,isGiftPublishing:!0});default:return Object(O.a)({},e)}}var Je=a(107),Xe=a(264),Ye=a.n(Xe),$e=a(265),Qe=a.n($e),Ze=Object(Je.createDevTools)(r.a.createElement(Qe.a,{toggleVisibilityKey:"ctrl-h",changePositionKey:"ctrl-q",defaultIsVisible:!1},r.a.createElement(Ye.a,{theme:"tomorrow"}))),et=Object(we.a)(),tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.d;var at=function(e){var t,a=u.b?tt(Object(xe.a)(Object(Ke.a)(et)),Object(xe.a)(Fe.a),Object(xe.a)(Ve.a),Ze.instrument()):tt(Object(xe.a)(Object(Ke.a)(et)),Object(xe.a)(Fe.a));return Object(xe.e)((t=et,Object(xe.c)({router:Object(E.b)(t),app:qe})),e,a)}();l.a.render(r.a.createElement(o.AppContainer,null,r.a.createElement(c.Provider,{store:at},r.a.createElement(_.SnackbarProvider,null,r.a.createElement(Ue,{history:et})),u.b&&r.a.createElement(Ze,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[286,1,2]]]);
//# sourceMappingURL=main.87c9c7d7.chunk.js.map