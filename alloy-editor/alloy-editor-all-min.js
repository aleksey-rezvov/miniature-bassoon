(function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=159)})([function(e,t,n){"use strict";e.exports=n(47)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=n(0),r=s(i),o=n(2),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.className,n=void 0===t?"":t,i=e.symbol;return r.default.createElement(a.default.Consumer,null,(function(e){var t=e.editor,o=t.get("nativeEditor"),a=o.config.spritemap||"",s=a+"#"+i,l=n?" "+n:"",u="ae-svg-icon"+l;return r.default.createElement("svg",{className:u,height:"18",width:"18"},r.default.createElement("use",{href:s}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(0),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var s=o.default.createContext({});s.toProps=function(e){var t=o.default.forwardRef((function(t,n){return o.default.createElement(s.Consumer,null,(function(r){return o.default.createElement(e,i({},t,{context:r,ref:n}))}))}));return t.key=e.key,t},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,i,r;a(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n=i,i.execCommand=function(e){var t=i.context.editor.get("nativeEditor");t.execCommand(i.props.command,e),t.fire("actionPerformed",i)},r=n,s(i,r)}return l(t,e),t}(e),t.contextType=r.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(5),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"getStateClasses",value:function(){var e="";return o.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),e}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isBoolean:function(e){return"boolean"===typeof e},isFunction:function(e){return"function"===typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"===typeof e&&isFinite(e)},isObject:function(e){var t="undefined"===typeof e?"undefined":i(e);return e&&("object"===t||r.isFunction(e))},isString:function(e){return"string"===typeof e},mix:function(e,t){var n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&(e[i]=t[i])},toInt:function(e){return parseInt(e,10)}};t.default=r},function(e,t,n){"use strict";function i(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}}i(),e.exports=n(48)},function(e,t,n){e.exports=n(54)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=n(2),a=u(o),s=n(5),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),i(t,[{key:"componentWillMount",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.props.style;if(l.default.isString(e)){var n=e.split("."),i=this.context.editor.get("nativeEditor").config,o=n.shift();while(o&&l.default.isObject(i)&&l.default.isObject(i[o]))i=i[o],o=n.shift();l.default.isObject(i)&&(e=i)}this._style=new CKEDITOR.style(e)}},{key:"componentWillUnmount",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this._style=null}},{key:"getStyle",value:function(){return this._style}},{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}}]),t}(e),t.contextType=a.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"isActive",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.getCommand(this.props.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}}]),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=n(6),a=u(o),s=n(5),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=0,p=1,m=-1,g=0,E=1,v=2;t.default=function(e){return function(e){function t(){var e,n,i,r;c(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i.focus=function(e){if((!e||i._isValidTarget(e.target))&&i._descendants&&i._descendants.length){var t=i._descendants[i._activeDescendant];document.activeElement===t||i.props.focusFirstChild||-1===i._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},i.handleKey=function(e){if(i._isValidTarget(e.target)&&i._descendants){var t=i._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),t.type===E&&i._moveFocus(t.direction),t.type===v&&i.props.onDismiss(t.direction))}},r=n,d(i,r)}return f(t,e),i(t,[{key:"componentDidMount",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this._refresh()}},{key:"componentDidUpdate",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this),this._refresh()}},{key:"moveFocus",value:function(e){e=l.default.isNumber(e)?e:0,this._moveFocus(e)}},{key:"_getFocusAction",value:function(e){var t={type:g};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=E);var i=this._getFocusDismissAction(e,n);i.dismiss&&(t.direction=i.direction,t.type=v)}return t}},{key:"_getFocusDismissAction",value:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=p),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=m),n.dismiss||this.props.circular||!t||(n.dismiss=t===m&&0===this._activeDescendant||t===p&&this._activeDescendant===this._descendants.length-1)),n}},{key:"_getFocusMoveDirection",value:function(e){var t=h;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=p),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=m),e.shifKey&&(t*=-1),t}},{key:"_isValidKey",value:function(e,t){return l.default.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"_isValidTarget",value:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t}},{key:"_moveFocus",value:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),n=this._descendants[this._activeDescendant],n.setAttribute("tabIndex",0),n.focus()}},{key:"_refresh",value:function(){var e=this,t=a.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),i=[];this._descendants=[],Array.prototype.slice.call(n).forEach((function(t){var n=t.getAttribute("data-tabindex");n?i.push(t):e._descendants.push(t)})),i=i.sort((function(e,t){return l.default.toInt(e.getAttribute("data-tabindex"))>l.default.toInt(t.getAttribute("data-tabindex"))})),this._descendants=i.concat(this._descendants),this._activeDescendant=0,this._descendants.some((function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0}))}}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=n(2),a=u(o),s=n(5),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),i(t,[{key:"componentWillMount",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillMount",this).call(this);var e=this.context.editor.get("nativeEditor"),n=this.props.keystroke,i="keystroke:"+n.name,o=e.getCommand(i);o||(o=new CKEDITOR.command(e,{exec:function(e){var t=n.fn;l.default.isString(t)?this[t].call(this,e):l.default.isFunction(t)&&t.call(this,e)}.bind(this)}),e.addCommand(i,o)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[n.keys],e.setKeystroke(n.keys,i)}},{key:"componentWillUnmount",value:function(){l.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.context.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}}]),t}(e),t.contextType=a.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=l(r),a=n(10),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,tabIndex:"0"},o.default.createElement("ul",{className:"ae-listbox",role:"listbox"},this.props.children))}}]),t}(o.default.Component);f.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},f.key="dropdown",t.default=(0,s.default)(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(10),s=c(a),l=n(29),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._ref=o.default.createRef(),n}return h(t,e),i(t,[{key:"componentDidMount",value:function(){this._ref.current.focus()}},{key:"render",value:function(){return o.default.createElement("div",{className:"ae-arrow-box ae-arrow-box-top-left ae-dropdown",onFocus:this.focus,onKeyDown:this.handleKey,ref:this._ref,tabIndex:"0"},o.default.createElement("ul",{className:"ae-listbox",id:this.props.listId,role:"listbox"},this._renderActions(this.props.commands)))}},{key:"_renderActions",value:function(e){var t=void 0;return e&&e.length&&(t=e.map((function(e){return o.default.createElement("li",{key:e.command,role:"option"},o.default.createElement(u.default,{command:e.command,description:"string"===typeof e.label?e.label:e.label(),icon:e.icon}))}))),t}}]),t}(o.default.Component);p.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},p.key="buttonCommandsList",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBridgeButton=t.regexBasePath=t.loadLanguageResources=t.implementEventTarget=t.getUrl=t.getButtons=t.getBasePath=t.editable=t.Toolbars=t.Selections=t.SelectionTest=t.SelectionSetPosition=t.SelectionGetArrowBoxClasses=t.OOP=t.Lang=t.Core=t.Compat=t.Buttons=t.Base=t.Attribute=void 0;var i=n(46),r=k(i),o=n(51),a=R(o),s=n(103),l=k(s),u=n(117),c=R(u),d=n(40),f=R(d),h=n(5),p=R(h),m=n(22),g=R(m),E=n(41),v=R(E),y=n(42),b=R(y),T=n(23),C=R(T),O=n(43),I=R(O),_=n(120),D=R(_);function R(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n(44);var w={},K=function(e,t){return t=t||{},t.srcNode=e,AlloyEditor.implementEventTarget(),new D.default(t)},S=function(){var e=window.ALLOYEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src.match(AlloyEditor.regexBasePath);if(i){e=i[1];break}}if(-1===e.indexOf(":/")&&"//"!==e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^/]*/)[0]+e:location.href.match(/^[^?]*\/(?:)/)[0]+e),!e)throw new Error('The AlloyEditor installation path could not be automatically detected. Please set the global variable "ALLOYEDITOR_BASEPATH" before creating editor instances.');return e},x=function(e){if(AlloyEditor.implementEventTarget(),p.default.isFunction(e)&&(AlloyEditor.Strings?setTimeout(e,0):AlloyEditor.once("languageResourcesLoaded",(function(){setTimeout(e,0)}))),!AlloyEditor._langResourceRequested){AlloyEditor._langResourceRequested=!0;var t=["af","ar","bg","bn","bs","ca","cs","cy","da","de","el","en-au","en-ca","en-gb","en","eo","es","et","eu","fa","fi","fo","fr-ca","fr","gl","gu","he","hi","hr","hu","id","is","it","ja","ka","km","ko","ku","lt","lv","mk","mn","ms","nb","nl","no","pl","pt-br","pt","ro","ru","si","sk","sl","sq","sr-latn","sr","sv","th","tr","tt","ug","uk","vi","zh-cn","zh"],n=navigator.language||navigator.userLanguage||"en",i=n.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),r=i[1],o=i[2];t.indexOf(r+"-"+o)>=0?r=r+"-"+o:-1===t.indexOf(r)&&(r="en"),CKEDITOR.scriptLoader.load(AlloyEditor.getUrl("lang/alloy-editor/"+r+".js"),(function(e){e&&AlloyEditor.fire("languageResourcesLoaded")}),this)}},N=function(e){var t=AlloyEditor.getBasePath();return-1===e.indexOf(":/")&&0!==e.indexOf("/")&&(e=t+e),CKEDITOR.timestamp&&"/"!==e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(e.indexOf("?")>=0?"&":"?")+"t="+CKEDITOR.timestamp),e},P=function(){AlloyEditor.fire||AlloyEditor.on||CKEDITOR.event.implementOn(AlloyEditor)},A=/(^|.*[\\/])(?:alloy-editor[^/]+|alloy-editor)\.js(?:\?.*|;.*)?$/i,L=function(e){return function(){return e.reduce((function(e,t){return t=w[t]||[t],e.concat(t)}),[])}},F=function(e,t){w[t]||(w[t]=[]),w[t].push(e)},B={extend:g.default};t.Attribute=f.default,t.Base=r,t.Buttons=a.default,t.Compat=l,t.Core=D.default,t.Lang=p.default,t.OOP=B,t.SelectionGetArrowBoxClasses=v.default,t.SelectionSetPosition=b.default,t.SelectionTest=C.default,t.Selections=I.default,t.Toolbars=c.default,t.editable=K,t.getBasePath=S,t.getButtons=L,t.getUrl=N,t.implementEventTarget=P,t.loadLanguageResources=x,t.regexBasePath=A,t.registerBridgeButton=F},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=s(i),o=n(5),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){var e,n,i,r;l(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return i=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n=i,i.applyStyle=function(){if(a.default.isFunction(i.isActive)&&a.default.isFunction(i.getStyle)){var e=i.context.editor.get("nativeEditor");e.getSelection().lock(),i.isActive()?e.removeStyle(i.getStyle()):e.applyStyle(i.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",i)}},r=n,u(i,r)}return c(t,e),t}(e),t.contextType=r.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=v(r),a=n(6),s=v(a),l=n(10),u=v(l),c=n(12),d=v(c),f=n(25),h=v(f),p=n(26),m=v(p),g=n(27),E=v(g);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){return y(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),i(t,[{key:"componentDidMount",value:function(){s.default.findDOMNode(this).focus()}},{key:"componentWillMount",value:function(){var e=[],t=[],n=[];this.props.styles.forEach((function(i){var r=new CKEDITOR.style(i.style);r.type===CKEDITOR.STYLE_BLOCK?e.push(i):r.type===CKEDITOR.STYLE_INLINE?t.push(i):r.type===CKEDITOR.STYLE_OBJECT&&n.push(i)})),this._blockStyles=e,this._inlineStyles=t,this._objectStyles=n}},{key:"render",value:function(){var e=void 0;return this.props.showRemoveStylesItem&&(e=o.default.createElement(m.default,{onDismiss:this.props.toggleDropdown})),o.default.createElement(d.default,this.props,e,o.default.createElement(h.default,{name:AlloyEditor.Strings.blockStyles,styles:this._blockStyles}),this._renderStylesItems(this._blockStyles),o.default.createElement(h.default,{name:AlloyEditor.Strings.inlineStyles,styles:this._inlineStyles}),this._renderStylesItems(this._inlineStyles),o.default.createElement(h.default,{name:AlloyEditor.Strings.objectStyles,styles:this._objectStyles}),this._renderStylesItems(this._objectStyles))}},{key:"_renderStylesItems",value:function(e){var t=this,n=void 0;return e&&e.length&&(n=e.map((function(e){return o.default.createElement("li",{key:e.name,role:"option"},o.default.createElement(E.default,{activeStyle:t.props.activeStyle,name:e.name,style:e.style,styleFn:e.styleFn}))}))),n}}]),t}(o.default.Component);C.defaultProps={circular:!1,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showRemoveStylesItem:!0},C.key="buttonStylesList",t.default=(0,u.default)(C)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=n(6),s=c(a),l=n(5),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mergeDropdownProps=function(e,t){return CKEDITOR.tools.merge(e,{expanded:n.state.itemDropdown===t,tabIndex:n.state.dropdownTrigger===t?0:-1,toggleDropdown:n.toggleDropdown.bind(n,t)})},n.toggleDropdown=function(e,t){n.setState({dropdownTrigger:e,itemDropdown:e!==n.state.itemDropdown?e:null},(function(){n.state.itemDropdown||(n.moveFocus?n.moveFocus(t):s.default.findDOMNode(n).focus())}))},n.state=i({},n.state,{dropdownTrigger:null,itemDropdown:null}),n}return h(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){u.default.isFunction(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({dropdownTrigger:null,itemDropdown:null})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=n(5),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){return function(e){function t(){var e,n,i,r;l(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i.requestExclusive=function(e){i.setState({itemExclusive:e})},r=n,u(i,r)}return c(t,e),i(t,[{key:"cancelExclusive",value:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})}},{key:"componentWillReceiveProps",value:function(e){a.default.isFunction(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this))&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,e),this.setState({itemExclusive:null})}},{key:"filterExclusive",value:function(e){var t=this;return e.filter((function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e}))}},{key:"mergeExclusiveProps",value:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})}}]),t}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=T(o),s=n(2),l=T(s),u=n(5),c=T(u),d=n(17),f=T(d),h=n(10),p=T(h),m=n(1),g=T(m),E=n(33),v=T(E),y=n(35),b=T(y);function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(e){C(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""}),n._focusLinkInput()},n._handleKeyDown=function(e){if(13!==e.keyCode&&27!==e.keyCode||e.preventDefault(),13===e.keyCode)n._updateLink();else if(40===e.keyCode)n.setState({autocompleteSelected:!0});else if(27===e.keyCode){var t=n.context.editor.get("nativeEditor");new CKEDITOR.Link(t).advanceSelection(),n.context.editor.get("nativeEditor").fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value}),n._focusLinkInput()},n._handleLinkTargetChange=function(e){n.setState({itemDropdown:null,linkTarget:e.target.getAttribute("data-value")}),n._focusLinkInput()},n._removeLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e),i=e.getSelection(),r=i.createBookmarks();t.remove(n.state.element,{advance:!0}),i.selectBookmarks(r),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._updateLink=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e,{appendProtocol:n.props.appendProtocol}),i={target:n.state.linkTarget||null},r={advance:!0};n.state.linkHref&&(n.state.element?(i.href=n.state.linkHref,t.update(i,n.state.element,r)):(n.state.linkTarget||(i={}),t.create(n.state.linkHref,i,r)),e.fire("actionPerformed",n)),n.props.cancelExclusive()},n.linkInput=a.default.createRef(),n.state=n._getInitialState(),n}return I(t,e),r(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&this._focusLinkInput()}},{key:"componentWillReceiveProps",value:function(){this.setState(this._getInitialState())}},{key:"render",value:function(){var e={allowedTargets:this.props.allowedTargets,editor:this.context.editor,handleLinkTargetChange:this._handleLinkTargetChange,selectedTarget:this.state.linkTarget||AlloyEditor.Strings.linkTargetDefault};e=this.mergeDropdownProps(e,b.default.key);var t=void 0;if(this.props.data){var n=this.props.data;if(!c.default.isFunction(n)){var r=this.props.data;n=function(){return r}}var o={autocompleteSelected:this.state.autocompleteSelected,data:n,editor:this.context.editor,handleLinkAutocompleteClick:this._handleLinkAutocompleteClick,onDismiss:this.props.toggleDropdown,setAutocompleteState:this._setAutocompleteState,term:this.state.linkHref};o=this.mergeDropdownProps(o,v.default.key),t=a.default.createElement(v.default,o)}var s=void 0;this.state.linkHref&&(s=a.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,title:AlloyEditor.Strings.clear},a.default.createElement(g.default,{symbol:"times-circle"})));var l={};return!CKEDITOR.env.ie&&AlloyEditor.Strings&&(l.placeholder=AlloyEditor.Strings.editLink),a.default.createElement("div",{className:"ae-container-edit-link"},a.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeLink,className:"ae-button",disabled:!this.state.element,onClick:this._removeLink,title:AlloyEditor.Strings.remove},a.default.createElement(g.default,{symbol:"chain-broken"})),a.default.createElement("div",{className:"ae-container-input xxl"},this.props.showTargetSelector&&a.default.createElement(b.default,e),a.default.createElement("div",{className:"ae-container-input"},a.default.createElement("input",i({className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown},l,{ref:this.linkInput,type:"text",value:this.state.linkHref})),t),s),a.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._updateLink,title:AlloyEditor.Strings.confirm},a.default.createElement(g.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_getInitialState",value:function(){var e=this.props.context.editor,t=this.props.defaultLinkTarget,n=new CKEDITOR.Link(e.get("nativeEditor")).getFromSelection(),i=n&&n.getAttribute("href")||"",r=n&&n.getAttribute("target")||t;return{autocompleteSelected:!1,element:n,initialLink:{href:i,target:r},linkHref:i,linkTarget:r}}},{key:"_focusLinkInput",value:function(){var e=this,t=function(){e.linkInput.current.focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}},{key:"_handleLinkAutocompleteClick",value:function(e){this.setState({itemDropdown:null,linkHref:e.target.getAttribute("data-value")}),this._focusLinkInput()}},{key:"_isValidState",value:function(){var e=this.state.linkHref&&(this.state.linkHref!==this.state.initialLink.href||this.state.linkTarget!==this.state.initialLink.target);return e}},{key:"_setAutocompleteState",value:function(e){this.setState({autocompleteSelected:e.selected})}}]),t}(a.default.Component);_.contextType=l.default,_.defaultProps={appendProtocol:!0,autocompleteUrl:"",circular:!0,customIndexStart:!0,defaultLinkTarget:"",descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]},showTargetSelector:!0},_.key="linkEdit",t.default=l.default.toProps((0,f.default)((0,p.default)(_)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"mergeButtonCfgProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.context.editor.get("nativeEditor"),n=t.config.buttonCfg||{};return CKEDITOR.tools.merge(e,n["linkEdit"])}}]),t}(e),t.contextType=o.default,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=h(o),s=n(6),l=h(s),u=n(2),c=h(u),d=n(5),f=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.default=function(e){var t,n;return n=t=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),r(t,[{key:"cancelAnimation",value:function(){this._animationFrameId&&window.cancelAnimationFrame(this._animationFrameId)}},{key:"getArrowBoxClasses",value:function(){var e="ae-arrow-box";return this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom",e}},{key:"getConstrainedPosition",value:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,i=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),i<0&&(i=0),{x:n,y:i}}},{key:"getInteractionPoint",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,i={x:e.nativeEvent.pageX,y:t.region.top},r=t.region.direction,o=t.region.endRect,a=t.region.startRect;o&&a&&a.top===o.top&&(r=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var s=void 0,l=void 0;return i.x&&i.y?(s=this._getXPoint(t,i.x),l=r===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(i.y,t.region.top):Math.max(i.y,this._getYPoint(t,n))):(s=t.region.left+t.region.width/2,l=r===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:r,x:s,y:l}}}},{key:"_getXPoint",value:function(e,t){var n=e.region,i=n.startRect?n.startRect.left:n.left,r=n.endRect?n.endRect.right:n.right,o=void 0;if(i<t&&r>t)o=t;else{var a=Math.abs(i-t),s=Math.abs(r-t);o=a<s?i:r}return o}},{key:"_getYPoint",value:function(e,t){var n=0;if(e&&t){var i=new CKEDITOR.dom.element(t.target);n=i.$&&"auto"===i.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}},{key:"getWidgetXYPoint",value:function(e,t,n){var i=l.default.findDOMNode(this),r=this.props.gutter;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-r.left-i.offsetWidth/2,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+r.top:t-i.offsetHeight-r.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+r.left+i.offsetHeight/2:e-3*i.offsetHeight/2-r.left,t=t-r.top-i.offsetHeight/2),e<0&&(e=0),t<0&&(t=0),[e,t]}},{key:"isVisible",value:function(){var e=l.default.findDOMNode(this);if(e){var t=new CKEDITOR.dom.element(e);return t.hasClass("alloy-editor-visible")}return!1}},{key:"moveToPoint",value:function(e,t){var n=new CKEDITOR.dom.element(l.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animationFrameId=window.requestAnimationFrame((function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout((function(){n.setStyles({pointerEvents:""})}),150)}))}},{key:"show",value:function(){var e=l.default.findDOMNode(this),t=this.context.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var i=this.getInteractionPoint();if(i){var r=new CKEDITOR.dom.element(e),o=void 0,a=void 0,s=void 0,u=void 0;if(o=s=parseFloat(r.getStyle("left")),a=u=parseFloat(r.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:o,top:a,width:parseFloat(e.offsetWidth)});o=c.x,a=c.y}u=i.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([s,u],[o,a])}}}},{key:"updatePosition",value:function(){var e=this.getInteractionPoint(),t=l.default.findDOMNode(this);if(e&&t){var n=this.context.editor.get("uiNode")||document.body,i=getComputedStyle(n),r=parseInt(i.getPropertyValue("margin-left"),10),o=parseInt(i.getPropertyValue("margin-right"),10),a=r+n.clientWidth+o,s="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=s,u[0]<0&&(u[0]=0),u[0]>a-t.offsetWidth&&(u[0]=a-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}}},{key:"getToolbarButtonGroups",value:function(e,t){var n=this;return f.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce((function(i,r){return Array.isArray(r)?(i.push(n.getToolbarButtons(r,t)),i):n.getToolbarButtons(e,t)}),[])}},{key:"getToolbarButtons",value:function(e,t){var n={},i=this.context.editor.get("nativeEditor"),r=i.config.buttonCfg||{};f.default.isFunction(e)&&(e=e.call(this)||[]);var o=this.filterExclusive(e.filter((function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])})).map((function(e){return f.default.isString(e)?(n[e]=r[e],e=AlloyEditor.Buttons[e]):f.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(r[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e}))).map((function(e,i){var r=this.mergeExclusiveProps({editor:this.context.editor,key:"separator"!==e.key?e.key:e.key+"-"+i,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return r=this.mergeDropdownProps(r,e.key),t&&(r=CKEDITOR.tools.merge(r,t)),r=CKEDITOR.tools.merge(r,n[e.key]),a.default.createElement(e,r)}),this);return o}}]),t}(e),t.contextType=c.default,t.defaultProps=i({},e.defaultProps,{gutter:{left:0,top:10},constrainToViewport:!0}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n,i){if(!t||!e)throw new Error("extend failed, verify dependencies");var o=t.prototype,a=Object.create(o);return e.prototype=a,a.constructor=e,e.superclass=o,t!==Object&&o.constructor===Object.prototype.constructor&&(o.constructor=t),n&&r.default.mix(a,n),i&&r.default.mix(e,i),e};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return t.getText().length===e.endOffset||t.equals(e.startContainer)&&t.equals(e.endContainer)&&e.startOffset===e.endOffset&&1===e.endOffset},r=function(e){var t=e.data.selectionData;return!(!t.element||"ae_embed"!==t.element.getAttribute("data-widget"))},o=function(e){var t=e.data.selectionData;return!(!t.element||"embedurl"!==t.element.getAttribute("data-widget"))},a=function(e){var t=["h1","h2","h3","h4","h5","h6"],n=e.editor.get("nativeEditor"),i=e.data.selectionData,r=n.isSelectionEmpty();return!(i.element||!i.region||r||n.getSelection().getCommonAncestor().isReadOnly()||!n.elementPath().contains(t))},s=function(e){var t=e.editor.get("nativeEditor"),n=t.getSelection(),r=n?n.getRanges()[0]:null;if(!r)return null;var o=e.data.selectionData,a=new CKEDITOR.Link(t).getFromSelection(),s=t.isSelectionEmpty(),l=!o.element||"img"!==o.element.getName();return!(!(s&&l&&a&&a.getText().length!==r.endOffset&&a)||a.isReadOnly()||i(r,a))},l=function(e){var t=e.data.selectionData,n=t.element,i=!!n&&!!n.findOne("img"),r=!!n&&"img"===n.getName();return!(!n||!i&&!r)},u=function(e){var t=e.editor.get("nativeEditor"),n=t.isSelectionEmpty(),i=e.data.selectionData;return!(i.element||!i.region||n||t.getSelection().getCommonAncestor().isReadOnly())},c=function(e){var t=e.editor.get("nativeEditor"),n=new CKEDITOR.Table(t),i=n.getFromSelection();return!(!i||!n.isEditable(i))},d={embed:r,embedUrl:o,header:a,image:l,link:s,table:c,text:u};t.default=d},function(e,t,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}e.exports=s()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]),n)r.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var d=0;d<s.length;d++)o.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return this.props.styles&&this.props.styles.length?o.default.createElement("span",{className:"ae-list-header"},this.props.name):null}}]),t}(o.default.Component);c.key="buttonStylesListHeader",t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=l(r),a=n(2),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){var e,n,i,r;u(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._removeStyles=function(){var e=i.context.editor.get("nativeEditor");e.execCommand("removeFormat"),i.props.removeBlocks.forEach((function(t){var n=new CKEDITOR.style({element:t});e.removeStyle(n)})),e.fire("actionPerformed",i)},r=n,c(i,r)}return d(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("li",{role:"option"},o.default.createElement("button",{className:"ae-toolbar-element",onClick:this._removeStyles,tabIndex:this.props.tabIndex},AlloyEditor.Strings.normal))}}]),t}(o.default.Component);f.contextType=s.default,f.defaultProps={removeBlocks:["h1","h2","h3","h4","h5","h6","pre"]},f.key="buttonStylesListItemRemove",t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(15),u=f(l),c=n(8),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){var e,n,i,r;h(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._onClick=function(){i.props.styleFn?i.props.styleFn():(i.context.editor.get("nativeEditor").execCommand("removeFormat"),i.applyStyle())},r=n,p(i,r)}return m(t,e),i(t,[{key:"componentWillMount",value:function(){var e={element:"span",styles:{margin:0}};e=CKEDITOR.tools.merge(e,this.props.style),this._preview=new CKEDITOR.style(e).buildPreview(this.props.name)}},{key:"render",value:function(){var e=this.props.name===this.props.activeStyle?"ae-toolbar-element active":"ae-toolbar-element";return o.default.createElement("button",{className:e,dangerouslySetInnerHTML:{__html:this._preview},onClick:this._onClick,tabIndex:this.props.tabIndex})}}]),t}(o.default.Component);g.contextType=s.default,g.key="buttonStylesListItem",t.default=(0,u.default)((0,d.default)(g))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=l(r),a=n(2),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.takePhoto=function(){var e=n._videoContainerRef.current,t=n._canvasContainerRef.current,i=t.getContext("2d"),r=n._videoHeight,o=n.props.videoWidth;if(o&&r){t.width=o,t.height=r,i.drawImage(e,0,0,o,r);var a=t.toDataURL("image/png"),s=CKEDITOR.dom.element.createFromHtml('<img src="'+a+'">'),l=n.context.editor.get("nativeEditor");l.insertElement(s),n.props.cancelExclusive(),l.fire("actionPerformed",n),l.fire("imageCameraAdd",s)}},n._handleStreamError=function(e){window.alert("An error occurred! "+e)},n._handleStreamSuccess=function(e){var t=n._videoContainerRef.current,i=n._canvasContainerRef.current;t.addEventListener("canplay",(function(){var e=t.videoHeight/(t.videoWidth/n.props.videoWidth);isNaN(e)&&(e=n.props.videoWidth/(4/3)),t.setAttribute("width",n.props.videoWidth),t.setAttribute("height",e),i.setAttribute("width",n.props.videoWidth),i.setAttribute("height",e),n._videoHeight=e}),!1),n._stream=e,navigator.mozGetUserMedia?t.mozSrcObject=e:t.srcObject=e,t.play(),n._buttonTakePhotoRef.current.disabled=!1},n._buttonTakePhotoRef=o.default.createRef(),n._canvasContainerRef=o.default.createRef(),n._videoContainerRef=o.default.createRef(),n}return d(t,e),i(t,[{key:"componentDidMount",value:function(){this._buttonTakePhotoRef.current.focus()}},{key:"componentWillUnmount",value:function(){this._stream&&(this._stream.stop?this._stream.stop():this._stream.getVideoTracks&&this._stream.getVideoTracks().forEach((function(e){e.stop()})),this._stream=null)}},{key:"render",value:function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e.call(navigator,{video:!0,audio:!1},this._handleStreamSuccess,this._handleStreamError),o.default.createElement("div",{className:"ae-camera"},o.default.createElement("video",{ref:this._videoContainerRef},"Video stream not available."),o.default.createElement("button",{className:"ae-camera-shoot",onClick:this.takePhoto,ref:this._buttonTakePhotoRef},"Take photo"),o.default.createElement("canvas",{className:"ae-camera-canvas",ref:this._canvasContainerRef}))}}]),t}(o.default.Component);f.contextType=s.default,f.defaultProps={videoWidth:320},f.key="cameraImage",t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=l(r),a=n(3),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":this.props.description,className:this._getClassName(),onClick:this.execCommand,tabIndex:this.props.tabIndex},this.props.description)}},{key:"_getClassName",value:function(){var e="ae-container ae-toolbar-element";return e}}]),t}(o.default.Component);f.key="buttonCommandListItem",t.default=(0,s.default)(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(2),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=13,m=27,g=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearLink=function(){n.setState({linkHref:""})},n._embedLink=function(){var e=n.context.editor.get("nativeEditor");e.execCommand("embedUrl",{url:n.state.linkHref}),n.props.cancelExclusive()},n._focusLinkInput=function(){n.linkInput.current.focus()},n._handleKeyDown=function(e){if(e.keyCode!==p&&e.keyCode!==m||e.preventDefault(),e.keyCode===p)n._embedLink();else if(e.keyCode===m){var t=n.context.editor.get("nativeEditor");n.props.cancelExclusive(),t.fire("actionPerformed",n)}},n._handleLinkHrefChange=function(e){n.setState({linkHref:e.target.value})},n._removeEmbed=function(){var e=n.context.editor.get("nativeEditor"),t=n.state.element.getAscendant((function(e){return e.hasClass("cke_widget_wrapper")}));t.remove(),e.fire("actionPerformed",n)},n.linkInput=o.default.createRef(),n.state=n.getInitialState(),n}return h(t,e),i(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusLinkInput):setTimeout(this._focusLinkInput,0))}},{key:"componentWillReceiveProps",value:function(){this.setState(this.getInitialState())}},{key:"getInitialState",value:function(){var e=this.props.context.editor.get("nativeEditor"),t=void 0,n=e.getSelection();if(n){var i=n.getSelectedElement();i&&(t=i.findOne('[data-widget="ae_embed"]'))}var r=t?t.getAttribute("data-ae-embed-url"):"";return{element:t,initialLink:{href:r},linkHref:r}}},{key:"render",value:function(){var e={opacity:this.state.linkHref?1:0};return o.default.createElement("div",{className:"ae-container-edit-link"},o.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteEmbed,className:"ae-button","data-type":"button-embed-remove",disabled:!this.state.element,onClick:this._removeEmbed,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteEmbed},o.default.createElement(u.default,{className:"ae-icon-svg-trash",symbol:"trash"})),o.default.createElement("div",{className:"ae-container-input xxl"},o.default.createElement("input",{className:"ae-input",onChange:this._handleLinkHrefChange,onKeyDown:this._handleKeyDown,placeholder:AlloyEditor.Strings.editLink,ref:this.linkInput,type:"text",value:this.state.linkHref}),o.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-button-clear",onClick:this._clearLink,style:e,title:AlloyEditor.Strings.clear},o.default.createElement(u.default,{symbol:"times-clear"}))),o.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedLink,title:AlloyEditor.Strings.confirm},o.default.createElement(u.default,{className:"ae-icon-svg-check",symbol:"check"})))}},{key:"_isValidState",value:function(){var e=this.state.linkHref&&this.state.linkHref!==this.state.initialLink.href;return e}}]),t}(o.default.Component);g.contextType=s.default,g.key="embedEdit",t.default=s.default.toProps(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(6),s=f(a),l=n(2),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=13,E=27,v=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._embedVideoURL=function(){var e=n.context.editor.get("nativeEditor");e.execCommand("embedUrl",{type:"video",url:n.state.videoURL}),n.props.cancelExclusive()},n._focusVideoUrlInput=function(){s.default.findDOMNode(n.refs.linkInput).focus()},n._handleKeyDown=function(e){e.keyCode!==g&&e.keyCode!==E||e.preventDefault(),e.keyCode===g?n._embedVideoURL():e.keyCode===E&&n.props.cancelExclusive()},n._handleVideoURLChange=function(e){n.setState({videoURL:e.target.value})},n.state=n.getInitialState(),n}return m(t,e),i(t,[{key:"componentDidMount",value:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusVideoUrlInput):setTimeout(this._focusVideoUrlInput,0))}},{key:"componentWillReceiveProps",value:function(){var e=this.getInitialState();this.setState({all:void 0,keys:void 0,new:e,old:void 0})}},{key:"getInitialState",value:function(){var e=this.props.context.editor.get("nativeEditor"),t=void 0,n=e.getSelection();if(n){var i=n.getSelectedElement();i&&(t=i.findOne('[data-widget="videoembed"]'))}var r=t?t.getAttribute("data-embed-video-url"):"";return{element:t,initialEmbed:{videoURL:r},videoURL:r}}},{key:"render",value:function(){var e=AlloyEditor.Strings.pasteVideoLink,t={opacity:this.state.videoURL?1:0};return o.default.createElement("div",{className:"ae-container-embed-video-edit"},o.default.createElement("div",{className:"ae-container-input xxl"},o.default.createElement("input",{className:"ae-input",onChange:this._handleVideoURLChange,onKeyDown:this._handleKeyDown,placeholder:e,ref:"linkInput",type:"text",value:this.state.videoURL}),o.default.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-icon-remove",onClick:this._clearLink,style:t,title:AlloyEditor.Strings.clear})),o.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedVideoURL,title:AlloyEditor.Strings.confirm},o.default.createElement(d.default,{symbol:"check"})))}},{key:"_clearLink",value:function(){this.setState({videoURL:""})}},{key:"_isValidState",value:function(){var e=this.state.videoURL&&this.state.videoURL!==this.state.initialEmbed.videoURL;return e}}]),t}(o.default.Component);v.contextType=u.default,v.key="embedVideoEdit",t.default=u.default.toProps(v)},function(e,t,n){"use strict";function i(e,t){var n=window.FIT_IMAGE_MAX_WIDTH,i=window.FIT_IMAGE_MAX_HEIGHT;return new Promise((function(r,o){if(n&&i){var a=new Image;a.onload=function(){var o=a.width,s=a.height,l=o/n,u=s/i;if(l<=1&&u<=1)r(e);else{var c=l>u?l:u;o/=c,s/=c}var d=document.createElement("canvas");d.width=o,d.height=s;var f=d.getContext("2d");f.drawImage(a,0,0,o,s);var h=d.toDataURL(t);r(h)},a.src=e}else r(e)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.fitImage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(10),s=c(a),l=n(12),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={items:[]},n}return h(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.term&&e.term===this.props.term||(clearTimeout(this._timeout),e.term?this._timeout=setTimeout(this._updateItems,this.props.delay):this.setState({items:[]})),e.autocompleteSelected&&(setTimeout(this.focus,0),this.props.setAutocompleteState({selected:!1}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timeout)}},{key:"render",value:function(){return this.props.expanded&&this.state.items.length?o.default.createElement(u.default,null,this._renderAutocompleteItems(this.state.items)):null}},{key:"shouldComponentUpdate",value:function(e,t){return e.expanded!==this.props.expanded||e.term!==this.props.term||t.items!==this.state.items}},{key:"_renderAutocompleteItems",value:function(e){var t=this;e=e||[];var n=this.props.handleLinkAutocompleteClick;return e.map((function(e){var i=t.props.term===e.url?"ae-toolbar-element active":"ae-toolbar-element";return o.default.createElement("li",{key:e.url,role:"option"},o.default.createElement("button",{className:i,"data-value":e.url,onClick:n},e.title))}))}},{key:"_updateItems",value:function(){var e=this;if(this.props.term){var t=Promise.resolve(this.props.data(this.props.term));t.then((function(t){t.length&&!e.props.expanded&&e.props.toggleDropdown(),e.setState({items:t})}))}}}]),t}(o.default.Component);p.defaultProps={circular:!1,data:[],delay:100,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},p.key="buttonLinkAutocompleteList",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=m(o),s=n(2),l=m(s),u=n(5),c=m(u),d=n(1),f=m(d),h=n(19),p=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(e){g(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._browseClick=function(){var e=n.context.editor.get("nativeEditor"),t=e.config.documentBrowseLinkUrl,i=e.config.documentBrowseLinkCallback,r=n.linkEditButtonRef.current?n.linkEditButtonRef.current.state.linkTarget:"",o=function(e){n._updateLink(e.value,r,e.title)};c.default.isFunction(i)&&i.apply(null,[e,t,o])},n._updateLink=function(e,t,i){var r=n.context.editor.get("nativeEditor"),o=new CKEDITOR.Link(r,{appendProtocol:!1}),a={target:t},s={advance:!0};e&&(r.plugins&&r.plugins.creole&&!i&&(e=location.origin+e),n.state.element?(a.href=e,o.update(a,n.state.element,s)):o.create(e,a,s),r.fire("actionPerformed",n))};var i=new CKEDITOR.Link(n.props.context.editor.get("nativeEditor")).getFromSelection(),r=i?i.getAttribute("href"):"";return n.linkEditButtonRef=a.default.createRef(),n.state={element:i,linkHref:r},n}return v(t,e),r(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"ae-container-link-edit-browse"},a.default.createElement(p.default,i({ref:this.linkEditButtonRef},this.props)),a.default.createElement("button",{"aria-label":"Browse",className:"ae-button",onClick:this._browseClick,title:"browse"},a.default.createElement(f.default,{symbol:"folder"})))}}]),t}(a.default.Component);y.contextType=l.default,y.key="linkEditBrowse",t.default=l.default.toProps(y)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(1),s=c(a),l=n(36),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){var e=this.props.handleLinkTargetChange,t=this.props.allowedTargets;return o.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-medium ae-container-edit-link-target ae-has-dropdown",tabIndex:"0"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":this.props.selectedTarget,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:this.props.selectedTarget},o.default.createElement("div",{className:"ae-container"},o.default.createElement("span",{className:"ae-container-dropdown-selected-item"},this.props.selectedTarget),o.default.createElement(s.default,{symbol:"caret-bottom"}))),this.props.expanded&&o.default.createElement(u.default,{allowedLinkTargets:t,handleLinkTargetChange:e,onDismiss:this.props.toggleDropdown,selectedTarget:this.props.selectedTarget}))}},{key:"shouldComponentUpdate",value:function(e){return e.expanded!==this.props.expanded||e.selectedTarget!==this.props.selectedTarget}}]),t}(o.default.Component);p.key="linkTargetEdit",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(6),s=f(a),l=n(10),u=f(l),c=n(12),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"componentDidMount",value:function(){s.default.findDOMNode(this).focus()}},{key:"render",value:function(){var e=this._renderListTargets();return o.default.createElement(d.default,this.props,e)}},{key:"_getAllowedTargetItems",value:function(){return this.props.allowedLinkTargets||[{label:AlloyEditor.Strings.linkTargetDefault,value:""},{label:AlloyEditor.Strings.linkTargetSelf,value:"_self"},{label:AlloyEditor.Strings.linkTargetBlank,value:"_blank"},{label:AlloyEditor.Strings.linkTargetParent,value:"_parent"},{label:AlloyEditor.Strings.linkTargetTop,value:"_top"}]}},{key:"_renderListTargets",value:function(){var e=this,t=this._getAllowedTargetItems(),n=this.props.handleLinkTargetChange;return t=t.map((function(t){var i=e.props.selectedTarget===t.value?"ae-toolbar-element active":"ae-toolbar-element";return o.default.createElement("li",{key:t.value,role:"option"},o.default.createElement("button",{className:i,"data-value":t.value,onClick:n},t.label))})),t}}]),t}(o.default.Component);g.defaultProps={circular:!0,descendants:".ae-toolbar-element",keys:{dismiss:[27],dismissNext:[39],dismissPrev:[37],next:[40],prev:[38]}},g.key="targetList",t.default=(0,u.default)(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=v(r),a=n(2),s=v(a),l=n(11),u=v(l),c=n(20),d=v(c),f=n(4),h=v(f),p=n(1),m=v(p),g=n(19),E=v(g);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){var e,n,i,r;y(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._requestExclusive=function(){i.props.requestExclusive(t.key)},r=n,b(i,r)}return T(t,e),i(t,[{key:"isActive",value:function(){return null!==new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection()}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();if(this.props.renderExclusive){var t=this.mergeButtonCfgProps();return o.default.createElement(E.default,t)}return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:e,"data-type":"button-link",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},o.default.createElement(m.default,{symbol:"link"}))}}]),t}(o.default.Component);C.contextType=s.default,C.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"link"}},C.key="link",t.default=(0,d.default)((0,u.default)((0,h.default)(C)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(2),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=13,m=27,g=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._createTable=function(){var e=n.context.editor.get("nativeEditor"),t=new CKEDITOR.Table(e);t.create({attrs:n.props.tableAttributes,cols:n.state.cols,rows:n.state.rows}),n.props.cancelExclusive(),e.fire("actionPerformed",n)},n._handleChange=function(e,t){var i={};i[e]=t.target.value,n.setState(i)},n._handleKeyDown=function(e){e.keyCode!==p&&e.keyCode!==m||e.preventDefault(),e.keyCode===p?n._createTable():e.keyCode===m&&n.props.cancelExclusive()},n.rowsRef=o.default.createRef(),n.colsRef=o.default.createRef(),n.state={cols:3,rows:3},n}return h(t,e),i(t,[{key:"componentDidMount",value:function(){this.rowsRef.current.focus()}},{key:"render",value:function(){var e=Date.now(),t=e+"rows",n=e+"cols";return o.default.createElement("div",{className:"ae-container-edit-table"},o.default.createElement("label",{htmlFor:t},AlloyEditor.Strings.rows),o.default.createElement("div",{className:"ae-container-input small"},o.default.createElement("input",{className:"ae-input",id:t,min:"1",onChange:this._handleChange.bind(this,"rows"),onKeyDown:this._handleKeyDown,placeholder:"Rows",ref:this.rowsRef,type:"number",value:this.state.rows})),o.default.createElement("label",{htmlFor:n},AlloyEditor.Strings.columns),o.default.createElement("div",{className:"ae-container-input small"},o.default.createElement("input",{className:"ae-input",id:n,min:"1",onChange:this._handleChange.bind(this,"cols"),onKeyDown:this._handleKeyDown,placeholder:"Colums",ref:this.colsRef,type:"number",value:this.state.cols})),o.default.createElement("button",{"aria-label":"Confirm",className:"ae-button",onClick:this._createTable},o.default.createElement(u.default,{symbol:"check"})))}}]),t}(o.default.Component);g.contextType=s.default,g.defaultProps={tableAttributes:{border:1,cellPadding:0,cellSpacing:0,style:"width: 100%"}},g.key="tableEdit",t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{editorEvent:r.default.object},getInteractionPoint:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null;if(e){var t=e.selectionData,n=e.nativeEvent,i={x:e.nativeEvent.pageX,y:t.region.top},r=t.region.direction,o=t.region.endRect,a=t.region.startRect;o&&a&&a.top===o.top&&(r=CKEDITOR.SELECTION_BOTTOM_TO_TOP);var s=void 0,l=void 0;return i.x&&i.y?(s=this._getXPoint(t,i.x),l=r===CKEDITOR.SELECTION_BOTTOM_TO_TOP?Math.min(i.y,t.region.top):Math.max(i.y,this._getYPoint(t,n))):(s=t.region.left+t.region.width/2,l=r===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this._getYPoint(t,n):t.region.top),{direction:r,x:s,y:l}}},_getXPoint:function(e,t){var n=e.region,i=n.startRect?n.startRect.left:n.left,r=n.endRect?n.endRect.right:n.right,o=void 0;if(i<t&&r>t)o=t;else{var a=Math.abs(i-t),s=Math.abs(r-t);o=a<s?i:r}return o},_getYPoint:function(e,t){var n=0;if(e&&t){var i=new CKEDITOR.dom.element(t.target);n=i.$&&"auto"===i.getStyle("overflow")?t.target.offsetTop+t.target.offsetHeight:e.region.bottom}return n}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e){this.__config__=e||{},this.__ATTRS__={}}s.prototype={constructor:s,get:function(e){var t=this.constructor.ATTRS[e];if(t){this._isInitialized(e)||this._init(e);var n=this.__ATTRS__[e];return t.getter&&(n=this._callStringOrFunction(t.getter,n)),n}},set:function(e,t){var n=this.constructor.ATTRS[e];n&&(this._isInitialized(e)||this._init(e),n.readOnly||n.writeOnce&&this._isInitialized(e)||n.validator&&!this._callStringOrFunction(n.validator,t)||(n.setter&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t))},_callStringOrFunction:function(e,t){var n=null;return r.default.isArray(t)||(t=[t]),r.default.isString(e)&&r.default.isFunction(this[e])?n=this[e].apply(this,a(t)):r.default.isFunction(e)&&(n=e.apply(this,t)),n},_init:function(e){var t=void 0,n=this.constructor.ATTRS[e],i=Object.prototype.hasOwnProperty.call(n,"value"),r=Object.prototype.hasOwnProperty.call(this.__config__,e);if(n.valueFn)t=this._callStringOrFunction(n.valueFn,t),this.__ATTRS__[e]=t;else if(n.readOnly)t=n.value;else if(n.writeOnce)if(r)t=this.__config__[e];else{if(!i)return;t=n.value}else r?t=this.__config__[e]:i&&(t=n.value);if(n.validator&&r&&!this._callStringOrFunction(n.validator,t)){if(!i)return;t=n.value}n.setter&&r&&(t=this._callStringOrFunction(n.setter,t)),this.__ATTRS__[e]=t},_isInitialized:function(e){return Object.prototype.hasOwnProperty.call(this.__ATTRS__,e)}},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return"ae-arrow-box ae-arrow-box-bottom"},r={table:i};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={left:0,top:0},s=function(e,t){var n=r.default.findDOMNode(e),i=e.context.editor.get("nativeEditor"),o=i.config.uiNode||document.body,s=getComputedStyle(o),l=parseInt(s.getPropertyValue("margin-left"),10),u=parseInt(s.getPropertyValue("margin-right"),10),c=l+o.clientWidth+u,d=n.offsetWidth/2,f=new CKEDITOR.dom.window(window).getScrollPosition(),h=e.props.gutter||a,p=e.getWidgetXYPoint(t.left+t.width/2-f.x,t.top+f.y,CKEDITOR.SELECTION_BOTTOM_TO_TOP),m=[t.left+t.width/2-d-f.x,t.top-n.offsetHeight+f.y-h.top];m[0]<0?m[0]=0:m[0]>c-n.offsetWidth&&(m[0]=c-n.offsetWidth),e.moveToPoint(p,m)},l=function(e){var t=e.selectionData?e.selectionData:e.editorEvent?e.editorEvent.data.selectionData:null;if(t&&t.element){var n=e.editor.get("nativeEditor"),i=n.config.uiNode,r=i?i.scrollTop:0,o=t.element.getClientRect();return o.top+=r,s(this,o),!0}},u=function(e){var t=e.editor.get("nativeEditor"),n=t.config.uiNode,i=n?n.scrollTop:0,r=new CKEDITOR.Table(t).getFromSelection(),o=r.getClientRect();return o.top+=i,s(this,o),!0},c={image:l,table:u};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41),r=u(i),o=n(42),a=u(o),s=n(23),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var c=[{name:"embed",buttons:["embedRemove","embedEdit"],test:l.default.embed},{name:"embedUrl",buttons:["embedVideo","embedVideoEdit"],test:l.default.embedUrl},{name:"link",buttons:["linkEdit"],test:l.default.link},{name:"image",buttons:["imageLeft","imageCenter","imageRight","removeImage"],setPosition:a.default.image,test:l.default.image},{name:"text",buttons:{full:[["Font","FontSize","separator","bold","italic","underline","strike","separator","link"],["paragraphAlign","separator","ul","ol","separator","h1","h2","separator","indentBlock","outdentBlock","separator","TextColor","BGColor","separator","code","quote","separator","removeFormat"]],simple:["styles","bold","italic","underline","link"]},test:l.default.text},{name:"table",buttons:["tableHeading","tableRow","tableColumn","tableCell","tableRemove"],getArrowBoxClasses:r.default.table,setPosition:a.default.table,test:l.default.table}];t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedurl=void 0,n(129),n(131),n(132),n(133),n(134),n(135),n(136);var i=n(138),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}n(141),n(142),n(143),n(144),n(145),n(146),t.embedurl=r.default},function(e,t){(function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,t={timestamp:"J1MJ",version:"4.11.2",revision:"7f3189e83",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var t=window.CKEDITOR_BASEPATH||"";if(!t)for(var n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var r=n[i].src.match(e);if(r){t=r[1];break}}if(-1==t.indexOf(":/")&&"//"!=t.slice(0,2)&&(t=0===t.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+t:location.href.match(/^[^\?]*\/(?:)/)[0]+t),!t)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return t}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function e(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",e,!1),t()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),t())}catch(e){}}function t(){for(var e;e=n.shift();)e()}var n=[];return function(t){function i(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}e()}if(n.push(t),"complete"===document.readyState&&setTimeout(e,1),1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e),t=!1;try{t=!window.frameElement}catch(e){}document.documentElement.doScroll&&t&&i()}}}()},n=window.CKEDITOR_GETURL;if(n){var i=t.getUrl;t.getUrl=function(e){return n.call(t,e)||i.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,n=CKEDITOR.event.prototype;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function e(e){var i=t(this);return i[e]||(i[e]=new n(e))}var t=function(e){return e=e.getPrivate&&e.getPrivate()||e._||(e._={}),e.events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(t,n){var i=e.call(this,t);CKEDITOR.tools.extend(i,n,!0)},on:function(t,n,i,r,o){function a(e,o,a,l){return e={name:t,sender:this,editor:e,data:o,listenerData:r,stop:a,cancel:l,removeListener:s},!1!==n.call(i,e)&&e.data}function s(){u.removeListener(t,n)}var l=e.call(this,t);if(0>l.getListenerIndex(n)){l=l.listeners,i||(i=this),isNaN(o)&&(o=10);var u=this;a.fn=n,a.priority=o;for(var c=l.length-1;0<=c;c--)if(l[c].priority<=o)return l.splice(c+1,0,a),{removeListener:s};l.unshift(a)}return{removeListener:s}},once:function(){var e=Array.prototype.slice.call(arguments),t=e[1];return e[1]=function(e){return e.removeListener(),t.apply(this,arguments)},this.on.apply(this,e)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:function(){var e=0,n=function(){e=1},i=0,r=function(){i=1};return function(o,a,s){var l=t(this)[o];o=e;var u=i;if(e=i=0,l){var c=l.listeners;if(c.length){c=c.slice(0);for(var d,f=0;f<c.length;f++){if(l.errorProof)try{d=c[f].call(this,s,a,n,r)}catch(e){}else d=c[f].call(this,s,a,n,r);if(!1===d?i=1:"undefined"!=typeof d&&(a=d),e||i)break}}}return a=!i&&("undefined"==typeof a||a),e=o,i=u,a}}(),fireOnce:function(e,n,i){return n=this.fire(e,n,i),delete t(this)[e],n},removeListener:function(e,n){var i=t(this)[e];if(i){var r=i.getListenerIndex(n);0<=r&&i.listeners.splice(r,1)}},removeAllListeners:function(){var e,n=t(this);for(e in n)delete n[e]},hasListeners:function(e){return(e=t(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/edge[ \/](\d+.?\d*)/),n=-1<e.indexOf("trident/");n=!(!t&&!n),n={ie:n,edge:!!t,webkit:!n&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie,n.webkit&&(-1<e.indexOf("chrome")?n.chrome=!0:n.safari=!0);var i=0;return n.ie&&(i=t?parseFloat(t[1]):n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==i,n.ie8Compat=8==i,n.ie7Compat=7==i,n.ie6Compat=7>i||n.quirks),n.gecko&&(t=e.match(/rv:([\d\.]+)/))&&(t=t[1].split("."),i=1e4*t[0]+100*(t[1]||0)+1*(t[2]||0)),n.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!(n.ie&&7>i)&&!(n.gecko&&4e4>i)&&!(n.webkit&&534>i),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<i,n.needsNbspFiller=n.ie&&11>i,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version)),n.air&&(n.cssClass+=" cke_browser_air"),n.iOS&&(n.cssClass+=" cke_browser_ios"),n.hidpi&&(n.cssClass+=" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady((function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout((function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()}),1e3*t))}))}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:t})},CKEDITOR.error=function(e,t){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:t})},CKEDITOR.on("log",(function(e){if(window.console&&window.console.log){var t=console[e.data.type]?e.data.type:"log",n=e.data.errorCode;(e=e.data.additionalData)?console[t]("[CKEDITOR] Error code: "+n+".",e):console[t]("[CKEDITOR] Error code: "+n+"."),console[t]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+n)}}),null,null,999),CKEDITOR.dom={},function(){function e(e,t,n){this._minInterval=e,this._context=n,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(t,n||{});var i=this;this.input=function(){function e(){i._lastOutput=(new Date).getTime(),i._scheduledTimer=0,i._call()}if(!i._scheduledTimer||!1!==i._reschedule()){var t=(new Date).getTime()-i._lastOutput;t<i._minInterval?i._scheduledTimer=setTimeout(e,i._minInterval-t):e()}}}function t(t,n,i){e.call(this,t,n,i),this._args=[];var r=this;this.input=CKEDITOR.tools.override(this.input,(function(e){return function(){r._args=Array.prototype.slice.call(arguments),e.call(this)}}))}var n=[],i=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",r=/&/g,o=/>/g,a=/</g,s=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"<",gt:">",amp:"&",quot:'"',nbsp:"",shy:""},c=function(e,t){return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1),10)):u[t]};CKEDITOR.on("reset",(function(){n=[]})),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},getIndex:function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e.nodeType||e.window===e)return e;for(n in t=new e.constructor,e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,n,i=arguments.length;"boolean"==typeof(t=arguments[i-1])?i--:"boolean"==typeof(t=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var r=1;r<i;r++){var o,a=arguments[r];for(o in a)!0!==t&&null!=e[o]||n&&!(o in n)||(e[o]=a[o])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?i+e+":"+t+";"+e+":"+t:(n={},n[e]=t,n[i+e]=t,n)},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t="undefined"!=typeof e.cssFloat?"cssFloat":"undefined"!=typeof e.styleFloat?"styleFloat":"float";return function(e){return"float"==e?t:e.replace(/-./g,(function(e){return e.substr(1).toUpperCase()}))}}(),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],i=0;i<e.length;i++)(t=e[i])&&(/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return n.join("")},htmlEncode:function(e){return void 0===e||null===e?"":String(e).replace(r,"&amp;").replace(o,"&gt;").replace(a,"&lt;")},htmlDecode:function(e){return e.replace(l,c)},htmlEncodeAttr:function(e){return CKEDITOR.tools.htmlEncode(e).replace(s,"&quot;")},htmlDecodeAttr:function(e){return CKEDITOR.tools.htmlDecode(e)},transformPlainTextToHtml:function(e,t){var n=t==CKEDITOR.ENTER_BR,i=this.htmlEncode(e.replace(/\r\n/g,"\n")),r=(i=i.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),t==CKEDITOR.ENTER_P?"p":"div");if(!n){var o=/\n{2}/g;if(o.test(i)){var a="<"+r+">",s="</"+r+">";i=a+i.replace(o,(function(){return s+a}))+s}}return i=i.replace(/\n/g,"<br>"),n||(i=i.replace(new RegExp("<br>(?=</"+r+">)"),(function(e){return CKEDITOR.tools.repeat(e,2)}))),i=i.replace(/^ | $/g,"&nbsp;"),i.replace(/(>|\s) /g,(function(e,t){return t+"&nbsp;"})).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var e=0;return function(){return++e}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var e="e",t=0;8>t;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,i,r){return r||(r=window),n||(n=r),r.setTimeout((function(){i?e.apply(n,[].concat(i)):e.apply(n)}),t||0)},throttle:function(e,t,n){return new this.buffers.throttle(e,t,n)},trim:function(){var e=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(e,"")}}(),ltrim:function(){var e=/^[ \t\n\r]+/g;return function(t){return t.replace(e,"")}}(),rtrim:function(){var e=/[ \t\n\r]+$/g;return function(t){return t.replace(e,"")}}(),indexOf:function(e,t){if("function"==typeof t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,i=e.privates||e._,r=e.proto;if(e=e.statics,!t&&(t=function(){n&&this.base.apply(this,arguments)}),i){var o=t;t=function(){var e,t=this._||(this._={});for(e in i){var n=i[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}o.apply(this,arguments)}}return n&&(t.prototype=this.prototypedCopy(n.prototype),t.prototype.constructor=t,t.base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),r&&this.extend(t.prototype,r,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,t){return n.push((function(){return e.apply(t||this,arguments)}))-1},removeFunction:function(e){n[e]=null},callFunction:function(e){var t=n[e];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var e,t=/^-?\d+\.?\d*px$/;return function(n){return e=CKEDITOR.tools.trim(n+"")+"px",t.test(e)?e:n||""}}(),convertToPx:function(){var e;return function(t){if(e||(e=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(e)),!/%$/.test(t)){var n=0>parseFloat(t);return n&&(t=t.replace("-","")),e.setStyle("width",t),t=e.$.clientWidth,n?-t:t}return t}}(),repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(e){return function(){var t=arguments,n=this;window.setTimeout((function(){e.apply(n,t)}),0)}},normalizeCssText:function(e,t){var n,i=[],r=CKEDITOR.tools.parseCssText(e,!0,t);for(n in r)i.push(n+":"+r[n]);return i.sort(),i.length?i.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,(function(e,t,n,i){for(e=[t,n,i],t=0;3>t;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")}))},normalizeHex:function(e){return e.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,(function(e,t,n,i){return e=t.toLowerCase(),3==e.length&&(e=e.split(""),e=[e[0],e[0],e[1],e[1],e[2],e[2]].join("")),"#"+e+i}))},parseCssText:function(e,t,n){var i={};return n&&(e=new CKEDITOR.dom.element("span").setAttribute("style",e).getAttribute("style")||""),e&&(e=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(e))),e&&";"!=e?(e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,r){t&&(n=n.toLowerCase(),"font-family"==n&&(r=r.replace(/\s*,\s*/g,",")),r=CKEDITOR.tools.trim(r)),i[n]=r})),i):i},writeCssText:function(e,t){var n,i=[];for(n in e)i.push(n+":"+e[n]);return t&&i.sort(),i.join("; ")},objectCompare:function(e,t,n){var i;if(!e&&!t)return!0;if(!e||!t)return!1;for(i in e)if(e[i]!=t[i])return!1;if(!n)for(i in t)if(e[i]!=t[i])return!1;return!0},objectKeys:function(e){var t,n=[];for(t in e)n.push(t);return n},convertArrayToObject:function(e,t){var n={};1==arguments.length&&(t=!0);for(var i=0,r=e.length;i<r;++i)n[e[i]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain,!e)break;document.domain=e}return!!e},eventsBuffer:function(e,t,n){return new this.buffers.event(e,t,n)},enableHtml5Elements:function(e,t){for(var n,i="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),r=i.length;r--;)n=e.createElement(i[r]),t&&e.appendChild(n)},checkIfAnyArrayItemMatches:function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(e,t){for(var n in e)if(n.match(t))return!0;return!1},keystrokeToString:function(e,t){var n=this.keystrokeToArray(e,t);return n.display=n.display.join("+"),n.aria=n.aria.join("+"),n},keystrokeToArray:function(e,t){var n=16711680&t,i=65535&t,r=CKEDITOR.env.mac,o=[],a=[];return n&CKEDITOR.CTRL&&(o.push(r?"":e[17]),a.push(r?e[224]:e[17])),n&CKEDITOR.ALT&&(o.push(r?"":e[18]),a.push(e[18])),n&CKEDITOR.SHIFT&&(o.push(r?"":e[16]),a.push(e[16])),i&&(e[i]?(o.push(e[i]),a.push(e[i])):(o.push(String.fromCharCode(i)),a.push(String.fromCharCode(i)))),{display:o,aria:a}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(e){e=e.toLowerCase();for(var t,n,i=document.cookie.split(";"),r=0;r<i.length;r++)if(t=i[r].split("="),n=decodeURIComponent(CKEDITOR.tools.trim(t[0]).toLowerCase()),n===e)return decodeURIComponent(1<t.length?t[1]:"");return null},setCookie:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/"},getCsrfToken:function(){var e=CKEDITOR.tools.getCookie("ckCsrfToken");if(!e||40!=e.length){e=[];var t="";if(window.crypto&&window.crypto.getRandomValues)e=new Uint8Array(40),window.crypto.getRandomValues(e);else for(var n=0;40>n;n++)e.push(Math.floor(256*Math.random()));for(n=0;n<e.length;n++){var i="abcdefghijklmnopqrstuvwxyz0123456789".charAt(e[n]%36);t=t+(.5<Math.random()?i.toUpperCase():i)}e=t,CKEDITOR.tools.setCookie("ckCsrfToken",e)}return e},escapeCss:function(e){return e?window.CSS&&CSS.escape?CSS.escape(e):isNaN(parseInt(e.charAt(0),10))?e:"\\3"+e.charAt(0)+" "+e.substring(1,e.length):""},getMouseButton:function(e){var t=(e=e.data)&&e.$;return!(!e||!t)&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?4===t.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===t.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:t.button)},convertHexStringToBytes:function(e){var t,n=[],i=e.length/2;for(t=0;t<i;t++)n.push(parseInt(e.substr(2*t,2),16));return n},convertBytesToBase64:function(e){var t,n="",i=e.length;for(t=0;t<i;t+=3){var r,o=e.slice(t,t+3),a=o.length,s=[];if(3>a)for(r=a;3>r;r++)o[r]=0;for(s[0]=(252&o[0])>>2,s[1]=(3&o[0])<<4|o[1]>>4,s[2]=(15&o[1])<<2|(192&o[2])>>6,s[3]=63&o[2],r=0;4>r;r++)n=r<=a?n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s[r]):n+"="}return n},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(e){var t={},n=this._findColor(e);return n.length&&(t.color=n[0],CKEDITOR.tools.array.forEach(n,(function(t){e=e.replace(t,"")}))),(e=CKEDITOR.tools.trim(e))&&(t.unprocessed=e),t},margin:function(e){function t(e){n.top=i[e[0]],n.right=i[e[1]],n.bottom=i[e[2]],n.left=i[e[3]]}var n={},i=e.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(i.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}return n},border:function(e){var t={},n=e.split(/\s+/g);return e=CKEDITOR.tools.style.parse._findColor(e),e.length&&(t.color=e[0]),CKEDITOR.tools.array.forEach(n,(function(e){t.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,e)?!t.width&&CKEDITOR.tools.style.parse._widthRegExp.test(e)&&(t.width=e):t.style=e})),t},_findColor:function(e){var t=[],n=CKEDITOR.tools.array;t=t.concat(e.match(this._rgbaRegExp)||[]),t=t.concat(e.match(this._hslaRegExp)||[]);return t.concat(n.filter(e.split(/\s+/),(function(e){return!!e.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||e.toLowerCase()in CKEDITOR.tools.style.parse._colors})))}}},array:{filter:function(e,t,n){var i=[];return this.forEach(e,(function(r,o){t.call(n,r,o,e)&&i.push(r)})),i},forEach:function(e,t,n){var i,r=e.length;for(i=0;i<r;i++)t.call(n,e[i],i,e)},map:function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(t.call(n,e[r],r,e));return i},reduce:function(e,t,n,i){for(var r=0;r<e.length;r++)n=t.call(i,n,e[r],r,e);return n},every:function(e,t,n){return!e.length||(t=this.filter(e,t,n),e.length===t.length)}},object:{findKey:function(e,t){if("object"!==typeof e)return null;for(var n in e)if(e[n]===t)return n;return null},merge:function(e,t){var n=CKEDITOR.tools,i=n.clone(e),r=n.clone(t);return n.array.forEach(n.objectKeys(r),(function(e){i[e]="object"===typeof r[e]&&"object"===typeof i[e]?n.object.merge(i[e],r[e]):r[e]})),i}},getAbsoluteRectPosition:function(e,t){function n(e){if(e){var t=e.getClientRect();i.top+=t.top,i.left+=t.left,"x"in i&&"y"in i&&(i.x+=t.x,i.y+=t.y),n(e.getWindow().getFrame())}}var i=CKEDITOR.tools.copy(t);n(e.getFrame());var r=CKEDITOR.document.getWindow().getScrollPosition();return i.top+=r.y,i.left+=r.x,"x"in i&&"y"in i&&(i.y+=r.y,i.x+=r.x),i.right=i.left+i.width,i.bottom=i.top+i.height,i}},e.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},t.prototype=CKEDITOR.tools.prototypedCopy(e.prototype),t.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},t.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=e,CKEDITOR.tools.buffers.throttle=t,CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,t=function(e,t){for(var n=CKEDITOR.tools.clone(e),i=1;i<arguments.length;i++)for(var r in t=arguments[i],t)delete n[r];return n},n={},i={},r={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},o={command:1,link:1,meta:1,noscript:1,script:1,style:1},a={},s={"#":1},l={center:1,dir:1,noframes:1};return e(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(i,r,n,l),t={a:t(n,{a:1,button:1}),abbr:n,address:i,area:a,article:i,aside:i,audio:e({source:1,track:1},i),b:n,base:a,bdi:n,bdo:n,blockquote:i,body:i,br:a,button:t(n,{a:1,button:1}),canvas:n,caption:i,cite:n,code:n,col:a,colgroup:{col:1},command:a,datalist:e({option:1},n),dd:i,del:n,details:e({summary:1},i),dfn:n,div:i,dl:{dt:1,dd:1},dt:i,em:n,embed:a,fieldset:e({legend:1},i),figcaption:i,figure:e({figcaption:1},i),footer:i,form:i,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:e({title:1,base:1},o),header:i,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:a,html:e({head:1,body:1},i,o),i:n,iframe:s,img:a,input:a,ins:n,kbd:n,keygen:a,label:n,legend:n,li:i,link:a,main:i,map:i,mark:n,menu:e({li:1},i),meta:a,meter:t(n,{meter:1}),nav:i,noscript:e({link:1,meta:1,style:1},n),object:e({param:1},n),ol:{li:1},optgroup:{option:1},option:s,output:n,p:n,param:a,pre:n,progress:t(n,{progress:1}),q:n,rp:n,rt:n,ruby:e({rp:1,rt:1},n),s:n,samp:n,script:s,section:i,select:{optgroup:1,option:1},small:n,source:a,span:n,strong:n,style:s,sub:n,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},n),sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:i,textarea:s,tfoot:{tr:1},th:i,thead:{tr:1},time:t(n,{time:1}),title:s,tr:{th:1,td:1},track:a,u:n,ul:{li:1},var:n,video:e({source:1,track:1},i),wbr:a,acronym:n,applet:e({param:1},i),basefont:a,big:n,center:i,dialog:a,dir:{li:1},font:n,isindex:a,noframes:i,strike:n,tt:n},e(t,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},r,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},t.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),t}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(e,t){return function(n){"undefined"!=typeof CKEDITOR&&e.fire(t,new CKEDITOR.dom.event(n))}};return{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(t){var n=this.getCustomData("_cke_nativeListeners");return n||(n={},this.setCustomData("_cke_nativeListeners",n)),n[t]||(n=n[t]=e(this,t),this.$.addEventListener?this.$.addEventListener(t,n,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,n)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1),delete t[e]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var t={};CKEDITOR.on("reset",(function(){t={}})),e.equals=function(e){try{return e&&e.$===this.$}catch(e){return!1}},e.setCustomData=function(e,n){var i=this.getUniqueId();return(t[i]||(t[i]={}))[e]=n,this},e.getCustomData=function(e){var n=this.$["data-cke-expando"];return(n=n&&t[n])&&e in n?n[e]:null},e.removeCustomData=function(e){var n,i,r=this.$["data-cke-expando"];r=r&&t[r];return r&&(n=r[e],i=e in r,delete r[e]),i?n:null},e.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete t[e]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(e,t){function n(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),(i.nodeType==CKEDITOR.NODE_ELEMENT||i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(t||i.nodeType!=CKEDITOR.NODE_ELEMENT||i.removeAttribute("id",!1),e)){i=i.childNodes;for(var r=0;r<i.length;r++)n(i[r])}}function i(t){if(t.type==CKEDITOR.NODE_ELEMENT||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(t.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.getName();":"==n[0]&&t.renameNode(n.substring(1))}if(e)for(n=0;n<t.getChildCount();n++)i(t.getChild(n))}}var r=this.$.cloneNode(e);return n(r),r=new CKEDITOR.dom.node(r),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&i(r),r},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,i=this.$;i&&i!=n;){var r=i.parentNode;r&&t.unshift(this.getIndex.call({$:i},e)),i=r}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function t(e,i){var r=i?e.nextSibling:e.previousSibling;return r&&r.nodeType==CKEDITOR.NODE_TEXT?n(r)?t(r,i):r:null}function n(e){return!e.nodeValue||e.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var i,r=this.$,o=-1;if(!this.$.parentNode||e&&r.nodeType==CKEDITOR.NODE_TEXT&&n(r)&&!t(r)&&!t(r,!0))return-1;do{e&&r!=this.$&&r.nodeType==CKEDITOR.NODE_TEXT&&(i||n(r))||(o++,i=r.nodeType==CKEDITOR.NODE_TEXT)}while(r=r.previousSibling);return o},getNextSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var r;if(e=!e&&this.getFirst&&this.getFirst(),!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()}for(;!e&&(r=(r||this).getParent());){if(n&&!1===n(r,!0))return null;e=r.getNext()}return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var r;if(e=!e&&this.getLast&&this.getLast(),!e){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()}for(;!e&&(r=(r||this).getParent());){if(n&&!1===n(r,!0))return null;e=r.getPrevious()}return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){var t,n=this.$;do{t=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getNext:function(e){var t,n=this.$;do{t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n)}while(t&&e&&!e(t));return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){var t=this,n=[];do{n[e?"push":"unshift"](t)}while(t=t.getParent());return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return 0>t.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress();n=Math.min(t.length,e.length);for(var i=0;i<n;i++)if(t[i]!=e[i])return t[i]<e[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n,i,r=this.$;for(t||(r=r.parentNode),"function"==typeof e?(i=!0,n=e):(i=!1,n=function(t){return t="string"==typeof t.nodeName?t.nodeName.toLowerCase():"","string"==typeof e?t==e:t in e});r;){if(n(i?new CKEDITOR.dom.node(r):r))return new CKEDITOR.dom.node(r);try{r=r.parentNode}catch(e){r=null}}return null},hasAscendant:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var t=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent()),CKEDITOR.env.edge&&t&&t.is("textarea","input")&&(e=!0),!e&&t&&"undefined"!=typeof t.$.isContentEditable)return!(t.$.isContentEditable||t.data("cke-editable"));for(;t;){if(t.data("cke-editable"))return!1;if(t.hasAttribute("contenteditable"))return"false"==t.getAttribute("contenteditable");t=t.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,i=0;n&&i<e.length;i++){var r=e[i];if(t)for(var o=-1,a=0;a<n.childNodes.length;a++){var s=n.childNodes[a];if((!0!==t||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)&&(o++,o==r)){n=s;break}}else n=n.childNodes[r]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return CKEDITOR.env.ie&&8>=document.documentMode||!t||(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,(function(e){return new CKEDITOR.dom.node(e)}))}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,i){var r=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),o=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[r]=t,o[n]=1,t.setCustomData(n,i)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var i,r=t.getCustomData("list_marker_names"),o=t.getCustomData("list_marker_id");for(i in r)t.removeCustomData(i);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[o])},function(){function e(e,t){return-1<(" "+e+" ").replace(o," ").indexOf(" "+t+" ")}function t(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function n(e,t){var n=CKEDITOR.tools.escapeCss(e.$.id);return"#"+n+" "+t.split(/,\s*/).join(", #"+n+" ")}function i(e){for(var t=0,n=0,i=a[e].length;n<i;n++)t+=parseFloat(this.getComputedStyle(a[e][n])||0,10)||0;return t}var r=document.createElement("_").classList,o=(r="undefined"!==typeof r&&null!==String(r.add).match(/\[Native code\]/gi),/[\n\t\r]/g);CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:r?function(e){return this.$.classList.add(e),this}:function(t){var n=this.$.className;return n&&(e(n,t)||(n+=" "+t)),this.$.className=n||t,this},removeClass:r?function(e){var t=this.$;return t.classList.remove(e),t.className||t.removeAttribute("class"),this}:function(t){var n=this.getAttribute("class");return n&&e(n,t)&&((n=n.replace(new RegExp("(?:^|\\s+)"+t+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(t){return e(this.$.className,t)},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e,t){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(e);var i,r=n.extractContents(!1,t||!1);if(n.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");i=r.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this),n.remove(!0)}else r.insertAfterNode(this)},contains:document.compareDocumentPosition?function(e){return!!(16&this.$.compareDocumentPosition(e.$))}:function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)},focus:function(){function e(){try{this.$.focus()}catch(e){}}return function(t){t?CKEDITOR.tools.setTimeout(e,100,this):e.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(e){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),e?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),t):t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(n){for(this.$.innerHTML="",t=new CKEDITOR.dom.element("body",this.getDocument()),t.$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(){var e=document.createElement("p");return e.innerHTML="x",e=e.textContent,function(t){this.$[e?"textContent":"innerText"]=t}}(),getAttribute:function(){var e=function(e){return this.$.getAttribute(e,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return e=this.$.getAttribute(e,2),0!==e&&0===this.$.tabIndex&&(e=null),e;case"checked":return e=this.$.attributes.getNamedItem(e),(e.specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:e}(),getAttributes:function(e){var t,n={},i=this.$.attributes;for(e=CKEDITOR.tools.isArray(e)?e:[],t=0;t<i.length;t++)-1===CKEDITOR.tools.indexOf(e,i[t].name)&&(n[i[t].name]=i[t].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""}:function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var e=this.$.tabIndex;return 0!==e||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?e:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return this.getName=function(){return e},this.getName()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(){var e=this.getName();if("object"==typeof arguments[0])return!!arguments[0][e];for(var t=0;t<arguments.length;t++)if(arguments[t]==e)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===e||(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!(!e||!e["#"])))},isIdentical:function(e){var t=this.clone(0,1);if(e=e.clone(0,1),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e,t,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&CKEDITOR.env.webkit&&(e=this.getWindow(),!e.equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(n=new CKEDITOR.dom.element(t).isVisible())),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var i=e.getItem(t);if((i.type!=CKEDITOR.NODE_ELEMENT||!i.data("cke-bookmark"))&&(i.type==CKEDITOR.NODE_ELEMENT&&!i.isEmptyInlineRemoveable()||i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function e(e){var t=this.$.attributes.getNamedItem(e);if("input"==this.getName())switch(e){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return e=this.getAttribute("type"),"checkbox"==e||"radio"==e?"on"!=this.$.value:!!this.$.value}return!!t&&t.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(t){return"name"==t?!!this.$.name:e.call(this,t)}:e:function(e){return!!this.$.attributes.getNamedItem(e)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n,i=this.$;if(e=e.$,i!=e)if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))},mergeSiblings:function(){function e(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var i=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(i.push(t),t=n?t.getNext():t.getPrevious(),!t||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var r=n?e.getLast():e.getFirst();i.length;)i.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),r&&r.type==CKEDITOR.NODE_ELEMENT&&r.mergeSiblings()}}}return function(t){(!1===t||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(e(this,this.getNext(),!0),e(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var e=function(e,t){return this.$.setAttribute(e,t),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t,n){return"class"==t?this.$.className=n:"style"==t?this.$.style.cssText=n:"tabindex"==t?this.$.tabIndex=n:"checked"==t?this.$.checked=n:"contenteditable"==t?e.call(this,"contentEditable",n):e.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(t,n){if("src"==t&&n.match(/^http:\/\//))try{e.apply(this,arguments)}catch(e){}else e.apply(this,arguments);return this}:e}(),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:function(){var e=function(e){this.$.removeAttribute(e)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:e}(),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e=e||this.getAttributes(),e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){var t=this.$.style;if(t.removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)t.removeProperty?t.removeProperty(e):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var n,i=["top","left","right","bottom"];"border"==e&&(n=["color","style","width"]);t=[];for(var r=0;r<i.length;r++)if(n)for(var o=0;o<n.length;o++)t.push([e,i[r],n[o]].join("-"));else t.push([e,i[r]].join("-"));for(e=0;e<t.length;e++)this.removeStyle(t[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var e,t=this.getElementsByTag("*"),n=0,i=t.count();n<i;n++)e=t.getItem(n),e.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,i=this.getDocument(),r=i.getBody(),o="BackCompat"==i.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,u=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(t+=l.$.offsetLeft-l.$.scrollLeft,n+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(t+=l.$.clientLeft||0,n+=l.$.clientTop||0);u&&!u.equals(l);)t-=u.$.scrollLeft,n-=u.$.scrollTop,u=u.getParent();u=l,l=(a=l.$.offsetParent)?new CKEDITOR.dom.element(a):null}else{var a=this.$.getBoundingClientRect(),s=i.$.documentElement,l=s.clientTop||r.$.clientTop||0,u=s.clientLeft||r.$.clientLeft||0,c=!0;CKEDITOR.env.ie&&(c=i.getDocumentElement().contains(this),i=i.getBody().contains(this),c=o&&i||!o&&c),c&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(t=r.$.scrollLeft||s.scrollLeft,n=r.$.scrollTop||s.scrollTop):(n=o?r.$:s,t=n.scrollLeft,n=n.scrollTop),t=a.left+t-u,n=a.top+n-l)}return e&&(a=this.getWindow(),l=e.getWindow(),!a.equals(l)&&a.$.frameElement&&(e=new CKEDITOR.dom.element(a.$.frameElement).getDocumentPosition(e),t+=e.x,n+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||o||(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var n=t.getWindow();try{var i=n.$.frameElement;i&&(t=new CKEDITOR.dom.element(i))}catch(e){}}}while(t=t.getParent())},scrollIntoParent:function(e,t,n){var i,r,o,a;function s(t,n){/body|html/.test(e.getName())?e.getWindow().$.scrollBy(t,n):(e.$.scrollLeft+=t,e.$.scrollTop+=n)}function l(e,t){var n={x:0,y:0};if(!e.is(c?"body":"html")){var i=e.$.getBoundingClientRect();n.x=i.left,n.y=i.top}return i=e.getWindow(),i.equals(t)||(i=l(CKEDITOR.dom.element.get(i.$.frameElement),t),n.x+=i.x,n.y+=i.y),n}function u(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}!e&&(e=this.getWindow()),o=e.getDocument();var c="BackCompat"==o.$.compatMode;e instanceof CKEDITOR.dom.window&&(e=c?o.getBody():o.getDocumentElement()),CKEDITOR.env.webkit&&(o=this.getEditor(!1))&&(o._.previousScrollTop=null),o=e.getWindow(),r=l(this,o);var d=l(e,o),f=this.$.offsetHeight;i=this.$.offsetWidth;var h=e.$.clientHeight,p=e.$.clientWidth;o=r.x-u(this,"left")-d.x||0,a=r.y-u(this,"top")-d.y||0,i=r.x+i+u(this,"right")-(d.x+p)||0,r=r.y+f+u(this,"bottom")-(d.y+h)||0,(0>a||0<r)&&s(0,!0===t?a:!1===t?r:0>a?a:r),n&&(0>o||0<i)&&s(0>o?o:i,0)},setState:function(e,t,n){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(t){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){var n=this.$.attributes;t=t||{};for(var i=0;i<n.length;i++){var r,o=n[i],a=o.nodeName.toLowerCase();a in t||("checked"==a&&(r=this.getAttribute(a))?e.setAttribute(a,r):CKEDITOR.env.ie&&!this.hasAttribute(a)||(r=this.getAttribute(a),null===r&&(r=o.nodeValue),e.setAttribute(a,r)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t),this.copyAttributes(e),this.moveChildren(e),this.getParent(!0)&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$,delete this.getName}},getChild:function(){function e(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]}return function(t){var n=this.$;if(t.slice)for(t=t.slice();0<t.length&&n;)n=e(n,t.shift());else n=e(n,t);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_enable_context_menu")}this.on("contextmenu",(function(t){t.data.getTarget().getAscendant(e,!0)||t.data.preventDefault()}))},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(e){var t,n,i,r=CKEDITOR.instances;for(t in e=e||void 0===e,r)if(n=r[t],n.element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!e&&(i=n.editable())&&(i.equals(this)||i.contains(this)))return n;return null},find:function(e){var i=t(this);return e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(n(this,e))),i(),e},findOne:function(e){var i=t(this);return e=this.$.querySelector(n(this,e)),i(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.getChildren();for(var r=0;r<n.count();r++)i=n.getItem(r),i.type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}}});var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=i.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=i.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var i,r=n.startContainer;i=n.endContainer;var o,a=n.startOffset,s=n.endOffset,l=this.guard,u=this.type,c=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var d=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),f=i.type==CKEDITOR.NODE_ELEMENT?i.getChild(s):i.getNext();this._.guardLTR=function(e,t){return(!t||!d.equals(e))&&(!f||!e.equals(f))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}if(e&&!this._.guardRTL){var h=r.type==CKEDITOR.NODE_ELEMENT?r:r.getParent(),p=r.type==CKEDITOR.NODE_ELEMENT?a?r.getChild(a-1):null:r.getPrevious();this._.guardRTL=function(e,t){return(!t||!h.equals(e))&&(!p||!e.equals(p))&&(e.type!=CKEDITOR.NODE_ELEMENT||!t||!e.equals(n.root))}}var m=e?this._.guardRTL:this._.guardLTR;for(o=l?function(e,t){return!1!==m(e,t)&&l(e,t)}:m,this.current?i=this.current[c](!1,u,o):(e?i.type==CKEDITOR.NODE_ELEMENT&&(i=0<s?i.getChild(s-1):!1===o(i,!0)?null:i.getPreviousSourceNode(!0,u,o)):(i=r,i.type==CKEDITOR.NODE_ELEMENT&&((i=i.getChild(a))||(i=!1===o(r,!0)?null:r.getNextSourceNode(!0,u,o)))),i&&!1===o(i)&&(i=null));i&&!this._.end;){if(this.current=i,this.evaluator&&!1===this.evaluator(i)){if(t&&this.evaluator)return!1}else if(!t)return i;i=i[c](!1,u,o)}return this.end(),this.current=null}function t(t){for(var n,i=null;n=e.call(this,t);)i=n;return i}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return t.call(this)},lastBackward:function(){return t.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in i||!n[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(e){return function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary(e))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(e,t){function n(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(i){var r,o;return r=i&&i.type!=CKEDITOR.NODE_ELEMENT&&(o=i.getParent())&&n(o),r=e?r:r||n(i),!!(t^r)}},CKEDITOR.dom.walker.whitespaces=function(e){return function(t){var n;return t&&t.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(t.getText())||CKEDITOR.env.webkit&&t.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(e^n)}},CKEDITOR.dom.walker.invisible=function(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(i){return t(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=i.$.offsetWidth<=n),!!(e^i)}},CKEDITOR.dom.walker.nodeType=function(e,t){return function(n){return!!(t^n.type==e)}},CKEDITOR.dom.walker.bogus=function(e){function t(e){return!o(e)&&!a(e)}return function(n){var i=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&r.test(n.getText());return i&&(i=n.getParent(),n=n.getNext(t),i=i.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(e^i)}},CKEDITOR.dom.walker.temp=function(e){return function(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t=t&&t.hasAttribute("data-cke-temp"),!!(e^t)}};var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp(),l=function(e){return a(e)||o(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(e){return function(t){return t=o(t)||a(t)||s(t),!!(e^t)}};var u=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(e){return function(t){for(var n=0,i=t.getChildCount();n<i;++n)if(!u(t.getChild(n)))return!!e;return!e}};var c=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(e){var t,n={};for(t in e)CKEDITOR.dtd[t]["#"]&&(n[t]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(e){return function(t){return t=!u(t)&&!!(t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&(t.is(CKEDITOR.dtd.$inline)||t.is("hr")||"false"==t.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&t.is(d)&&c(t))),!!(e^t)}},CKEDITOR.dom.element.prototype.getBogus=function(){var e=this;do{e=e.getPreviousSourceNode()}while(l(e));return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&r.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function e(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function t(e,t,n,i,r){function o(e,t,n,i){var o=n?e.getPrevious():e.getNext();return i&&l||(c||i?t.append(e.clone(!0,r),n):(e.remove(),u&&t.append(e,n))),o}function a(){var e,t,n,i=Math.min(I.length,_.length);for(e=0;e<i;e++)if(t=I[e],n=_[e],!t.equals(n))return e;return e-1}function s(){var t=D-1,n=h&&p&&!E.equals(v);t<R-1||t<k-1||n?(n?e.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START):k==t+1&&f?e.moveToPosition(_[t],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(_[t+1],CKEDITOR.POSITION_BEFORE_START),i&&(t=I[t+1])&&t.type==CKEDITOR.NODE_ELEMENT&&(n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document),n.insertAfter(t),t.mergeSiblings(!1),e.moveToBookmark({startNode:n}))):e.collapse(!0)}e.optimizeBookmark();var l=0===t,u=1==t,c=2==t;t=c||u;var d,f,h,p,m,g,E=e.startContainer,v=e.endContainer,y=e.startOffset,b=e.endOffset;if(c&&v.type==CKEDITOR.NODE_TEXT&&(E.equals(v)||E.type===CKEDITOR.NODE_ELEMENT&&E.getFirst().equals(v)))n.append(e.document.createText(v.substring(y,b)));else{v.type==CKEDITOR.NODE_TEXT?c?g=!0:v=v.split(b):0<v.getChildCount()?b>=v.getChildCount()?(v=v.getChild(b-1),f=!0):v=v.getChild(b):p=f=!0,E.type==CKEDITOR.NODE_TEXT?c?m=!0:E.split(y):0<E.getChildCount()?0===y?(E=E.getChild(y),d=!0):E=E.getChild(y-1):h=d=!0;for(var T,C,O,I=E.getParents(),_=v.getParents(),D=a(),R=I.length-1,k=_.length-1,w=n,K=-1,S=D;S<=R;S++){for(C=I[S],O=C.getNext(),S!=R||C.equals(_[S])&&R<k?t&&(T=w.append(C.clone(0,r))):d?o(C,w,!1,h):m&&w.append(e.document.createText(C.substring(y)));O;){if(O.equals(_[S])){K=S;break}O=o(O,w)}w=T}for(w=n,S=D;S<=k;S++)if(n=_[S],O=n.getPrevious(),n.equals(I[S]))t&&(w=w.getChild(0));else{if(S!=k||n.equals(I[S])&&k<R?t&&(T=w.append(n.clone(0,r))):f?o(n,w,!1,p):g&&w.append(e.document.createText(n.substring(0,b))),S>K)for(;O;)O=o(O,w,!0);w=T}c||s()}}function n(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(r){return!(!n(r)&&!t(r))||(i(r)&&!e?e=!0:!(r.type==CKEDITOR.NODE_TEXT&&(r.hasAscendant("pre")||CKEDITOR.tools.trim(r.getText()).length)||r.type==CKEDITOR.NODE_ELEMENT&&!r.is(o)))}}function i(e){var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(i){return!(!n(i)&&!t(i))||(!e&&a(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$removeEmpty))}}function r(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"]((function(e){return!t&&u(e)&&(t=e),l(e)&&!(a(e)&&e.equals(t))}))}}var o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},a=CKEDITOR.dom.walker.bogus(),s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),u=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,2,n,!1,"undefined"==typeof e||e),n},deleteContents:function(e){this.collapsed||t(this,0,null,e)},extractContents:function(e,n){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||t(this,1,i,e,"undefined"==typeof n||n),i},createBookmark:function(e){var t,n,i,r,o=this.collapsed;return t=this.document.createElement("span"),t.data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(i="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",i+(o?"C":"S"))),o||(n=t.clone(),n.setHtml("&nbsp;"),e&&n.setAttribute("id",i+"E"),r=this.clone(),r.collapse(),r.insertNode(n)),r=this.clone(),r.collapse(!0),r.insertNode(t),n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?i+(o?"C":"S"):t,endNode:e?i+"E":n,serializable:e,collapsed:o}},createBookmark2:function(){function e(e){var t,i=e.container,r=e.offset;t=i;var o=r;if(t=t.type!=CKEDITOR.NODE_ELEMENT||0===o||o==t.getChildCount()?0:t.getChild(o-1).type==CKEDITOR.NODE_TEXT&&t.getChild(o).type==CKEDITOR.NODE_TEXT,t&&(i=i.getChild(r-1),r=i.getLength()),i.type==CKEDITOR.NODE_ELEMENT&&0<r){e:{for(t=i;r--;)if(o=t.getChild(r).getIndex(!0),0<=o){r=o;break e}r=-1}r+=1}if(i.type==CKEDITOR.NODE_TEXT){for(t=i,o=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)o+=t.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;t=o,i.getText()?r+=t:(o=i.getPrevious(n),t?(r=t,i=o?o.getNext():i.getParent().getFirst()):(i=i.getParent(),r=o?o.getIndex(!0)+1:0))}e.container=i,e.offset=r}function t(e,t){var n=t.getCustomData("cke-fillingChar");if(n){var i=e.container;n.equals(i)&&(e.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=e.offset&&(e.offset=i.getIndex(),e.container=i.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var i=this.collapsed,r={container:this.startContainer,offset:this.startOffset},o={container:this.endContainer,offset:this.endOffset};return n&&(e(r),t(r,this.root),i||(e(o),t(o,this.root))),{start:r.container.getAddress(n),end:i?null:o.container.getAddress(n),startOffset:r.offset,endOffset:o.offset,normalized:n,collapsed:i,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,i=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,n),i?this.setEnd(i,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,n=this.endContainer,i=this.startOffset,r=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if(e=t.getChildCount(),e>i)t=t.getChild(i);else if(1>e)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t),t=t.getNextSourceNode()||t}if(n.type==CKEDITOR.NODE_ELEMENT)if(e=n.getChildCount(),e>r)n=n.getChild(r).getPreviousSourceNode(!0);else if(1>e)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return t.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(t=n),{startNode:t,endNode:n}},getCommonAncestor:function(e,t){var n=this.startContainer,i=this.endContainer;n=n.equals(i)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(i);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,i=this.startOffset,r=this.collapsed;if((!e||r)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var o=n.split(i);i=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(o,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else i=n.getIndex(),n=n.getParent();if(this.setStart(n,i),r)return void this.collapse(!0)}n=this.endContainer,i=this.endOffset,t||r||!n||n.type!=CKEDITOR.NODE_TEXT||(i?(i>=n.getLength()||n.split(i),i=n.getIndex()+1):i=n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var i=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var r=1;case CKEDITOR.ENLARGE_ELEMENT:var o=function(e,t){var n=new CKEDITOR.dom.range(p);n.setStart(e,t),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);var r;n=new CKEDITOR.dom.walker(n);for(n.guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};r=n.next();){if(r.type!=CKEDITOR.NODE_TEXT)return!1;if(f=r!=e?r.getText():r.substring(t),i.test(f))return!1}return!0};if(this.collapsed)break;var a,s,l,u,c,d,f,h=this.getCommonAncestor(),p=this.root,m=!1;d=this.startContainer;var g=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(g&&(d=!CKEDITOR.tools.trim(d.substring(0,g)).length&&d,m=!!d),d&&((u=d.getPrevious())||(l=d.getParent()))):(g&&(u=d.getChild(g-1)||d.getLast()),u||(l=d)),l=n(l);l||u;){if(l&&!u){if(!c&&l.equals(h)&&(c=!0),r?l.isBlockBoundary():!p.contains(l))break;m&&"inline"==l.getComputedStyle("display")||(m=!1,c?a=l:this.setStartBefore(l)),u=l.getPrevious()}for(;u;)if(d=!1,u.type==CKEDITOR.NODE_COMMENT)u=u.getPrevious();else{if(u.type==CKEDITOR.NODE_TEXT)f=u.getText(),i.test(f)&&(u=null),d=/[\s\ufeff]$/.test(f);else if((u.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&u.is("br"))&&!u.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[u.getName()]){if(f=u.getText(),i.test(f))u=null;else{g=u.$.getElementsByTagName("*");for(var E,v=0;E=g[v++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){u=null;break}}u&&(d=!!f.length)}else u=null;if(d&&(m?c?a=l:l&&this.setStartBefore(l):m=!0),u){if(d=u.getPrevious(),!l&&!d){l=u,u=null;break}u=d}else l=null}l&&(l=n(l.getParent()))}for(d=this.endContainer,g=this.endOffset,l=u=null,c=m=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(g)).length?m=!0:(m=!d.getLength(),g==d.getLength()?(u=d.getNext())||(l=d.getParent()):o(d,g)&&(l=d.getParent())):(u=d.getChild(g))||(l=d);l||u;){if(l&&!u){if(!c&&l.equals(h)&&(c=!0),r?l.isBlockBoundary():!p.contains(l))break;m&&"inline"==l.getComputedStyle("display")||(m=!1,c?s=l:l&&this.setEndAfter(l)),u=l.getNext()}for(;u;){if(d=!1,u.type==CKEDITOR.NODE_TEXT)f=u.getText(),o(u,0)||(u=null),d=/^[\s\ufeff]/.test(f);else if(u.type==CKEDITOR.NODE_ELEMENT){if((0<u.$.offsetWidth||t&&u.is("br"))&&!u.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[u.getName()]){if(f=u.getText(),i.test(f))u=null;else for(g=u.$.getElementsByTagName("*"),v=0;E=g[v++];)if(!CKEDITOR.dtd.$removeEmpty[E.nodeName.toLowerCase()]){u=null;break}u&&(d=!!f.length)}else u=null}else d=1;if(d&&m&&(c?s=l:this.setEndAfter(l)),u){if(d=u.getNext(),!l&&!d){l=u,u=null;break}u=d}else l=null}l&&(l=n(l.getParent()))}a&&s&&(h=a.contains(s)?s:a,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),p=this.root,l.setStartAt(p,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var y,b,T=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),C=null,O=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(C){if(C.equals(e))return void(C=null)}else C=e;else if(C)return;var t=T(e);return t||(y=e),t};r=function(e){var t=O(e);return!t&&e.is&&e.is("br")&&(b=e),t};if(l.guard=O,l=l.lastBackward(),y=y||p,this.setStartAt(y,!y.is("br")&&(!l&&this.checkStartOfBlock()||l&&y.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var I=CKEDITOR.dom.walker.whitespaces(),_=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(e){return!I(e)&&!_(e)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}l=this.clone(),l.collapse(),l.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),l=new CKEDITOR.dom.walker(l),l.guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?r:O,y=C=b=null,l=l.lastForward(),y=y||p,this.setEndAt(y,!l&&this.checkEndOfBlock()||l&&y.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),b&&this.setEndAfter(b)}},shrink:function(e,t,n){var i="boolean"===typeof n?n:!n||"boolean"!==typeof n.shrinkOnBlockBoundary||n.shrinkOnBlockBoundary,r=n&&n.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var o=this.clone(),a=this.startContainer,s=this.endContainer,l=this.startOffset,u=this.endOffset,c=n=1;a&&a.type==CKEDITOR.NODE_TEXT&&(l?l>=a.getLength()?o.setStartAfter(a):(o.setStartBefore(a),n=0):o.setStartBefore(a)),s&&s.type==CKEDITOR.NODE_TEXT&&(u?u>=s.getLength()?o.setEndAfter(s):(o.setEndAfter(s),c=0):o.setEndBefore(s));o=new CKEDITOR.dom.walker(o);var d,f=CKEDITOR.dom.walker.bookmark(),h=CKEDITOR.dom.walker.bogus();return o.evaluator=function(t){return t.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},o.guard=function(t,n){return!!(r&&h(t)||f(t))||!(e==CKEDITOR.SHRINK_ELEMENT&&t.type==CKEDITOR.NODE_TEXT||n&&t.equals(d)||!1===i&&t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()||t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable"))&&(n||t.type!=CKEDITOR.NODE_ELEMENT||(d=t),!0)},n&&(a=o[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(a,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(o.reset(),(o=o[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(o,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!n&&!c)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=n,this.endContainer||(this._setEndContainer(t),this.endOffset=n),e(this)},setEnd:function(t,n){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(n=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=n,this.startContainer||(this._setStartContainer(t),this.startOffset=n),e(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(e,t){var n=this.createBookmark(),i=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(i),i.trim(),this.insertNode(i);var r=i.getBogus();return r&&r.remove(),i.appendBogus(),this.moveToBookmark(n),i},splitBlock:function(e,t){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),r=n.block,o=i.block,a=null;return n.blockLimit.equals(i.blockLimit)?("br"!=e&&(r||(r=this.fixBlock(!0,e),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),o||(o=this.fixBlock(!1,e))),n=r&&this.checkStartOfBlock(),i=o&&this.checkEndOfBlock(),this.deleteContents(),r&&r.equals(o)&&(i?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),o=null):n?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r=null):(o=this.splitElement(r,t||!1),r.is("ul","ol")||r.appendBogus())),{previousBlock:r,nextBlock:o,wasStartOfBlock:n,wasEndOfBlock:i,elementPath:a}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,t||!1),i=e.clone(!1,t||!1);return n.appendTo(i),i.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function e(e){return function(i){return!(t(i)||n(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isEmptyInlineRemoveable()||e.is("table")&&i.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(t){for(var n,i=this.createBookmark(),r=this[t?"endPath":"startPath"](),o=r.block||r.blockLimit;o&&!o.equals(r.root)&&!o.getFirst(e(o));)n=o.getParent(),this[t?"setEndAt":"setStartAt"](o,CKEDITOR.POSITION_AFTER_END),o.remove(1),o=n;this.moveToBookmark(i)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,r=this.clone();return r.collapse(n),r[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),r=new CKEDITOR.dom.walker(r),r.evaluator=i(n),r[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),s.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),t=this.clone(),t.collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),s.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),t=this.clone(),t.collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(t),e.evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var i=this.clone();return i.collapse(1),i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),n=new CKEDITOR.dom.walker(i),n.evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var i=this.clone();return i.collapse(),i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(i),n.evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function e(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var t=this.startContainer,n=this.endContainer;return!(e(t,n)&&e(n,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&s.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var i=e,r=n,o=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(!1)&&(o=i[t?"getLast":"getFirst"](u)),r||o||(o=i[t?"getPrevious":"getNext"](u)),e=o}return!!n},moveToClosestEditablePosition:function(e,t){var n,i,r,o=0,a=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(n=new CKEDITOR.dom.range(this.root),n.moveToPosition(e,a[t?0:1])):n=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?o=1:(i=n[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(o=1,(r=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&r&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,a[t?1:0])),o&&this.moveToRange(n),!!o},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){var e=this.clone();if(e.optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;e=new CKEDITOR.dom.walker(e);var t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var i=e.next();return e.reset(),i&&i.equals(e.previous())?i:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:r(),getPreviousEditableNode:r(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.startContainer,n=this.endContainer,i=t.getAscendant("table",!0),r=n.getAscendant("table",!0);return i&&!this.root.contains(i)?null:CKEDITOR.env.safari&&i&&n.equals(this.root)?t.getAscendant(e,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):i&&r&&(i.equals(r)||i.contains(r)||r.contains(i))?t.getAscendant(e,!0):null},scrollIntoView:function(){var e,t,n,i=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),r=this.clone();r.optimize(),(n=r.startContainer.type==CKEDITOR.NODE_TEXT)?(t=r.startContainer.getText(),e=r.startContainer.split(r.startOffset),i.insertAfter(r.startContainer)):r.insertNode(i),i.scrollIntoView(),n&&(r.startContainer.setText(t),e.remove()),i.remove()},getClientRects:function(){function e(e,t){var n,i,r,o=CKEDITOR.tools.array.map(e,(function(e){return e})),a=new CKEDITOR.dom.range(t.root);if(t.startContainer instanceof CKEDITOR.dom.element&&(i=0===t.startOffset&&t.startContainer.hasAttribute("data-widget")),t.endContainer instanceof CKEDITOR.dom.element&&(r=(r=t.endOffset===(t.endContainer.getChildCount?t.endContainer.getChildCount():t.endContainer.length))&&t.endContainer.hasAttribute("data-widget")),i&&a.setStart(t.startContainer.getParent(),t.startContainer.getIndex()),r&&a.setEnd(t.endContainer.getParent(),t.endContainer.getIndex()+1),(i||r)&&(t=a),a=t.cloneContents(),a=CKEDITOR.dom.document.prototype.find.call(a,"[data-cke-widget-id]").toArray(),a=CKEDITOR.tools.array.map(a,(function(e){var n=t.root.editor;return e=e.getAttribute("data-cke-widget-id"),n.widgets.instances[e].element})))return a=CKEDITOR.tools.array.map(a,(function(e){var t;return t=e.getParent().hasClass("cke_widget_wrapper")?e.getParent():e,n=this.root.getDocument().$.createRange(),n.setStart(t.getParent().$,t.getIndex()),n.setEnd(t.getParent().$,t.getIndex()+1),t=n.getClientRects(),t.widgetRect=e.getClientRect(),t}),t),CKEDITOR.tools.array.forEach(a,(function(e){function t(i){CKEDITOR.tools.array.forEach(o,(function(t,r){var a=CKEDITOR.tools.objectCompare(e[i],t);a||(a=CKEDITOR.tools.objectCompare(e.widgetRect,t)),a&&(Array.prototype.splice.call(o,r,e.length-i,e.widgetRect),n=!0)})),n||(i<o.length-1?t(i+1):o.push(e.widgetRect))}var n;t(0)})),o}function t(e,t,n){var r;return t.collapsed?n.startContainer instanceof CKEDITOR.dom.element?(e=n.checkStartOfBlock(),r=new CKEDITOR.dom.text(""),e?n.startContainer.append(r,!0):0===n.startOffset?r.insertBefore(n.startContainer.getFirst()):(n=n.startContainer.getChildren().getItem(n.startOffset-1),r.insertAfter(n)),t.setStart(r.$,0),t.setEnd(r.$,0),e=t.getClientRects(),r.remove()):n.startContainer instanceof CKEDITOR.dom.text&&(""===n.startContainer.getText()?(n.startContainer.setText(""),e=t.getClientRects(),n.startContainer.setText("")):e=[i(n.createBookmark())]):e=[i(n.createBookmark())],e}function n(e,t,n){return e=CKEDITOR.tools.extend({},e),t&&(e=CKEDITOR.tools.getAbsoluteRectPosition(n.document.getWindow(),e)),!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e}function i(e){var t,n=e.startNode;return e=e.endNode,n.setText(""),n.removeStyle("display"),e?(e.setText(""),e.removeStyle("display"),t=[n.getClientRect(),e.getClientRect()],e.remove()):t=[n.getClientRect(),n.getClientRect()],n.remove(),{right:Math.max(t[0].right,t[1].right),bottom:Math.max(t[0].bottom,t[1].bottom),left:Math.min(t[0].left,t[1].left),top:Math.min(t[0].top,t[1].top),width:Math.abs(t[0].left-t[1].left),height:Math.max(t[0].bottom,t[1].bottom)-Math.min(t[0].top,t[1].top)}}return void 0!==this.document.getSelection?function(i){var r,o=this.root.getDocument().$.createRange();return o.setStart(this.startContainer.$,this.startOffset),o.setEnd(this.endContainer.$,this.endOffset),r=o.getClientRects(),r=e(r,this),r.length||(r=t(r,o,this)),CKEDITOR.tools.array.map(r,(function(e){return n(e,i,this)}),this)}:function(e){return[n(i(this.createBookmark()),e,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var n,i,r,o,a=this.getCommonAncestor(),s=this.getBoundaryNodes(),l=[];if(a&&a.find)for(i=a.find(e),n=0;n<i.count();n++)a=i.getItem(n),(t||!a.isReadOnly())&&(r=a.getPosition(s.startNode)&CKEDITOR.POSITION_FOLLOWING||s.startNode.equals(a),o=a.getPosition(s.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||s.endNode.equals(a),r&&o&&l.push(a));return l}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,(function(e,t){var n=e[e.length-1],i=!1;if(t=t.clone(),t.enlarge(CKEDITOR.ENLARGE_ELEMENT),n){var r=new CKEDITOR.dom.range(t.root),o=(i=new CKEDITOR.dom.walker(r),CKEDITOR.dom.walker.whitespaces());for(r.setStart(n.endContainer,n.endOffset),r.setEnd(t.startContainer,t.startOffset),r=i.next();o(r)||t.endContainer.equals(r);)r=i.next();i=!r}return i?n.setEnd(t.endContainer,t.endOffset):e.push(t),e}),[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){1>arguments.length||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function t(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}function n(e,i,r,o){e:{null==o&&(o=t(r));for(var a;a=o.shift();)if(a.getDtd().p){o={element:a,remaining:o};break e}o=null}return o?(a=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!a.check(i)?n(e,i,r,o.remaining):(i=new CKEDITOR.dom.range(o.element),i.selectNodeContents(o.element),i=i.createIterator(),i.enlargeBr=e.enlargeBr,i.enforceRealBlocks=e.enforceRealBlocks,i.activeFilter=i.filter=a,e._.nestedEditable={element:o.element,container:r,remaining:o.remaining,iterator:i},1):0}function i(e,t,n){return!!t&&(e=e.clone(),e.collapse(!n),e.checkBoundaryOfElement(t,n?CKEDITOR.START:CKEDITOR.END))}var r=/^[\r\n\t ]+$/,o=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.dom.walker.whitespaces(!0),s=function(e){return o(e)&&a(e)},l={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(e){var t,a,u,c,d;if(e=e||"p",this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;if(this.activeFilter=this.filter,n(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var f=this.range.clone();a=f.startPath();var h=f.endPath(),p=!f.collapsed&&i(f,a.block),m=!f.collapsed&&i(f,h.block,1);f.shrink(CKEDITOR.SHRINK_ELEMENT,!0),p&&f.setStartAt(a.block,CKEDITOR.POSITION_BEFORE_END),m&&f.setEndAt(h.block,CKEDITOR.POSITION_AFTER_START),a=f.endContainer.hasAscendant("pre",!0)||f.startContainer.hasAscendant("pre",!0),f.enlarge(this.forceBrBreak&&!a||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),f.collapsed||(a=new CKEDITOR.dom.walker(f.clone()),h=CKEDITOR.dom.walker.bookmark(!0,!0),a.evaluator=h,this._.nextNode=a.next(),a=new CKEDITOR.dom.walker(f.clone()),a.evaluator=h,a=a.previous(),this._.lastNode=a.getNextSourceNode(!0,null,f.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(h=this.range.clone(),h.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&f.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=f.document.createText(""),this._.lastNode.insertAfter(a)),f=null),this._.started=1,a=f}for(h=this._.nextNode,f=this._.lastNode,this._.nextNode=null;h;){p=0,m=h.hasAscendant("pre");var g=h.type!=CKEDITOR.NODE_ELEMENT,E=0;if(g)h.type==CKEDITOR.NODE_TEXT&&r.test(h.getText())&&(g=0);else{var v=h.getName();if(CKEDITOR.dtd.$block[v]&&"false"==h.getAttribute("contenteditable")){t=h,n(this,e,t);break}if(h.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if("br"==v)g=1;else if(!a&&!h.getChildCount()&&"hr"!=v){t=h,u=h.equals(f);break}a&&(a.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=v&&(this._.nextNode=h)),p=1}else{if(h.getFirst()){a||(a=this.range.clone(),a.setStartAt(h,CKEDITOR.POSITION_BEFORE_START)),h=h.getFirst();continue}g=1}}if(g&&!a&&(a=this.range.clone(),a.setStartAt(h,CKEDITOR.POSITION_BEFORE_START)),u=(!p||g)&&h.equals(f),a&&!p)for(;!h.getNext(s)&&!u;){if(v=h.getParent(),v.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){p=1,g=0,u||v.equals(f),a.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);break}h=v,g=1,u=h.equals(f),E=1}if(g&&a.setEndAt(h,CKEDITOR.POSITION_AFTER_END),h=this._getNextSourceNode(h,E,f),(u=!h)||p&&a)break}if(!t){if(!a)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;t=new CKEDITOR.dom.elementPath(a.startContainer,a.root),h=t.blockLimit,p={div:1,th:1,td:1},t=t.block,!t&&h&&!this.enforceRealBlocks&&p[h.getName()]&&a.checkStartOfBlock()&&a.checkEndOfBlock()&&!h.equals(a.root)?t=h:!t||this.enforceRealBlocks&&t.is(l)?(t=this.range.document.createElement(e),a.extractContents().appendTo(t),t.trim(),a.insertNode(t),c=d=!0):"li"!=t.getName()?a.checkStartOfBlock()&&a.checkEndOfBlock()||(t=t.clone(!1),a.extractContents().appendTo(t),t.trim(),d=a.splitBlock(),c=!d.wasStartOfBlock,d=!d.wasEndOfBlock,a.insertNode(t)):u||(this._.nextNode=t.equals(f)?null:this._getNextSourceNode(a.getBoundaryNodes().endNode,1,f))}return c&&(c=t.getPrevious())&&c.type==CKEDITOR.NODE_ELEMENT&&("br"==c.getName()?c.remove():c.getLast()&&"br"==c.getLast().$.nodeName.toLowerCase()&&c.getLast().remove()),d&&(c=t.getLast())&&c.type==CKEDITOR.NODE_ELEMENT&&"br"==c.getName()&&(!CKEDITOR.env.needsBrFiller||c.getPrevious(o)||c.getNext(o))&&c.remove(),this._.nextNode||(this._.nextNode=u||t.equals(f)||!f?null:this._getNextSourceNode(t,1,f)),t},_getNextSourceNode:function(e,t,n){function i(e){return!(e.equals(n)||e.equals(r))}var r=this.range.root;for(e=e.getNextSourceNode(t,null,i);!o(e);)e=e.getNextSourceNode(t,null,i);return e}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,t){var n;this.uiItems=[],this.exec=function(n){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==t.exec.call(this,e,n))},this.refresh=function(e,n){return!(this.readOnly||!e.readOnly)||(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:n})||t.refresh&&!1!==t.refresh.apply(this,arguments)))},this.checkAllowed=function(t){return t||"boolean"!=typeof n?n=e.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(e,t,n,i,r){var o,s,l;for(o in e=[],t){s=t[o],s="boolean"==typeof s?{}:"function"==typeof s?{match:s}:R(s),"$"!=o.charAt(0)&&(s.elements=o),n&&(s.featureName=n.toLowerCase());var u=s;u.elements=a(u.elements,/\s+/)||null,u.propertiesOnly=u.propertiesOnly||!0===u.elements;var c=/\s*,\s*/,d=void 0;for(d in S){u[d]=a(u[d],c)||null;var f=u,h=x[d],p=a(u[x[d]],c),m=u[d],g=[],v=!0,y=void 0;for(y in p?v=!1:p={},m)"!"==y.charAt(0)&&(y=y.slice(1),g.push(y),p[y]=!0,v=!1);for(;y=g.pop();)m[y]=m["!"+y],delete m["!"+y];f[h]=!v&&p||null}u.match=u.match||null,i.push(s),e.push(s)}for(t=r.elements,r=r.generic,n=0,i=e.length;n<i;++n){for(c in o=R(e[n]),s=!0===o.classes||!0===o.styles||!0===o.attributes,u=o,d=h=c=void 0,S)u[c]=E(u[c]);for(d in f=!0,x){for(m in c=x[d],h=u[c],p=[],m=void 0,h)-1<m.indexOf("*")?p.push(new RegExp("^"+m.replace(/\*/g,".*")+"$")):p.push(m);h=p,h.length&&(u[c]=h,f=!1)}if(u.nothingRequired=f,u.noProperties=!(u.attributes||u.classes||u.styles),!0===o.elements||null===o.elements)r[s?"unshift":"push"](o);else for(l in u=o.elements,delete o.elements,u)t[l]?t[l][s?"unshift":"push"](o):t[l]=[o]}}function t(e,t,i,r){if((!e.match||e.match(t))&&(r||s(e,t))&&(e.propertiesOnly||(i.valid=!0),i.allAttributes||(i.allAttributes=n(e.attributes,t.attributes,i.validAttributes)),i.allStyles||(i.allStyles=n(e.styles,t.styles,i.validStyles)),!i.allClasses)){if(e=e.classes,t=t.classes,r=i.validClasses,e)if(!0===e)e=!0;else{for(var o,a=0,l=t.length;a<l;++a)o=t[a],r[o]||(r[o]=e(o));e=!1}else e=!1;i.allClasses=e}}function n(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var i in t)n[i]||(n[i]=e(i));return!1}function i(e,t,n){if(!e.match||e.match(t)){if(e.noProperties)return!1;if(n.hadInvalidAttribute=r(e.attributes,t.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=r(e.styles,t.styles)||n.hadInvalidStyle,e=e.classes,t=t.classes,e){for(var i=!1,o=!0===e,a=t.length;a--;)(o||e(t[a]))&&(t.splice(a,1),i=!0);e=i}else e=!1;n.hadInvalidClass=e||n.hadInvalidClass}}function r(e,t){if(!e)return!1;var n,i=!1,r=!0===e;for(n in t)(r||e(n))&&(delete t[n],i=!0);return i}function o(e,t,n){return!(e.disabled||e.customConfig&&!n||!t)&&(e._.cachedChecks={},!0)}function a(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return e=k(e),"*"==e||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var n,i={},r=0;for(n in e)i[n]=e[n],r++;return!!r&&i}function s(e,t){if(e.nothingRequired)return!0;var n,i,r,o;if(r=e.requiredClasses)for(o=t.classes,n=0;n<r.length;++n)if(i=r[n],"string"==typeof i){if(-1==CKEDITOR.tools.indexOf(o,i))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(o,i))return!1;return l(t.styles,e.requiredStyles)&&l(t.attributes,e.requiredAttributes)}function l(e,t){if(!t)return!0;for(var n,i=0;i<t.length;++i)if(n=t[i],"string"==typeof n){if(!(n in e))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,n))return!1;return!0}function u(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]="cke-test";return t}function c(e){var t,n,i,r,o={},a=1;for(e=k(e);t=e.match(N);)(n=t[2])?(i=d(n,"styles"),r=d(n,"attrs"),n=d(n,"classes")):i=r=n=null,o["$"+a++]={elements:t[1],classes:n,styles:i,attributes:r},e=e.slice(t[0].length);return o}function d(e,t){var n=e.match(P[t]);return n?k(n[1]):null}function f(e){var t=e.styleBackup=e.attributes.style,n=e.classBackup=e.attributes["class"];e.styles||(e.styles=CKEDITOR.tools.parseCssText(t||"",1)),e.classes||(e.classes=n?n.split(/\s+/):[])}function h(e,n,r,o){var a,s=0;if(o.toHtml&&(n.name=n.name.replace(A,"$1")),o.doCallbacks&&e.elementCallbacks){e:{a=e.elementCallbacks;for(var l,u=0,c=a.length;u<c;++u)if(l=a[u](n)){a=l;break e}a=void 0}if(a)return a}if(o.doTransform&&(a=e._.transformations[n.name])){for(f(n),u=0;u<a.length;++u)T(e,n,a[u]);m(n)}if(o.doFilter){e:{u=n.name,c=e._,e=c.allowedRules.elements[u],a=c.allowedRules.generic,u=c.disallowedRules.elements[u],c=c.disallowedRules.generic,l=o.skipRequired;var d,h,p={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(e||a){if(f(n),u)for(d=0,h=u.length;d<h;++d)if(!1===i(u[d],n,p)){e=null;break e}if(c)for(d=0,h=c.length;d<h;++d)i(c[d],n,p);if(e)for(d=0,h=e.length;d<h;++d)t(e[d],n,p,l);if(a)for(d=0,h=a.length;d<h;++d)t(a[d],n,p,l);e=p}else e=null}if(!e||!e.valid)return r.push(n),1;h=e.validAttributes;var E=e.validStyles;a=e.validClasses;u=n.attributes;var v=n.styles;c=n.classes;l=n.classBackup;var y,b,C=n.styleBackup,O=[],I=(p=[],/^data-cke-/);if(d=!1,delete u.style,delete u["class"],delete n.classBackup,delete n.styleBackup,!e.allAttributes)for(y in u)h[y]||I.test(y)&&(y==(b=y.replace(/^data-cke-saved-/,""))||h[b])||(delete u[y],d=!0);if(!e.allStyles||e.hadInvalidStyle){for(y in v)e.allStyles||E[y]?O.push(y+":"+v[y]):d=!0;O.length&&(u.style=O.sort().join("; "))}else C&&(u.style=C);if(!e.allClasses||e.hadInvalidClass){for(y=0;y<c.length;++y)(e.allClasses||a[c[y]])&&p.push(c[y]);p.length&&(u["class"]=p.sort().join(" ")),l&&p.length<l.split(/\s+/).length&&(d=!0)}else l&&(u["class"]=l);if(d&&(s=1),!o.skipFinalValidation&&!g(n))return r.push(n),1}return o.toHtml&&(n.name=n.name.replace(L,"cke:$1")),s}function p(e){var t,n=[];for(t in e)-1<t.indexOf("*")&&n.push(t.replace(/\*/g,".*"));return n.length?new RegExp("^(?:"+n.join("|")+")$"):null}function m(e){var t,n=e.attributes;delete n.style,delete n["class"],(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(n.style=t),e.classes.length&&(n["class"]=e.classes.sort().join(" "))}function g(e){switch(e.name){case"a":if(!(e.children.length||e.attributes.name||e.attributes.id))return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function E(e){if(!e)return!1;if(!0===e)return!0;var t=p(e);return function(n){return n in e||t&&n.match(t)}}function v(){return new CKEDITOR.htmlParser.element("br")}function y(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||D.$block[e.name])}function b(e,t,n){var i=e.name;if(D.$empty[i]||!e.children.length)"hr"==i&&"br"==t?e.replaceWith(v()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(D.$block[i]||"tr"==i)if("br"==t)e.previous&&!y(e.previous)&&(t=v(),t.insertBefore(e)),e.next&&!y(e.next)&&(t=v(),t.insertAfter(e)),e.replaceWithChildren();else{var r;i=e.children;e:{r=D[t];for(var o,a=0,s=i.length;a<s;++a)if(o=i[a],o.type==CKEDITOR.NODE_ELEMENT&&!r[o.name]){r=!1;break e}r=!0}if(r)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{r=e.parent;var l,u;for(a=r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==r.name,s=i.length;0<s;)o=i[--s],a&&(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&D.$inline[o.name])?(l||(l=new CKEDITOR.htmlParser.element(t),l.insertAfter(e),n.push({check:"parent-down",el:l})),l.add(o,0)):(l=null,u=D[r.name]||D.span,o.insertAfter(e),r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o.type!=CKEDITOR.NODE_ELEMENT||u[o.name]||n.push({check:"el-up",el:o}));e.remove()}}else i in{style:1,script:1}?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function T(e,t,n){var i,r;for(i=0;i<n.length;++i)if(r=n[i],!(r.check&&!e.check(r.check,!1)||r.left&&!r.left(t))){r.right(t,K);break}}function C(e,t){var n,i,r,o,a=t.getDefinition(),s=a.attributes,l=a.styles;if(e.name!=a.element)return!1;for(n in s)if("class"==n){for(a=s[n].split(/\s+/),r=e.classes.join("|");o=a.pop();)if(-1==r.indexOf(o))return!1}else if(e.attributes[n]!=s[n])return!1;for(i in l)if(e.styles[i]!=l[i])return!1;return!0}function O(e,t){var n,i;return"string"==typeof e?n=e:e instanceof CKEDITOR.style?i=e:(n=e[0],i=e[1]),[{element:n,left:i,right:function(e,n){n.transform(e,t)}}]}function I(e){return function(t){return C(t,e)}}function _(e){return function(t,n){n[e](t)}}var D=CKEDITOR.dtd,R=CKEDITOR.tools.copy,k=CKEDITOR.tools.trim,w=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(e,t){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var n=this.editor=e instanceof CKEDITOR.editor?e:null;if(n&&!t){this.customConfig=!0;var i=n.config.allowedContent;!0===i?this.disabled=!0:(i||(this.customConfig=!1),this.allow(i,"config",1),this.allow(n.config.extraAllowedContent,"extra",1),this.allow(w[n.enterMode]+" "+w[n.shiftEnterMode],"default",1),this.disallow(n.config.disallowedContent))}else this.customConfig=!1,this.allow(t||e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(t,n,i){if(!o(this,t,i))return!1;var r,a;if("string"==typeof t)t=c(t);else if(t instanceof CKEDITOR.style){if(t.toAllowedContentRules)return this.allow(t.toAllowedContentRules(this.editor),n,i);r=t.getDefinition(),t={},i=r.attributes,t[r.element]=r={styles:r.styles,requiredStyles:r.styles&&CKEDITOR.tools.objectKeys(r.styles)},i&&(i=R(i),r.classes=i["class"]?i["class"].split(/\s+/):null,r.requiredClasses=r.classes,delete i["class"],r.attributes=i,r.requiredAttributes=i&&CKEDITOR.tools.objectKeys(i))}else if(CKEDITOR.tools.isArray(t)){for(r=0;r<t.length;++r)a=this.allow(t[r],n,i);return a}return e(this,t,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(e,t,n,i){if(this.disabled)return!1;var r,o,a,s=this,l=[],u=this.editor&&this.editor.config.protectedSource,c=!1,d={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:t};for(e.forEach((function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;if(!t||"span"!=e.name||!~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-"))if(r=h(s,e,l,d),1&r)c=!0;else if(2&r)return!1}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;e:{var i,o,a,f=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));if(n=[],u)for(o=0;o<u.length;++o)if((a=f.match(u[o]))&&a[0].length==f.length){n=!0;break e}f=CKEDITOR.htmlParser.fragment.fromHtml(f),1==f.children.length&&(i=f.children[0]).type==CKEDITOR.NODE_ELEMENT&&h(s,i,n,d),n=!n.length}n||l.push(e)}}),null,!0),l.length&&(c=!0),e=[],i=w[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];n=l.pop();)n.type==CKEDITOR.NODE_ELEMENT?b(n,i,e):n.remove();for(;o=e.pop();)if(n=o.el,n.parent)switch(a=D[n.parent.name]||D.span,o.check){case"it":D.$removeEmpty[n.name]&&!n.children.length?b(n,i,e):g(n)||b(n,i,e);break;case"el-up":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||b(n,i,e);break;case"parent-down":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||b(n.parent,i,e)}return c},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},disallow:function(t){return!!o(this,t,!0)&&("string"==typeof t&&(t=c(t)),e(this,t,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(e){if(!this.disabled&&e){var t,n,i,r=[];for(t=0;t<e.length&&!i;++t)n=e[t],("string"==typeof n||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)r.push(O(e[t],i));this.addTransformations(r)}}},addElementCallback:function(e){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(e)},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!e.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(e.requiredContent))},addTransformations:function(e){var t,n;if(!this.disabled&&e){var i,r=this._.transformations;for(i=0;i<e.length;++i){t=e[i];var o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0;for(n=[],a=0;a<t.length;++a)s=t[a],"string"==typeof s?(s=s.split(/\s*:\s*/),l=s[0],u=null,c=s[1]):(l=s.check,u=s.left,c=s.right),o||(o=s,o=o.element?o.element:l?l.match(/^([a-z0-9]+)/i)[0]:o.left.getDefinition().element),u instanceof CKEDITOR.style&&(u=I(u)),n.push({check:l==o?null:l,left:u,right:"string"==typeof c?_(c):c});t=o,r[t]||(r[t]=[]),r[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var i=e.length;i--;)if(this.check(e[i],t,n))return!0;return!1}var r,o;if("string"==typeof e){if(o=e+"<"+(!1===t?"0":"1")+(n?"1":"0")+">",o in this._.cachedChecks)return this._.cachedChecks[o];r=c(e).$1;var a=r.styles;i=r.classes;r.name=r.elements,r.classes=i=i?i.split(/\s*,\s*/):[],r.styles=u(a),r.attributes=u(r.attributes),r.children=[],i.length&&(r.attributes["class"]=i.join(" ")),a&&(r.attributes.style=CKEDITOR.tools.writeCssText(r.styles))}else r=e.getDefinition(),a=r.styles,i=r.attributes||{},a&&!CKEDITOR.tools.isEmpty(a)?(a=R(a),i.style=CKEDITOR.tools.writeCssText(a,!0)):a={},r={name:r.element,attributes:i,classes:i["class"]?i["class"].split(/\s+/):[],styles:a,children:[]};a=CKEDITOR.tools.clone(r);var s,l=[];if(!1!==t&&(s=this._.transformations[r.name])){for(i=0;i<s.length;++i)T(this,r,s[i]);m(r)}return h(this,a,l,{doFilter:!0,doTransform:!1!==t,skipRequired:!n,skipFinalValidation:!n}),0<l.length?n=!1:((t=r.attributes["class"])&&(r.attributes["class"]=r.attributes["class"].split(" ").sort().join(" ")),n=CKEDITOR.tools.objectCompare(r.attributes,a.attributes,!0),t&&(r.attributes["class"]=t)),"string"==typeof e&&(this._.cachedChecks[o]=n),n},getAllowedEnterMode:function(){var e=["p","div","br"],t={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,i){var r,o=e.slice();if(this.check(w[n]))return n;for(i||(o=o.reverse());r=o.pop();)if(this.check(r))return t[r];return CKEDITOR.ENTER_BR}}(),clone:function(){var e=new CKEDITOR.filter,t=CKEDITOR.tools.clone;return e.allowedContent=t(this.allowedContent),e._.allowedRules=t(this._.allowedRules),e.disallowedContent=t(this.disallowedContent),e._.disallowedRules=t(this._.disallowedRules),e._.transformations=t(this._.transformations),e.disabled=this.disabled,e.editor=this.editor,e},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var K,S={styles:1,attributes:1,classes:1},x={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},N=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,P={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=/^cke:(object|embed|param)$/,L=/^(object|embed|param)$/;K=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){if(n=n||t,!(n in e.styles)){var i=e.attributes[t];i&&(/^\d+$/.test(i)&&(i+="px"),e.styles[n]=i)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){if(n=n||t,!(n in e.attributes)){var i=e.styles[t],r=i&&i.match(/^(\d+)(?:\.\d*)?px$/);r?e.attributes[n]=r[1]:"cke-test"==i&&(e.attributes[n]="cke-test")}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles["float"]=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles["float"]},splitBorderShorthand:function(e){if(e.styles.border){var t=CKEDITOR.tools.style.parse.border(e.styles.border);t.color&&(e.styles["border-color"]=t.color),t.style&&(e.styles["border-style"]=t.style),t.width&&(e.styles["border-width"]=t.width),delete e.styles.border}},listTypeToStyle:function(e){if(e.attributes.type)switch(e.attributes.type){case"a":e.styles["list-style-type"]="lower-alpha";break;case"A":e.styles["list-style-type"]="upper-alpha";break;case"i":e.styles["list-style-type"]="lower-roman";break;case"I":e.styles["list-style-type"]="upper-roman";break;case"1":e.styles["list-style-type"]="decimal";break;default:e.styles["list-style-type"]=e.attributes.type}},splitMarginShorthand:function(e){function t(t){e.styles["margin-top"]=n[t[0]],e.styles["margin-right"]=n[t[1]],e.styles["margin-bottom"]=n[t[2]],e.styles["margin-left"]=n[t[3]]}if(e.styles.margin){var n=e.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t([0,0,0,0]);break;case 2:t([0,1,0,1]);break;case 3:t([0,1,2,1]);break;case 4:t([0,1,2,3])}delete e.styles.margin}},matchesStyle:C,transform:function(e,t){if("string"==typeof t)e.name=t;else{var n,i,r,o,a=t.getDefinition(),s=a.styles,l=a.attributes;for(n in e.name=a.element,l)if("class"==n)for(a=e.classes.join("|"),r=l[n].split(/\s+/);o=r.pop();)-1==a.indexOf(o)&&e.classes.push(o);else e.attributes[n]=l[n];for(i in s)e.styles[i]=s[i]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout((function(){delete this._.timer,t.call(this)}),n,this)}},add:function(e,t){var n=e.getCustomData("focusmanager");if(!n||n!=this){n&&n.remove(e);n="focus";var i="blur";t&&(CKEDITOR.env.ie?(n="focusin",i="focusout"):CKEDITOR.event.useCapture=1);var r={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,r.focus,this),e.on(i,r.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",r)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,t=function(t){t=t.data;var n=t.getKeystroke(),i=this.keystrokes[n],r=this._.editor;return e=!1===r.fire("key",{keyCode:n,domEvent:t}),e||(i&&(e=!1!==r.execCommand(i,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[n])),e&&t.preventDefault(!0),!e},n=function(t){e&&(e=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",t,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&e.on("keypress",n,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e));var i=this;t=function(){i[e].dir=i.rtl[e]?"rtl":"ltr",n(e,i[e])},this[e]?t():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),t,this)},detect:function(e,t){var n=this.languages;t=t||navigator.userLanguage||navigator.language||e;var i=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),r=i[1];i=i[2];return n[r+"-"+i]?r=r+"-"+i:n[r]||(r=null),CKEDITOR.lang.detect=r?function(){return r}:function(e){return e},r||e}}}(),CKEDITOR.scriptLoader=function(){var e={},t={};return{load:function(n,i,r,o){var a="string"==typeof n;a&&(n=[n]),r||(r=CKEDITOR);var s=n.length,l=[],u=[],c=function(e){i&&(a?i.call(r,e):i.call(r,l,u))};if(0===s)c(!0);else{var d=function(e,t){(t?l:u).push(e),0>=--s&&(o&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),c(t))},f=function(n,i){e[n]=1;var r=t[n];delete t[n];for(var o=0;o<r.length;o++)r[o](n,i)},h=function(n){if(e[n])d(n,!0);else{var r=t[n]||(t[n]=[]);if(r.push(d),!(1<r.length)){var o=new CKEDITOR.dom.element("script");o.setAttributes({type:"text/javascript",src:n}),i&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?o.$.onreadystatechange=function(){"loaded"!=o.$.readyState&&"complete"!=o.$.readyState||(o.$.onreadystatechange=null,f(n,!0))}:(o.$.onload=function(){setTimeout((function(){f(n,!0)}),0)},o.$.onerror=function(){f(n,!1)})),o.appendTo(CKEDITOR.document.getHead())}}};o&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var p=0;p<s;p++)h(n[p])}},queue:function(){function e(){var e;(e=t[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var t=[];return function(n,i){var r=this;t.push({scriptUrl:n,callback:function(){i&&i.apply(this,arguments),t.shift(),e.call(r)}}),1==t.length&&e.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){e=e.split(",");for(var i=0;i<e.length;i++){var r=e[i];n||(t=t.replace(/[^\/]+$/,(function(e){return n=e,""}))),this.externals[r]={dir:t,file:n||this.fileName+".js"}}},load:function(e,t,n){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var i=this.loaded,r=this.registered,o=[],a={},s={},l=0;l<e.length;l++){var u=e[l];if(u)if(i[u]||r[u])s[u]=this.get(u);else{var c=this.getFilePath(u);o.push(c),c in a||(a[c]=[]),a[c].push(u)}}CKEDITOR.scriptLoader.load(o,(function(e,r){if(r.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+a[r[0]].join(",")+'" was not found at "'+r[0]+'".');for(var o=0;o<e.length;o++)for(var l=a[e[o]],u=0;u<l.length;u++){var c=l[u];s[c]=this.get(c),i[c]=1}t.call(n,s)}),this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(e){var t={};return function(n,i,r){var o={},a=function(n){e.call(this,n,(function(e){CKEDITOR.tools.extend(o,e);var n,s=[];for(n in e){var l=e[n],u=l&&l.requires;if(!t[n]){if(l.icons)for(var c=l.icons.split(","),d=c.length;d--;)CKEDITOR.skin.addIcon(c[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+c[d]+".png");t[n]=1}if(u)for(u.split&&(u=u.split(",")),l=0;l<u.length;l++)o[u[l]]||s.push(u[l])}if(s.length)a.call(this,s);else{for(n in o)l=o[n],l.onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete o[n],l.onLoad._called=1);i&&i.call(r||window,o)}}),this)};a.call(this,n)}})),CKEDITOR.plugins.setLang=function(e,t,n){var i=this.get(e);e=i.langEntries||(i.langEntries={}),i=i.lang||(i.lang=[]),i.split&&(i=i.split(",")),-1==CKEDITOR.tools.indexOf(i,t)&&i.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var i=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],i=t&&t.command&&this.editor.getCommand(t.command);n=n&&n.create.apply(this,t.args);return this.instances[e]=n,i&&i.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,r,a){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==r){if(!(r instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!a)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!n(r,a))throw Error('The specified element mode is not supported on element: "'+r.getName()+'".');this.element=r,this.elementMode=a,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(r.getId()||r.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||t(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",i),this.on("selectionChange",(function(e){o(this,e.data.path)})),this.on("activeFilterChange",(function(){o(this,this.elementPath(),!0)})),this.on("mode",i),this.on("instanceReady",(function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var e=this.createRange();e.selectNodeContents(this.editable()),e.shrink(CKEDITOR.SHRINK_ELEMENT,!0),e.collapse(),this.getSelection().selectRanges([e])}this.focus()}})),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout((function(){"destroyed"!==this.status?s(this,e):CKEDITOR.warn("editor-incorrect-destroy")}),0,this)}function t(){do{var e="editor"+ ++p}while(CKEDITOR.instances[e]);return e}function n(e,t){return t==CKEDITOR.ELEMENT_MODE_INLINE?e.is(CKEDITOR.dtd.$editable)||e.is("textarea"):t==CKEDITOR.ELEMENT_MODE_REPLACE?!e.is(CKEDITOR.dtd.$nonBodyContent):1}function i(){var e,t=this.commands;for(e in t)r(this,t[e])}function r(e,t){t[t.startDisabled||e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function o(e,t,n){if(t){var i,r,o=e.commands;for(r in o)i=o[r],(n||i.contextSensitive)&&i.refresh(e,t)}}function a(e){var t=e.config.customConfig;if(!t)return!1;t=CKEDITOR.getUrl(t);var n=m[t]||(m[t]={});return n.fn?(n.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=t&&a(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,(function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},a(e)})),!0}function s(e,t){e.on("customConfigLoaded",(function(){if(t){if(t.on)for(var n in t.on)e.on(n,t.on[n]);CKEDITOR.tools.extend(e.config,t,!0),delete e.config.on}n=e.config,e.readOnly=!!n.readOnly||(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.is("textarea")?e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"):e.element.isReadOnly():e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.element.hasAttribute("disabled")||e.element.hasAttribute("readonly"))),e.blockless=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(e.element.is("textarea")||CKEDITOR.dtd[e.element.getName()].p),e.tabIndex=n.tabIndex||e.element&&e.element.getAttribute("tabindex")||0,e.activeEnterMode=e.enterMode=e.blockless?CKEDITOR.ENTER_BR:n.enterMode,e.activeShiftEnterMode=e.shiftEnterMode=e.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),e.fireOnce("configLoaded"),e.dataProcessor=new CKEDITOR.htmlDataProcessor(e),e.filter=e.activeFilter=new CKEDITOR.filter(e),l(e)})),t&&null!=t.customConfig&&(e.config.customConfig=t.customConfig),a(e)||e.fireOnce("customConfigLoaded")}function l(e){CKEDITOR.skin.loadPart("editor",(function(){u(e)}))}function u(e){CKEDITOR.lang.load(e.config.language,e.config.defaultLanguage,(function(t,n){var i=e.config.title;e.langCode=t,e.lang=CKEDITOR.tools.prototypedCopy(n),e.title="string"==typeof i||!1===i?i:[e.lang.editor,e.name].join(", "),e.config.contentsLangDirection||(e.config.contentsLangDirection=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.element.getDirection(1):e.lang.dir),e.fire("langLoaded"),c(e)}))}function c(e){e.getStylesSet((function(t){e.once("loaded",(function(){e.fire("stylesSet",{styles:t})}),null,null,1),d(e)}))}function d(e){function t(e){return e?(CKEDITOR.tools.isArray(e)&&(e=e.join(",")),e.replace(/\s/g,"")):""}var n=e.config,i=t(n.plugins),r=t(n.extraPlugins),o=t(n.removePlugins);if(r){var a=new RegExp("(?:^|,)(?:"+r.replace(/,/g,"|")+")(?=,|$)","g");i=i.replace(a,""),i=i+","+r}if(o){var s=new RegExp("(?:^|,)(?:"+o.replace(/,/g,"|")+")(?=,|$)","g");i=i.replace(s,"")}CKEDITOR.env.air&&(i+=",adobeair"),CKEDITOR.plugins.load(i.split(","),(function(t){var i=[],r=[],o=[];for(var a in e.plugins=CKEDITOR.tools.extend({},e.plugins,t),t){var l,u=t[a],c=u.lang,d=null,f=u.requires;if(CKEDITOR.tools.isArray(f)&&(f=f.join(",")),f&&(l=f.match(s)))for(;f=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:f.replace(",",""),requiredBy:a});c&&!e.lang[a]&&(c.split&&(c=c.split(",")),0<=CKEDITOR.tools.indexOf(c,e.langCode)?d=e.langCode:(d=e.langCode.replace(/-.*/,""),d=d!=e.langCode&&0<=CKEDITOR.tools.indexOf(c,d)?d:0<=CKEDITOR.tools.indexOf(c,"en")?"en":c[0]),u.langEntries&&u.langEntries[d]?(e.lang[a]=u.langEntries[d],d=null):o.push(CKEDITOR.getUrl(u.path+"lang/"+d+".js"))),r.push(d),i.push(u)}CKEDITOR.scriptLoader.load(o,(function(){for(var t=["beforeInit","init","afterInit"],o=0;o<t.length;o++)for(var a=0;a<i.length;a++){var s=i[a];0===o&&r[a]&&s.lang&&s.langEntries&&(e.lang[s.name]=s.langEntries[r[a]]),s[t[o]]&&s[t[o]](e)}for(e.fireOnce("pluginsLoaded"),n.keystrokes&&e.setKeystroke(e.config.keystrokes),a=0;a<e.config.blockedKeystrokes.length;a++)e.keystrokeHandler.blockedKeystrokes[e.config.blockedKeystrokes[a]]=1;e.status="loaded",e.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,e)}))}))}function f(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}function h(e,t){function n(e){var t=e.startContainer,n=e.endContainer;return!(!t.is||!(t.is("tr")||t.is("td")&&t.equals(n)&&e.endOffset===t.getChildCount()))}function i(e){var t=e.startContainer;return t.is("tr")?e.cloneContents():t.clone(!0)}for(var r,o,a,s=new CKEDITOR.dom.documentFragment,l=0;l<e.length;l++){var u=e[l],c=u.startContainer.getAscendant("tr",!0);n(u)?(r||(r=c.getAscendant("table").clone(),r.append(c.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),s.append(r),r=r.findOne("thead, tbody, tfoot")),o&&o.equals(c)||(o=c,a=c.clone(),r.append(a)),a.append(i(u))):s.append(u.cloneContents())}return r?s:t.getHtmlFromRange(e[0])}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var p=0,m={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(this[i])return CKEDITOR.warn("editor-plugin-conflict",{plugin:e,replacedWith:i}),!0}return!1}},addCommand:function(e,t){t.name=e.toLowerCase();var n=t instanceof CKEDITOR.command?t:new CKEDITOR.command(this,t);return this.mode&&r(this,n),this.commands[e]=n},_attachToForm:function(){function e(e){n.updateElement(),n._.required&&!i.getValue()&&!1===n.fire("required")&&e.data.preventDefault()}function t(e){return!!(e&&e.call&&e.apply)}var n=this,i=n.element,r=new CKEDITOR.dom.element(i.$.form);i.is("textarea")&&r&&(r.on("submit",e),t(r.$.submit)&&(r.$.submit=CKEDITOR.tools.override(r.$.submit,(function(t){return function(){e(),t.apply?t.apply(this):t()}}))),n.on("destroy",(function(){r.removeListener("submit",e)})))},destroy:function(e){var t=CKEDITOR.filter.instances,n=this;this.fire("beforeDestroy"),!e&&f.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(t),(function(e){e=t[e],n===e.editor&&e.destroy()})),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){if(!e){if(e=this.getSelection(),!e)return null;e=e.getStartElement()}return e?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),i={name:e,commandData:t||{},command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",i)||(i.returnValue=n.exec(i.commandData),n.async||!1===this.fire("afterCommandExec",i)))&&i.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){var i=!0,r=t;t&&"object"==typeof t&&(n=t.internal,r=t.callback,i=!t.noSnapshot),!n&&i&&this.fire("saveSnapshot"),!r&&n||this.once("dataReady",(function(e){!n&&i&&this.fire("saveSnapshot"),r&&r.call(e.editor)})),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t,n){this.fire("insertHtml",{dataValue:e,mode:t,range:n})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},getSelectedHtml:function(e){var t=this.editable(),n=this.getSelection();n=n&&n.getRanges();return t&&n&&0!==n.length?(t=h(n,t),e?t.getHtml():t):null},extractSelectedHtml:function(e,t){var n,i=this.editable(),r=this.getSelection().getRanges(),o=new CKEDITOR.dom.documentFragment;if(!i||0===r.length)return null;for(n=0;n<r.length;n++)o.append(i.extractHtmlFromRange(r[n],t));return t||this.getSelection().selectRanges([r[0]]),e?o.getHtml():o},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return f.call(this)},setKeystroke:function(){for(var e,t,n=this.keystrokeHandler.keystrokes,i=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],r=i.length;r--;)e=i[r],t=0,CKEDITOR.tools.isArray(e)&&(t=e[1],e=e[0]),t?n[e]=t:delete n[e]},getCommandKeystroke:function(e,t){var n="string"===typeof e?this.getCommand(e):e,i=[];if(n){var r=CKEDITOR.tools.object.findKey(this.commands,n),o=this.keystrokeHandler.keystrokes;if(n.fakeKeystroke)i.push(n.fakeKeystroke);else for(var a in o)o[a]===r&&i.push(a)}return t?i:i[0]||null},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))},showNotification:function(e){alert(e)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,t={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var i,r,o,a=0;i=this._.htmlPartsRegex.exec(n);)if(r=i.index,r>a&&(a=n.substring(a,r),o?o.push(a):this.onText(a)),a=this._.htmlPartsRegex.lastIndex,!(r=i[1])||(r=r.toLowerCase(),o&&CKEDITOR.dtd.$cdata[r]&&(this.onCDATA(o.join("")),o=null),o))if(o)o.push(i[0]);else if(r=i[3]){if(r=r.toLowerCase(),!/="/.test(r)){var s,l={},u=i[4];if(i=!!i[5],u)for(;s=e.exec(u);){var c=s[1].toLowerCase();s=s[2]||s[3]||s[4]||"",l[c]=!s&&t[c]?c:CKEDITOR.tools.htmlDecodeAttr(s)}this.onTagOpen(r,l,i),!o&&CKEDITOR.dtd.$cdata[r]&&(o=[])}}else(r=i[2])&&this.onComment(r);else this.onTagClose(r);n.length>a&&this.onText(n.substring(a,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,i=this.next;n&&(n.next=i),i&&(i.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),i=e.previous=this.previous,r=e.next=this.next;i&&(i.next=e),r&&(r.previous=e),t[n]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),i=e.next;t.splice(n+1,0,this),this.next=e.next,this.previous=e,e.next=this,i&&(i.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var t="function"==typeof e?e:"string"==typeof e?function(t){return t.name==e}:function(t){return t.name in e},n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(t(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var t=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},i=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),r={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(o,a,s){function l(e){var t;if(0<g.length)for(var n=0;n<g.length;n++){var i=g[n],r=i.name,o=CKEDITOR.dtd[r],a=v.name&&CKEDITOR.dtd[v.name];a&&!a[r]||e&&o&&!o[e]&&CKEDITOR.dtd[e]?r==v.name&&(d(v,v.parent,1),n--):(t||(u(),t=1),i=i.clone(),i.parent=v,v=i,g.splice(n,1),n--)}}function u(){for(;E.length;)d(E.shift(),v)}function c(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,n=e.children.length,i=e.children[n-1];i&&i.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(i.value))?i.value=t:e.children.length=n-1)}}function d(t,n,i){n=n||v||m;var r=v;void 0===t.previous&&(f(n,t)&&(v=n,p.onTagOpen(s,{}),t.returnPoint=n=v),c(t),e(t)&&!t.children.length||n.add(t),"pre"==t.name&&(b=!1),"textarea"==t.name&&(y=!1)),t.returnPoint?(v=t.returnPoint,delete t.returnPoint):v=i?n:r}function f(e,t){var n,i;if((e==m||"body"==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s]))return(n=t.attributes&&(i=t.attributes["data-cke-real-element-type"])?i:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}function h(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var p=new CKEDITOR.htmlParser,m=a instanceof CKEDITOR.htmlParser.element?a:"string"==typeof a?new CKEDITOR.htmlParser.element(a):new CKEDITOR.htmlParser.fragment,g=[],E=[],v=m,y="textarea"==m.name,b="pre"==m.name;for(p.onTagOpen=function(r,o,a,s){if(o=new CKEDITOR.htmlParser.element(r,o),o.isUnknown&&a&&(o.isEmpty=!0),o.isOptionalClose=s,e(o))g.push(o);else{if("pre"==r)b=!0;else{if("br"==r&&b)return void v.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==r&&(y=!0)}if("br"==r)E.push(o);else{for(;s=(a=v.name)?CKEDITOR.dtd[a]||(v._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i,!(o.isUnknown||v.isUnknown||s[r]);)if(v.isOptionalClose)p.onTagClose(a);else if(r in n&&a in n)a=v.children,(a=a[a.length-1])&&"li"==a.name||d(a=new CKEDITOR.htmlParser.element("li"),v),!o.returnPoint&&(o.returnPoint=v),v=a;else if(r in CKEDITOR.dtd.$listItem&&!h(r,a))p.onTagOpen("li"==r?"ul":"dl",{},0,1);else if(a in t&&!h(r,a))!o.returnPoint&&(o.returnPoint=v),v=v.parent;else{if(a in CKEDITOR.dtd.$inline&&g.unshift(v),!v.parent){o.isOrphan=1;break}d(v,v.parent,1)}l(r),u(),o.parent=v,o.isEmpty?d(o):v=o}}},p.onTagClose=function(e){for(var t=g.length-1;0<=t;t--)if(e==g[t].name)return void g.splice(t,1);for(var n=[],i=[],r=v;r!=m&&r.name!=e;)r._.isBlockLike||i.unshift(r),n.push(r),r=r.returnPoint||r.parent;if(r!=m){for(t=0;t<n.length;t++){var o=n[t];d(o,o.parent)}v=r,r._.isBlockLike&&u(),d(r,r.parent),r==v&&(v=v.parent),g=g.concat(i)}"body"==e&&(s=!1)},p.onText=function(e){if(v._.hasInlineStarted&&!E.length||b||y||(e=CKEDITOR.tools.ltrim(e),0!==e.length)){var n=v.name,o=n?CKEDITOR.dtd[n]||(v._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i;y||o["#"]||!(n in t)?(u(),l(),b||y||(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),f(v,e)&&this.onTagOpen(s,{},0,1),v.add(e)):(p.onTagOpen(r[n]||""),p.onText(e))}},p.onCDATA=function(e){v.add(new CKEDITOR.htmlParser.cdata(e))},p.onComment=function(e){u(),l(),v.add(new CKEDITOR.htmlParser.comment(e))},p.parse(o),u();v!=m;)d(v,v.parent,1);return c(m),m},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(e);n.next=e}e.previous=n,e.parent=this,this.children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id)for(n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var i=this.getFilterContext();for(n&&!this.parent&&t&&t.onRoot(i,this),t&&this.filterChildren(t,!1,i),t=0,n=this.children,i=n.length;t<i;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.children;for(var r=0;r<n.length;r++)i=n[r],i.type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):t&&i.type!=t||e(i)}},getFilterContext:function(e){return e||{}}}}(),function(){function e(){this.rules=[]}function t(t,n,i,r){var o,a;for(o in n)(a=t[o])||(a=t[o]=new e),a.add(n[o],i,r)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,t&&this.addRules(t,10)},proto:{addRules:function(e,n){var i;"number"==typeof n?i=n:n&&"priority"in n&&(i=n.priority),"number"!=typeof i&&(i=10),"object"!=typeof n&&(n={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,i,n),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,i,n),e.elements&&t(this.elementsRules,e.elements,i,n),e.attributes&&t(this.attributesRules,e.attributes,i,n),e.text&&this.textRules.add(e.text,i,n),e.comment&&this.commentRules.add(e.comment,i,n),e.root&&this.rootRules.add(e.root,i,n)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t,n){return this.textRules.exec(e,t,n)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n,i=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],r=0;3>r;r++)if(n=i[r]){if(n=n.exec(e,t,this),!1===n)return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,i){return(n=this.attributesRules[n])?n.exec(e,i,t,this):i}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var i=[this.findIndex(t),0],r=0,o=e.length;r<o;r++)i.push({value:e[r],priority:t,options:n});this.rules.splice.apply(this.rules,i)},findIndex:function(e){for(var t=this.rules,n=t.length-1;0<=n&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n,i,r,o,a=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,s=Array.prototype.slice.call(arguments,1),l=this.rules,u=l.length;for(o=0;o<u;o++)if(a&&(n=t.type,i=t.name),r=l[o],!(e.nonEditable&&!r.options.applyToAll||e.nestedEditable&&r.options.excludeNestedEditable)){if(r=r.value.apply(null,s),!1===r||a&&r&&(r.name!=i||r.type!=n))return r;null!=r&&(s[0]=t=r)}return t},execOnName:function(e,t){for(var n,i=0,r=this.rules,o=r.length;t&&i<o;i++)n=r[i],e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable||(t=t.replace(n.value[0],n.value[1]));return t}}}(),function(){function e(e,t){function s(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(e,t){return function(r){if(r.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a,l,c=[],d=n(r);if(d)for(u(d,1)&&c.push(d);d;)o(d)&&(a=i(d))&&u(a)&&((l=i(a))&&!o(l)?c.push(a):(s(f).insertAfter(a),a.remove())),d=d.previous;for(d=0;d<c.length;d++)c[d].remove();(c=!e||!1!==("function"==typeof t?t(r):t))&&((f||CKEDITOR.env.needsBrFiller||r.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(f||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||r.name in CKEDITOR.dtd.tr||r.name in CKEDITOR.dtd.$listItem))?(c=n(r),c=!c||"form"==r.name&&"input"==c.name):c=!1),c&&r.add(s(e))}}}function u(e,t){return!(f&&!CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_ELEMENT||"br"!=e.name||e.attributes["data-cke-eol"])||!!(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(v))&&(n.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,n.index)).insertBefore(e),e.value=n[0]),!CKEDITOR.env.needsBrFiller&&f&&(!t||e.parent.name in h)||!f&&((n=e.previous)&&"br"==n.name||!n||o(n))));var n}var c,d={elements:{}},f="html"==t,h=CKEDITOR.tools.extend({},C);for(c in h)"#"in b[c]||delete h[c];for(c in h)d.elements[c]=l(f,e.config.fillEmptyBlocks);return d.root=l(f,!1),d.elements.br=function(e){return function(t){if(t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=t.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=t.next;n&&r(n);)n=n.next;var l=i(t);!n&&o(t.parent)?a(t.parent,s(e)):o(n)&&l&&!o(l)&&s(e).insertBefore(n)}}}}(f),d}function t(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function n(e){for(e=e.children[e.children.length-1];e&&r(e);)e=e.previous;return e}function i(e){for(e=e.previous;e&&r(e);)e=e.previous;return e}function r(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function o(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in C||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function a(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&(n.next=t,t.previous=n)}function s(e){e=e.attributes,"false"!=e.contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function l(e){switch(e=e.attributes,e["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function u(e){return e.replace(R,(function(e,t,n){return"<"+t+n.replace(k,(function(e,t){return w.test(t)&&-1==n.indexOf("data-cke-saved-"+t)?" data-cke-saved-"+e+" data-cke-"+CKEDITOR.rnd+"-"+e:e}))+">"}))}function c(e,t){return e.replace(t,(function(e,t,n){return 0===e.indexOf("<textarea")&&(e=t+m(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"}))}function d(e){return e.replace(x,(function(e,t){return decodeURIComponent(t)}))}function f(e){return e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,(function(e){return"\x3c!--"+y+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"--\x3e"}))}function h(e){return CKEDITOR.tools.array.reduce(e.split(""),(function(e,t){var n=t.toLowerCase(),i=t.toUpperCase(),r=p(n);return n!==i&&(r+="|"+p(i)),e+"("+r+")"}),"")}function p(e){var t;t=e.charCodeAt(0);var n=t.toString(16);for(var i in t={htmlCode:"&#"+t+";?",hex:"&#x0*"+n+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[e]},t)t[i]&&(e+="|"+t[i]);return e}function m(e){return e.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)}))}function g(e,t){var n=t._.dataStore;return e.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,(function(e,t){return decodeURIComponent(t)})).replace(/\{cke_protected_(\d+)\}/g,(function(e,t){return n&&n[t]||""}))}function E(e,t){var n=[],i=t.config.protectedSource,r=t._.dataStore||(t._.dataStore={id:1}),o=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;i=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(i);e=e.replace(/\x3c!--[\s\S]*?--\x3e/g,(function(e){return"\x3c!--{cke_tempcomment}"+(n.push(e)-1)+"--\x3e"}));for(var a=0;a<i.length;a++)e=e.replace(i[a],(function(e){return e=e.replace(o,(function(e,t,i){return n[i]})),/cke_temp(comment)?/.test(e)?e:"\x3c!--{cke_temp}"+(n.push(e)-1)+"--\x3e"}));return e=e.replace(o,(function(e,t,i){return"\x3c!--"+y+(t?"{C}":"")+encodeURIComponent(n[i]).replace(/--/g,"%2D%2D")+"--\x3e"})),e=e.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,(function(e){return e.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,(function(e,t){return r[r.id]=decodeURIComponent(t),"{cke_protected_"+r.id+++"}"}))})),e.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,(function(e,n,i,r){return"<"+n+i+">"+g(m(r),t)+"</"+n+">"}))}CKEDITOR.htmlDataProcessor=function(n){var i,r,o=this;this.editor=n,this.dataFilter=i=new CKEDITOR.htmlParser.filter,this.htmlFilter=r=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,i.addRules(O),i.addRules(I,{applyToAll:!0}),i.addRules(e(n,"data"),{applyToAll:!0}),r.addRules(_),r.addRules(D,{applyToAll:!0}),r.addRules(e(n,"html"),{applyToAll:!0}),n.on("toHtml",(function(e){e=e.data;var i,r,o=e.dataValue;o=o.replace(N,""),o=E(o,n),o=c(o,S),o=u(o),o=c(o,K),o=o.replace(P,"$1cke:$2"),o=o.replace(L,"<cke:$1$2></cke:$1>"),o=o.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),o=o.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");i=e.context||n.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==i&&(i="div",o="<pre>"+o+"</pre>",r=1),i=n.document.createElement(i),i.setHtml("a"+o),o=i.getHtml().substr(1),o=o.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),r&&(o=o.replace(/^<pre>|<\/pre>$/gi,"")),o=o.replace(A,"$1$2"),o=d(o),o=m(o),i=!1!==e.fixForBody&&t(e.enterMode,n.config.autoParagraph),o=CKEDITOR.htmlParser.fragment.fromHtml(o,e.context,i),i&&(r=o,!r.children.length&&CKEDITOR.dtd[r.name][i]&&(i=new CKEDITOR.htmlParser.element(i),r.add(i))),e.dataValue=o}),null,null,5),n.on("toHtml",(function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&n.fire("dataFiltered")}),null,null,6),n.on("toHtml",(function(e){e.data.dataValue.filterChildren(o.dataFilter,!0)}),null,null,10),n.on("toHtml",(function(e){e=e.data;var t=e.dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=f(t)}),null,null,15),n.on("toDataFormat",(function(e){var i=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(i,e.data.context,t(e.data.enterMode,n.config.autoParagraph))}),null,null,5),n.on("toDataFormat",(function(e){e.data.dataValue.filterChildren(o.htmlFilter,!0)}),null,null,10),n.on("toDataFormat",(function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)}),null,null,11),n.on("toDataFormat",(function(e){var t=e.data.dataValue,i=o.writer;i.reset(),t.writeChildrenHtml(i),t=i.getHtml(!0),t=m(t),t=g(t,n),e.data.dataValue=t}),null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,i){var r,o,a,s,l=this.editor;return t&&"object"==typeof t?(r=t.context,n=t.fixForBody,i=t.dontFilter,o=t.filter,a=t.enterMode,s=t.protectedWhitespaces):r=t,r||null===r||(r=l.editable().getName()),l.fire("toHtml",{dataValue:e,context:r,fixForBody:n,dontFilter:i,filter:o||l.filter,enterMode:a||l.enterMode,protectedWhitespaces:s}).dataValue},toDataFormat:function(e,t){var n,i,r;return t&&(n=t.context,i=t.filter,r=t.enterMode),n||null===n||(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:i||this.editor.filter,context:n,enterMode:r||this.editor.enterMode}).dataValue}};var v=/(?:&nbsp;|\xa0)$/,y="{cke_protected}",b=CKEDITOR.dtd,T="caption colgroup col thead tfoot tbody".split(" "),C=CKEDITOR.tools.extend({},b.$blockLimit,b.$block),O={elements:{input:s,textarea:s}},I={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(e){if(e.attributes&&e.attributes.src){var t=e.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");0!==t.indexOf("javascript")&&0!==t.indexOf("data")||(e.attributes["data-cke-pa-src"]=e.attributes.src,delete e.attributes.src)}}}},_={elements:{embed:function(e){var t=e.parent;if(t&&"object"==t.name){var n=t.attributes.width;t=t.attributes.height;n&&(e.attributes.width=n),t&&(e.attributes.height=t)}},a:function(e){var t=e.attributes;if(!(e.children.length||t.name||t.id||e.attributes["data-cke-saved-name"]))return!1}}},D={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n,i=["name","href","src"],r=0;r<i.length;r++)n="data-cke-saved-"+i[r],n in t&&delete t[i[r]]}return e},table:function(e){e.children.slice(0).sort((function(e,t){var n,i;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(T,e.name),i=CKEDITOR.tools.indexOf(T,t.name)),-1<n&&-1<i&&n!=i||(n=e.parent?e.getIndex():-1,i=t.parent?t.getIndex():-1),n>i?1:-1}))},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes["class"]&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&a(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(D.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,(function(e){return e.toLowerCase()}))});var R=/<(a|area|img|input|source)\b([^>]*)>/gi,k=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,w=/^(href|src|name)$/i,K=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,S=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,x=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=new RegExp("("+h("<cke:encoded>")+"(.*?)"+h("</cke:encoded>")+")|("+h("<")+h("/")+"?"+h("cke:encoded>")+")","gi"),P=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,A=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,L=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",i=n.match(/^cke:(.*)/);i&&(n=i[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var t={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,(function(e,n,i){"font-family"==n&&(i=i.replace(/["']/g,"")),t[n.toLowerCase()]=i})),{rules:t,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,n=[];for(e in t)t[e]&&n.push(e,":",t[e],";");return n.join("")}}},function(){function e(e){return function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof e?t.name==e:t.name in e)}}var t=function(e,t){return e=e[0],t=t[0],e<t?-1:e>t?1:0},n=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:n.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n,i,r,o,a=this;for(t=a.getFilterContext(t),a.parent||e.onRoot(t,a);;){if(n=a.name,!(i=e.onElementName(t,n)))return this.remove(),!1;if(a.name=i,!(a=e.onElement(t,a)))return this.remove(),!1;if(a!==this)return this.replaceWith(a),!1;if(a.name==n)break;if(a.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(a),!1;if(!a.name)return this.replaceWithChildren(),!1}for(r in n=a.attributes,n){for(i=n[r];;){if(!(o=e.onAttributeName(t,r))){delete n[r];break}if(o==r)break;delete n[r],r=o}o&&(!1===(i=e.onAttribute(t,a,o,i))?delete n[o]:n[o]=i)}return a.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:n.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var i,r,o=this.name,a=[],s=this.attributes;for(i in e.openTag(o,s),s)a.push([i,s[i]]);for(e.sortAttributes&&a.sort(t),i=0,r=a.length;i<r;i++)s=a[i],e.attribute(s[0],s[1]);e.openTagClose(o,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(o)},writeChildrenHtml:n.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:n.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=e(t));for(var n=0,i=this.children.length;n<i;++n)if(t(this.children[n]))return this.children[n];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children;for(var t=0,n=e.length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),i=0;i<t.length;++i)t[i].parent=n;return n.children=t,t[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},find:function(e,t){void 0===t&&(t=!1);var n,i=[];for(n=0;n<this.children.length;n++){var r=this.children[n];("function"==typeof e&&e(r)||"string"==typeof e&&r.name===e)&&i.push(r),t&&r.find&&(i=i.concat(r.find(e,t)))}return i},addClass:function(e){if(!this.hasClass(e)){var t=this.attributes["class"]||"";this.attributes["class"]=t+(t?" ":"")+e}},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(new RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return!!t&&new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={nonEditable:!1,nestedEditable:!1}),e.nonEditable||"false"!=this.attributes.contenteditable?e.nonEditable&&!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]}return e}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(e){this.source=String(e)},CKEDITOR.template.prototype.output=function(t,n){var i=this.source.replace(e,(function(e,n){return void 0!==t[n]?t[n]:e}));return n?n.push(i):i}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",(function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))})),e.on("blur",(function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))})),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(t,n){var i=e[t];return i||(i={name:t,source:n},CKEDITOR.fire("template",i),e[t]=new CKEDITOR.template(i.source))},CKEDITOR.getTemplate=function(t){return e[t]}}(),function(){var e=[];CKEDITOR.addCss=function(t){e.push(t)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",(function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")})),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),i=e.is("textarea")?e:null;return i?(n.setData(i.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+i.getValue()+"</div>",CKEDITOR.document),e.insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",(function(){n.fire("uiReady"),n.editable(e),n.container=e,n.ui.contentsElement=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)}),null,null,1e4),n.on("destroy",(function(){i&&(n.container.clearCustomData(),n.container.remove(),i.show()),n.element.clearCustomData(),delete n.element})),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(n),r=0,o=i.count();r<o;r++)e=i.getItem(r),"true"==e.getAttribute("contenteditable")&&(t={element:e,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config))},CKEDITOR.domReady((function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}))}(),CKEDITOR.replaceClass="ckeditor",function(){function e(e,i,r,o){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var a=new CKEDITOR.editor(i,e,o);return o==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),a._.required=e.hasAttribute("required"),e.removeAttribute("required")),r&&a.setData(r,null,!0),a.on("loaded",(function(){n(a),o==CKEDITOR.ELEMENT_MODE_REPLACE&&a.config.autoUpdateElement&&e.$.form&&a._attachToForm(),a.setMode(a.config.startupMode,(function(){a.resetDirty(),a.status="ready",a.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,a)}))})),a.on("destroy",t),a}function t(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function n(e){var t=e.name,n=e.element,i=e.elementMode,r=e.fire("uiSpace",{space:"top",html:""}).html,o=e.fire("uiSpace",{space:"bottom",html:""}).html,a=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(e.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(e.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');t=CKEDITOR.dom.element.createFromHtml(a.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:e.title,topHtml:r?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+r+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:o?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+o+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,e.ui.contentsElement=e.ui.space("contents"),r&&e.ui.space("top").unselectable(),o&&e.ui.space("bottom").unselectable(),n=e.config.width,i=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",(function(){e.focus()})),e.fireOnce("uiReady")}CKEDITOR.replace=function(t,n){return e(t,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(t,n,i){return e(t,n,i,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var n=null,i=e[t];if(i.name||i.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(i.className))continue}else if("function"==typeof arguments[0]&&(n={},!1===arguments[0](i,n)))continue;this.replace(i,n)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,i=this._.modes;if(e!=n.mode&&i&&i[e]){if(n.fire("beforeSetMode",e),n.mode){var r,o=n.checkDirty(),a=(i=n._.previousModeData,0);n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=r=n.getData(1),"source"==n.mode&&i==r&&(n.fire("lockSnapshot",{forceUpdate:!0}),a=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[e]((function(){n.mode=e,void 0!==o&&!o&&n.resetDirty(),a?n.fire("unlockSnapshot"):"wysiwyg"==e&&n.fire("saveSnapshot"),setTimeout((function(){n.fire("mode"),t&&t.call(n)}),0)}))}},CKEDITOR.editor.prototype.resize=function(e,t,n,i){var r=this.container,o=this.ui.space("contents"),a=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;i=i?this.container.getFirst((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_inner")})):r,i.setSize("width",e,!0),a&&(a.style.width="1%");var s=(i.$.offsetHeight||0)-(o.$.clientHeight||0);r=Math.max(t-(n?0:s),0);t=n?t+s:t,o.setStyle("height",r+"px"),a&&(a.style.width="100%"),this.fire("resize",{outerHeight:t,contentsHeight:r,outerWidth:e||i.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady((function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)}))}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(e){var n,r=e.editor,o=e.data.path,s=o.blockLimit,l=e.data.selection,u=l.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(l=t(l,o))&&(l.appendBogus(),n=CKEDITOR.env.ie),a(r,o.block,s)&&u.collapsed&&!u.getCommonAncestor().isReadOnly()&&(o=u.clone(),o.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),s=new CKEDITOR.dom.walker(o),s.guard=function(e){return!i(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},!s.checkForward()||o.checkStartOfBlock()&&o.checkEndOfBlock())&&(r=u.fixBlock(!0,r.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(r=r.getFirst(i))&&r.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(r.getText()).match(/^(?:&nbsp;|\xa0)$/)&&r.remove(),n=1,e.cancel()),n&&u.select()}function t(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,r=n&&n.getLast(i);return!n||!n.isBlockBoundary()||r&&r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()||n.is("pre")||n.getBogus()?void 0:n}function n(e){var t=e.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),"submit"!=t&&"reset"!=t||e.data.preventDefault())}function i(e){return c(e)&&d(e)}function r(e,t){return function(n){var i=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(i=i&&i.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(i):null)&&(t.equals(i)||t.contains(i))||e.call(this,n)}}function o(e){function t(e){return function(t,r){if(r&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(o)&&(n=t),!(r||!i(t)||e&&h(t)))return!1}}var n,r=e.getRanges()[0];e=e.root;var o={table:1,ul:1,ol:1,dl:1};if(r.startPath().contains(o)){var a=r.clone();if(a.collapse(1),a.setStartAt(e,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(a),e.guard=t(),e.checkBackward(),n)return a=r.clone(),a.collapse(),a.setEndAt(n,CKEDITOR.POSITION_AFTER_END),e=new CKEDITOR.dom.walker(a),e.guard=t(!0),n=!1,e.checkForward(),n}return null}function a(e,t,n){return!1!==e.config.autoParagraph&&e.activeEnterMode!=CKEDITOR.ENTER_BR&&(e.editable().equals(n)&&!t||t&&"true"==t.getAttribute("contenteditable"))}function s(e){return e.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==e.config.autoParagraph&&(e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function l(e){var t=e.editor;t.getSelection().scrollIntoView(),setTimeout((function(){t.fire("saveSnapshot")}),0)}function u(e,t,n){var i=e.getCommonAncestor(t);for(t=e=n?t:e;(e=e.getParent())&&!i.equals(e)&&1==e.getChildCount();)t=e;t.remove()}var c,d,f,h,p,m,g,E,v,y;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))e.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var t=this.$.scrollTop;this.$.focus(),this.$.scrollTop=t}else this.$.focus();else this.$.setActive()}catch(e){if(!CKEDITOR.env.ie)throw e}CKEDITOR.env.safari&&!this.isInline()&&(e=CKEDITOR.document.getActive(),e.equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=r(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e){!this._.listeners&&(this._.listeners=[]);var t=Array.prototype.slice.call(arguments,1);t=e.on.apply(e,t);return this._.listeners.push(t),t},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(e){}},restoreAttrs:function(){var e,t,n=this._.attrChanges;for(t in n)n.hasOwnProperty(t)&&(e=n[t],null!==e?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertText:function(e){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(e),"text")},transformPlainTextToHtml:function(e){var t=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(e,t)},insertHtml:function(e,t,n){var i=this.editor;i.focus(),i.fire("saveSnapshot"),n||(n=i.getSelection().getRanges()[0]),m(this,t||"html",e,n),n.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(e,t,n){m(this,n||"html",e,t),this.editor.fire("afterInsertHtml",{intoRange:t})},insertElement:function(e,t){var n=this.editor;n.focus(),n.fire("saveSnapshot");var r=n.activeEnterMode,o=(n=n.getSelection(),e.getName());o=CKEDITOR.dtd.$block[o];t||(t=n.getRanges()[0]),this.insertElementIntoRange(e,t)&&(t.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),o&&((o=e.getNext((function(e){return i(e)&&!h(e)})))&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)?o.getDtd()["#"]?t.moveToElementEditStart(o):t.moveToElementEditEnd(e):o||r==CKEDITOR.ENTER_BR||(o=t.fixBlock(!0,r==CKEDITOR.ENTER_DIV?"div":"p"),t.moveToElementEditStart(o)))),n.selectRanges([t]),l(this)},insertElementIntoSelection:function(e){this.insertElement(e)},insertElementIntoRange:function(e,t){var n,i,r=this.editor,o=r.config.enterMode,a=e.getName(),s=CKEDITOR.dtd.$block[a];if(t.checkReadOnly())return!1;if(t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&(t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?g(t):t.startContainer.is(CKEDITOR.dtd.$list)&&E(t)),s)for(;(n=t.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[a]);)n.getName()in CKEDITOR.dtd.span?t.splitElement(n):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(n),t.collapse(!0),n.remove()):t.splitBlock(o==CKEDITOR.ENTER_DIV?"div":"p",r.editable());return t.insertNode(e),!0},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function e(){var e,t=n.getDocument().$,i=t.getSelection();e:if(i.anchorNode&&i.anchorNode==n.$)e=!0;else{if(CKEDITOR.env.webkit&&(e=n.getDocument().getActive())&&e.equals(n)&&!i.anchorNode){e=!0;break e}e=void 0}e&&(e=new CKEDITOR.dom.range(n),e.moveToElementEditStart(n),t=t.createRange(),t.setStart(e.startContainer.$,e.startOffset),t.collapse(!0),i.removeAllRanges(),i.addRange(t))}function t(){var e=n.getDocument().$,t=e.selection,i=n.getDocument().getActive();"None"==t.type&&i.equals(n)&&(t=new CKEDITOR.dom.range(n),e=e.body.createTextRange(),t.moveToElementEditStart(n),t=t.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),e.moveToElementText(t.$),e.collapse(!0),e.select())}var n=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),t()):this.hasFocus?(this.focus(),e()):this.once("focus",(function(){e()}),null,null,-999)},getHtmlFromRange:function(e){return e.collapsed?new CKEDITOR.dom.documentFragment(e.document):(e={doc:this.getDocument(),range:e.clone()},v.eol.detect(e,this),v.bogus.exclude(e),v.cell.shrink(e),e.fragment=e.range.cloneContents(),v.tree.rebuild(e,this),v.eol.fix(e,this),new CKEDITOR.dom.documentFragment(e.fragment.$))},extractHtmlFromRange:function(e,t){var n=y,i={range:e,doc:e.document},r=this.getHtmlFromRange(e);if(e.collapsed)return e.optimize(),r;e.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(i),i.bookmark=e.createBookmark(),delete i.range;var o=this.editor.createRange();if(o.moveToPosition(i.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),i.targetBookmark=o.createBookmark(),n.list.detectMerge(i,this),n.table.detectRanges(i,this),n.block.detectMerge(i,this),i.tableContentsRanges?(n.table.deleteRanges(i),e.moveToBookmark(i.bookmark),i.range=e):(e.moveToBookmark(i.bookmark),i.range=e,e.extractContents(n.detectExtractMerge(i))),e.moveToBookmark(i.targetBookmark),e.optimize(),n.fixUneditableRangePosition(e),n.list.merge(i,this),n.table.purge(i,this),n.block.merge(i,this),t){if(n=e.startPath(),i=e.checkStartOfBlock()&&e.checkEndOfBlock()&&n.block&&!e.root.equals(n.block)){e:{var a;i=n.block.getElementsByTag("span"),o=0;if(i)for(;a=i.getItem(o++);)if(!d(a)){i=!0;break e}i=!1}i=!i}i&&(e.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,e),f(e.startContainer)&&e.startContainer.appendBogus();return e.startContainer.mergeSiblings(),r},setup:function(){var e=this.editor;if(this.attachListener(e,"beforeGetData",(function(){var t=this.getData();this.is("textarea")||!1!==e.config.ignoreEmptyParagraph&&(t=t.replace(p,(function(e,t){return t}))),e.setData(t,null,1)}),this),this.attachListener(e,"getSnapshot",(function(e){e.data=this.getData(1)}),this),this.attachListener(e,"afterSetData",(function(){this.setData(e.getData(1))}),this),this.attachListener(e,"loadSnapshot",(function(e){this.setData(e.data,1)}),this),this.attachListener(e,"beforeFocus",(function(){var t=e.getSelection();(t=t&&t.getNative())&&"Control"==t.type||this.focus()}),this),this.attachListener(e,"insertHtml",(function(e){this.insertHtml(e.data.dataValue,e.data.mode,e.data.range)}),this),this.attachListener(e,"insertElement",(function(e){this.insertElement(e.data)}),this),this.attachListener(e,"insertText",(function(e){this.insertText(e.data)}),this),this.setReadOnly(e.readOnly),this.attachClass("cke_editable"),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):e.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+e.config.contentsLangDirection),e.keystrokeHandler.blockedKeystrokes[8]=+e.readOnly,e.keystrokeHandler.attach(this),this.on("blur",(function(){this.hasFocus=!1}),null,null,-1),this.on("focus",(function(){this.hasFocus=!0}),null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",(function(){e._.previousScrollTop=e.editable().$.scrollTop}),null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var t=function(){var n=e.editable();null!=e._.previousScrollTop&&n.getDocument().equals(CKEDITOR.document)&&(n.$.scrollTop=e._.previousScrollTop,e._.previousScrollTop=null,this.removeListener("scroll",t))};this.on("scroll",t)}if(e.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,e.once("contentDom",(function(){e.focusManager.focus(this)}),this)),this.isInline()&&this.changeAttr("tabindex",e.tabIndex),!this.is("textarea")){e.document=this.getDocument(),e.window=this.getWindow();var r=e.document;this.changeAttr("spellcheck",!e.config.disableNativeSpellChecker);var a=e.config.contentsLangDirection;this.getDirection(1)!=a&&this.changeAttr("dir",a);var s=CKEDITOR.getCss();if(s){a=r.getHead();var l=a.getCustomData("stylesheet");l?s!=l.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?l.$.styleSheet.cssText=s:l.setText(s)):(s=r.appendStyleText(s),s=new CKEDITOR.dom.element(s.ownerNode||s.owningElement),a.setCustomData("stylesheet",s),s.data("cke-temp",1))}a=r.getCustomData("stylesheet_ref")||0,r.setCustomData("stylesheet_ref",a+1),this.setCustomData("cke_includeReadonly",!e.config.disableReadonlyStyling),this.attachListener(this,"click",(function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()}));var d={8:1,46:1};this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;var n,i=t.data.domEvent.getKey();if(t=e.getSelection(),0!==t.getRanges().length){if(i in d){var r,a,s,l,u=t.getRanges()[0],f=u.startPath();i=8==i;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(r=t.getSelectedElement())||(r=o(t))?(e.fire("saveSnapshot"),u.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove(),u.select(),e.fire("saveSnapshot"),n=1):u.collapsed&&((a=f.block)&&(l=a[i?"getPrevious":"getNext"](c))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&u[i?"checkStartOfBlock":"checkEndOfBlock"]()?(e.fire("saveSnapshot"),u[i?"checkEndOfBlock":"checkStartOfBlock"]()&&a.remove(),u["moveToElementEdit"+(i?"End":"Start")](l),u.select(),e.fire("saveSnapshot"),n=1):f.blockLimit&&f.blockLimit.is("td")&&(s=f.blockLimit.getAscendant("table"))&&u.checkBoundaryOfElement(s,i?CKEDITOR.START:CKEDITOR.END)&&(l=s[i?"getPrevious":"getNext"](c))?(e.fire("saveSnapshot"),u["moveToElementEdit"+(i?"End":"Start")](l),u.checkStartOfBlock()&&u.checkEndOfBlock()?l.remove():u.select(),e.fire("saveSnapshot"),n=1):(s=f.contains(["td","th","caption"]))&&u.checkBoundaryOfElement(s,i?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n}})),e.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",(function(t){t.data.getKeystroke()in d&&!this.getFirst(i)&&(this.appendBogus(),t=e.createRange(),t.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),t.select())})),this.attachListener(this,"dblclick",(function(t){if(e.readOnly)return!1;t={element:t.data.getTarget()},e.fire("doubleclick",t)})),CKEDITOR.env.ie&&this.attachListener(this,"click",n),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",(function(t){var n=t.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(e.getSelection().selectElement(n),n.is("input","textarea","select")&&t.data.preventDefault())})),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",(function(t){(t=t.data.getTarget())&&t.is("img")&&!t.isReadOnly()&&e.getSelection().selectElement(t)})),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",(function(t){if(2==t.data.$.button&&(t=t.data.getTarget(),!t.getAscendant("table")&&!t.getOuterHtml().replace(p,""))){var n=e.createRange();n.moveToElementEditStart(t),n.select(!0)}})),CKEDITOR.env.webkit&&(this.attachListener(this,"click",(function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()})),this.attachListener(this,"mouseup",(function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))),CKEDITOR.env.webkit&&this.attachListener(e,"key",(function(t){if(e.readOnly)return!0;var n=t.data.domEvent.getKey();if(n in d&&(t=e.getSelection(),0!==t.getRanges().length)){n=8==n;var i=t.getRanges()[0];if(t=i.startPath(),i.collapsed)e:{var r=t.block;if(r&&i[n?"checkStartOfBlock":"checkEndOfBlock"]()&&i.moveToClosestEditablePosition(r,!n)&&i.collapsed){if(i.startContainer.type==CKEDITOR.NODE_ELEMENT){var o=i.startContainer.getChild(i.startOffset-(n?1:0));if(o&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("hr")){e.fire("saveSnapshot"),o.remove(),t=!0;break e}}var a;if(i=i.startPath().block,!i||i&&i.contains(r))t=void 0;else e.fire("saveSnapshot"),(a=(n?i:r).getBogus())&&a.remove(),a=e.getSelection(),o=a.createBookmarks(),(n?r:i).moveChildren(n?i:r,!1),t.lastElement.mergeSiblings(),u(r,i,!n),a.selectBookmarks(o),t=!0}else t=!1}else n=i,a=t.block,i=n.endPath().block,a&&i&&!a.equals(i)?(e.fire("saveSnapshot"),(r=a.getBogus())&&r.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),i.getParent()&&(i.moveChildren(a,!1),t.lastElement.mergeSiblings(),u(a,i,!0)),n=e.getSelection().getRanges()[0],n.collapse(1),n.optimize(),""===n.startContainer.getHtml()&&n.startContainer.appendBogus(),n.select(),t=!0):t=!1;if(!t)return;return e.getSelection().scrollIntoView(),e.fire("saveSnapshot"),!1}}),this,null,100)}}},_:{detach:function(){var e;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());if(!this.is("textarea")){e=this.getDocument();var t=e.getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)},CKEDITOR.on("instanceLoaded",(function(t){var n=t.editor;n.on("insertElement",(function(e){e=e.data,e.type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))})),n.on("selectionChange",(function(t){if(!n.readOnly){var i=n.getSelection();i&&!i.isLocked&&(i=n.checkDirty(),n.fire("lockSnapshot"),e(t),n.fire("unlockSnapshot"),!i&&n.resetDirty())}}))})),CKEDITOR.on("instanceCreated",(function(e){var t=e.editor;t.on("mode",(function(){var e=t.editable();if(e&&e.isInline()){var n=t.title;e.changeAttr("role","textbox"),e.changeAttr("aria-multiline","true"),e.changeAttr("aria-label",n),n&&e.changeAttr("title",n);var i=t.fire("ariaEditorHelpLabel",{}).label;if(i&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var r=CKEDITOR.tools.getNextId();i=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+i+"</span>");n.append(i),e.changeAttr("aria-describedby",r)}}}))})),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),c=CKEDITOR.dom.walker.whitespaces(!0),d=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.bogus(),p=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,m=function(){function e(e){return e.type==CKEDITOR.NODE_ELEMENT}function t(n,i){var r,o,a,s,l=[],u=i.range.startContainer;r=i.range.startPath();u=c[u.getName()];for(var d=0,f=n.getChildren(),h=f.count(),p=-1,m=-1,g=0,E=r.contains(c.$list);d<h;++d)r=f.getItem(d),e(r)?(a=r.getName(),E&&a in CKEDITOR.dtd.$list?l=l.concat(t(r,i)):(s=!!u[a],"br"!=a||!r.data("cke-eol")||d&&d!=h-1||(g=(o=d?l[d-1].node:f.getItem(d+1))&&(!e(o)||!o.is("br")),o=o&&e(o)&&c.$block[o.getName()]),-1!=p||s||(p=d),s||(m=d),l.push({isElement:1,isLineBreak:g,isBlock:r.isBlockBoundary(),hasBlockSibling:o,node:r,name:a,allowed:s}),o=g=0)):l.push({isElement:0,node:r,allowed:1});return-1<p&&(l[p].firstNotAllowed=1),-1<m&&(l[m].lastNotAllowed=1),l}function n(t,i){var r,o=[],a=t.getChildren(),s=a.count(),l=0,u=c[i],d=!t.is(c.$inline)||t.is("br");for(d&&o.push(" ");l<s;l++)r=a.getItem(l),e(r)&&!r.is(u)?o=o.concat(n(r,i)):o.push(r);return d&&o.push(" "),o}function r(t){return e(t.startContainer)&&t.startContainer.getChild(t.startOffset-1)}function o(t){return t&&e(t)&&(t.is(c.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())}function l(t,n,i,r){var o,a,s=t.clone();s.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(s).next())&&e(o)&&d[o.getName()]&&(a=o.getPrevious())&&e(a)&&!a.getParent().equals(t.startContainer)&&i.contains(a)&&r.contains(o)&&o.isIdentical(a)&&(o.moveChildren(a),o.remove(),l(t,n,i,r))}function u(t,n){function i(t,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&e(t)&&t.is("br"))return t.remove(),1}var r=n.endContainer.getChild(n.endOffset),o=n.endContainer.getChild(n.endOffset-1);r&&i(r,t[t.length-1]),o&&i(o,t[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}var c=CKEDITOR.dtd,d={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},f={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},h=CKEDITOR.tools.extend({},c.$inline);return delete h.br,function(d,p,m,g){var E=d.editor,v=!1;if("unfiltered_html"==p&&(p="html",v=!0),!g.checkReadOnly()){var y,b,T,C=new CKEDITOR.dom.elementPath(g.startContainer,g.root).blockLimit||g.root;if(d={type:p,dontFilter:v,editable:d,editor:E,range:g,blockLimit:C,mergeCandidates:[],zombies:[]},p=d.range,g=d.mergeCandidates,"text"==d.type&&p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(y=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",p.document),p.insertNode(y),p.setStartAfter(y)),v=new CKEDITOR.dom.elementPath(p.startContainer),d.endPath=C=new CKEDITOR.dom.elementPath(p.endContainer),!p.collapsed){E=C.block||C.blockLimit;var O=p.getCommonAncestor();E&&!E.equals(O)&&!E.contains(O)&&p.checkEndOfBlock()&&d.zombies.push(E),p.deleteContents()}for(;(b=r(p))&&e(b)&&b.isBlockBoundary()&&v.contains(b);)p.moveToPosition(b,CKEDITOR.POSITION_BEFORE_END);for(l(p,d.blockLimit,v,C),y&&(p.setEndBefore(y),p.collapse(),y.remove()),y=p.startPath(),(E=y.contains(o,!1,1))&&(p.splitElement(E),d.inlineStylesRoot=E,d.inlineStylesPeak=y.lastElement),y=p.createBookmark(),(E=y.startNode.getPrevious(i))&&e(E)&&o(E)&&g.push(E),(E=y.startNode.getNext(i))&&e(E)&&o(E)&&g.push(E),E=y.startNode;(E=E.getParent())&&o(E);)g.push(E);if(p.moveToBookmark(y),y=m){if(y=d.range,"text"==d.type&&d.inlineStylesRoot){for(b=d.inlineStylesPeak,p=b.getDocument().createText("{cke-peak}"),g=d.inlineStylesRoot.getParent();!b.equals(g);)p=p.appendTo(b.clone()),b=b.getParent();m=p.getOuterHtml().split("{cke-peak}").join(m)}if(b=d.blockLimit.getName(),/^\s+|\s+$/.test(m)&&"span"in CKEDITOR.dtd[b]){var I='<span data-cke-marker="1">&nbsp;</span>';m=I+m+I}if(m=d.editor.dataProcessor.toHtml(m,{context:null,fixForBody:!1,protectedWhitespaces:!!I,dontFilter:d.dontFilter,filter:d.editor.activeFilter,enterMode:d.editor.activeEnterMode}),b=y.document.createElement("body"),b.setHtml(m),I&&(b.getFirst().remove(),b.getLast().remove()),(I=y.startPath().block)&&(1!=I.getChildCount()||!I.getBogus()))e:{var _;if(1==b.getChildCount()&&e(_=b.getFirst())&&_.is(f)&&!_.hasAttribute("contenteditable")){for(I=_.getElementsByTag("*"),y=0,g=I.count();y<g;y++)if(p=I.getItem(y),!p.is(h))break e;_.moveChildren(_.getParent(1)),_.remove()}}d.dataWrapper=b,y=m}if(y){var D;_=d.range,y=_.document,b=d.blockLimit,g=0;var R,k,w,K,S;I=[];m=E=0,p=_.startContainer;var x;v=d.endPath.elements[0],C=v.getPosition(p),O=!!v.getCommonAncestor(p)&&C!=CKEDITOR.POSITION_IDENTICAL&&!(C&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);for(p=t(d.dataWrapper,d),u(p,_);g<p.length;g++){if(C=p[g],D=C.isLineBreak){D=_,K=b;var N=void 0,P=void 0;C.hasBlockSibling?D=1:(N=D.startContainer.getAscendant(c.$block,1))&&N.is({div:1,p:1})?(P=N.getPosition(K),P==CKEDITOR.POSITION_IDENTICAL||P==CKEDITOR.POSITION_CONTAINS?D=0:(K=D.splitElement(N),D.moveToPosition(K,CKEDITOR.POSITION_AFTER_START),D=1)):D=0}if(D)m=0<g;else{if(D=_.startPath(),!C.isBlock&&a(d.editor,D.block,D.blockLimit)&&(w=s(d.editor))&&(w=y.createElement(w),w.appendBogus(),_.insertNode(w),CKEDITOR.env.needsBrFiller&&(R=w.getBogus())&&R.remove(),_.moveToPosition(w,CKEDITOR.POSITION_BEFORE_END)),(D=_.startPath().block)&&!D.equals(k)&&((R=D.getBogus())&&(R.remove(),I.push(D)),k=D),C.firstNotAllowed&&(E=1),E&&C.isElement){for(D=_.startContainer,K=null;D&&!c[D.getName()][C.name];){if(D.equals(b)){D=null;break}K=D,D=D.getParent()}if(D)K&&(S=_.splitElement(K),d.zombies.push(S),d.zombies.push(K));else{K=b.getName(),x=!g,D=g==p.length-1,K=n(C.node,K);N=[],P=K.length;for(var A=0,L=void 0,F=0,B=-1;A<P;A++)L=K[A]," "==L?(F||x&&!A||(N.push(new CKEDITOR.dom.text(" ")),B=N.length),F=1):(N.push(L),F=0);D&&B==N.length&&N.pop(),x=N}}if(x){for(;D=x.pop();)_.insertNode(D);x=0}else _.insertNode(C.node);C.lastNotAllowed&&g<p.length-1&&((S=O?v:S)&&_.setEndAt(S,CKEDITOR.POSITION_AFTER_START),E=0),_.collapse()}}1!=p.length?R=!1:(R=p[0],R=R.isElement&&"false"==R.node.getAttribute("contenteditable")),R&&(m=!0,D=p[0].node,_.setStartAt(D,CKEDITOR.POSITION_BEFORE_START),_.setEndAt(D,CKEDITOR.POSITION_AFTER_END)),d.dontMoveCaret=m,d.bogusNeededBlocks=I}for(R=d.range,S=d.bogusNeededBlocks,x=R.createBookmark();k=d.zombies.pop();)k.getParent()&&(w=R.clone(),w.moveToElementEditStart(k),w.removeEmptyBlocksAtEnd());if(S)for(;k=S.pop();)CKEDITOR.env.needsBrFiller?k.appendBogus():k.append(R.document.createText(""));for(;k=d.mergeCandidates.pop();)k.mergeSiblings();if(R.moveToBookmark(x),!d.dontMoveCaret){for(k=r(R);k&&e(k)&&!k.is(c.$empty);){if(k.isBlockBoundary())R.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END);else{if(o(k)&&k.getHtml().match(/(\s|&nbsp;)$/g)){T=null;break}T=R.clone(),T.moveToPosition(k,CKEDITOR.POSITION_BEFORE_END)}k=k.getLast(i)}T&&R.moveToRange(T)}}}}(),g=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function t(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function n(e){var t,n=e.count();for(n;0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&t.getChildCount()&&t.getFirst().remove())}return function(i){var r=i.startContainer,o=r.getAscendant("table",1),a=!1;n(o.getElementsByTag("td")),n(o.getElementsByTag("th")),o=i.clone(),o.setStart(r,0),o=e(o).lastBackward(),o||(o=i.clone(),o.setEndAt(r,CKEDITOR.POSITION_BEFORE_END),o=e(o).lastForward(),a=!0),o||(o=r),o.is("table")?(i.setStartAt(o,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),o.remove()):(o.is({tbody:1,thead:1,tfoot:1})&&(o=t(o,"tr",a)),o.is("tr")&&(o=t(o,o.getParent().is("thead")?"th":"td",a)),(r=o.getBogus())&&r.remove(),i.moveToPosition(o,a?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),E=function(){function e(e){return e=new CKEDITOR.dom.walker(e),e.guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$list)||e.is(CKEDITOR.dtd.$listItem):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$listItem)},e}return function(t){var n,i=t.startContainer,r=!1;n=t.clone(),n.setStart(i,0),n=e(n).lastBackward(),n||(n=t.clone(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=e(n).lastForward(),r=!0),n||(n=i),n.is(CKEDITOR.dtd.$list)?(t.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t.collapse(!0),n.remove()):((i=n.getBogus())&&i.remove(),t.moveToPosition(n,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),t.select())}}(),v={eol:{detect:function(e,t){var n=e.range,i=n.clone(),r=n.clone(),o=new CKEDITOR.dom.elementPath(n.startContainer,t),a=new CKEDITOR.dom.elementPath(n.endContainer,t);i.collapse(1),r.collapse(),o.block&&i.checkBoundaryOfElement(o.block,CKEDITOR.END)&&(n.setStartAfter(o.block),e.prependEolBr=1),a.block&&r.checkBoundaryOfElement(a.block,CKEDITOR.START)&&(n.setEndBefore(a.block),e.appendEolBr=1)},fix:function(e,t){var n,i=t.getDocument();e.appendEolBr&&(n=this.createEolBr(i),e.fragment.append(n)),!e.prependEolBr||n&&!n.getPrevious()||e.fragment.append(this.createEolBr(i),1)},createEolBr:function(e){return e.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(e){var t=e.range.getBoundaryNodes(),n=t.startNode;t=t.endNode;!t||!h(t)||n&&n.equals(t)||e.range.setEndBefore(t)}},tree:{rebuild:function(e,t){var n,i=e.range,r=i.getCommonAncestor(),o=new CKEDITOR.dom.elementPath(r,t),a=new CKEDITOR.dom.elementPath(i.startContainer,t);i=new CKEDITOR.dom.elementPath(i.endContainer,t);if(r.type==CKEDITOR.NODE_TEXT&&(r=r.getParent()),o.blockLimit.is({tr:1,table:1})){var s=o.contains("table").getParent();n=function(e){return!e.equals(s)}}else if(o.block&&o.block.is(CKEDITOR.dtd.$listItem)&&(a=a.contains(CKEDITOR.dtd.$list),i=i.contains(CKEDITOR.dtd.$list),!a.equals(i))){var l=o.contains(CKEDITOR.dtd.$list).getParent();n=function(e){return!e.equals(l)}}n||(n=function(e){return!e.equals(o.block)&&!e.equals(o.blockLimit)}),this.rebuildFragment(e,t,r,n)},rebuildFragment:function(e,t,n,i){for(var r;n&&!n.equals(t)&&i(n);)r=n.clone(0,1),e.fragment.appendTo(r),e.fragment=r,n=n.getParent()}},cell:{shrink:function(e){e=e.range;var t=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset;t.type==CKEDITOR.NODE_ELEMENT&&t.equals(n)&&t.is("tr")&&++i==r&&e.shrink(CKEDITOR.SHRINK_TEXT)}}},y=function(){function e(e,t){var n=e.getParent();n.is(CKEDITOR.dtd.$inline)&&e[t?"insertBefore":"insertAfter"](n)}function t(t,n,i){e(n),e(i,1);for(var r;r=i.getNext();)r.insertAfter(n),n=r;f(t)&&t.remove()}function n(e,t){var n=new CKEDITOR.dom.range(e);return n.setStartAfter(t.startNode),n.setEndBefore(t.endNode),n}return{list:{detectMerge:function(e,t){var i=n(t,e.bookmark),r=i.startPath(),o=i.endPath(),a=r.contains(CKEDITOR.dtd.$list),s=o.contains(CKEDITOR.dtd.$list);e.mergeList=a&&s&&a.getParent().equals(s.getParent())&&!a.equals(s),e.mergeListItems=r.block&&o.block&&r.block.is(CKEDITOR.dtd.$listItem)&&o.block.is(CKEDITOR.dtd.$listItem),(e.mergeList||e.mergeListItems)&&(i=i.clone(),i.setStartBefore(e.bookmark.startNode),i.setEndAfter(e.bookmark.endNode),e.mergeListBookmark=i.createBookmark())},merge:function(e,n){if(e.mergeListBookmark){var i=e.mergeListBookmark.startNode,r=e.mergeListBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,n),a=new CKEDITOR.dom.elementPath(r,n);if(e.mergeList){var s=o.contains(CKEDITOR.dtd.$list),l=a.contains(CKEDITOR.dtd.$list);s.equals(l)||(l.moveChildren(s),l.remove())}e.mergeListItems&&(o=o.contains(CKEDITOR.dtd.$listItem),a=a.contains(CKEDITOR.dtd.$listItem),o.equals(a)||t(a,i,r)),i.remove(),r.remove()}}},block:{detectMerge:function(e,t){if(!e.tableContentsRanges&&!e.mergeListBookmark){var n=new CKEDITOR.dom.range(t);n.setStartBefore(e.bookmark.startNode),n.setEndAfter(e.bookmark.endNode),e.mergeBlockBookmark=n.createBookmark()}},merge:function(e,n){if(e.mergeBlockBookmark&&!e.purgeTableBookmark){var i=e.mergeBlockBookmark.startNode,r=e.mergeBlockBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,n),a=new CKEDITOR.dom.elementPath(r,n);o=o.block,a=a.block;o&&a&&!o.equals(a)&&t(a,i,r),i.remove(),r.remove()}}},table:function(){function e(e){var n,r=[],o=new CKEDITOR.dom.walker(e),a=e.startPath().contains(i),s=e.endPath().contains(i),l={};return o.guard=function(o,u){if(o.type==CKEDITOR.NODE_ELEMENT){var c="visited_"+(u?"out":"in");if(o.getCustomData(c))return;CKEDITOR.dom.element.setMarker(l,o,c,1)}if(u&&a&&o.equals(a))n=e.clone(),n.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),r.push(n);else if(!u&&s&&o.equals(s))n=e.clone(),n.setStartAt(s,CKEDITOR.POSITION_AFTER_START),r.push(n);else{if((c=!u)&&(c=o.type==CKEDITOR.NODE_ELEMENT&&o.is(i)&&(!a||t(o,a))&&(!s||t(o,s))),!c&&(c=u))if(o.is(i)){c=a&&a.getAscendant("table",!0);var d=s&&s.getAscendant("table",!0),f=o.getAscendant("table",!0);c=c&&c.contains(f)||d&&d.contains(f)}else c=void 0;c&&(n=e.clone(),n.selectNodeContents(o),r.push(n))}},o.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),r}function t(e,t){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,i=e.getPosition(t);return i!==CKEDITOR.POSITION_IDENTICAL&&0===(i&n)}var i={td:1,th:1,caption:1};return{detectPurge:function(e){var t=e.range,n=t.clone();n.enlarge(CKEDITOR.ENLARGE_ELEMENT);n=new CKEDITOR.dom.walker(n);var r=0;if(n.evaluator=function(e){e.type==CKEDITOR.NODE_ELEMENT&&e.is(i)&&++r},n.checkForward(),1<r){n=t.startPath().contains("table");var o=t.endPath().contains("table");n&&o&&t.checkBoundaryOfElement(n,CKEDITOR.START)&&t.checkBoundaryOfElement(o,CKEDITOR.END)&&(t=e.range.clone(),t.setStartBefore(n),t.setEndAfter(o),e.purgeTableBookmark=t.createBookmark())}},detectRanges:function(r,o){var a,s,l=n(o,r.bookmark),u=l.clone(),c=l.getCommonAncestor();c.is(CKEDITOR.dtd.$tableContent)&&!c.is(i)&&(c=c.getAscendant("table",!0)),s=c,c=new CKEDITOR.dom.elementPath(l.startContainer,s),s=new CKEDITOR.dom.elementPath(l.endContainer,s),c=c.contains("table"),s=s.contains("table"),(c||s)&&(c&&s&&t(c,s)?(r.tableSurroundingRange=u,u.setStartAt(c,CKEDITOR.POSITION_AFTER_END),u.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),u=l.clone(),u.setEndAt(c,CKEDITOR.POSITION_AFTER_END),a=l.clone(),a.setStartAt(s,CKEDITOR.POSITION_BEFORE_START),a=e(u).concat(e(a))):c?s||(r.tableSurroundingRange=u,u.setStartAt(c,CKEDITOR.POSITION_AFTER_END),l.setEndAt(c,CKEDITOR.POSITION_AFTER_END)):(r.tableSurroundingRange=u,u.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(s,CKEDITOR.POSITION_AFTER_START)),r.tableContentsRanges=a||e(l))},deleteRanges:function(e){for(var t;t=e.tableContentsRanges.pop();)t.extractContents(),f(t.startContainer)&&t.startContainer.appendBogus();e.tableSurroundingRange&&e.tableSurroundingRange.extractContents()},purge:function(e){if(e.purgeTableBookmark){var t=e.doc,n=e.range.clone();t=t.createElement("p");t.insertBefore(e.purgeTableBookmark.startNode),n.moveToBookmark(e.purgeTableBookmark),n.deleteContents(),e.range.moveToPosition(t,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(e){return!(e.range.startPath().contains(CKEDITOR.dtd.$listItem)&&e.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(e){e.startContainer.getDtd()["#"]||e.moveToClosestEditablePosition(null,!0)},autoParagraph:function(e,t){var n,i=t.startPath();a(e,i.block,i.blockLimit)&&(n=s(e))&&(n=t.document.createElement(n),n.appendBogus(),t.insertNode(n),t.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(e){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(e)}function t(t,n){if(0===t.length||e(t[0].getEnclosedNode()))return!1;var i,r;if((i=!n&&1===t.length)&&!(i=t[0].collapsed)){var o=t[0];i=o.startContainer.getAscendant({td:1,th:1},!0);var a=o.endContainer.getAscendant({td:1,th:1},!0);r=CKEDITOR.tools.trim,i&&i.equals(a)&&!i.findOne("td, th, tr, tbody, table")?(o=o.cloneContents(),i=!o.getFirst()||r(o.getFirst().getText())!==r(i.getText())):i=!1}if(i)return!1;for(r=0;r<t.length;r++)if(i=t[r]._getTableElement(),!i)return!1;return!0}function n(e){function t(e){e=e.find("td, th");var t,n=[];for(t=0;t<e.count();t++)n.push(e.getItem(t));return n}var n,i,r=[];for(i=0;i<e.length;i++)n=e[i]._getTableElement(),n.is&&n.is({td:1,th:1})?r.push(n):r=r.concat(t(n));return r}function i(e){e=n(e);var t,i,r="",o=[];for(i=0;i<e.length;i++)t&&!t.equals(e[i].getAscendant("tr"))?(r+=o.join("\t")+"\n",t=e[i].getAscendant("tr"),o=[]):0===i&&(t=e[i].getAscendant("tr")),o.push(e[i].getText());return r+o.join("\t")}function r(e){var t=this.root.editor,n=t.getSelection(1);this.reset(),g=!0,n.root.once("selectionchange",(function(e){e.cancel()}),null,null,0),n.selectRanges([e[0]]),n=this._.cache,n.ranges=new CKEDITOR.dom.rangeList(e),n.type=CKEDITOR.SELECTION_TEXT,n.selectedElement=e[0]._getTableElement(),n.selectedText=i(e),n.nativeSel=null,this.isFake=1,this.rev=b++,t._.fakeSelection=this,g=!1,this.root.fire("selectionchange")}function o(){var n,i=this._.fakeSelection;if(i){var r;if(n=this.getSelection(1),!(r=!n)&&(r=!n.isHidden())){r=i;var o=n.getRanges(),a=r.getRanges(),s=o.length&&o[0]._getTableElement()&&o[0]._getTableElement().getAscendant("table",!0),l=a.length&&a[0]._getTableElement()&&a[0]._getTableElement().getAscendant("table",!0),u=1===o.length&&o[0]._getTableElement()&&o[0]._getTableElement().is("table"),c=1===a.length&&a[0]._getTableElement()&&a[0]._getTableElement().is("table");if(e(r.getSelectedElement()))r=!1;else{var d=1===o.length&&o[0].collapsed;a=t(o,!!CKEDITOR.env.webkit)&&t(a);s=!(!s||!l)&&(s.equals(l)||l.contains(s)),s&&(d||a)?(u&&!c&&r.selectRanges(o),r=!0):r=!1}r=!r}r&&(i.reset(),i=0)}(i||(i=n||this.getSelection(1),i&&i.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",i),n=this.elementPath(),n.compare(this._.selectionPreviousPath)||(r=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(n.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||r||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=n,this.fire("selectionChange",{selection:i,path:n})))}function a(){v=!0,E||(s.call(this),E=CKEDITOR.tools.setTimeout(s,200,this))}function s(){E=null,v&&(CKEDITOR.tools.setTimeout(o,0,this),v=!1)}function l(e){return!(!O(e)&&(e.type!=CKEDITOR.NODE_ELEMENT||e.is(CKEDITOR.dtd.$empty)))}function u(e){function t(t,n){return!(!t||t.type==CKEDITOR.NODE_TEXT)&&e.clone()["moveToElementEdit"+(n?"End":"Start")](t)}if(!(e.root instanceof CKEDITOR.editable))return!1;var n=e.startContainer,i=e.getPreviousNode(l,null,n),r=e.getNextNode(l,null,n);return!(!t(i)&&!t(r,1)&&(i||r||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()&&n.getBogus()))}function c(e){d(e,!1);var t=e.getDocument().createText(T);return e.setCustomData("cke-fillingChar",t),t}function d(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(!1!==t){var i=e.getDocument().getSelection().getNative(),r=i&&"None"!=i.type&&i.getRangeAt(0),o=T.length;if(n.getLength()>o&&r&&r.intersectsNode(n.$)){var a=[{node:i.anchorNode,offset:i.anchorOffset},{node:i.focusNode,offset:i.focusOffset}];i.anchorNode==n.$&&i.anchorOffset>o&&(a[0].offset-=o),i.focusNode==n.$&&i.focusOffset>o&&(a[1].offset-=o)}}n.setText(f(n.getText(),1)),a&&(n=e.getDocument().$,i=n.getSelection(),n=n.createRange(),n.setStart(a[0].node,a[0].offset),n.collapse(!0),i.removeAllRanges(),i.addRange(n),i.extend(a[1].node,a[1].offset))}}function f(e,t){return t?e.replace(C,(function(e,t){return t?"":""})):e.replace(T,"")}function h(e,t){var n=t&&CKEDITOR.tools.htmlEncode(t)||"&nbsp;";n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+n+"</div>",e.document);e.fire("lockSnapshot"),e.editable().append(n);var i=e.getSelection(1),r=e.createRange(),o=i.root.on("selectionchange",(function(e){e.cancel()}),null,null,0);r.setStartAt(n,CKEDITOR.POSITION_AFTER_START),r.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([r]),o.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=n}function p(e){var t={37:1,39:1,8:1,46:1};return function(n){var i=n.data.getKeystroke();if(t[i]){var r=e.getSelection().getRanges(),o=r[0];1==r.length&&o.collapsed&&(i=o[38>i?"getPreviousEditableNode":"getNextEditableNode"]())&&i.type==CKEDITOR.NODE_ELEMENT&&"false"==i.getAttribute("contenteditable")&&(e.getSelection().fake(i),n.data.preventDefault(),n.cancel())}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.getCommonAncestor().isReadOnly()&&e.splice(t,1),!n.collapsed){if(n.startContainer.isReadOnly())for(var i,r=n.startContainer;r&&!((i=r.type==CKEDITOR.NODE_ELEMENT)&&r.is("body")||!r.isReadOnly());)i&&"false"==r.getAttribute("contentEditable")&&n.setStartAfter(r),r=r.getParent();r=n.startContainer,i=n.endContainer;var o=n.startOffset,a=n.endOffset,s=n.clone();r&&r.type==CKEDITOR.NODE_TEXT&&(o>=r.getLength()?s.setStartAfter(r):s.setStartBefore(r)),i&&i.type==CKEDITOR.NODE_TEXT&&(a?s.setEndAfter(i):s.setEndBefore(i)),r=new CKEDITOR.dom.walker(s),r.evaluator=function(i){if(i.type==CKEDITOR.NODE_ELEMENT&&i.isReadOnly()){var r=n.clone();return n.setEndBefore(i),n.collapsed&&e.splice(t--,1),i.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(r.setStartAfter(i),r.collapsed||e.splice(t+1,0,r)),!0}return!1},r.next()}}return e}var g,E,v,y="function"!=typeof window.getSelection,b=1,T=CKEDITOR.tools.repeat("",7),C=new RegExp(T+"( )?","g"),O=CKEDITOR.dom.walker.invisible(1),I=function(){function e(e){return function(t){var n=t.editor.createRange();return n.moveToClosestEditablePosition(t.selected,e)&&t.editor.getSelection().selectRanges([n]),!1}}function t(e){return function(t){var n,i=t.editor,r=i.createRange();if(!i.readOnly)return(n=r.moveToClosestEditablePosition(t.selected,e))||(n=r.moveToClosestEditablePosition(t.selected,!e)),n&&i.getSelection().selectRanges([r]),i.fire("saveSnapshot"),t.selected.remove(),n||(r.moveToElementEditablePosition(i.editable()),i.getSelection().selectRanges([r])),i.fire("saveSnapshot"),!1}}var n=e(),i=e(1);return{37:n,38:n,39:i,40:i,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",(function(e){function t(){var e=n.getSelection();e&&e.removeAllRanges()}var n=e.editor;n.on("contentDom",(function(){function e(){s=new CKEDITOR.dom.selection(n.getSelection()),s.lock()}function t(){f.removeListener("mouseup",t),g.removeListener("mouseup",t);var e=CKEDITOR.document.$.selection,n=e.createRange();"None"!=e.type&&n.parentElement()&&n.parentElement().ownerDocument==c.$&&n.select()}function i(e){return e=e.getRanges()[0],e&&(e=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")}),!0))&&"false"===e.getAttribute("contenteditable")?e:null}var r,s,l,u,c=n.document,f=CKEDITOR.document,h=n.editable(),m=c.getBody(),g=c.getDocumentElement(),E=h.isInline();if((CKEDITOR.env.gecko&&h.attachListener(h,"focus",(function(e){e.removeListener(),0!==r&&(e=n.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==h.$&&(e=n.createRange(),e.moveToElementEditStart(h),e.select())}),null,null,-2),h.attachListener(h,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){if(r&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){r=n._.previousActive&&n._.previousActive.equals(c.getActive());var e=null!=n._.previousScrollTop&&n._.previousScrollTop!=h.$.scrollTop;CKEDITOR.env.webkit&&r&&e&&(h.$.scrollTop=n._.previousScrollTop)}n.unlockSelection(r),r=0}),null,null,-1),h.attachListener(h,"mousedown",(function(){r=0})),(CKEDITOR.env.ie||E)&&(y?h.attachListener(h,"beforedeactivate",e,null,null,-1):h.attachListener(n,"selectionCheck",e,null,null,-1),h.attachListener(h,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",(function(){n.lockSelection(s),r=1}),null,null,-1),h.attachListener(h,"mousedown",(function(){r=0}))),CKEDITOR.env.ie&&!E)&&(h.attachListener(h,"mousedown",(function(e){2==e.data.$.button&&((e=n.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(l=n.window.getScrollPosition()))})),h.attachListener(h,"mouseup",(function(e){2==e.data.$.button&&l&&(n.document.$.documentElement.scrollLeft=l.x,n.document.$.documentElement.scrollTop=l.y),l=null})),"BackCompat"!=c.$.compatMode)){var v,b;if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)g.on("mousedown",(function(e){function t(e){if(e=e.data.$,v){var t=m.$.createTextRange();try{t.moveToPoint(e.clientX,e.clientY)}catch(e){}v.setEndPoint(0>b.compareEndPoints("StartToStart",t)?"EndToEnd":"StartToStart",t),v.select()}}function n(){g.removeListener("mousemove",t),f.removeListener("mouseup",n),g.removeListener("mouseup",n),v.select()}if(e=e.data,e.getTarget().is("html")&&e.$.y<g.$.clientHeight&&e.$.x<g.$.clientWidth){v=m.$.createTextRange();try{v.moveToPoint(e.$.clientX,e.$.clientY)}catch(e){}b=v.duplicate(),g.on("mousemove",t),f.on("mouseup",n),g.on("mouseup",n)}}));7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&g.on("mousedown",(function(e){e.data.getTarget().is("html")&&(f.on("mouseup",t),g.on("mouseup",t))}))}(h.attachListener(h,"selectionchange",o,n),h.attachListener(h,"keyup",a,n),h.attachListener(h,"touchstart",a,n),h.attachListener(h,"touchend",a,n),CKEDITOR.env.ie&&h.attachListener(h,"keydown",(function(e){var t=this.getSelection(1),n=i(t);n&&!n.equals(h)&&(t.selectElement(n),e.data.preventDefault())}),n),h.attachListener(h,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",(function(){n.forceNextSelectionCheck(),n.selectionChange(1)})),E&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko))?(h.attachListener(h,"mousedown",(function(){u=1})),h.attachListener(c.getDocumentElement(),"mouseup",(function(){u&&a.call(n),u=0}))):h.attachListener(CKEDITOR.env.ie?h:c.getDocumentElement(),"mouseup",a,n);CKEDITOR.env.webkit&&h.attachListener(c,"keydown",(function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:h.hasFocus&&d(h)}}),null,null,-1),h.attachListener(h,"keydown",p(n),null,null,-1)})),n.on("setData",(function(){n.unlockSelection(),CKEDITOR.env.webkit&&t()})),n.on("contentDomUnload",(function(){n.unlockSelection()})),CKEDITOR.env.ie9Compat&&n.on("beforeDestroy",t,null,null,9),n.on("dataReady",(function(){delete n._.fakeSelection,delete n._.hiddenSelectionContainer,n.selectionChange(1)})),n.on("loadSnapshot",(function(){var e=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),t=n.editable().getLast(e);t&&t.hasAttribute("data-cke-hidden-sel")&&(t.remove(),CKEDITOR.env.gecko&&(e=n.editable().getFirst(e))&&e.is("br")&&e.getAttribute("_moz_editor_bogus_node")&&e.remove())}),null,null,100),n.on("key",(function(e){if("wysiwyg"==n.mode){var t=n.getSelection();if(t.isFake){var i=I[e.data.keyCode];if(i)return i({editor:n,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}}))})),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",(function(e){var t=e.editor;t.on("selectionChange",(function(){var e=t.editable(),n=e.getCustomData("cke-fillingChar");n&&(n.getCustomData("ready")?(d(e),e.editor.fire("selectionCheck")):n.setCustomData("ready",1))}),null,null,-1),t.on("beforeSetMode",(function(){d(t.editable())}),null,null,-1),t.on("getSnapshot",(function(e){e.data&&(e.data=f(e.data))}),t,null,20),t.on("toDataFormat",(function(e){e.data.dataValue=f(e.data.dataValue)}),null,null,0)})),CKEDITOR.editor.prototype.selectionChange=function(e){(e?o:a).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return e=e||this.getSelection(1),e.getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var n,i,r=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:b++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=r?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(e=this.getNative(),e)if(e.getRangeAt)n=(i=e.rangeCount&&e.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=e.createRange()}catch(e){}n=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}return(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var _={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:f,_createFillingCharSequenceNode:c,FILLING_CHAR_SEQUENCE:T}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=y?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:y?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),i=n.type;"Text"==i&&(t=CKEDITOR.SELECTION_TEXT),"Control"==i&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(e){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT,n=this.getNative();if(n&&n.rangeCount){if(1==n.rangeCount){n=n.getRangeAt(0);var i=n.startContainer;i==n.endContainer&&1==i.nodeType&&1==n.endOffset-n.startOffset&&_[i.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:function(){var e=y?function(){function e(e){return new CKEDITOR.dom.node(e).getIndex()}var t=function(t,n){t=t.duplicate(),t.collapse(n);var i=t.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var r,o,a,s,l=i.children,u=t.duplicate(),c=0,d=l.length-1,f=-1;c<=d;)if(f=Math.floor((c+d)/2),r=l[f],u.moveToElementText(r),a=u.compareEndPoints("StartToStart",t),0<a)d=f-1;else{if(!(0>a))return{container:i,offset:e(r)};c=f+1}if(-1==f||f==l.length-1&&0>a){if(u.moveToElementText(i),u.setEndPoint("StartToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length,l=i.childNodes,!u)return r=l[l.length-1],r.nodeType!=CKEDITOR.NODE_TEXT?{container:i,offset:l.length}:{container:r,offset:r.nodeValue.length};for(i=l.length;0<u&&0<i;)o=l[--i],o.nodeType==CKEDITOR.NODE_TEXT&&(s=o,u-=o.nodeValue.length);return{container:s,offset:-u}}if(u.collapse(0<a),u.setEndPoint(0<a?"StartToStart":"EndToStart",t),u=u.text.replace(/(\r\n|\r)/g,"\n").length,!u)return{container:i,offset:e(r)+(0<a?0:1)};for(;0<u;)try{o=r[0<a?"previousSibling":"nextSibling"],o.nodeType==CKEDITOR.NODE_TEXT&&(u-=o.nodeValue.length,s=o),r=o}catch(t){return{container:i,offset:e(r)}}return{container:s,offset:0<a?-u:s.nodeValue.length+u}};return function(){var e=this.getNative(),n=e&&e.createRange(),i=this.getType();if(!e)return[];if(i==CKEDITOR.SELECTION_TEXT)return e=new CKEDITOR.dom.range(this.root),i=t(n,!0),e.setStart(new CKEDITOR.dom.node(i.container),i.offset),i=t(n),e.setEnd(new CKEDITOR.dom.node(i.container),i.offset),e.endContainer.getPosition(e.startContainer)&CKEDITOR.POSITION_PRECEDING&&e.endOffset<=e.startContainer.getIndex()&&e.collapse(),[e];if(i==CKEDITOR.SELECTION_ELEMENT){i=[];for(var r=0;r<n.length;r++){var o=n.item(r),a=o.parentNode,s=0;for(e=new CKEDITOR.dom.range(this.root);s<a.childNodes.length&&a.childNodes[s]!=o;s++);e.setStart(new CKEDITOR.dom.node(a),s),e.setEnd(new CKEDITOR.dom.node(a),s+1),i.push(e)}return i}return[]}}():function(){var e,t=[],n=this.getNative();if(!n)return t;for(var i=0;i<n.rangeCount;i++){var r=n.getRangeAt(i);e=new CKEDITOR.dom.range(this.root),e.setStart(new CKEDITOR.dom.node(r.startContainer),r.startOffset),e.setEnd(new CKEDITOR.dom.node(r.endContainer),r.endOffset),t.push(e)}return t};return function(t){var n=this._.cache,i=n.ranges;return i||(n.ranges=i=new CKEDITOR.dom.rangeList(e.call(this))),t?m(new CKEDITOR.dom.rangeList(i.slice())):i}}(),getStartElement:function(){var e,t=this._.cache;if(void 0!==t.startElement)return t.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)e=n.startContainer,e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(n.optimize();e=n.startContainer,n.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)n.setStartAfter(e);if(e=n.startContainer,e.type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(n.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(n=e.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)e=n,n=n.getFirst();else e=n.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var t=this,n=CKEDITOR.tools.tryThese((function(){return t.getNative().createRange().item(0)}),(function(){for(var e,n,i=t.getRanges()[0].clone(),r=2;r&&!((e=i.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&_[e.getName()]&&(n=e));r--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$}));return e.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative();t=y?"Control"==t.type?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var n=this.getSelectedElement(),i=this.getRanges(),o=this.isFake;this.isLocked=0,this.reset(),e&&(e=n||i[0]&&i[0].getCommonAncestor())&&e.getAscendant("body",1)&&(t(i)?r.call(this,i):o?this.fake(n):n?this.selectElement(n):this.selectRanges(i))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection)if(this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;if(t){var n=e.checkDirty();e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot"),!n&&e.resetDirty()}delete e._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=b++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var n=this.root.editor,i=n&&n._.hiddenSelectionContainer;if(this.reset(),i){i=this.root;for(var o,a=0;a<e.length;++a)o=e[a],o.endContainer.equals(i)&&(o.endOffset=Math.min(o.endOffset,i.getChildCount()))}if(e.length)if(this.isLocked){var s=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),s&&!s.equals(this.root)&&s.focus()}else{var l,f,h;if(1==e.length&&!(h=e[0]).collapsed&&(l=h.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(h=h.clone(),h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(f=h.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&(l=f),"false"==l.getAttribute("contenteditable"))||(l=void 0),l)this.fake(l);else if(n&&n.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&t(e)&&!g)r.call(this,e);else{if(y){var p,m,E;if(f=CKEDITOR.dom.walker.whitespaces(!0),l=/\ufeff|\u00a0/,h={table:1,tbody:1,tr:1},1<e.length&&(n=e[e.length-1],e[0].setEnd(n.endContainer,n.endOffset)),n=e[0],e=n.collapsed,(i=n.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in _&&(!i.is("a")||!i.getText()))try{return E=i.$.createControlRange(),E.addElement(i.$),void E.select()}catch(e){}(n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in h||n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in h)&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),e=n.collapsed),E=n.createBookmark(),h=E.startNode,e||(s=E.endNode),E=n.document.$.body.createTextRange(),E.moveToElementText(h.$),E.moveStart("character",1),s?(l=n.document.$.body.createTextRange(),l.moveToElementText(s.$),E.setEndPoint("EndToEnd",l),E.moveEnd("character",-1)):(p=h.getNext(f),m=h.hasAscendant("pre"),p=!(p&&p.getText&&p.getText().match(l))&&(m||!h.hasPrevious()||h.getPrevious().is&&h.getPrevious().is("br")),m=n.document.createElement("span"),m.setHtml("&#65279;"),m.insertBefore(h),p&&n.document.createText("\ufeff").insertBefore(h)),n.setStartBefore(h),h.remove(),e?(p?(E.moveStart("character",-1),E.select(),n.document.$.selection.clear()):E.select(),n.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m.remove()):(n.setEndBefore(s),s.remove(),E.select())}else{if(s=this.getNative(),!s)return;for(this.removeAllRanges(),E=0;E<e.length;E++)if(E<e.length-1&&(p=e[E],m=e[E+1],l=p.clone(),l.setStart(p.endContainer,p.endOffset),l.setEnd(m.startContainer,m.startOffset),!l.collapsed&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),n=l.getCommonAncestor(),l=l.getEnclosedNode(),n.isReadOnly()||l&&l.isReadOnly())))m.setStart(p.startContainer,p.startOffset),e.splice(E--,1);else{n=e[E],m=this.document.$.createRange(),n.collapsed&&CKEDITOR.env.webkit&&u(n)&&(l=c(this.root),n.insertNode(l),(p=l.getNext())&&!l.getPrevious()&&p.type==CKEDITOR.NODE_ELEMENT&&"br"==p.getName()?(d(this.root),n.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START)):n.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),m.setStart(n.startContainer.$,n.startOffset);try{m.setEnd(n.endContainer.$,n.endOffset)}catch(e){if(!(0<=e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw e;n.collapse(1),m.setEnd(n.endContainer.$,n.endOffset)}s.addRange(m)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e,t){var n=this.root.editor;void 0===t&&e.hasAttribute("aria-label")&&(t=e.getAttribute("aria-label")),this.reset(),h(n,t);var i=this._.cache,r=new CKEDITOR.dom.range(this.root);r.setStartBefore(e),r.setEndAfter(e),i.ranges=new CKEDITOR.dom.rangeList(r),i.selectedElement=i.startElement=e,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=b++,n._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},isInTable:function(e){return t(this.getRanges(),e)},isCollapsed:function(){var e=this.getRanges();return 1===e.length&&e[0].collapsed},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var n,i=[],r=0;r<e.length;r++){var o=new CKEDITOR.dom.range(this.root);o.moveToBookmark(e[r]),i.push(o)}return e.isFake&&(n=t(i)?i[0]._getTableElement():i[0].getEnclosedNode(),n&&n.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),e.isFake=0)),e.isFake&&!t(i)?this.fake(n):this.selectRanges(i),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var e=this.getNative();try{e&&e[y?"empty":"removeAllRanges"]()}catch(e){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(e,t){for(var n,i;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))n=e;else if(!i){var r=e.getAttribute("contentEditable");"false"==r?n=e:"true"==r&&(i=1)}return n}function t(e,t,n,i){return(e.getPosition(t)|i)==i&&(!n.childRule||n.childRule(e))}function n(i){var o=i.document;if(i.collapsed)o=E(this,o),i.insertNode(o),i.moveToPosition(o,CKEDITOR.POSITION_BEFORE_END);else{var a,s=this.element,l=this._.definition,u=l.ignoreReadonly,c=u||l.includeReadonly;null==c&&(c=i.root.getCustomData("cke_includeReadonly"));var d=CKEDITOR.dtd[s];d||(a=!0,d=CKEDITOR.dtd.span),i.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.trim();var f,h=i.createBookmark(),m=h.startNode,g=h.endNode,v=m;if(!u){var y=i.getCommonAncestor();u=e(m,y),y=e(g,y);u&&(v=u.getNextSourceNode(!0)),y&&(g=y)}for(v.getPosition(g)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){if(u=!1,v.equals(g))v=null,u=!0;else{var b=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null,T=(y=b&&"false"==v.getAttribute("contentEditable"),b&&v.getAttribute("data-nostyle"));if(b&&v.data("cke-bookmark")||v.type===CKEDITOR.NODE_COMMENT){v=v.getNextSourceNode(!0);continue}if(y&&c&&CKEDITOR.dtd.$block[b]){var C=v,O=r(C),I=void 0,_=O.length,D=0;for(C=_&&new CKEDITOR.dom.range(C.getDocument());D<_;++D){I=O[D];var R=CKEDITOR.filter.instances[I.data("cke-filter")];R&&!R.check(this)||(C.selectNodeContents(I),n.call(this,C))}}if(O=b?!d[b]||T||y&&!c?0:t(v,g,l,K):1,O){if(I=v.getParent(),O=l,_=s,D=a,!I||!(I.getDtd()||CKEDITOR.dtd.span)[_]&&!D||O.parentRule&&!O.parentRule(I))u=!0;else if(f||b&&CKEDITOR.dtd.$removeEmpty[b]&&(v.getPosition(g)|K)!=K||(f=i.clone(),f.setStartBefore(v)),b=v.type,b==CKEDITOR.NODE_TEXT||y||b==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){var w;for(b=v;(u=!b.getNext(k))&&(w=b.getParent(),d[w.getName()])&&t(w,m,l,S);)b=w;f.setEndAfter(b)}}else u=!0;v=v.getNextSourceNode(T||y)}if(u&&f&&!f.collapsed){var x,N,P;for(u=E(this,o),y=u.hasAttributes(),T=f.getCommonAncestor(),b={},O={},I={},_={};u&&T;){if(T.getName()==s){for(x in l.attributes)!_[x]&&(P=T.getAttribute(N))&&(u.getAttribute(x)==P?O[x]=1:_[x]=1);for(N in l.styles)!I[N]&&(P=T.getStyle(N))&&(u.getStyle(N)==P?b[N]=1:I[N]=1)}T=T.getParent()}for(x in O)u.removeAttribute(x);for(N in b)u.removeStyle(N);y&&!u.hasAttributes()&&(u=null),u?(f.extractContents().appendTo(u),f.insertNode(u),p.call(this,u),u.mergeSiblings(),CKEDITOR.env.ie||u.$.normalize()):(u=new CKEDITOR.dom.element("span"),f.extractContents().appendTo(u),f.insertNode(u),p.call(this,u),u.remove(!0)),f=null}}i.moveToBookmark(h),i.shrink(CKEDITOR.SHRINK_TEXT),i.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function i(e){function t(){for(var e=new CKEDITOR.dom.elementPath(i.getParent()),t=new CKEDITOR.dom.elementPath(c.getParent()),n=null,r=null,o=0;o<e.elements.length;o++){var a=e.elements[o];if(a==e.block||a==e.blockLimit)break;d.checkElementRemovable(a,!0)&&(n=a)}for(o=0;o<t.elements.length;o++){if(a=t.elements[o],a==t.block||a==t.blockLimit)break;d.checkElementRemovable(a,!0)&&(r=a)}r&&c.breakParent(r),n&&i.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),i=n.startNode,r=this._.definition.alwaysRemoveElement;if(e.collapsed){for(var o,a,s=new CKEDITOR.dom.elementPath(i.getParent(),e.root),l=0;l<s.elements.length&&(a=s.elements[l])&&a!=s.block&&a!=s.blockLimit;l++)if(this.checkElementRemovable(a)){var u;!r&&e.collapsed&&(e.checkBoundaryOfElement(a,CKEDITOR.END)||(u=e.checkBoundaryOfElement(a,CKEDITOR.START)))?(o=a,o.match=u?"start":"end"):(a.mergeSiblings(),a.is(this.element)?h.call(this,a):m(a,b(this)[a.getName()]))}if(o){for(r=i,l=0;;l++){if(a=s.elements[l],a.equals(o))break;a.match||(a=a.clone(),a.append(r),r=a)}r["start"==o.match?"insertBefore":"insertAfter"](o)}}else{var c=n.endNode,d=this;for(t(),s=i;!s.equals(c);)o=s.getNextSourceNode(),s.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(s)&&(s.getName()==this.element?h.call(this,s):m(s,b(this)[s.getName()]),o.type==CKEDITOR.NODE_ELEMENT&&o.contains(i)&&(t(),o=i.getNext())),s=o}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function r(e){var t=[];return e.forEach((function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1}),CKEDITOR.NODE_ELEMENT,!0),t}function o(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&v(e,this)}function a(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){t=this._.definition;var n=t.attributes;if(n)for(var i in n)e.removeAttribute(i,n[i]);if(t.styles)for(var r in t.styles)t.styles.hasOwnProperty(r)&&e.removeStyle(r)}}function s(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,r,o=e.document;i=n.getNextParagraph();)!i.isReadOnly()&&(!n.activeFilter||n.activeFilter.check(this))&&(r=E(this,o,i),u(i,r));e.moveToBookmark(t)}function l(e){var t,n,i=e.createBookmark(1),r=e.createIterator();for(r.enforceRealBlocks=!0,r.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;t=r.getNextParagraph();)this.checkElementRemovable(t)&&(t.is("pre")?((n=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&t.copyAttributes(n),u(t,n)):h.call(this,t));e.moveToBookmark(i)}function u(e,t){var n=!t;n&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var i=t&&t.is("pre"),r=e.is("pre"),o=!i&&r;if(i&&!r){if(r=t,(o=e.getBogus())&&o.remove(),o=e.getHtml(),o=d(o,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),o=o.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),o=o.replace(/([ \t\n\r]+|&nbsp;)/g," "),o=o.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var a=e.getDocument().createElement("div");a.append(r),r.$.outerHTML="<pre>"+o+"</pre>",r.copyAttributes(a.getFirst()),r=a.getFirst().remove()}else r.setHtml(o);t=r}else o?t=f(n?[e.getHtml()]:c(e),t):e.moveChildren(t);if(t.replace(e),i){var s;n=t;(s=n.getPrevious(w))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("pre")&&(i=d(s.getHtml(),/\n$/,"")+"\n\n"+d(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+i+"</pre>":n.setHtml(i),s.remove())}else n&&g(t)}function c(e){var t=[];return d(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,(function(e,t,n){return t+"</pre>"+n+"<pre>"})).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,(function(e,n){t.push(n)})),t}function d(e,t,n){var i="",r="";return e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,(function(e,t,n){return t&&(i=t),n&&(r=n),""})),i+e.replace(t,n)+r}function f(e,t){var n;1<e.length&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var i=0;i<e.length;i++){var r=e[i];r=r.replace(/(\r\n|\r)/g,"\n"),r=d(r,/^[ \t]*\n/,""),r=d(r,/\n$/,""),r=d(r,/^[ \t]+|[ \t]+$/g,(function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})),r=r.replace(/\n/g,"<br>"),r=r.replace(/[ \t]{2,}/g,(function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "}));if(n){var o=t.clone();o.setHtml(r),n.append(o)}else t.setHtml(r)}return n||t}function h(e,t){var n,i=this._.definition,r=i.attributes,o=(i=i.styles,b(this)[e.getName()]),a=CKEDITOR.tools.isEmpty(r)&&CKEDITOR.tools.isEmpty(i);for(n in r)("class"!=n&&!this._.definition.fullMatch||e.getAttribute(n)==T(n,r[n]))&&(t&&"data-"==n.slice(0,5)||(a=e.hasAttribute(n),e.removeAttribute(n)));for(var s in i)this._.definition.fullMatch&&e.getStyle(s)!=T(s,i[s],!0)||(a=a||!!e.getStyle(s),e.removeStyle(s));m(e,o,I[e.getName()]),a&&(this._.definition.alwaysRemoveElement?g(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?g(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function p(e){for(var t,n=b(this),i=e.getElementsByTag(this.element),r=i.count();0<=--r;)t=i.getItem(r),t.isReadOnly()||h.call(this,t,!0);for(var o in n)if(o!=this.element)for(i=e.getElementsByTag(o),r=i.count()-1;0<=r;r--)t=i.getItem(r),t.isReadOnly()||m(t,n[o])}function m(e,t,n){if(t=t&&t.attributes)for(var i=0;i<t.length;i++){var r,o=t[i][0];if(r=e.getAttribute(o)){var a=t[i][1];(null===a||a.test&&a.test(r)||"string"==typeof a&&r==a)&&e.removeAttribute(o)}}n||g(e)}function g(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(w),i=e.getNext(w);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||e.append("br",1),!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||e.append("br"),e.remove(!0)}else n=e.getFirst(),i=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())}function E(e,t,n){var i;return i=e.element,"*"==i&&(i="span"),i=new CKEDITOR.dom.element(i,t),n&&n.copyAttributes(i),i=v(i,e),t.getCustomData("doc_processing_style")&&i.hasAttribute("id")?i.removeAttribute("id"):t.setCustomData("doc_processing_style",1),i}function v(e,t){var n=t._.definition,i=n.attributes;n=CKEDITOR.style.getStyleText(n);if(i)for(var r in i)e.setAttribute(r,i[r]);return n&&e.setAttribute("style",n),e.getDocument().removeCustomData("doc_processing_style"),e}function y(e,t){for(var n in e)e[n]=e[n].replace(R,(function(e,n){return t[n]}))}function b(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var r,o,a=n[i];if("string"==typeof a?r=a.toLowerCase():(r=a.element?a.element.toLowerCase():e.element,o=a.attributes),a=t[r]||(t[r]={}),o){var s;a=a.attributes=a.attributes||[];for(s in o)a.push([s.toLowerCase(),o[s]])}}}return t}function T(e,t,n){var i=new CKEDITOR.dom.element("span");return i[n?"setStyle":"setAttribute"](e,t),i[n?"getStyle":"getAttribute"](e)}function C(e,t){function n(e,t){return"font-family"==t.toLowerCase()?e.replace(/["']/g,""):e}for(var i in"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e)),"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t,!0)),e)if(!(i in t)||n(t[i],i)!=n(e[i],i)&&"inherit"!=e[i]&&"inherit"!=t[i])return!1;return!0}function O(e,t,n){if(e){var i,r,o=e.getRanges();if(t=t?this.removeFromRange:this.applyToRange,e.isFake&&e.isInTable())for(i=[],r=0;r<o.length;r++)i.push(o[r].clone());for(var a=o.createIterator();r=a.getNextRange();)t.call(this,r,n);e.selectRanges(i||o)}}var I={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},_={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},D=/\s*(?:;\s*|$)/,R=/#\((.+?)\)/g,k=CKEDITOR.dom.walker.bookmark(0,1),w=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){if("string"==typeof e.type)return new CKEDITOR.style.customHandlers[e.type](e);var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(e=CKEDITOR.tools.clone(e),y(e.attributes,t),y(e.styles,t)),n=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(I[n]?CKEDITOR.STYLE_BLOCK:_[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.style.prototype={apply:function(e){if(e instanceof CKEDITOR.dom.document)return O.call(this,e.getSelection());if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),O.call(this,e.getSelection(),0,e),this._.enterMode=t}},remove:function(e){if(e instanceof CKEDITOR.dom.document)return O.call(this,e.getSelection(),1);if(this.checkApplicable(e.elementPath(),e)){var t=this._.enterMode;t||(this._.enterMode=e.activeEnterMode),O.call(this,e.getSelection(),1,e),this._.enterMode=t}},applyToRange:function(e){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?o:null,this.applyToRange(e)},removeFromRange:function(e){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.removeFromRange(e)},applyToObject:function(e){v(e,this)},checkActive:function(e,t){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0,t);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n,i=e.elements,r=0;r<i.length;r++)if(n=i[r],this.type!=CKEDITOR.STYLE_INLINE||n!=e.block&&n!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var o=n.getName();if(!("string"==typeof this.element?o==this.element:o in this.element))continue}if(this.checkElementRemovable(n,!0,t))return!0}}return!1},checkApplicable:function(e,t,n){if(t&&t instanceof CKEDITOR.filter&&(n=t),n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var i=e.getName();if("string"==typeof this.element?i==this.element:i in this.element){if(!t&&!e.hasAttributes())return!0;if(i=n._AC)n=i;else{i={};var r=0,o=n.attributes;if(o)for(var a in o)r++,i[a]=o[a];(a=CKEDITOR.style.getStyleText(n))&&(i.style||r++,i.style=a),i._length=r,n=n._AC=i}if(!n._length)return!0;for(var s in n)if("_length"!=s)if(i=e.getAttribute(s)||"","style"==s?C(n[s],i):n[s]==i){if(!t)return!0}else if(t)return!1;if(t)return!0}return!1},checkElementRemovable:function(e,t,n){if(this.checkElementMatch(e,t,n))return!0;if(t=b(this)[e.getName()]){var i;if(!(t=t.attributes))return!0;for(n=0;n<t.length;n++)if(i=t[n][0],i=e.getAttribute(i)){var r=t[n][1];if(null===r)return!0;if("string"==typeof r){if(i==r)return!0}else if(r.test(i))return!0}}return!1},buildPreview:function(e){var t=this._.definition,n=[],i=t.element;"bdo"==i&&(i="span");n=["<",i];var r=t.attributes;if(r)for(var o in r)n.push(" ",o,'="',r[o],'"');return(r=CKEDITOR.style.getStyleText(t))&&n.push(' style="',r,'"'),n.push(">",e||t.name,"</",i,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){var t=e._ST;if(t)return t;t=e.styles;var n=e.attributes&&e.attributes.style||"",i="";for(var r in n.length&&(n=n.replace(D,";")),t){var o=t[r],a=(r+":"+o).replace(D,";");"inherit"==o?i+=a:n+=a}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+i},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(e){var t=function(e){this._={definition:e},this.setup&&this.setup(e)};return t.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},e,!0),this.customHandlers[e.type]=t};var K=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,S=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,t){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",(function(e){for(var t=0;t<n.length;t++){var i=n[t],r=i.style.checkActive(e.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,r)}}))),n.push({style:e,fn:t})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var t=this,n=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(!1===n)e(null);else if(n instanceof Array)t._.stylesDefinitions=n,e(n);else{n||(n="default");n=n.split(":");var i=n[0];CKEDITOR.stylesSet.addExternal(i,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(i,(function(n){t._.stylesDefinitions=n[i],e(t._.stylesDefinitions)}))}}}}),CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var e,t={},n={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(t[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(n[e]=1);CKEDITOR.dom.elementPath=function(e,i){var r,o=null,a=null,s=[],l=e;i=i||e.getDocument().getBody(),l||(l=i);do{if(l.type==CKEDITOR.NODE_ELEMENT){if(s.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(i))break;if(!a&&(r=l.getName(),"true"==l.getAttribute("contenteditable")?a=l:!o&&n[r]&&(o=l),t[r])){if(r=!o&&"div"==r){e:{r=l.getChildren();for(var u=0,c=r.count();u<c;u++){var d=r.getItem(u);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){r=!0;break e}}r=!1}r=!r}r?o=l:a=l}}}while(l=l.getParent());a||(a=i),this.block=o,this.blockLimit=a,this.root=i,this.elements=s}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(e=e&&e.elements,!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(e,t,n){var i,r=0;"string"==typeof e&&(i=function(t){return t.getName()==e}),e instanceof CKEDITOR.dom.element?i=function(t){return t.equals(e)}:CKEDITOR.tools.isArray(e)?i=function(t){return-1<CKEDITOR.tools.indexOf(e,t.getName())}:"function"==typeof e?i=e:"object"==typeof e&&(i=function(t){return t.getName()in e});var o=this.elements,a=o.length;for(t&&(n?r+=1:--a),n&&(o=Array.prototype.slice.call(o,0),o.reverse());r<a;r++)if(i(o[r]))return o[r];return null},isContextFor:function(e){var t;return!(e in CKEDITOR.dtd.$block)||(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[e])},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,i=this.getLength(),r=this.getDocument(),o=new CKEDITOR.dom.text(this.$.splitText(e),r);return t.childNodes.length==n&&(e>=i?(o=r.createText(""),o.insertAfter(this)):(e=r.createText(""),e.insertAfter(o),e.remove())),o},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function e(e,t,n){var i=e.serializable,r=t[n?"endContainer":"startContainer"],o=n?"endOffset":"startOffset",a=i?t.document.getById(e.startNode):e.startNode;return e=i?t.document.getById(e.endNode):e.endNode,r.equals(a.getPrevious())?(t.startOffset=t.startOffset-r.getLength()-e.getPrevious().getLength(),r=e.getNext()):r.equals(e.getPrevious())&&(t.startOffset-=r.getLength(),r=e.getNext()),r.equals(a.getParent())&&t[o]++,r.equals(e.getParent())&&t[o]++,t[n?"endContainer":"startContainer"]=r,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var e,t=this,n=CKEDITOR.dom.walker.bookmark(),i=[];return{getNextRange:function(r){e=void 0===e?0:e+1;var o=t[e];if(o&&1<t.length){if(!e)for(var a=t.length-1;0<=a;a--)i.unshift(t[a].createBookmark(!0));if(r)for(var s=0;t[e+s+1];){var l=o.document;for(r=0,a=l.getById(i[s].endNode),l=l.getById(i[s+1].startNode);;){if(a=a.getNextSourceNode(!1),l.equals(a))r=1;else if(n(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())continue;break}if(!r)break;s++}for(o.moveToBookmark(i.shift());s--;)a=t[++e],a.moveToBookmark(i.shift()),o.setEnd(a.endContainer,a.endOffset)}return o}}},createBookmarks:function(t){for(var n,i=[],r=0;r<this.length;r++){i.push(n=this[r].createBookmark(t,!0));for(var o=r+1;o<this.length;o++)this[o]=e(n,this[o]),this[o]=e(n,this[o],!0)}return i},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function t(t){var n=CKEDITOR.skin["ua_"+t],i=CKEDITOR.env;if(n){n=n.split(",").sort((function(e,t){return e>t?-1:1}));for(var r,o=0;o<n.length;o++)if(r=n[o],i.ie&&(r.replace(/^ie/,"")==i.version||i.quirks&&"iequirks"==r)&&(r="ie"),i[r]){t+="_"+n[o];break}}return CKEDITOR.getUrl(e()+t+".css")}function n(e,n){o[e]||(CKEDITOR.document.appendStyleSheet(t(e)),o[e]=1),n&&n()}function i(e){var t=e.getById(a);return t||(t=e.getHead().append("style"),t.setAttribute("id",a),t.setAttribute("type","text/css")),t}function r(e,t,n){var i,r,o;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),r=0;r<t.length;r++)t[r]=t[r].split("{");for(var a=0;a<e.length;a++)if(CKEDITOR.env.webkit)for(r=0;r<t.length;r++){for(o=t[r][1],i=0;i<n.length;i++)o=o.replace(n[i][0],n[i][1]);e[a].$.sheet.addRule(t[r][0],o)}else{for(o=t,i=0;i<n.length;i++)o=o.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?e[a].$.styleSheet.cssText+=o:e[a].$.innerHTML+=o}}var o={};CKEDITOR.skin={path:e,loadPart:function(t,i){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),(function(){n(t,i)})):n(t,i)},getPath:function(e){return CKEDITOR.getUrl(t(e))},icons:{},addIcon:function(e,t,n,i){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:i||"16px"})},getIconStyle:function(e,t,n,i,r){var o;return e&&(e=e.toLowerCase(),t&&(o=this.icons[e+"-rtl"]),o||(o=this.icons[e])),e=n||o&&o.path||"",i=i||o&&o.offset,r=r||o&&o.bgsize||"16px",e&&(e=e.replace(/'/g,"\\'")),e&&"background-image:url('"+CKEDITOR.getUrl(e)+"');background-position:0 "+i+"px;background-size:"+r+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var t=i(CKEDITOR.document);return(this.setUiColor=function(e){this.uiColor=e;var n=CKEDITOR.skin.chameleon,i="",o="";"function"==typeof n&&(i=n(this,"editor"),o=n(this,"panel")),e=[[l,e]],r([t],i,e),r(s,o,e)}).call(this,e)}});var a="cke_ui_color",s=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",(function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=e.editor;e=function(e){if(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!e.getById("cke_ui_color")){e=i(e),s.push(e);var n=t.getUiColor();n&&r([e],CKEDITOR.skin.chameleon(t,"panel"),[[l,n]])}},t.on("panelShow",e),t.on("menuShow",e),t.config.uiColor&&t.setUiColor(t.config.uiColor)}}))}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=n)}catch(e){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8",CKEDITOR.skin.chameleon=function(){var e=function(){return function(e,t){for(var n=e.match(/[^#]./g),i=0;3>i;i++){var r,o=i;r=parseInt(n[i],16),r=("0"+(0>t?0|r*(1+t):0|r+(255-r)*t).toString(16)).slice(-2),n[o]=r}return"#"+n.join("")}}(),t=function(){var e=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(t,n){return e.output({from:t,to:n})}}(),n={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(i,r){var o=i.uiColor;o={id:"."+i.id,defaultBorder:e(o,-.1),defaultGradient:t(e(o,.9),o),lightGradient:t(e(o,1),e(o,.7)),mediumGradient:t(e(o,.8),e(o,.5)),ckeButtonOn:t(e(o,.6),e(o,.7)),ckeResizer:e(o,-.4),ckeToolbarSeparator:e(o,.5),ckeColorauto:e(o,.8),dialogBody:e(o,.7),dialogTabSelected:t("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(o,-.6),elementsPathBg:o,menubuttonIcon:e(o,.5),menubuttonIconHover:e(o,.3)};return n[r].output(o).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var t=0,n=function(n,r,o,a){if(a){a=new CKEDITOR.style(a);var s=i[o];s.unshift(a),e.attachStyleStateChange(a,(function(t){!e.readOnly&&e.getCommand(o).setState(t)})),e.addCommand(o,new CKEDITOR.styleCommand(a,{contentForms:s})),e.ui.addButton&&e.ui.addButton(n,{label:r,command:o,toolbar:"basicstyles,"+(t+=10)})}},i={bold:["strong","b",["span",function(e){return e=e.styles["font-weight"],"bold"==e||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},r=e.config,o=e.lang.basicstyles;n("Bold",o.bold,"bold",r.coreStyles_bold),n("Italic",o.italic,"italic",r.coreStyles_italic),n("Underline",o.underline,"underline",r.coreStyles_underline),n("Strike",o.strike,"strike",r.coreStyles_strike),n("Subscript",o.subscript,"subscript",r.coreStyles_subscript),n("Superscript",o.superscript,"superscript",r.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),i=n&&n.getRanges()[0];if(i){var r=n.createBookmarks();if(CKEDITOR.env.ie){var o,a=r[0].startNode,s=r[0].endNode;if(a&&"blockquote"==a.getParent().getName())for(o=a;o=o.getNext();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){a.move(o,!0);break}if(s&&"blockquote"==s.getParent().getName())for(o=s;o=o.getPrevious();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){s.move(o);break}}var l=i.createIterator();if(l.enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(a=[];t=l.getNextParagraph();)a.push(t);for(1>a.length&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),s=r.shift(),i.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),i.moveToBookmark(s),i.selectNodeContents(t),i.collapse(!0),s=i.createBookmark(),a.push(t),r.unshift(s)),o=a[0].getParent(),i=[],s=0;s<a.length;s++)t=a[s],o=o.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[o.getName()];)o=o.getParent();for(s=null;0<a.length;){for(t=a.shift();!t.getParent().equals(o);)t=t.getParent();t.equals(s)||i.push(t),s=t}for(;0<i.length;)if(t=i.shift(),"blockquote"==t.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)s.append(t.getFirst().remove()),a.push(s.getLast());s.replace(t)}else a.push(t);for(i=e.document.createElement("blockquote"),i.insertBefore(a[0]);0<a.length;)t=a.shift(),i.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(s=[],o={};t=l.getNextParagraph();){for(a=i=null;t.getParent();){if("blockquote"==t.getParent().getName()){i=t.getParent(),a=t;break}t=t.getParent()}i&&a&&!a.getCustomData("blockquote_moveout")&&(s.push(a),CKEDITOR.dom.element.setMarker(o,a,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(o),t=[],a=[],o={};0<s.length;)l=s.shift(),i=l.getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),a.push(l.getNext())):l.remove().insertAfter(i):l.remove().insertBefore(i),i.getCustomData("blockquote_processed")||(a.push(i),CKEDITOR.dom.element.setMarker(o,i,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(o),s=a.length-1;0<=s;s--){i=a[s];e:{o=i;l=0;for(var u=o.getChildCount(),c=void 0;l<u&&(c=o.getChild(l));l++)if(c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()){o=!1;break e}o=!0}o&&i.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(i=!0;t.length;)if(l=t.shift(),"div"==l.getName()){for(s=new CKEDITOR.dom.documentFragment(e.document),!i||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||s.append(e.document.createElement("br")),i=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(s);i&&s.append(e.document.createElement("br")),s.replace(l),i=!1}}n.selectBookmarks(r),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",e),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},t={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},n={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",(function(){this.getInputElement().on("change",(function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),o=/^on([A-Z]\w+)/,a=function(e){for(var t in e)(o.test(t)||"title"==t||"type"==t)&&delete e[t];return e},s=function(e){e=e.data.getKeystroke(),e==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):e==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(t,n,i,r){if(!(4>arguments.length)){var o=e.call(this,n);o.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var a={role:n.role||"presentation"};n.includeLabel&&(a["aria-labelledby"]=o.labelId),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"div",null,a,(function(){var e=[],i=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+i+'" ',' id="'+o.labelId+'"',o.inputId?' for="'+o.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',r.call(this,t,n),"</div>"):(i={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+i+'" id="'+o.labelId+'" for="'+o.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+r.call(this,t,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(t,i,e)),e.join("")}))}},textInput:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var r=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={class:"cke_dialog_ui_input_"+n.type,id:r,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(o.maxlength=n.maxLength),n.size&&(o.size=n.size),n.inputStyle&&(o.style=n.inputStyle);var a=this,l=!1;t.on("load",(function(){a.getInputElement().on("keydown",(function(e){13==e.data.getKeystroke()&&(l=!0)})),a.getInputElement().on("keyup",(function(e){13==e.data.getKeystroke()&&l&&(t.getButton("ok")&&setTimeout((function(){t.getButton("ok").click()}),0),l=!1),a.bidi&&s.call(a,e)}),null,null,1e3)})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];for(var t in n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)e.push(t+'="'+o[t]+'" ');return e.push(" /></div>"),e.join("")}))}},textarea:function(t,n,i){if(!(3>arguments.length)){e.call(this,n);var r=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",a={};n.validate&&(this.validate=n.validate),a.rows=n.rows||5,a.cols=n.cols||20,a["class"]="cke_dialog_ui_input_textarea "+(n["class"]||""),"undefined"!=typeof n.inputStyle&&(a.style=n.inputStyle),n.dir&&(a.dir=n.dir),r.bidi&&t.on("load",(function(){r.getInputElement().on("keyup",s)}),r),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){a["aria-labelledby"]=this._.labelId,this._.required&&(a["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(e in a)t.push(e+'="'+CKEDITOR.tools.htmlEncode(a[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(r._["default"]),"</textarea></div>"),t.join("")}))}},checkbox:function(t,n,i){if(!(3>arguments.length)){var r=e.call(this,n,{default:!!n["default"]});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,t,n,i,"span",null,null,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),i=[],o=CKEDITOR.tools.getNextId()+"_label",s={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":o};return a(e),n["default"]&&(s.checked="checked"),"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),r.checkbox=new CKEDITOR.ui.dialog.uiElement(t,e,i,"input",null,s),i.push(' <label id="',o,'" for="',s.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),i.join("")}))}},radio:function(t,n,i){if(!(3>arguments.length)){e.call(this,n),this._["default"]||(this._["default"]=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var r=[],o=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){for(var e=[],i=[],s=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var u=n.items[l],c=void 0!==u[2]?u[2]:u[0],d=void 0!==u[1]?u[1]:u[0],f=CKEDITOR.tools.getNextId()+"_radio_input",h=f+"_label",p=(f=CKEDITOR.tools.extend({},n,{id:f,title:null,type:null},!0),c=CKEDITOR.tools.extend({},f,{title:c},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:s,value:d,"aria-labelledby":h}),m=[];o._["default"]==d&&(p.checked="checked"),a(f),a(c),"undefined"!=typeof f.inputStyle&&(f.style=f.inputStyle),f.keyboardFocusable=!0,r.push(new CKEDITOR.ui.dialog.uiElement(t,f,m,"input",null,p)),m.push(" "),new CKEDITOR.ui.dialog.uiElement(t,c,m,"label",null,{id:h,for:p.id},u[0]),e.push(m.join(""))}return new CKEDITOR.ui.dialog.hbox(t,r,e,i),i.join("")})),this._.children=r}},button:function(t,n,i){if(arguments.length){"function"==typeof n&&(n=n(t.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var r=this;t.on("load",(function(){var e=this.getElement();(function(){e.on("click",(function(e){r.click(),e.data.preventDefault()})),e.on("keydown",(function(e){e.data.getKeystroke()in{32:1}&&(r.click(),e.data.preventDefault())}))})(),e.unselectable()}),this);var o=CKEDITOR.tools.extend({},n);delete o.style;var a=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,t,o,i,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n["class"],role:"button","aria-labelledby":a},'<span id="'+a+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(t,n,i){if(!(3>arguments.length)){var r=e.call(this,n);n.validate&&(this.validate=n.validate),r.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){var e=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),i=[],o=[],s={id:r.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};i.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&i.push('style="width:'+n.width+'" '),i.push(">"),void 0!==n.size&&(s.size=n.size),void 0!==n.multiple&&(s.multiple=n.multiple),a(e);for(var l,u=0;u<n.items.length&&(l=n.items[u]);u++)o.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),r.select=new CKEDITOR.ui.dialog.uiElement(t,e,i,"select",null,s,o.join("")),i.push("</div>"),i.join("")}))}},file:function(t,n,i){if(!(3>arguments.length)){void 0===n["default"]&&(n["default"]="");var r=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),t.on("load",(function(){CKEDITOR.document.getById(r.frameId).getParent().addClass("cke_dialog_ui_input_file")})),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,i,(function(){r.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',r.frameId,'" title="',n.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")}))}},fileButton:function(t,n,i){var r=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var o=CKEDITOR.tools.extend({},n),a=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(e){var i=n["for"];e=!!a&&a.call(this,e),!1!==e&&("xhr"!==e&&t.getContentElement(i[0],i[1]).submit(),this.disable())},t.on("load",(function(){t.getContentElement(n["for"][0],n["for"][1])._.buttons.push(r)})),CKEDITOR.ui.dialog.button.call(this,t,o,i)}},html:function(){var e=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(i,r,o){if(!(3>arguments.length)){var a=[],s=r.html;"<"!=s.charAt(0)&&(s="<span>"+s+"</span>");var l=r.focus;if(l){var u=this.focus;this.focus=function(){("function"==typeof l?l:u).call(this),this.fire("focus")},r.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,i,r,a,"span",null,null,""),a=a.join("").match(e),s=s.match(t)||["","",""],n.test(s[1])&&(s[1]=s[1].slice(0,-1),s[2]="/"+s[2]),o.push([s[1]," ",a[1]||"",s[2]].join(""))}}}(),fieldset:function(e,t,n,i,r){var o=r.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,r,i,"fieldset",null,null,(function(){var e=[];o&&e.push("<legend"+(r.labelStyle?' style="'+r.labelStyle+'"':"")+">"+o+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")}))}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return 1>t.getChildCount()?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||1>e.getChildCount()?"":e.getChild(0).getText()},eventProcessors:r},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",(function(){t.apply(this,arguments)}))}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&t.$.focus()}),0)},select:function(){var e=this.selectParentTab();setTimeout((function(){var t=e.getInputElement();t&&(t.$.focus(),t.$.select())}),0)},accessKeyUp:function(){this.select()},setValue:function(e){if(this.bidi){var t=e&&e.charAt(0);(t=""==t?"ltr":""==t?"rtl":null)&&(e=e.slice(1)),this.setDirectionMarker(t)}return e||(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var e=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&e){var t=this.getDirectionMarker();t&&(e=("ltr"==t?"":"")+e)}return e},setDirectionMarker:function(e){var t=this.getInputElement();e?t.setAttributes({dir:e,"data-cke-dir-marker":e}):this.getDirectionMarker()&&t.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),r=this.getInputElement().$;return i.$.text=e,i.$.value=void 0===t||null===t?e:t,void 0===n||null===n?CKEDITOR.env.ie?r.add(i.$):r.add(i.$,null):r.add(i.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?r.onChange.apply(this,arguments):(e.on("load",(function(){var e=this._.checkbox.getElement();e.on("propertychange",(function(t){t=t.data.$,"checked"==t.propertyName&&this.fire("change",{value:e.$.checked})}),this)}),this),this.on("change",t),null)}},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n,i=this._.children,r=0;r<i.length&&(n=i[r]);r++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?r.onChange.apply(this,arguments):(e.on("load",(function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",(function(e){e=e.data.$,"checked"==e.propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})}))}),this),this.on("change",t),null)}}},i,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,r=function(e,t,n,i){e.on("formLoaded",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):r(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},reset:function(){function e(){n.$.open();var e="";i.size&&(e=i.size-(CKEDITOR.env.ie?7:0));var u=t.frameId+"_input";for(n.$.write(['<html dir="'+s+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+s+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(i.action),'"><label id="',t.labelId,'" for="',u,'" style="display:none">',CKEDITOR.tools.htmlEncode(i.label),'</label><input style="width:100%" id="',u,'" aria-labelledby="',t.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(i.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+o+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+a+")}","<\/script>"].join("")),n.$.close(),e=0;e<r.length;e++)r[e].enable()}var t=this._,n=CKEDITOR.document.getById(t.frameId).getFrameDocument(),i=t.definition,r=t.buttons,o=this.formLoadedNumber,a=this.formUnloadNumber,s=t.dialog._.editor.lang.dir,l=t.dialog._.editor.langCode;o||(o=this.formLoadedNumber=CKEDITOR.tools.addFunction((function(){this.fire("formLoaded")}),this),a=this.formUnloadNumber=CKEDITOR.tools.addFunction((function(){this.getInputElement().clearCustomData()}),this),this.getDialog()._.editor.on("destroy",(function(){CKEDITOR.tools.removeFunction(o),CKEDITOR.tools.removeFunction(a)}))),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",(function(){this.getInputElement().on("change",(function(){this.fire("change",{value:this.getValue()})}),this)}),this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",t),CKEDITOR.dialog.addUIElement("password",t),CKEDITOR.dialog.addUIElement("tel",t),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var i,r=t.children,o=[],a=[],s=0;s<r.length&&(i=r[s]);s++){var l=[];o.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,a,o,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;n>t-e;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function t(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function n(e,t){for(var n=e.$.getElementsByTagName("input"),i=0,r=n.length;i<r;i++){var o=new CKEDITOR.dom.element(n[i]);"text"==o.getAttribute("type").toLowerCase()&&(t?(o.setAttribute("value",o.getCustomData("fake_value")||""),o.removeCustomData("fake_value")):(o.setCustomData("fake_value",o.getAttribute("value")),o.setAttribute("value","")))}}function i(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function r(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function o(e){var t=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",m).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=t.getChild([0,0,0,0,0]),i=n.getChild(0),r=n.getChild(1);return e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),i.unselectable(),r.unselectable(),{element:t,parts:{dialog:t.getChild(0),title:i,close:r,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}function a(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",(function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")})),t.on("focus",(function(){this.fire("mouseover")})),t.on("blur",(function(){this.fire("mouseout")}))}function s(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",(function(){n.removeListener("resize",t)}))}function l(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function u(e){function t(t){var n=e.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),u=t.data.$.screenX,c=t.data.$.screenY,d=u-i.x,f=c-i.y;i={x:u,y:c},r.x+=d,r.y+=f,e.move(r.x+s[3]<a?-s[3]:r.x-s[1]>l.width-n.width-a?l.width-n.width+("rtl"==o.lang.dir?0:s[1]):r.x,r.y+s[0]<a?-s[0]:r.y-s[2]>l.height-n.height-a?l.height-n.height+s[2]:r.y,1),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",t),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var e=C.getChild(0).getFrameDocument();e.removeListener("mousemove",t),e.removeListener("mouseup",n)}}var i=null,r=null,o=e.getParentEditor(),a=o.config.dialog_magnetDistance,s=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof a&&(a=20),e.parts.title.on("mousedown",(function(o){if(i={x:o.data.$.screenX,y:o.data.$.screenY},CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),r=e.getPosition(),CKEDITOR.env.ie6Compat){var a=C.getChild(0).getFrameDocument();a.on("mousemove",t),a.on("mouseup",n)}o.data.preventDefault()}),e)}function c(e){function t(t){var n="rtl"==d.lang.dir,c=u.width,f=u.height,h=c+(t.data.$.screenX-l.x)*(n?-1:1)*(e._.moved?1:2),p=f+(t.data.$.screenY-l.y)*(e._.moved?1:2),m=e._.element.getFirst(),g=(m=n&&m.getComputedStyle("right"),e.getPosition());g.y+p>s.height&&(p=s.height-g.y),(n?m:g.x)+h>s.width&&(h=s.width-(n?m:g.x)),r!=CKEDITOR.DIALOG_RESIZE_WIDTH&&r!=CKEDITOR.DIALOG_RESIZE_BOTH||(c=Math.max(i.minWidth||0,h-o)),r!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&r!=CKEDITOR.DIALOG_RESIZE_BOTH||(f=Math.max(i.minHeight||0,p-a)),e.resize(c,f),e._.moved||e.layout(),t.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",t),c&&(c.remove(),c=null),CKEDITOR.env.ie6Compat){var e=C.getChild(0).getFrameDocument();e.removeListener("mouseup",n),e.removeListener("mousemove",t)}}var i=e.definition,r=i.resizable;if(r!=CKEDITOR.DIALOG_RESIZE_NONE){var o,a,s,l,u,c,d=e.getParentEditor(),f=CKEDITOR.tools.addFunction((function(i){u=e.getSize();var r=e.parts.contents;r.$.getElementsByTagName("iframe").length&&(c=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),r.append(c)),a=u.height-e.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),o=u.width-e.parts.contents.getSize("width",1),l={x:i.screenX,y:i.screenY},s=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",t),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&(r=C.getChild(0).getFrameDocument(),r.on("mousemove",t),r.on("mouseup",n)),i.preventDefault&&i.preventDefault()}));e.on("load",(function(){var t="";r==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":r==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical"),t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+d.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(d.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+f+', event )">'+("ltr"==d.lang.dir?"":"")+"</div>"),e.parts.footer.append(t,1)})),d.on("destroy",(function(){CKEDITOR.tools.removeFunction(f)}))}}function d(e){e.data.preventDefault(1)}function f(e){var t=CKEDITOR.document.getWindow(),n=e.config,i=CKEDITOR.skinName||e.config.skin,r=n.dialog_backgroundCoverColor||("moono-lisa"==i?"black":"white"),o=(i=n.dialog_backgroundCoverOpacity,n.baseFloatZIndex),a=(n=CKEDITOR.tools.genKey(r,i,o),O[n]);a?a.show():(o=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",o,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+r,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(r="<html><body style=\\'background-color:"+r+";\\'></body></html>",o.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+r+"' );document.close();")+"})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),o.push("</div>"),a=CKEDITOR.dom.element.createFromHtml(o.join("")),a.setOpacity(void 0!==i?i:.5),a.on("keydown",d),a.on("keypress",d),a.on("keyup",d),a.appendTo(CKEDITOR.document.getBody()),O[n]=a),e.focusManager.add(a),C=a,e=function(){var e=t.getViewPaneSize();a.setStyles({width:e.width+"px",height:e.height+"px"})};var s=function(){var e=t.getScrollPosition(),n=CKEDITOR.dialog._.currentTop;if(a.setStyles({left:e.x+"px",top:e.y+"px"}),n)do{e=n.getPosition(),n.move(e.x,e.y)}while(n=n._.parentDialog)};if(T=e,t.on("resize",e),e(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||a.focus(),CKEDITOR.env.ie6Compat){var l=function(){s(),arguments.callee.prevScrollHandler.apply(this,arguments)};t.$.setTimeout((function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l}),0),s()}}function h(e){C&&(e.focusManager.remove(C),e=CKEDITOR.document.getWindow(),C.hide(),e.removeListener("resize",T),CKEDITOR.env.ie6Compat&&e.$.setTimeout((function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null}),0),T=null)}var p=CKEDITOR.tools.cssLength,m='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(n,a){function s(){var e=O._.focusList;e.sort((function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex}));for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}function l(e){var t=O._.focusList;if(e=e||0,!(1>t.length)){var n=O._.currentFocusIndex;O._.tabBarMode&&0>e&&(n=0);try{t[n].getInputElement().$.blur()}catch(e){}var i=n,r=1<O._.pageCount;do{if(i+=e,r&&!O._.tabBarMode&&(i==t.length||-1==i))return O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),void(O._.currentFocusIndex=-1);if(i=(i+t.length)%t.length,i==n)break}while(e&&!t[i].isFocusable());t[i].focus(),"text"==t[i].type&&t[i].select()}}function d(i){if(O==CKEDITOR.dialog._.currentTop){var r=i.data.getKeystroke(),o="rtl"==n.lang.dir,a=[37,38,39,40];if(h=p=0,9==r||r==CKEDITOR.SHIFT+9)l(r==CKEDITOR.SHIFT+9?-1:1),h=1;else if(r==CKEDITOR.ALT+121&&!O._.tabBarMode&&1<O.getPageCount())O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),O._.currentFocusIndex=-1,h=1;else if(-1!=CKEDITOR.tools.indexOf(a,r)&&O._.tabBarMode)r=-1!=CKEDITOR.tools.indexOf([o?39:37,38],r)?e.call(O):t.call(O),O.selectPage(r),O._.tabs[r][0].focus(),h=1;else if(13!=r&&32!=r||!O._.tabBarMode)if(13==r)r=i.data.getTarget(),r.is("a","button","select","textarea")||r.is("input")&&"button"==r.$.type||((r=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(r.click,0,r),h=1),p=1;else{if(27!=r)return;(r=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(r.click,0,r):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),p=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),h=1;f(i)}}function f(e){h?e.data.preventDefault(1):p&&e.data.stopPropagation()}var h,p,m=CKEDITOR.dialog._.dialogDefinitions[a],E=CKEDITOR.tools.clone(g),v=n.config.dialog_buttonsOrder||"OS",y=n.lang.dir,T={};if(("OS"==v&&CKEDITOR.env.mac||"rtl"==v&&"ltr"==y||"ltr"==v&&"rtl"==y)&&E.buttons.reverse(),m=CKEDITOR.tools.extend(m(n),E),m=CKEDITOR.tools.clone(m),m=new b(this,m),E=o(n),this._={editor:n,element:E.element,name:a,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=E.parts,CKEDITOR.tools.setTimeout((function(){n.fire("ariaWidget",this.parts.contents)}),0,this),E={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},E["rtl"==y?"right":"left"]=0,this.parts.dialog.setStyles(E),CKEDITOR.event.call(this),this.definition=m=CKEDITOR.fire("dialogDefinition",{name:a,definition:m},n).definition,!("removeDialogTabs"in n._)&&n.config.removeDialogTabs){for(E=n.config.removeDialogTabs.split(";"),y=0;y<E.length;y++)if(v=E[y].split(":"),2==v.length){var C=v[0];T[C]||(T[C]=[]),T[C].push(v[1])}n._.removeDialogTabs=T}if(n._.removeDialogTabs&&(T=n._.removeDialogTabs[a]))for(y=0;y<T.length;y++)m.removeContents(T[y]);m.onLoad&&this.on("load",m.onLoad),m.onShow&&this.on("show",m.onShow),m.onHide&&this.on("hide",m.onHide),m.onOk&&this.on("ok",(function(e){n.fire("saveSnapshot"),setTimeout((function(){n.fire("saveSnapshot")}),0),!1===m.onOk.call(this,e)&&(e.data.hide=!1)})),this.state=CKEDITOR.DIALOG_STATE_IDLE,m.onCancel&&this.on("cancel",(function(e){!1===m.onCancel.call(this,e)&&(e.data.hide=!1)}));var O=this,I=function(e){var t,n=O._.contents;for(t in n)for(var i in n[t])if(e.call(this,n[t][i]))return};this.on("ok",(function(e){I((function(t){if(t.validate){var n=t.validate(this),r="string"==typeof n||!1===n;return r&&(e.data.hide=!1,e.stop()),i.call(t,!r,"string"==typeof n?n:void 0),r}}))}),this,null,0),this.on("cancel",(function(e){I((function(t){if(t.isChanged())return n.config.dialog_noConfirmCancel||confirm(n.lang.common.confirmCancel)||(e.data.hide=!1),!0}))}),this,null,0),this.parts.close.on("click",(function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()}),this),this.changeFocus=l;var _=this._.element;for(n.focusManager.add(_,1),this.on("show",(function(){_.on("keydown",d,this),CKEDITOR.env.gecko&&_.on("keypress",f,this)})),this.on("hide",(function(){_.removeListener("keydown",d),CKEDITOR.env.gecko&&_.removeListener("keypress",f),I((function(e){r.apply(e)}))})),this.on("iframeAdded",(function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",d,this,null,0)})),this.on("show",(function(){s();var e=1<O._.pageCount;n.config.dialog_startupFocusTab&&e?(O._.tabBarMode=!0,O._.tabs[O._.currentTabId][0].focus(),O._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=e?-1:this._.focusList.length-1,m.onFocus?(e=m.onFocus.call(this))&&e.focus():l(1))}),this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",(function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)}),this),u(this),c(this),new CKEDITOR.dom.text(m.title,CKEDITOR.document).appendTo(this.parts.title),y=0;y<m.contents.length;y++)(T=m.contents[y])&&this.addPage(T);for(this.parts.tabs.on("click",(function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),e.data.preventDefault())}),this),y=[],T=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:m.buttons},y).getChild(),this.parts.footer.setHtml(y.join("")),y=0;y<T.length;y++)this._.buttons[T[y].id]=T[y]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})}}(),getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var i=this._.element.getFirst(),r="rtl"==this._.editor.lang.dir,o="fixed"==i.getComputedStyle("position");CKEDITOR.env.ie&&i.setStyle("zoom","100%"),o&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},o||(o=CKEDITOR.document.getWindow().getScrollPosition(),e+=o.x,t+=o.y),r&&(o=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-o.width-e),t={top:(0<t?t:0)+"px"},t[r?"right":"left"]=(0<e?e:0)+"px",i.setStyles(t),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;for(var n in e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,f(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",_),e.on("keyup",D),this._.hasFocus=!1,t.contents)if(t.contents[n]){e=t.contents[n];var i=this._.tabs[e.id],r=e.requiredContent,o=0;if(i){for(var a in this._.contents[e.id]){var l=this._.contents[e.id][a];"hbox"!=l.type&&"vbox"!=l.type&&l.getInputElement()&&(l.requiredContent&&!this._.editor.activeFilter.check(l.requiredContent)?l.disable():(l.enable(),o++))}!o||r&&!this._.editor.activeFilter.check(r)?i[0].addClass("cke_dialog_tab_disabled"):i[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout((function(){this.layout(),s(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach((function(e){e.setInitValue&&e.setInitValue()}))}),100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),i=(n.width-t.width)/2,r=(n.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<r?r:0)>n.height||t.width+(0<i?i:0)>n.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:i,this._.moved?this._.position.y:r)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:function(){var e=function(e){e.reset&&e.reset(1)};return function(){return this.foreach(e),this}}(),setupContent:function(){var e=arguments;this.foreach((function(t){t.setup&&t.setup.apply(t,e)}))},commitContent:function(){var e=arguments;this.foreach((function(t){CKEDITOR.env.ie&&this._.currentFocusIndex==t.focusIndex&&t.getInputElement().$.blur(),t.commit&&t.commit.apply(t,e)}))},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),k(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else h(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",_),e.removeListener("keyup",D);var n=this._.editor;n.focus(),setTimeout((function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()}),0)}delete this._.parentDialog,this.foreach((function(e){e.resetInitValue&&e.resetInitValue()})),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",i=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),r=this._.contents[e.id]={},o=i.getChild(),a=0;i=o.shift();)i.notAllowed||"hbox"==i.type||"vbox"==i.type||a++,r[i.id]=i,"function"==typeof i.getChild&&o.push.apply(o,i.getChild());a||(e.hidden=!0),t=CKEDITOR.dom.element.createFromHtml(t.join("")),t.setAttribute("role","tabpanel"),i=CKEDITOR.env,r="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',r,'"',i.gecko&&!i.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",r),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(R(this,this,"CTRL+"+e.accessKey,K,w),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var i=this._.tabs[t][0],r=this._.tabs[t][1];t!=e&&(i.removeClass("cke_dialog_tab_selected"),r.hide()),r.setAttribute("aria-hidden",t!=e)}var o=this._.tabs[e];o[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(n(o[1]),o[1].show(),setTimeout((function(){n(o[1],1)}),0)):o[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(t){var n=this._.tabs[t]&&this._.tabs[t][0];n&&1!=this._.pageCount&&n.isVisible()&&(t==this._.currentTabId&&this.selectPage(e.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if("undefined"==typeof t)t=this._.focusList.length,this._.focusList.push(new a(this,e,t));else{this._.focusList.splice(t,0,new a(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(e){if(this.state!=e){if(this.state=e,e==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var t=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==t?"right":"left"}};n.styles["margin-"+("rtl"==t?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else e==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",e)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return e=e.config.removeDialogTabs,!(e&&e.match(new RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i")))},okButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(e){e=e.data.dialog,!1!==e.fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),cancelButton:function(){var e=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(e){e=e.data.dialog,!1!==e.fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)};return e.type="button",e.override=function(t){return CKEDITOR.tools.extend((function(n){return e(n,t)}),{type:"button"},!0)},e}(),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var g={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},E=function(e,t,n){for(var i,r=0;i=e[r];r++)if(i.id==t||n&&i[n]&&(i=E(i[n],t,n)))return i;return null},v=function(e,t,n,i,r){if(n){for(var o,a=0;o=e[a];a++){if(o.id==n)return e.splice(a,0,t),t;if(i&&o[i]&&(o=v(o[i],t,n,i,!0)))return o}if(r)return null}return e.push(t),t},y=function(e,t,n){for(var i,r=0;i=e[r];r++){if(i.id==t)return e.splice(r,1);if(n&&i[n]&&(i=y(i[n],t,n)))return i}return null},b=function(e,t){this.dialog=e;for(var n,i=t.contents,r=0;n=i[r];r++)i[r]=n&&new l(e,n);CKEDITOR.tools.extend(this,t)};b.prototype={getContents:function(e){return E(this.contents,e)},getButton:function(e){return E(this.buttons,e)},addContents:function(e,t){return v(this.contents,e,t)},addButton:function(e,t){return v(this.buttons,e,t)},removeContents:function(e){y(this.contents,e)},removeButton:function(e){y(this.buttons,e)}},l.prototype={get:function(e){return E(this.elements,e,"children")},add:function(e,t){return v(this.elements,e,t,"children")},remove:function(e){y(this.elements,e,"children")}};var T,C,O={},I={},_=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,r=String.fromCharCode(e.data.$.keyCode);(t=I[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+r])&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},D=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,r=String.fromCharCode(e.data.$.keyCode);(t=I[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+r])&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},R=function(e,t,n,i,r){(I[n]||(I[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:r||e.accessKeyUp,keydown:i||e.accessKeyDown})},k=function(e){for(var t in I){for(var n=I[t],i=n.length-1;0<=i;i--)n[i].dialog!=e&&n[i].uiElement!=e||n.splice(i,1);0===n.length&&delete I[t]}},w=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},K=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(e,t,n,i,r,o,a){if(!(4>arguments.length)){var s=(i.call?i(t):i)||"div",l=["<",s," "],u=(r&&r.call?r(t):r)||{},c=(o&&o.call?o(t):o)||{},d=(a&&a.call?a.call(this,e,t):a)||"",f=this.domId=c.id||CKEDITOR.tools.getNextId()+"_uiElement";t.requiredContent&&!e.getParentEditor().filter.check(t.requiredContent)&&(u.display="none",this.notAllowed=!0),c.id=f;var h={};t.type&&(h["cke_dialog_ui_"+t.type]=1),t.className&&(h[t.className]=1),t.disabled&&(h.cke_disabled=1);var p=c["class"]&&c["class"].split?c["class"].split(" "):[];for(f=0;f<p.length;f++)p[f]&&(h[p[f]]=1);for(f in p=[],h)p.push(f);for(f in c["class"]=p.join(" "),t.title&&(c.title=t.title),h=(t.style||"").split(";"),t.align&&(p=t.align,u["margin-left"]="left"==p?0:"auto",u["margin-right"]="right"==p?0:"auto"),u)h.push(f+":"+u[f]);for(t.hidden&&h.push("display:none"),f=h.length-1;0<=f;f--)""===h[f]&&h.splice(f,1);for(f in 0<h.length&&(c.style=(c.style?c.style+"; ":"")+h.join("; ")),c)l.push(f+'="'+CKEDITOR.tools.htmlEncode(c[f])+'" ');l.push(">",d,"</",s,">"),n.push(l.join("")),(this._||(this._={})).dialog=e,"boolean"==typeof t.isChanged&&(this.isChanged=function(){return t.isChanged}),"function"==typeof t.isChanged&&(this.isChanged=t.isChanged),"function"==typeof t.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,(function(e){return function(n){e.call(this,t.setValue.call(this,n))}}))),"function"==typeof t.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,(function(e){return function(){return t.getValue.call(this,e.call(this))}}))),CKEDITOR.event.implementOn(this),this.registerEvents(t),this.accessKeyUp&&this.accessKeyDown&&t.accessKey&&R(this,e,"CTRL+"+t.accessKey);var m=this;e.on("load",(function(){var t=m.getInputElement();if(t){var n=m.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";t.on("focus",(function(){e._.tabBarMode=!1,e._.hasFocus=!0,m.fire("focus"),n&&this.addClass(n)})),t.on("blur",(function(){m.fire("blur"),n&&this.removeClass(n)}))}})),CKEDITOR.tools.extend(this,t),this.keyboardFocusable&&(this.tabIndex=t.tabIndex||0,this.focusIndex=e._.focusList.push(this)-1,this.on("focus",(function(){e._.currentFocusIndex=m.focusIndex})))}},hbox:function(e,t,n,i,r){if(!(4>arguments.length)){this._||(this._={});var o,a=this._.children=t,s=r&&r.widths||null,l=r&&r.height||null,u={role:"presentation"};r&&r.align&&(u.align=r.align),CKEDITOR.ui.dialog.uiElement.call(this,e,r||{type:"hbox"},i,"table",{},u,(function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(o=0;o<n.length;o++){var t="cke_dialog_ui_hbox_child",i=[];0===o&&(t="cke_dialog_ui_hbox_first"),o==n.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),s?s[o]&&i.push("width:"+p(s[o])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+p(l)),r&&void 0!==r.padding&&i.push("padding:"+p(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a[o].align&&i.push("text-align:"+a[o].align),0<i.length&&e.push('style="'+i.join("; ")+'" '),e.push(">",n[o],"</td>")}return e.push("</tr></tbody>"),e.join("")}))}},vbox:function(e,t,n,i,r){if(!(3>arguments.length)){this._||(this._={});var o=this._.children=t,a=r&&r.width||null,s=r&&r.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,e,r||{type:"vbox"},i,"div",null,{role:"presentation"},(function(){var t=['<table role="presentation" cellspacing="0" border="0" '];t.push('style="'),r&&r.expand&&t.push("height:100%;"),t.push("width:"+p(a||"100%"),";"),CKEDITOR.env.webkit&&t.push("float:none;"),t.push('"'),t.push('align="',CKEDITOR.tools.htmlEncode(r&&r.align||("ltr"==e.getParentEditor().lang.dir?"left":"right")),'" '),t.push("><tbody>");for(var i=0;i<n.length;i++){var l=[];t.push('<tr><td role="presentation" '),a&&l.push("width:"+p(a||"100%")),s?l.push("height:"+p(s[i])):r&&r.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),r&&void 0!==r.padding&&l.push("padding:"+p(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&o[i].align&&l.push("text-align:"+o[i].align),0<l.length&&t.push('style="',l.join("; "),'" '),t.push(' class="cke_dialog_ui_vbox_child">',n[i],"</td></tr>")}return t.push("</tbody></table>"),t.join("")}))}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e?(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,r=function(e,t,n,i){t.on("load",(function(){e.getInputElement().on(n,i,e)}))};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):r(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return 1>arguments.length?this._.children.concat():(e.splice||(e=[e]),2>e.length?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var e={build:function(e,t,n){for(var i,r=t.children,o=[],a=[],s=0;s<r.length&&(i=r[s]);s++){var l=[];o.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,a,o,n,t)}};CKEDITOR.dialog.addUIElement("hbox",e),CKEDITOR.dialog.addUIElement("vbox",e)}(),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){var t=this.tabId;e.openDialog(this.dialogName,(function(e){t&&e.selectPage(t)}))},canUndo:!1,editorFocus:1},function(){var e=/^([a]|[^a])+$/,t=/^\d*$/,n=/^\d*(?:\.\d+)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,r=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,o=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var e=arguments;return function(){var t,n,i=this&&this.getValue?this.getValue():e[0],r=CKEDITOR.VALIDATE_AND,o=[];for(n=0;n<e.length;n++){if("function"!=typeof e[n])break;o.push(e[n])}n<e.length&&"string"==typeof e[n]&&(t=e[n],n++),n<e.length&&"number"==typeof e[n]&&(r=e[n]);var a=r==CKEDITOR.VALIDATE_AND;for(n=0;n<o.length;n++)a=r==CKEDITOR.VALIDATE_AND?a&&o[n](i):a||o[n](i);return!!a||t}},regex:function(e,t){return function(n){return n=this&&this.getValue?this.getValue():n,!!e.test(n)||t}},notEmpty:function(t){return this.regex(e,t)},integer:function(e){return this.regex(t,e)},number:function(e){return this.regex(n,e)},cssLength:function(e){return this.functions((function(e){return r.test(CKEDITOR.tools.trim(e))}),e)},htmlLength:function(e){return this.functions((function(e){return i.test(CKEDITOR.tools.trim(e))}),e)},inlineStyle:function(e){return this.functions((function(e){return o.test(CKEDITOR.tools.trim(e))}),e)},equals:function(e,t){return this.functions((function(t){return t==e}),t)},notEqual:function(e,t){return this.functions((function(t){return t!=e}),t)}},CKEDITOR.on("instanceDestroyed",(function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in O)O[n].remove();O={}}for(var i in e=e.editor._.storedDialogs,e)e[i].destroy()}))}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,i=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&f(this),"function"==typeof i)n=this._.storedDialogs||(this._.storedDialogs={}),n=n[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if("failed"==i)throw h(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof i&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i),(function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)}),this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",(function(t){t.data.dialog&&e.openDialog(t.data.dialog)}),null,null,999)}}),function(){function e(e,t){CKEDITOR.tools.extend(this,t,{editor:e,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:e._.notificationArea}),t.type||(this.type="info"),this.element=this._createElement(),e.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function t(e){var t=this;this.editor=e,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),e.on("destroy",(function(){t._removeListeners(),t.element.remove()}))}CKEDITOR.plugins.add("notification",{init:function(e){function n(e){var t=new CKEDITOR.dom.element("div");t.setStyles({position:"fixed","margin-left":"-9999px"}),t.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),t.setText(e),CKEDITOR.document.getBody().append(t),setTimeout((function(){t.remove()}),100)}e._.notificationArea=new t(e),e.showNotification=function(t,n,i){var r,o;return"progress"==n?r=i:o=i,t=new CKEDITOR.plugins.notification(e,{message:t,type:n,progress:r,duration:o}),t.show(),t},e.on("key",(function(t){if(27==t.data.keyCode){var i=e._.notificationArea.notifications;i.length&&(n(e.lang.notification.closed),i[i.length-1].hide(),t.cancel())}}))}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(e){var t=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:e})&&(t=!1);var n=this.element,i=n.findOne(".cke_notification_message"),r=n.findOne(".cke_notification_progress"),o=e.type;n.removeAttribute("role"),e.progress&&"progress"!=this.type&&(o="progress"),o&&(n.removeClass(this._getClass()),n.removeAttribute("aria-label"),this.type=o,n.addClass(this._getClass()),n.setAttribute("aria-label",this.type),"progress"!=this.type||r?"progress"!=this.type&&r&&r.remove():(r=this._createProgressElement(),r.insertBefore(i))),void 0!==e.message&&(this.message=e.message,i.setHtml(this.message)),void 0!==e.progress&&(this.progress=e.progress,r&&r.setStyle("width",this._getPercentageProgress())),t&&e.important&&(n.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=e.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var e,t,n=this,i=this.editor.lang.common.close;return e=new CKEDITOR.dom.element("div"),e.addClass("cke_notification"),e.addClass(this._getClass()),e.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&e.append(this._createProgressElement()),t=new CKEDITOR.dom.element("p"),t.addClass("cke_notification_message"),t.setHtml(this.message),e.append(t),t=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+i+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),e.append(t),t.on("click",(function(){n.editor.focus(),n.hide()})),e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var e=new CKEDITOR.dom.element("span");return e.addClass("cke_notification_progress"),e.setStyle("width",this._getPercentageProgress()),e},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var e,t=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?e=this.duration:"info"!=this.type&&"success"!=this.type||(e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),e&&(t._hideTimeoutId=setTimeout((function(){t.hide()}),e))}},t.prototype={add:function(e){this.notifications.push(e),this.element.append(e.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(e){var t=CKEDITOR.tools.indexOf(this.notifications,e);0>t||(this.notifications.splice(t,1),e.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var e=this.editor,t=e.config,n=new CKEDITOR.dom.element("div");return n.addClass("cke_notifications_area"),n.setAttribute("id","cke_notifications_area_"+e.name),n.setStyle("z-index",t.baseFloatZIndex-2),n},_attachListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.on("scroll",this._uiBuffer.input),e.on("resize",this._uiBuffer.input),t.on("change",this._changeBuffer.input),t.on("floatingSpaceLayout",this._layout,this,null,20),t.on("blur",this._layout,this,null,20)},_removeListeners:function(){var e=CKEDITOR.document.getWindow(),t=this.editor;e.removeListener("scroll",this._uiBuffer.input),e.removeListener("resize",this._uiBuffer.input),t.removeListener("change",this._changeBuffer.input),t.removeListener("floatingSpaceLayout",this._layout),t.removeListener("blur",this._layout)},_layout:function(){function e(){r.setStyle("left",m(g+a.width-u-c))}var t,n,i,r=this.element,o=this.editor,a=o.ui.contentsElement.getClientRect(),s=o.ui.contentsElement.getDocumentPosition(),l=r.getClientRect(),u=this._notificationWidth,c=this._notificationMargin;i=CKEDITOR.document.getWindow();var d=i.getScrollPosition(),f=i.getViewPaneSize(),h=CKEDITOR.document.getBody(),p=h.getDocumentPosition(),m=CKEDITOR.tools.cssLength;u&&c||(i=this.element.getChild(0),u=this._notificationWidth=i.getClientRect().width,c=this._notificationMargin=parseInt(i.getComputedStyle("margin-left"),10)+parseInt(i.getComputedStyle("margin-right"),10)),o.toolbar&&(t=o.ui.space("top"),n=t.getClientRect()),t&&t.isVisible()&&n.bottom>a.top&&n.bottom<a.bottom-l.height?r.setStyles({position:"fixed",top:m(n.bottom)}):0<a.top?r.setStyles({position:"absolute",top:m(s.y)}):s.y+a.height-l.height>d.y?r.setStyles({position:"fixed",top:0}):r.setStyles({position:"absolute",top:m(s.y+a.height-l.height)});var g="fixed"==r.getStyle("position")?a.left:"static"!=h.getComputedStyle("position")?s.x-p.x:s.x;a.width<u+c?s.x+u+c>d.x+f.width?e():r.setStyle("left",m(g)):s.x+u+c>d.x+f.width?r.setStyle("left",m(g)):s.x+a.width/2+u/2+c>d.x+f.width?r.setStyle("left",m(g-s.x+d.x+f.width-u-c)):0>a.left+a.width-u-c?e():0>a.left+a.width/2-u/2?r.setStyle("left",m(g-s.x+d.x)):r.setStyle("left",m(g+a.width/2-u/2-c/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"',e+='>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var t=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(e){CKEDITOR.tools.extend(this,e,{title:e.label,click:e.click||function(t){t.execCommand(e.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(e,i){function r(){var t=e.mode;t&&(t=this.modes[t]?void 0!==l[t]?l[t]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,t=e.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:t,this.setState(t),this.refresh&&this.refresh())}var o,a,s,l=null,u=CKEDITOR.env,c=this._.id=CKEDITOR.tools.getNextId(),d="",f=this.command;this._.editor=e;var h,p={id:c,button:this,editor:e,focus:function(){CKEDITOR.document.getById(c).focus()},execute:function(){this.button.click(e)},attach:function(e){this.button.attach(e)}},m=CKEDITOR.tools.addFunction((function(e){if(p.onkey)return e=new CKEDITOR.dom.event(e),!1!==p.onkey(p,e.getKeystroke())})),g=CKEDITOR.tools.addFunction((function(e){var t;return p.onfocus&&(t=!1!==p.onfocus(p,new CKEDITOR.dom.event(e))),t})),E=0;p.clickFn=o=CKEDITOR.tools.addFunction((function(){E&&(e.unlockSelection(1),E=0),p.execute(),u.iOS&&e.focus()})),this.modes?(l={},e.on("beforeModeUnload",(function(){e.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[e.mode]=this._.state)}),this),e.on("activeFilterChange",r,this),e.on("mode",r,this),!this.readOnly&&e.on("readOnly",r,this)):f&&(f=e.getCommand(f))&&(f.on("state",(function(){this.setState(f.state)}),this),d+=f.state==CKEDITOR.TRISTATE_ON?"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&e.on("contentDirChanged",(function(t){var n=CKEDITOR.document.getById(this._.id),i=n.getFirst();t=t.data,t!=e.lang.dir?n.addClass("cke_"+t):n.removeClass("cke_ltr").removeClass("cke_rtl"),i.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==t,this.icon,this.iconOffset))}),this),f?(a=e.getCommandKeystroke(f))&&(s=CKEDITOR.tools.keystrokeToString(e.lang.common.keyboard,a)):d+="off",a=this.name||this.command;var v=null,y=this.icon;return h=a,this.icon&&!/\./.test(this.icon)?(h=this.icon,y=null):(this.icon&&(v=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(v=this.iconHiDpi)),v?(CKEDITOR.skin.addIcon(v,v),y=null):v=h,d={id:c,name:a,iconName:h,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(s?" ("+s.display+")":""),ariaShortcut:s?e.lang.common.keyboardShortcut+" "+s.aria:"",titleJs:u.gecko&&!u.hc?"":(this.title||"").replace("'",""),hasArrow:"string"===typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:m,focusFn:g,clickFn:o,style:CKEDITOR.skin.getIconStyle(v,"rtl"==e.lang.dir,y,this.iconOffset),arrowHtml:this.hasArrow?t.output():""},n.output(d,i),this.onRender&&this.onRender(),p},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),t.setAttribute("aria-disabled",e==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?t.setAttribute("aria-expanded",e==CKEDITOR.TRISTATE_ON):e===CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return this.allowedContent||this.requiredContent||!this.command||(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function e(e){function n(){for(var n=i(),o=CKEDITOR.tools.clone(e.config.toolbarGroups)||t(e),a=0;a<o.length;a++){var s=o[a];if("/"!=s){"string"==typeof s&&(s=o[a]={name:s});var l,u=s.groups;if(u)for(var c=0;c<u.length;c++)l=u[c],(l=n[l])&&r(s,l);(l=n[s.name])&&r(s,l)}}return o}function i(){var t,n,i,r={};for(t in e.ui.items)n=e.ui.items[t],i=n.toolbar||"others",i=i.split(","),n=i[0],i=parseInt(i[1]||-1,10),r[n]||(r[n]=[]),r[n].push({name:t,order:i});for(n in r)r[n]=r[n].sort((function(e,t){return e.order==t.order?0:0>t.order?-1:0>e.order?1:e.order<t.order?-1:1}));return r}function r(t,n){if(n.length){t.items?t.items.push(e.ui.create("-")):t.items=[];for(var i;i=n.shift();)i="string"==typeof i?i:i.name,a&&-1!=CKEDITOR.tools.indexOf(a,i)||(i=e.ui.create(i))&&e.addFeature(i)&&t.items.push(i)}}function o(e){var t,n,i,o=[];for(t=0;t<e.length;++t)n=e[t],i={},"/"==n?o.push(n):CKEDITOR.tools.isArray(n)?(r(i,CKEDITOR.tools.clone(n)),o.push(i)):n.items&&(r(i,CKEDITOR.tools.clone(n.items)),i.name=n.name,o.push(i));return o}var a=e.config.removeButtons,s=(a=a&&a.split(","),e.config.toolbar);return"string"==typeof s&&(s=e.config["toolbar_"+s]),e.toolbar=s?o(s):n()}function t(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var n,i=0;n=e.items[i++];)if(n.focus)return void n.focus()};var i={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout((function(){e.toolbox.focus()}),100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(t){var r,o=function(e,n){var i,a="rtl"==t.lang.dir,s=t.config.toolbarGroupCycling,l=a?37:39;a=a?39:37,s=void 0===s||s;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if(i=9==n?(i?i.next:e.toolbar.next)||t.toolbox.toolbars[0]:(i?i.previous:e.toolbar.previous)||t.toolbox.toolbars[t.toolbox.toolbars.length-1],i.items.length)for(e=i.items[r?i.items.length-1:0];e&&!e.focus;)(e=r?e.previous:e.next)||(i=0);return e&&e.focus(),!1;case l:i=e;do{i=i.next,!i&&s&&(i=e.toolbar.items[0])}while(i&&!i.focus);return i?i.focus():o(e,9),!1;case 40:return e.button&&e.button.hasArrow?e.execute():o(e,40==n?l:a),!1;case a:case 38:i=e;do{i=i.previous,!i&&s&&(i=e.toolbar.items[e.toolbar.items.length-1])}while(i&&!i.focus);return i?i.focus():(r=1,o(e,CKEDITOR.SHIFT+9),r=0),!1;case 27:return t.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};t.on("uiSpace",(function(i){if(i.data.space==t.config.toolbarLocation){i.removeListener(),t.toolbox=new n;var r,a,s=CKEDITOR.tools.getNextId(),l=['<span id="',s,'" class="cke_voice_label">',t.lang.toolbar.toolbars,"</span>",'<span id="'+t.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',s,'" onmousedown="return false;">'];s=!1!==t.config.toolbarStartupExpanded;t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(s?">":' style="display:none">'));for(var u=t.toolbox.toolbars,c=e(t),d=c.length,f=0;f<d;f++){var h,p,m,g=0,E=c[f],v="/"!==E&&("/"===c[f+1]||f==d-1);if(E)if(r&&(l.push("</span>"),a=r=0),"/"===E)l.push('<span class="cke_toolbar_break"></span>');else{m=E.items||E;for(var y=0;y<m.length;y++){var b,T=m[y];if(T){var C=function(e){e=e.render(t,l),O=g.items.push(e)-1,0<O&&(e.previous=g.items[O-1],e.previous.next=e),e.toolbar=g,e.onkey=o,e.onfocus=function(){t.toolbox.focusCommandExecuted||t.focus()}};if(T.type==CKEDITOR.UI_SEPARATOR)a=r&&T;else{if(b=!1!==T.canGroup,!g){h=CKEDITOR.tools.getNextId(),g={id:h,items:[]},p=E.name&&(t.lang.toolbar.toolbarGroups[E.name]||E.name),l.push('<span id="',h,'" class="cke_toolbar'+(v?' cke_toolbar_last"':'"'),p?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),p&&l.push('<span id="',h,'_label" class="cke_voice_label">',p,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var O=u.push(g)-1;0<O&&(g.previous=u[O-1],g.previous.next=g)}b?r||(l.push('<span class="cke_toolgroup" role="presentation">'),r=1):r&&(l.push("</span>"),r=0),a&&(C(a),a=0),C(T)}}}r&&(l.push("</span>"),a=r=0),g&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(t.config.toolbarCanCollapse&&l.push("</span>"),t.config.toolbarCanCollapse&&t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var I=CKEDITOR.tools.addFunction((function(){t.execCommand("toolbarCollapse")}));t.on("destroy",(function(){CKEDITOR.tools.removeFunction(I)})),t.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),i=e.ui.space("contents"),r=n.getParent(),o=parseInt(i.$.style.height,10),a=r.$.offsetHeight,s=t.hasClass("cke_toolbox_collapser_min");s?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(s?"":""),i.setStyle("height",o-(r.$.offsetHeight-a)+"px"),e.fire("resize",{outerHeight:e.container.$.offsetHeight,contentsHeight:i.$.offsetHeight,outerWidth:e.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),t.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(s?t.lang.toolbar.toolbarCollapse:t.lang.toolbar.toolbarExpand)+'" id="'+t.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),s||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+I+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),i.data.html+=l.join("")}})),t.on("destroy",(function(){if(this.toolbox){var e,t,n,i,r=0;for(e=this.toolbox.toolbars;r<e.length;r++)for(n=e[r].items,t=0;t<n.length;t++)i=n[t],i.clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}})),t.on("uiReady",(function(){var e=t.ui.space("toolbox");e&&t.focusManager.add(e,1)})),t.addCommand("toolbarFocus",i),t.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),t.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),t.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,n,i){var r=t(this.editor),o=0===n,a={name:e};if(i){if(i=CKEDITOR.tools.search(r,(function(e){return e.name==i})))return!i.groups&&(i.groups=[]),n&&(n=CKEDITOR.tools.indexOf(i.groups,n),0<=n)?void i.groups.splice(n+1,0,e):void(o?i.groups.splice(0,0,e):i.groups.push(e));n=null}n&&(n=CKEDITOR.tools.indexOf(r,(function(e){return e.name==n}))),o?r.splice(0,0,e):"number"==typeof n?r.splice(n+1,0,a):r.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(e,t,n){return t.type||(t.type="auto"),!(n&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",(function(){e.toolbox.focus()})),e.fire("paste",t))}function t(t){function n(){var e,n=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var i=function(e){t.getSelection().isCollapsed()||(t.readOnly&&"cut"==e.name||m.initPasteDataTransfer(e,t),e.data.preventDefault())};n.on("copy",i),n.on("cut",i),n.on("cut",(function(){t.readOnly||t.extractSelectedHtml()}),null,null,999)}n.on(m.mainPasteEvent,(function(e){"beforepaste"==m.mainPasteEvent&&g||f(e)})),"beforepaste"==m.mainPasteEvent&&(n.on("paste",(function(e){E||(o(),e.data.preventDefault(),f(e),s("paste"))})),n.on("contextmenu",a,null,null,0),n.on("beforepaste",(function(e){!e.data||e.data.$.ctrlKey||e.data.$.shiftKey||a()}),null,null,0)),n.on("beforecut",(function(){!g&&l(t)})),n.attachListener(CKEDITOR.env.ie?n:t.document.getDocumentElement(),"mouseup",(function(){e=setTimeout((function(){h()}),0)})),t.on("destroy",(function(){clearTimeout(e)})),n.on("keyup",h)}function i(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,fakeKeystroke:"cut"==e?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var e;"cut"==this.type&&l();var n=this.type;if(CKEDITOR.env.ie)e=s(n);else try{e=t.document.$.execCommand(n,!1,null)}catch(t){e=!1}return e||t.showNotification(t.lang.clipboard[this.type+"Error"]),e}}}function r(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(t,n){function i(n,i){i="undefined"===typeof i||i,n?(n.method="paste",n.dataTransfer||(n.dataTransfer=m.initPasteDataTransfer()),e(t,n,i)):o&&!t._.forcePasteDialog&&t.showNotification(l,"info",t.config.clipboard_notificationDuration),t._.forcePasteDialog=!1,t.fire("afterCommandExec",{name:"paste",command:r,returnValue:!!n})}n="undefined"!==typeof n&&null!==n?n:{};var r=this,o="undefined"===typeof n.notification||n.notification,a=n.type,s=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,t.getCommandKeystroke(this)),l="string"===typeof o?o:t.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+s.aria+'">'+s.display+"</kbd>");s="string"===typeof n?n:n.dataValue;a&&!0!==t.config.forcePasteAsPlainText&&"allow-word"!==t.config.forcePasteAsPlainText?t._.nextPasteType=a:delete t._.nextPasteType,"string"===typeof s?i({dataValue:s}):t.getClipboardData(i)}}}function o(){E=1,setTimeout((function(){E=0}),100)}function a(){g=1,setTimeout((function(){g=0}),10)}function s(e){var n=t.document,i=n.getBody(),r=!1,o=function(){r=!0};return i.on(e,o),7<CKEDITOR.env.version?n.$.execCommand(e):n.$.selection.createRange().execCommand(e),i.removeListener(e,o),r}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,n,i,r=t.getSelection();r.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=r.getSelectedElement())&&(n=r.getRanges()[0],i=t.document.createText(""),i.insertBefore(e),n.setStartBefore(i),n.setEndAfter(e),r.selectRanges([n]),setTimeout((function(){e.getParent()&&(i.remove(),r.selectElement(e))}),0))}}function u(e,n){var i,r=t.document,o=t.editable(),a=function(e){e.cancel()};if(!r.getById("cke_pastebin")){var s=t.getSelection(),l=s.createBookmarks();CKEDITOR.env.ie&&s.root.fire("selectionchange");var u=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!o.is("body")||CKEDITOR.env.ie?"div":"body",r);u.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var c=0;r=r.getWindow();CKEDITOR.env.webkit?(o.append(u),u.addClass("cke_editable"),o.is("body")||(c="static"!=o.getComputedStyle("position")?o:CKEDITOR.dom.element.get(o.$.offsetParent),c=c.getDocumentPosition().y)):o.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(u),u.setStyles({position:"absolute",top:r.getScrollPosition().y-c+10+"px",width:"1px",height:Math.max(1,r.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&u.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(c=u.getParent().isReadOnly())?(u.setOpacity(0),u.setAttribute("contenteditable",!0)):u.setStyle("ltr"==t.config.contentsLangDirection?"left":"right","-10000px"),t.on("selectionChange",a,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(i=o.once("blur",a,null,null,-100)),c&&u.focus(),c=new CKEDITOR.dom.range(u),c.selectNodeContents(u);var d=c.select();CKEDITOR.env.ie&&(i=o.once("blur",(function(){t.lockSelection(d)})));var f=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout((function(){var e;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=f),i&&i.removeListener(),CKEDITOR.env.ie&&o.focus(),s.selectBookmarks(l),u.remove(),CKEDITOR.env.webkit&&(e=u.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(u=e),t.removeListener("selectionChange",a),n(u.getHtml())}),0)}}function c(){if("paste"==m.mainPasteEvent)return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),o();var e=t.focusManager;return e.lock(),t.editable().fire(m.mainPasteEvent)&&!s("paste")?(e.unlock(),!1):(e.unlock(),!0)}function d(e){if("wysiwyg"==t.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=t.editable(),o(),"paste"==m.mainPasteEvent&&e.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout((function(){t.fire("saveSnapshot")}),50)}}function f(n){var i={type:"auto",method:"paste",dataTransfer:m.initPasteDataTransfer(n)};i.dataTransfer.cacheData();var r=!1!==t.fire("beforePaste",i);r&&m.canClipboardApiBeTrusted(i.dataTransfer,t)?(n.data.preventDefault(),setTimeout((function(){e(t,i)}),0)):u(n,(function(n){i.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),r&&e(t,i)}))}function h(){if("wysiwyg"==t.mode){var e=p("paste");t.getCommand("cut").setState(p("cut")),t.getCommand("copy").setState(p("copy")),t.getCommand("paste").setState(e),t.fire("pasteState",e)}}function p(e){if(v&&e in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==e)return CKEDITOR.TRISTATE_OFF;e=t.getSelection();var n=e.getRanges();return e.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var m=CKEDITOR.plugins.clipboard,g=0,E=0,v=0;(function(){if(t.on("key",d),t.on("contentDom",n),t.on("selectionChange",(function(e){v=e.data.selection.getRanges()[0].checkReadOnly(),h()})),t.contextMenu){t.contextMenu.addListener((function(e,t){return v=t.getRanges()[0].checkReadOnly(),{cut:p("cut"),copy:p("copy"),paste:p("paste")}}));var e=null;t.on("menuShow",(function(){e&&(e.removeListener(),e=null);var n=t.contextMenu.findItemByCommandName("paste");n&&n.element&&(e=n.element.on("touchend",(function(){t._.forcePasteDialog=!0})))}))}t.ui.addButton&&t.once("instanceReady",(function(){t._.pasteButtons&&CKEDITOR.tools.array.forEach(t._.pasteButtons,(function(e){(e=t.ui.get(e))&&(e=CKEDITOR.document.getById(e._.id))&&e.on("touchend",(function(){t._.forcePasteDialog=!0}))}))}))})(),function(){function e(e,n,i,r,o){var a=t.lang.clipboard[n];t.addCommand(n,i),t.ui.addButton&&t.ui.addButton(e,{label:a,command:n,toolbar:"clipboard,"+r}),t.addMenuItems&&t.addMenuItem(n,{label:a,command:n,group:"clipboard",order:o})}e("Cut","cut",i("cut"),10,1),e("Copy","copy",i("copy"),20,4),e("Paste","paste",r(),30,8),t._.pasteButtons||(t._.pasteButtons=[]),t._.pasteButtons.push("Paste")}(),t.getClipboardData=function(e,n){function i(e){e.removeListener(),e.cancel(),n(e.data)}function r(e){e.removeListener(),e.cancel(),n({type:a,dataValue:e.data.dataValue,dataTransfer:e.data.dataTransfer,method:"paste"})}var o=!1,a="auto";n||(n=e,e=null),t.on("beforePaste",(function(e){e.removeListener(),o=!0,a=e.data.type}),null,null,1e3),t.on("paste",i,null,null,0),!1===c()&&(t.removeListener("paste",i),t._.forcePasteDialog&&o&&t.fire("pasteDialog")?(t.on("pasteDialogCommit",r),t.on("dialogHide",(function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",r),e.data._.committed||n(null)}))):n(null))}}function n(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function i(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),t=t.replace(/<\/?[A-Z]+>/g,(function(e){return e.toLowerCase()})),t.match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&(t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),t.match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,(function(e){return n(e.split("</div><div>").length+1)}))+"</p>"),t=t.replace(/<\/div><div>/g,"<br>"),t=t.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,(function(e){return n(e.length/4)}))+"</p>")),a(e,t))}function r(e){function t(){var e,t={};for(e in CKEDITOR.dtd)"$"!=e.charAt(0)&&"div"!=e&&"span"!=e&&(t[e]=1);return t}var n={};return{get:function(i){return"plain-text"==i?n.plainText||(n.plainText=new CKEDITOR.filter(e,"br")):"semantic-content"==i?((i=n.semanticContent)||(i=new CKEDITOR.filter(e,{}),i.allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),i=n.semanticContent=i),i):i?new CKEDITOR.filter(e,i):null}}}function o(e,t,n){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var i=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(i),i.getHtml()}function a(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,(function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)})).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}function s(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}function l(t){var n=CKEDITOR.plugins.clipboard;t.on("contentDom",(function(){function i(n,i,r){i.select(),e(t,{dataTransfer:r,method:"drop"},1),r.sourceEditor.fire("saveSnapshot"),r.sourceEditor.editable().extractHtmlFromRange(n),r.sourceEditor.getSelection().selectRanges([n]),r.sourceEditor.fire("saveSnapshot")}function r(i,r){i.select(),e(t,{dataTransfer:r,method:"drop"},1),n.resetDragDataTransfer()}function o(e,n,i){var r={$:e.data.$,target:e.data.getTarget()};n&&(r.dragRange=n),i&&(r.dropRange=i),!1===t.fire(e.name,r)&&e.data.preventDefault()}function a(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e.getChildCount()}var s=t.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(t),u=t.ui.space("top"),c=t.ui.space("bottom");n.preventDefaultDropOnElement(u),n.preventDefaultDropOnElement(c),s.attachListener(l,"dragstart",o),s.attachListener(t,"dragstart",n.resetDragDataTransfer,n,null,1),s.attachListener(t,"dragstart",(function(e){n.initDragDataTransfer(e,t)}),null,null,2),s.attachListener(t,"dragstart",(function(){var e=n.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=e?a(e.startContainer):null,n.dragEndContainerChildCount=e?a(e.endContainer):null)}),null,null,100),s.attachListener(l,"dragend",o),s.attachListener(t,"dragend",n.initDragDataTransfer,n,null,1),s.attachListener(t,"dragend",n.resetDragDataTransfer,n,null,100),s.attachListener(l,"dragover",(function(e){if(CKEDITOR.env.edge)e.data.preventDefault();else{var t=e.data.getTarget();(t&&t.is&&t.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&e.data.$.dataTransfer.types.contains("Files"))&&e.data.preventDefault()}})),s.attachListener(l,"drop",(function(e){if(!e.data.$.defaultPrevented){e.data.preventDefault();var i=e.data.getTarget();if(!i.isReadOnly()||i.type==CKEDITOR.NODE_ELEMENT&&i.is("html")){i=n.getRangeAtDropPosition(e,t);var r=n.dragRange;i&&o(e,r,i)}}}),null,null,9999),s.attachListener(t,"drop",n.initDragDataTransfer,n,null,1),s.attachListener(t,"drop",(function(e){if(e=e.data){var o=e.dropRange,a=e.dragRange,s=e.dataTransfer;s.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout((function(){n.internalDrop(a,o,s,t)}),0):s.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?i(a,o,s):r(o,s)}}),null,null,9999)}))}var u;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(e){var a,s=r(e);if(e.config.forcePasteAsPlainText?a="plain-text":e.config.pasteFilter?a=e.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in e.config||(a="semantic-content"),e.pasteFilter=s.get(a),t(e),l(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var u,c=["image/png","image/jpeg","image/gif"];e.on("paste",(function(t){var n=t.data,i=n.dataTransfer;if(!n.dataValue&&"paste"==n.method&&i&&1==i.getFilesCount()&&u!=i.id&&(i=i.getFile(0),-1!=CKEDITOR.tools.indexOf(c,i.type))){var r=new FileReader;r.addEventListener("load",(function(){t.data.dataValue='<img src="'+r.result+'" />',e.fire("paste",t.data)}),!1),r.addEventListener("abort",(function(){e.fire("paste",t.data)}),!1),r.addEventListener("error",(function(){e.fire("paste",t.data)}),!1),r.readAsDataURL(i),u=n.dataTransfer.id,t.stop()}}),null,null,1)}e.on("paste",(function(t){if(t.data.dataTransfer||(t.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!t.data.dataValue){var n=t.data.dataTransfer,i=n.getData("text/html");i?(t.data.dataValue=i,t.data.type="html"):(i=n.getData("text/plain"))&&(t.data.dataValue=e.editable().transformPlainTextToHtml(i),t.data.type="text")}}),null,null,1),e.on("paste",(function(e){var t=e.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<t.indexOf("Apple-")&&(t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=e.data.type&&(t=t.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,(function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")}))),-1<t.indexOf('<br class="Apple-interchange-newline">')&&(e.data.startsWithEOL=1,e.data.preSniffing="html",t=t.replace(/<br class="Apple-interchange-newline">/,"")),t=t.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),t.match(/^<[^<]+cke_(editable|contents)/i)){var i,r,o=new CKEDITOR.dom.element("div");for(o.setHtml(t);1==o.getChildCount()&&(i=o.getFirst())&&i.type==CKEDITOR.NODE_ELEMENT&&(i.hasClass("cke_editable")||i.hasClass("cke_contents"));)o=r=i;r&&(t=r.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?t=t.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,(function(t,i){return i.toLowerCase()in n?(e.data.preSniffing="html","<"+i):t})):CKEDITOR.env.webkit?t=t.replace(/<\/(\w+)><div><br><\/div>$/,(function(t,i){return i in n?(e.data.endsWithEOL=1,"</"+i+">"):t})):CKEDITOR.env.gecko&&(t=t.replace(/(\s)<br>$/,"$1")),e.data.dataValue=t}),null,null,3),e.on("paste",(function(t){t=t.data;var r,a=e._.nextPasteType||t.type,l=t.dataValue,u=e.config.clipboard_defaultContentType||"html",c=t.dataTransfer.getTransferType(e)==CKEDITOR.DATA_TRANSFER_EXTERNAL,d=!0===e.config.forcePasteAsPlainText;r="html"==a||"html"==t.preSniffing?"html":n(l),delete e._.nextPasteType,"htmlifiedtext"==r&&(l=i(e.config,l)),"text"==a&&"html"==r?l=o(e,l,s.get("plain-text")):(c&&e.pasteFilter&&!t.dontFilter||d)&&(l=o(e,l,e.pasteFilter)),t.startsWithEOL&&(l='<br data-cke-eol="1">'+l),t.endsWithEOL&&(l+='<br data-cke-eol="1">'),"auto"==a&&(a="html"==r||"html"==u?"html":"text"),t.type=a,t.dataValue=l,delete t.preSniffing,delete t.startsWithEOL,delete t.endsWithEOL}),null,null,6),e.on("paste",(function(t){t=t.data,t.dataValue&&(e.insertHtml(t.dataValue,t.type,t.range),setTimeout((function(){e.fire("afterPaste")}),0))}),null,null,1e3),e.on("pasteDialog",(function(t){setTimeout((function(){e.openDialog("paste",t.data)}),0)}))}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,n){e.ui.addButton&&(e.ui.addButton(t,n),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,n,i){function r(e,n,i){var r=e;if(r.type==CKEDITOR.NODE_TEXT&&(r=e.getParent()),r.equals(n)&&i!=n.getChildCount())return e=t.startContainer.getChild(t.startOffset-1),n=t.startContainer.getChild(t.startOffset),e&&e.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(i=e.getLength(),e.setText(e.getText()+n.getText()),n.remove(),t.setStart(e,i),t.collapse(!0)),!0}var o=t.startContainer;"number"==typeof i&&"number"==typeof n&&o.type==CKEDITOR.NODE_ELEMENT&&(r(e.startContainer,o,n)||r(e.endContainer,o,i))},isDropRangeAffectedByDragRange:function(e,t){var n=t.startContainer,i=t.endOffset;return!!(e.endContainer.equals(n)&&e.endOffset<=i||e.startContainer.getParent().equals(n)&&e.startContainer.getIndex()<i||e.endContainer.getParent().equals(n)&&e.endContainer.getIndex()<i)},internalDrop:function(t,n,i,r){var o,a,s=CKEDITOR.plugins.clipboard,l=r.editable();r.fire("saveSnapshot"),r.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,n,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(a=this.isDropRangeAffectedByDragRange(t,n))||(o=t.createBookmark(!1)),s=n.clone().createBookmark(!1),a&&(o=t.createBookmark(!1)),t=o.startNode,n=o.endNode,a=s.startNode,n&&t.getPosition(a)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(a)&CKEDITOR.POSITION_FOLLOWING&&a.insertBefore(t),t=r.createRange(),t.moveToBookmark(o),l.extractHtmlFromRange(t,1),n=r.createRange(),n.moveToBookmark(s),e(r,{dataTransfer:i,method:"drop",range:n},1),r.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var n=e.data.$,i=n.clientX,r=n.clientY,o=t.getSelection(!0).getRanges()[0],a=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(i,r))n=t.document.$.caretRangeFromPoint(i,r),a.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),a.collapse(!0);else if(n.rangeParent)a.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),a.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&o&&t.editable().hasFocus)return o;if(!document.body.createTextRange)return null;t.focus(),n=t.document.getBody().$.createTextRange();try{for(var s=!1,l=0;20>l&&!s;l++){if(!s)try{n.moveToPoint(i,r-l),s=!0}catch(e){}if(!s)try{n.moveToPoint(i,r+l),s=!0}catch(e){}}if(s){var u="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+u+'"></span>');var c=t.document.getById(u);a.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()}else{var d,f=t.document.$.elementFromPoint(i,r),h=new CKEDITOR.dom.element(f);if(h.equals(t.editable())||"html"==h.getName())return o&&o.startContainer&&!o.startContainer.equals(t.editable())?o:null;d=h.getClientRect(),i<d.left?a.setStartAt(h,CKEDITOR.POSITION_AFTER_START):a.setStartAt(h,CKEDITOR.POSITION_BEFORE_END),a.collapse(!0)}}catch(e){return null}}return a},initDragDataTransfer:function(e,t){var n=e.data.$?e.data.$.dataTransfer:null,i=new this.dataTransfer(n,t);"dragstart"===e.name&&i.storeId(),n?this.dragData&&i.id==this.dragData.id?i=this.dragData:this.dragData=i:this.dragData?i=this.dragData:this.dragData=i,e.data.dataTransfer=i},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var n=e.data.$.clipboardData,i=new this.dataTransfer(n,t);return"copy"!==e.name&&"cut"!==e.name||i.storeId(),this.copyCutData&&i.id==this.copyCutData.id?(i=this.copyCutData,i.$=n):this.copyCutData=i,i}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",s)}},u=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(e){return e=e.toLowerCase(),"text"==e||"text/plain"==e?"Text":"url"==e?"URL":e}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(u),this.id||(this.id="Text"==u?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==u||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){e=this._.normalizeType(e);var n="text/html"==e&&t?this._.nativeHtmlCache:this._.data[e];if(void 0===n||null===n||""===n){if(this._.fallbackDataTransfer.isRequired())n=this._.fallbackDataTransfer.getData(e,t);else try{n=this.$.getData(e)||""}catch(e){n=""}"text/html"!=e||t||(n=this._stripHtml(n))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==n.substring(0,7)&&(n=""),"string"===typeof n){var i=n.indexOf("</html>");n=-1!==i?n.substring(0,i+7):n}return n},setData:function(e,t){if(e=this._.normalizeType(e),"text/html"==e?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==u&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch(e){}},storeId:function(){"Text"!==u&&this.setData(u,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(e){e=i._.normalizeType(e);var t=i.getData(e);"text/html"==e&&(i._.nativeHtmlCache=i.getData(e,!0),t=i._stripHtml(t)),t&&(i._.data[e]=t)}if(this.$){var t,n,i=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(t=0;t<this.$.types.length;t++)e(this.$.types[t])}else e("Text"),e("URL");if(n=this._getImageFromClipboard(),this.$&&this.$.files||n){if(this._.files=[],this.$.files&&this.$.files.length)for(t=0;t<this.$.files.length;t++)this._.files.push(this.$.files[t]);0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(e){return this._.files.length?this._.files[e]:this.$&&this.$.files&&this.$.files.length?this.$.files[e]:0===e?this._getImageFromClipboard():void 0},isEmpty:function(){var e,t={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.objectKeys(this._.data),(function(e){t[e]=1})),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)t[this.$.types[n]]=1}else t.Text=1,t.URL=1;for(e in"Text"!=u&&(t[u]=0),t)if(t[e]&&""!==this.getData(e))return!1;return!0},_getImageFromClipboard:function(){var e;if(this.$&&this.$.items&&this.$.items[0])try{if((e=this.$.items[0].getAsFile())&&e.type)return e}catch(e){}},_stripHtml:function(e){if(e&&e.length){e=e.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(e);t&&t.length&&(e=t[1],e=e.replace(this._.fragmentRegExp,""))}return e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(e){}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var n=this._getData(this._customDataFallbackType,!0);if(t)return n;n=this._extractDataComment(n);var i=null;i=e===this._customDataFallbackType?n.content:n.data&&n.data[e]?n.data[e]:this._getData(e,!0);return null!==i?i:""},setData:function(e,t){var n=e===this._customDataFallbackType;n&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var i=t,r=this._dataTransfer.$;try{r.setData(e,i),n&&(this._dataTransfer._.nativeHtmlCache=i)}catch(t){if(this._isUnsupportedMimeTypeError(t)){n=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(n._customTypes,e)&&n._customTypes.push(e);n=this._getFallbackTypeContent();var o=this._getFallbackTypeData();o[e]=i;try{i=this._applyDataComment(n,o),r.setData(this._customDataFallbackType,i),this._dataTransfer._.nativeHtmlCache=i}catch(e){i=""}}}return i},_getData:function(e,t){var n=this._dataTransfer._.data;if(!t&&n[e])return n[e];try{return this._dataTransfer.$.getData(e)}catch(e){return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},n=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,(function(e){void 0!==n[e]?t[e]=n[e]:void 0!==t[e]&&(t[e]=t[e])}),this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var t,n={data:null,content:e||""};e&&16<e.length&&((t=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&t[1]&&(n.data=JSON.parse(decodeURIComponent(t[1])),n.content=e.replace(t[0],"")));return n},_applyDataComment:function(e,t){var n="";return t&&CKEDITOR.tools.objectKeys(t).length&&(n="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),n+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(e){var t=this._;t.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(e),t.on?t.panel.hide():t.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(t){var n=t.panel||{};delete t.panel,this.base(t),this.document=n.parent&&n.parent.getDocument()||CKEDITOR.document,n.block={attributes:n.attributes},n.toolbarRelated=!0,this.hasArrow="listbox",this.click=e,this._={panelDefinition:n}},statics:{handler:{create:function(e){return new CKEDITOR.ui.panelButton(e)}}},proto:{createPanel:function(e){var t=this._;if(!t.panel){var n=this._.panelDefinition,i=this._.panelDefinition.block,r=n.parent||CKEDITOR.document.getBody(),o=this._.panel=new CKEDITOR.ui.floatPanel(e,r,n),a=(n=o.addBlock(t.id,i),this);o.onShow=function(){a.className&&this.element.addClass(a.className+"_panel"),a.setState(CKEDITOR.TRISTATE_ON),t.on=1,a.editorFocus&&e.focus(),a.onOpen&&a.onOpen()},o.onHide=function(n){a.className&&this.element.getFirst().removeClass(a.className+"_panel"),a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.on=0,!n&&a.onClose&&a.onClose()},o.onEscape=function(){o.hide(1),a.document.getById(t.id).focus()},this.onBlock&&this.onBlock(o,n),n.onHide=function(){t.on=0,a.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),t=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(i,r){var o={editorId:i.id,id:this.id,langCode:i.langCode,dir:i.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":i.config.baseFloatZIndex+1};if(this.getHolderElement=function(){var e=this._.holder;if(!e){if(this.isFramed){e=this.document.getById(this.id+"_frame");var t=e.getParent();e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind((function(){this.isLoaded=!0,this.onLoad&&this.onLoad()}),this)),e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},o))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",(function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===e.data.getTarget().getName()&&32===t||e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault())}),this),e=e.getBody(),e.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e},this.isFramed){var a=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";o.frame=t.output({id:this.id+"_frame",src:a})}return a=e.output(o),r&&r.push(a),a},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this._.getItems().getItem(this._.focusIndex=e),CKEDITOR.env.webkit&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))},markFirstDisplayed:function(e){for(var t,n,i=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"none"==e.getStyle("display")},r=this._.getItems(),o=r.count()-1;0<=o;o--)if(t=r.getItem(o),t.getAscendant(i)||(n=t,this._.focusIndex=o),"true"==t.getAttribute("aria-selected")){n=t,this._.focusIndex=o;break}n&&(e&&e(),CKEDITOR.env.webkit&&n.getDocument().getWindow().focus(),n.focus(),this.onMark&&this.onMark(n))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(e,t){var n=this.keys[e];switch(n){case"next":var i,r=this._.focusIndex;for(n=this._.getItems();i=n.getItem(++r);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus(!0);break}return!i&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(r=this._.focusIndex,n=this._.getItems();0<r&&(i=n.getItem(--r));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=r,i.focus(!0);break}i=null}return!i&&!t&&(this._.focusIndex=n.count(),this.onKeyDown(e,1));case"click":case"mouseup":return r=this._.focusIndex,(i=0<=r&&this._.getItems().getItem(r))&&(i.$[n]?i.$[n]():i.$["on"+n]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(e,n,i,r,o){o=CKEDITOR.tools.genKey(n.getUniqueId(),i.getUniqueId(),e.lang.dir,e.uiColor||"",r.css||"",o||"");var a=t[o];return a||(a=t[o]=new CKEDITOR.ui.panel(n,r),a.element=i.append(CKEDITOR.dom.element.createFromHtml(a.render(e),n)),a.element.setStyles({display:"none",position:"absolute"})),a}var t={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(t,n,i,r){function o(){u.hide()}i.forceIFrame=1,i.toolbarRelated&&t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+t.name));var a=n.getDocument();r=e(t,a,n,i,r||0);var s=r.element,l=s.getFirst(),u=this;s.disableContextMenu(),this.element=s,this._={editor:t,panel:r,parentElement:n,definition:i,document:a,iframe:l,children:[],dir:t.lang.dir,showBlockParams:null,markFirst:void 0===i.markFirst||i.markFirst},t.on("mode",o),t.on("resize",o),a.getWindow().on("resize",(function(){this.reposition()}),this)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,i,r,o){var a=this._.panel,s=a.showBlock(e);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var u=this.element,c=(l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),u.getDocument()),d=this._.parentElement.getPositionedAncestor(),f=t.getDocumentPosition(c),h=(c=d?d.getDocumentPosition(c):{x:0,y:0},"rtl"==this._.dir),p=f.x+(i||0)-c.x,m=f.y+(r||0)-c.y;!h||1!=n&&4!=n?h||2!=n&&3!=n||(p+=t.$.offsetWidth-1):p+=t.$.offsetWidth,3!=n&&4!=n||(m+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),u.setStyles({top:m+"px",left:0,display:""}),u.setOpacity(0),u.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",(function(e){function t(){delete this._.returnFocus,this.hide()}this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(t,0,this)):t.call(this))}),this),l.on("focus",(function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)}),this),CKEDITOR.env.iOS&&(l.on("touchstart",(function(){clearTimeout(this._.hideTimeout)}),this),l.on("touchend",(function(){this._.hideTimeout=0,this.focus()}),this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),a.onEscape=CKEDITOR.tools.bind((function(e){if(this.onEscape&&!1===this.onEscape(e))return!1}),this),CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.tools.bind((function(){var e=u;if(e.removeStyle("width"),s.autoSize){var t=s.element.getDocument();t=(CKEDITOR.env.webkit||CKEDITOR.env.edge?s.element:t.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetWidth||0)-(e.$.clientWidth||0)+3),e.setStyle("width",t+10+"px"),t=s.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(e.$.offsetHeight||0)-(e.$.clientHeight||0)+3),e.setStyle("height",t+"px"),a._.currentBlock.element.setStyle("display","none").removeStyle("display")}else e.removeStyle("height");h&&(p-=u.$.offsetWidth),u.setStyle("left",p+"px");t=a.element.getWindow(),e=u.$.getBoundingClientRect(),t=t.getViewPaneSize();var n=e.width||e.right-e.left,i=e.height||e.bottom-e.top,r=h?e.right:t.width-e.left,l=h?t.width-e.right:e.left;h?r<n&&(p=l>n?p+n:t.width>n?p-e.left:p-e.right+t.width):r<n&&(p=l>n?p-n:t.width>n?p-e.right+t.width:p-e.left),n=e.top,t.height-e.top<i&&(m=n>i?m-i:t.height>i?m-e.bottom+t.height:m-e.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&(t=e=new CKEDITOR.dom.element(u.$.offsetParent),"html"==t.getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*u.getDocument().getDocumentElement().$.scrollLeft:p-(e.$.scrollWidth-e.$.clientWidth)));var c;e=u.getFirst();(c=e.getCustomData("activePanel"))&&c.onHide&&c.onHide.call(this,1),e.setCustomData("activePanel",this),u.setStyles({top:m+"px",left:p+"px"}),u.setOpacity(1),o&&o()}),this);a.isLoaded?e():a.onLoad=e,CKEDITOR.tools.setTimeout((function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),s.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout((function(){s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()}),0):s.markFirstDisplayed?s.markFirstDisplayed():s._.markFirstDisplayed()),this._.editor.fire("panelShow",this)}),0,this)}),CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var e=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,e))},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();e&&!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e&&e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return void 0!==e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,i,r,o){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind((function(){CKEDITOR.tools.setTimeout((function(){this._.focused||this.hide()}),0,this)}),this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,i,r,o),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout((function(){e.element.getChild(0).$.style.cssText+=""}),100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",(function(){var e,n=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in t){var i=t[e];n?i.destroy():i.element.hide()}n&&(t={})}))}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(e){function t(t,i,s,l,u){var c,d=new CKEDITOR.style(o["colorButton_"+i+"Style"]),f=CKEDITOR.tools.getNextId()+"_colorBox";u=u||{},e.ui.add(t,CKEDITOR.UI_PANELBUTTON,{label:s,title:s,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+l,allowedContent:d,requiredContent:d,contentTransformations:u.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":a.panelTitle}},onBlock:function(t,r){c=r,r.autoSize=!0,r.element.addClass("cke_colorblock"),r.element.setHtml(n(t,i,f)),r.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var o=r.keys,a="rtl"==e.lang.dir;o[a?37:39]="next",o[40]="next",o[9]="next",o[a?39:37]="prev",o[38]="prev",o[CKEDITOR.SHIFT+9]="prev",o[32]="click"},refresh:function(){e.activeFilter.check(d)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var t=e.getSelection(),n=t&&t.getStartElement(),a=e.elementPath(n);if(a){n=a.block||a.blockLimit||e.document.getBody();do{a=n&&n.getComputedStyle("back"==i?"background-color":"color")||"transparent"}while("back"==i&&"transparent"==a&&n&&(n=n.getParent()));if(a&&"transparent"!=a||(a="#ffffff"),!1!==o.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(f).setStyle("background-color",a),n=t&&t.getRanges()[0]){t=new CKEDITOR.dom.walker(n);var s=n.collapsed?n.startContainer:t.next();for(n="";s;){if(s.type!==CKEDITOR.NODE_ELEMENT&&(s=s.getParent()),s=r(s.getComputedStyle("back"==i?"background-color":"color")),n=n||s,n!==s){n="";break}s=t.next()}for(t=n,n=c._.getItems(),s=0;s<n.count();s++){var l=n.getItem(s);l.removeAttribute("aria-selected"),t&&t==r(l.getAttribute("data-value"))&&l.setAttribute("aria-selected",!0)}}return a}}})}function n(t,n,r){t=[];var s=o.colorButton_colors.split(","),l=o.colorButton_colorsPerRow||6,u=e.plugins.colordialog&&!1!==o.colorButton_enableMore,c=s.length+(u?2:1),d=CKEDITOR.tools.addFunction((function(t,n){function r(t){var r=o["colorButton_"+n+"Style"];e.removeStyle(new CKEDITOR.style(r,{color:"inherit"})),r.childRule="back"==n?function(e){return i(e)}:function(e){return!(e.is("a")||e.getElementsByTag("a").count())||i(e)},e.focus(),t&&e.applyStyle(new CKEDITOR.style(r,{color:t})),e.fire("saveSnapshot")}if(e.focus(),e.fire("saveSnapshot"),"?"!=t)return r(t);e.getColorFromDialog((function(e){if(e)return r(e)}))}));for(!1!==o.colorButton_enableAutomatic&&t.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',a.auto,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',d,",null,'",n,"');return false;\" href=\"javascript:void('",a.auto,'\')" role="option" aria-posinset="1" aria-setsize="',c,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td colspan="'+l+'" align="center"><span class="cke_colorbox" id="',r,'"></span>',a.auto,"</td></tr></table></a>"),t.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%">'),r=0;r<s.length;r++){0===r%l&&t.push("</tr><tr>");var f=s[r].split("/"),h=f[0],p=f[1]||h;f[1]?f=h:(h="#"+h.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"),f=e.lang.colorbutton.colors[p]||p),t.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',f,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',d,",'",h,"','",n,"'); return false;\" href=\"javascript:void('",f,'\')" data-value="'+p+'" role="option" aria-posinset="',r+2,'" aria-setsize="',c,'"><span class="cke_colorbox" style="background-color:#',p,'"></span></a></td>')}return u&&t.push('</tr><tr><td colspan="'+l+'" align="center"><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',a.more,'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction(',d,",'?','",n,"');return false;\" href=\"javascript:void('",a.more,"')\"",' role="option" aria-posinset="',c,'" aria-setsize="',c,'">',a.more,"</a></td>"),t.push("</tr></table>"),t.join("")}function i(e){return"false"==e.getAttribute("contentEditable")||e.getAttribute("data-nostyle")}function r(e){return CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(e||"")).replace(/#/g,"")}var o=e.config,a=e.lang.colorbutton;if(!CKEDITOR.env.hc){t("TextColor","fore",a.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(e){return!!e.attributes.color},right:function(e){e.name="span",e.attributes.color&&(e.styles.color=e.attributes.color),delete e.attributes.color}}]]});var s={},l=e.config.colorButton_normalizeBackground;(void 0===l||l)&&(s.contentTransformations=[[{element:"span",left:function(e){var t=CKEDITOR.tools;return!("span"!=e.name||!e.styles||!e.styles.background)&&(e=t.style.parse.background(e.styles.background),e.color&&1===t.objectKeys(e).length)},right:function(t){var n=new CKEDITOR.style(e.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();return t.name=n.element,t.styles=n.styles,t.attributes=n.attributes||{},t}}]]),t("BGColor","back",a.bgColorTitle,20,s)}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},function(){function e(e,t,n){if(n=e.config.forceEnterMode||n,"wysiwyg"==e.mode){t||(t=e.activeEnterMode);var i=e.elementPath();i&&!i.isContextFor("p")&&(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?r(e,t,null,n):o(e,t,null,n),e.fire("saveSnapshot")}}function t(e){e=e.getSelection().getRanges(!0);for(var t=e.length-1;0<t;t--)e[t].deleteContents();return e[0]}function n(e){var t=e.startContainer.getAscendant((function(e){return e.type==CKEDITOR.NODE_ELEMENT&&"true"==e.getAttribute("contenteditable")}),!0);return e.root.equals(t)?e:(t=new CKEDITOR.dom.range(t),t.moveToRange(e),t)}CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var i,r,o,a,s=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,i,o,u){function c(e){var t;return e!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],m.lastElement.getName())&&1===m.lastElement.getChildCount()&&(e=m.lastElement.getChild(0).clone(!0),(t=e.getBogus())&&t.remove(),!e.getText().length)}if(o=o||t(e)){o=n(o);var d,f=o.document,h=o.checkStartOfBlock(),p=o.checkEndOfBlock(),m=e.elementPath(o.startContainer),g=m.block,E=i==CKEDITOR.ENTER_DIV?"div":"p";if(g&&h&&p){if(h=g.getParent(),h.is("li")&&1<h.getChildCount())return f=new CKEDITOR.dom.element("li"),d=e.createRange(),f.insertAfter(h),g.remove(),d.setStart(f,0),void e.getSelection().selectRanges([d]);if(g.is("li")||g.getParent().is("li")){g.is("li")||(g=g.getParent(),h=g.getParent()),d=h.getParent(),o=!g.hasPrevious();var v=!g.hasNext();u=e.getSelection();E=u.createBookmarks();var y=g.getDirection(1),b=(p=g.getAttribute("class"),g.getAttribute("style")),T=d.getDirection(1)!=y;if(e=e.enterMode!=CKEDITOR.ENTER_BR||T||b||p,d.is("li"))o||v?(o&&v&&h.remove(),g[v?"insertAfter":"insertBefore"](d)):g.breakParent(d);else{if(e)m.block.is("li")?(d=f.createElement(i==CKEDITOR.ENTER_P?"p":"div"),T&&d.setAttribute("dir",y),b&&d.setAttribute("style",b),p&&d.setAttribute("class",p),g.moveChildren(d)):d=m.block,o||v?d[o?"insertBefore":"insertAfter"](h):(g.breakParent(h),d.insertAfter(h));else if(g.appendBogus(!0),o||v)for(;f=g[o?"getFirst":"getLast"]();)f[o?"insertBefore":"insertAfter"](h);else for(g.breakParent(h);f=g.getLast();)f.insertAfter(h);g.remove()}return void u.selectBookmarks(E)}if(g&&g.getParent().is("blockquote"))return g.breakParent(g.getParent()),g.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||g.getPrevious().remove(),g.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||g.getNext().remove(),o.moveToElementEditStart(g),void o.select()}else if(g&&g.is("pre")&&!p)return void r(e,i,o,u);if(b=o.splitBlock(E)){if(e=b.previousBlock,g=b.nextBlock,h=b.wasStartOfBlock,p=b.wasEndOfBlock,g?(v=g.getParent(),v.is("li")&&(g.breakParent(v),g.move(g.getNext(),1))):e&&(v=e.getParent())&&v.is("li")&&(e.breakParent(v),v=e.getNext(),o.moveToElementEditStart(v),e.move(e.getPrevious())),h||p)if(c(i))o.moveToElementEditStart(o.getTouchedStartNode());else{if(e?(e.is("li")||!a.test(e.getName())&&!e.is("pre"))&&(d=e.clone()):g&&(d=g.clone()),d?u&&!d.is("li")&&d.renameNode(E):v&&v.is("li")?d=v:(d=f.createElement(E),e&&(y=e.getDirection())&&d.setAttribute("dir",y)),f=b.elementPath)for(i=0,u=f.elements.length;i<u;i++){if(E=f.elements[i],E.equals(f.block)||E.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[E.getName()]&&(E=E.clone(),d.moveChildren(E),d.append(E))}d.appendBogus(),d.getParent()||o.insertNode(d),d.is("li")&&d.removeAttribute("value"),!CKEDITOR.env.ie||!h||p&&e.getChildCount()||(o.moveToElementEditStart(p?e:d),o.select()),o.moveToElementEditStart(h&&!p?g:d)}else g.is("li")&&(d=o.clone(),d.selectNodeContents(g),d=new CKEDITOR.dom.walker(d),d.evaluator=function(e){return!(l(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(v=d.next())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText("")).insertBefore(v)),g&&o.moveToElementEditStart(g);o.select(),o.scrollIntoView()}}},enterBr:function(e,n,i,r){if(i=i||t(e)){var s=i.document,l=i.checkEndOfBlock(),u=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement()),c=u.block,d=c&&u.block.getName();r||"li"!=d?(!r&&l&&a.test(d)?(l=c.getDirection())?(s=s.createElement("div"),s.setAttribute("dir",l),s.insertAfter(c),i.setStart(s,0)):(s.createElement("br").insertAfter(c),CKEDITOR.env.gecko&&s.createText("").insertAfter(c),i.setStartAt(c.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(e="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?s.createText("\r"):s.createElement("br"),i.deleteContents(),i.insertNode(e),CKEDITOR.env.needsBrFiller?(s.createText("\ufeff").insertAfter(e),l&&(c||u.blockLimit).appendBogus(),e.getNext().$.nodeValue="",i.setStartAt(e.getNext(),CKEDITOR.POSITION_AFTER_START)):i.setStartAt(e,CKEDITOR.POSITION_AFTER_END)),i.collapse(!0),i.select(),i.scrollIntoView()):o(e,n,i,r)}}},i=CKEDITOR.plugins.enterkey,r=i.enterBr,o=i.enterBlock,a=/^h[1-6]$/}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){t=t||{};var n=t.attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),n=this.keys,n[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var t=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(t),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction((function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)}),this)),this._.click}},proto:{add:function(e,n,r){var o,a=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[e]=a,o=CKEDITOR.tools.htmlEncodeAttr(e).replace(i,"\\'"),e={id:a,val:o,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(r||e),text:n||e},this._.pendingList.push(t.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,n=this._.groups,i=this.element.getDocument();for(e in t)i.getById(t[e]).setStyle("display","");for(var r in n)t=i.getById(n[r]),e=t.getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll(),e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},markFirstDisplayed:function(){var e=this;this._.markFirstDisplayed((function(){e.multiSelect||e.unmarkAll()}))},unmark:function(e){var t=this.element.getDocument();e=this._.items[e];var n=t.getById(e);n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e,t=this._.items,n=this.element.getDocument();for(e in t){var i=t[e];n.getById(i).removeClass("cke_selected"),n.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,n=this.element.getElementsByTag("a"),i=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=n.getItem(++i);)if(e.equals(t)){this._.focusIndex=i;break}}else this.element.focus();t&&setTimeout((function(){t.focus()}),0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var t=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{},listeners:[]}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(e,n){function i(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var t=this.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;e.readOnly&&!this.readOnly&&(t=CKEDITOR.TRISTATE_DISABLED),this.setState(t),this.setValue(""),t!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var r=CKEDITOR.env,o="cke_"+this.id,a=CKEDITOR.tools.addFunction((function(t){d&&(e.unlockSelection(1),d=0),l.execute(t)}),this),s=this,l={id:o,combo:this,focus:function(){CKEDITOR.document.getById(o).getChild(1).focus()},execute:function(t){var n=s._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(e),n.on)n.panel.hide();else{s.commit();var i=s.getValue();i?n.list.mark(i):n.list.unmarkAll(),n.panel.showBlock(s.id,new CKEDITOR.dom.element(t),4)}},clickFn:a};this._.listeners.push(e.on("activeFilterChange",i,this)),this._.listeners.push(e.on("mode",i,this)),this._.listeners.push(e.on("selectionChange",i,this)),!this.readOnly&&this._.listeners.push(e.on("readOnly",i,this));var u=CKEDITOR.tools.addFunction((function(e,t){e=new CKEDITOR.dom.event(e);var n=e.getKeystroke();switch(n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(a,t);break;default:l.onkey(l,n)}e.preventDefault()})),c=CKEDITOR.tools.addFunction((function(){l.onfocus&&l.onfocus()})),d=0;return l.keyDownFn=u,r={id:o,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:r.gecko&&!r.hc?"":(this.title||"").replace("'",""),keydownFn:u,focusFn:c,clickFn:a},t.output(r,n),this.onRender&&this.onRender(),l},createPanel:function(e){if(!this._.panel){var t=this._.panelDefinition,n=this._.panelDefinition.block,i=t.parent||CKEDITOR.document.getBody(),r="cke_combopanel__"+this.name,o=new CKEDITOR.ui.floatPanel(e,i,t),a=(t=o.addListBlock(this.id,n),this);o.onShow=function(){this.element.addClass(r),a.setState(CKEDITOR.TRISTATE_ON),a._.on=1,a.editorFocus&&!e.focusManager.hasFocus&&e.focus(),a.onOpen&&a.onOpen()},o.onHide=function(t){this.element.removeClass(r),a.setState(a.modes&&a.modes[e.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),a._.on=0,!t&&a.onClose&&a.onClose()},o.onEscape=function(){o.hide(1)},t.onClick=function(e,t){a.onClick&&a.onClick.call(a,e,t),o.hide()},this._.panel=o,this._.list=t,o.getBlock(this.id).onHide=function(){a._.on=0,a.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(e||t?n.removeClass("cke_combo_inlinelabel"):(t=this.label,n.addClass("cke_combo_inlinelabel")),n.setText("undefined"!=typeof t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,(function(e){e.removeListener()})),this._.listeners=[]}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),function(){function e(e,n,i,r,o,a,s,l){var u=e.config,c=new CKEDITOR.style(s),d=o.split(";");o=[];for(var f={},h=0;h<d.length;h++){var p=d[h];if(p){p=p.split("/");var m={},g=d[h]=p[0];m[i]=o[h]=p[1]||g,f[g]=new CKEDITOR.style(s,m),f[g]._.definition.name=g}else d.splice(h--,1)}e.ui.addRichCombo(n,{label:r.label,title:r.panelTitle,toolbar:"styles,"+l,defaultValue:"cke-default",allowedContent:c,requiredContent:c,contentTransformations:"span"===s.element?[[{element:"font",check:"span",left:function(e){return!!e.attributes.size||!!e.attributes.align||!!e.attributes.face},right:function(e){var t=" x-small small medium large x-large xx-large 48px".split(" ");e.name="span",e.attributes.size&&(e.styles["font-size"]=t[e.attributes.size],delete e.attributes.size),e.attributes.align&&(e.styles["text-align"]=e.attributes.align,delete e.attributes.align),e.attributes.face&&(e.styles["font-family"]=e.attributes.face,delete e.attributes.face)}}]]:null,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(u.contentsCss),multiSelect:!1,attributes:{"aria-label":r.panelTitle}},init:function(){var t;t="("+e.lang.common.optionDefault+")",this.startGroup(r.panelTitle),this.add(this.defaultValue,t,t);for(var n=0;n<d.length;n++)t=d[n],this.add(t,f[t].buildPreview(),t)},onClick:function(n){e.focus(),e.fire("saveSnapshot");var i,r,o,a,s,l=this.getValue(),u=f[n];if(l&&n!=l)if(i=f[l],l=e.getSelection().getRanges()[0],l.collapsed){if(r=e.elementPath(),o=r.contains((function(e){return i.checkElementRemovable(e)}))){if(a=l.checkBoundaryOfElement(o,CKEDITOR.START),s=l.checkBoundaryOfElement(o,CKEDITOR.END),a&&s){for(a=l.createBookmark();r=o.getFirst();)r.insertBefore(o);o.remove(),l.moveToBookmark(a)}else a||s?l.moveToPosition(o,a?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(l.splitElement(o),l.moveToPosition(o,CKEDITOR.POSITION_AFTER_END)),t(l,r.elements.slice(),o);e.getSelection().selectRanges([l])}}else e.removeStyle(i);n===this.defaultValue?i&&e.removeStyle(i):e.applyStyle(u),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",(function(t){var n=this.getValue();t=t.data.path.elements;for(var i,r=0;r<t.length;r++)for(var o in i=t[r],f)if(f[o].checkElementMatch(i,!0,e))return void(o!=n&&this.setValue(o));this.setValue("",a)}),this)},refresh:function(){e.activeFilter.check(c)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function t(e,n,i){var r=n.pop();if(r){if(i)return t(e,n,r.equals(i)?null:i);i=r.clone(),e.insertNode(i),e.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),t(e,n)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(t){var n=t.config;e(t,"Font","family",t.lang.font,n.font_names,n.font_defaultLabel,n.font_style,30),e(t,"FontSize","size",t.lang.font.fontSize,n.fontSize_sizes,n.fontSize_defaultLabel,n.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},function(){var e={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",e),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),function(){function e(e,i){var r,o;i.on("refresh",(function(e){var i,r=[t];for(i in e.data.states)r.push(e.data.states[i]);this.setState(CKEDITOR.tools.search(r,n)?n:t)}),i,null,100),i.on("exec",(function(t){r=e.getSelection(),o=r.createBookmarks(1),t.data||(t.data={}),t.data.done=!1}),i,null,0),i.on("exec",(function(){e.forceNextSelectionCheck(),r.selectBookmarks(o)}),i,null,100)}var t=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(t){var n=CKEDITOR.plugins.indent.genericDefinition;e(t,t.addCommand("indent",new n(!0))),e(t,t.addCommand("outdent",new n)),t.ui.addButton&&(t.ui.addButton("Indent",{label:t.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),t.ui.addButton("Outdent",{label:t.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),t.on("dirChanged",(function(e){var n=t.createRange(),i=e.data.node;n.setStartBefore(i),n.setEndAfter(i);for(var r,o=new CKEDITOR.dom.walker(n);r=o.next();)if(r.type==CKEDITOR.NODE_ELEMENT)if(!r.equals(i)&&r.getDirection())n.setStartAfter(r),o=new CKEDITOR.dom.walker(n);else{var a=t.config.indentClasses;if(a)for(var s="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],l=0;l<a.length;l++)r.hasClass(a[l]+s[0])&&(r.removeClass(a[l]+s[0]),r.addClass(a[l]+s[1]));a=r.getStyle("margin-right"),s=r.getStyle("margin-left"),a?r.setStyle("margin-left",a):r.removeStyle("margin-left"),s?r.setStyle("margin-right",s):r.removeStyle("margin-right")}}))}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",(function(){for(var e in t)(function(e,t){var n,i=e.getCommand(t.relatedGlobal);for(n in t.jobs)i.on("exec",(function(i){i.data.done||(e.fire("lockSnapshot"),t.execJob(e,n)&&(i.data.done=!0),e.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(t.database))}),this,null,n),i.on("refresh",(function(i){i.data.states||(i.data.states={}),i.data.states[t.name+"@"+n]=t.refreshJob(e,n,i.data.path)}),this,null,n);e.addFeature(t)})(this,t[e])}))}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,n){var i=this.jobs[n];if(i.state!=t)return i.exec.call(this,e)},refreshJob:function(e,n,i){return n=this.jobs[n],e.activeFilter.checkFeature(this)?n.state=n.refresh.call(this,e,i):n.state=t,n.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function e(e,n,i){if(!e.getCustomData("indent_processed")){var r=this.editor,o=this.isIndent;if(n){if(r=e.$.className.match(this.classNameRegex),i=0,r&&(r=r[1],i=CKEDITOR.tools.indexOf(n,r)+1),0>(i+=o?1:-1))return;i=Math.min(i,n.length),i=Math.max(i,0),e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.classNameRegex,"")),0<i&&e.addClass(n[i-1])}else{n=t(e,i),i=parseInt(e.getStyle(n),10);var a=r.config.indentOffset||40;if(isNaN(i)&&(i=0),i+=(o?1:-1)*a,0>i)return;i=Math.max(i,0),i=Math.ceil(i/a)*a,e.setStyle(n,i?i+(r.config.indentUnit||"px"):""),""===e.getAttribute("style")&&e.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,e,"indent_processed",1)}}function t(e,t){return"ltr"==(t||e.getComputedStyle("direction"))?"margin-left":"margin-right"}var n=CKEDITOR.dtd.$listItem,i=CKEDITOR.dtd.$list,r=CKEDITOR.TRISTATE_DISABLED,o=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(a){function s(){l.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:u?null:"margin-left,margin-right",classes:u||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(u?"("+u.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(e,i){var a=i.block||i.blockLimit;if(!a.is(n)){var s=a.getAscendant(n);a=s&&i.contains(s)||a}if(a.is(n)&&(a=a.getParent()),this.enterBr||this.getContext(i)){if(u){s=u,a=a.$.className.match(this.classNameRegex);var l=this.isIndent;s=a?!l||a[1]!=s.slice(-1):l;return s?o:r}return this.isIndent?o:a?CKEDITOR[0>=(parseInt(a.getStyle(t(a)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:r}return r},exec:function(t){var n,r=t.getSelection();r=r&&r.getRanges()[0];if(n=t.elementPath().contains(i))e.call(this,n,u);else for(r=r.createIterator(),t=t.config.enterMode,r.enforceRealBlocks=!0,r.enlargeBr=t!=CKEDITOR.ENTER_BR;n=r.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)n.isReadOnly()||e.call(this,n,u);return!0}}}}var l=CKEDITOR.plugins.indent,u=a.config.indentClasses;l.registerCommands(a,{indentblock:new s(a,"indentblock",!0),outdentblock:new s(a,"outdentblock")}),CKEDITOR.tools.extend(s.prototype,l.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:u?new RegExp("(?:^|\\s+)("+u.join("|")+")(?=$|\\s)"):null})}})}(),function(){function e(e){function i(t){for(var i=r.startContainer,l=r.endContainer;i&&!i.getParent().equals(t);)i=i.getParent();for(;l&&!l.getParent().equals(t);)l=l.getParent();if(!i||!l)return!1;for(var u=[],c=!1;!c;)i.equals(l)&&(c=!0),u.push(i),i=i.getNext();if(1>u.length)return!1;for(i=t.getParents(!0),l=0;l<i.length;l++)if(i[l].getName&&s[i[l].getName()]){t=i[l];break}i=o.isIndent?1:-1,l=u[0],u=u[u.length-1],c=CKEDITOR.plugins.list.listToArray(t,a);var d=c[u.getCustomData("listarray_index")].indent;for(l=l.getCustomData("listarray_index");l<=u.getCustomData("listarray_index");l++)if(c[l].indent+=i,0<i){for(var f=c[l].parent,h=l-1;0<=h;h--)if(c[h].indent===i){f=c[h].parent;break}c[l].parent=new CKEDITOR.dom.element(f.getName(),f.getDocument())}for(l=u.getCustomData("listarray_index")+1;l<c.length&&c[l].indent>d;l++)c[l].indent+=i;var p;if((i=CKEDITOR.plugins.list.arrayToList(c,a,null,e.config.enterMode,t.getDirection()),!o.isIndent)&&((p=t.getParent())&&p.is("li"))){u=i.listNode.getChildren();var m,g=[];for(l=u.count()-1;0<=l;l--)(m=u.getItem(l))&&m.is&&m.is("li")&&g.push(m)}if(i&&i.listNode.replace(t),g&&g.length)for(l=0;l<g.length;l++){for(m=t=g[l];(m=m.getNext())&&m.is&&m.getName()in s;)CKEDITOR.env.needsNbspFiller&&!t.getFirst(n)&&t.append(r.document.createText("")),t.append(m);t.insertAfter(p)}return i&&e.fire("contentDomInvalidated"),!0}var r,o=this,a=this.database,s=this.context,l=e.getSelection();for(l=(l&&l.getRanges()).createIterator();r=l.getNextRange();){for(var u=r.getCommonAncestor();u&&(u.type!=CKEDITOR.NODE_ELEMENT||!s[u.getName()]);){if(e.editable().equals(u)){u=!1;break}u=u.getParent()}if(u||(u=r.startPath().contains(s))&&r.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),!u){var c=r.getEnclosedNode();c&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in s&&(r.setStartAt(c,CKEDITOR.POSITION_AFTER_START),r.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),u=c)}if(u&&r.startContainer.type==CKEDITOR.NODE_ELEMENT&&r.startContainer.getName()in s&&(c=new CKEDITOR.dom.walker(r),c.evaluator=t,r.startContainer=c.next()),u&&r.endContainer.type==CKEDITOR.NODE_ELEMENT&&r.endContainer.getName()in s&&(c=new CKEDITOR.dom.walker(r),c.evaluator=t,r.endContainer=c.previous()),u)return i(u)}return 0}function t(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function n(e){return i(e)&&r(e)}var i=CKEDITOR.dom.walker.whitespaces(!0),r=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.TRISTATE_DISABLED,a=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(t){function n(t){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",(function(e){var n=t.elementPath();if("wysiwyg"==t.mode&&e.data.keyCode==this.indentKey&&n){var i=this.getContext(n);!i||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n,i)||(t.execCommand(this.relatedGlobal),e.cancel())}}),this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),i=CKEDITOR.plugins.indentList.firstItemInPath(this.context,t,n);return n&&this.isIndent&&!i?a:o}:function(e,t){return!this.getContext(t)||this.isIndent?o:a},exec:CKEDITOR.tools.bind(e,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(t,{indentlist:new n(t,"indentlist",!0),outdentlist:new n(t,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(e,n,i){var r=n.contains(t);return i||(i=n.contains(e)),i&&r&&r.equals(i.getFirst(t))}}(),function(){function e(e,t){var n;if(t=void 0===t||t,t)n=e.getComputedStyle("text-align");else{for(;!e.hasAttribute||!e.hasAttribute("align")&&!e.getStyle("text-align");){if(n=e.getParent(),!n)break;e=n}n=e.getStyle("text-align")||e.getAttribute("align")||""}return n&&(n=n.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!n&&t&&(n="rtl"==e.getComputedStyle("direction")?"right":"left"),n}function t(e,t,n){this.editor=e,this.name=t,this.value=n,this.context="p",t=e.config.justifyClasses;var i=e.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(n){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)"),this.requiredContent=i+"("+this.cssClassName+")"}else this.requiredContent=i+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},e.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function n(e){var t=e.editor,n=t.createRange();n.setStartBefore(e.data.node),n.setEndAfter(e.data.node);for(var i,r=new CKEDITOR.dom.walker(n);i=r.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(e.data.node)&&i.getDirection())n.setStartAfter(i),r=new CKEDITOR.dom.walker(n);else{var o=t.config.justifyClasses;o&&(i.hasClass(o[0])?(i.removeClass(o[0]),i.addClass(o[2])):i.hasClass(o[2])&&(i.removeClass(o[2]),i.addClass(o[0]))),o=i.getStyle("text-align"),"left"==o?i.setStyle("text-align","right"):"right"==o&&i.setStyle("text-align","left")}}t.prototype={exec:function(t){var n=t.getSelection(),i=t.config.enterMode;if(n){for(var r,o,a=n.createBookmarks(),s=n.getRanges(),l=this.cssClassName,u=t.config.useComputedState,c=(u=void 0===u||u,s.length-1);0<=c;c--)for(r=s[c].createIterator(),r.enlargeBr=i!=CKEDITOR.ENTER_BR;o=r.getNextParagraph(i==CKEDITOR.ENTER_P?"p":"div");)if(!o.isReadOnly()){var d,f=o.getName();if(d=t.activeFilter.check(f+"{text-align}"),(f=t.activeFilter.check(f+"("+l+")"))||d){o.removeAttribute("align"),o.removeStyle("text-align");var h=l&&(o.$.className=CKEDITOR.tools.ltrim(o.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!u||e(o,!0)!=this.value);l&&f?p?o.addClass(l):h||o.removeAttribute("class"):p&&d&&o.setStyle("text-align",this.value)}}t.focus(),t.forceNextSelectionCheck(),n.selectBookmarks(a)}},refresh:function(t,n){var i=n.block||n.blockLimit,r=i.getName(),o=i.equals(t.editable());r=this.cssClassName?t.activeFilter.check(r+"("+this.cssClassName+")"):t.activeFilter.check(r+"{text-align}");o&&1===n.elements.length?this.setState(CKEDITOR.TRISTATE_OFF):!o&&r?this.setState(e(i,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}},CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var i=new t(e,"justifyleft","left"),r=new t(e,"justifycenter","center"),o=new t(e,"justifyright","right"),a=new t(e,"justifyblock","justify");e.addCommand("justifyleft",i),e.addCommand("justifycenter",r),e.addCommand("justifyright",o),e.addCommand("justifyblock",a),e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.common.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.common.justify,command:"justifyblock",toolbar:"align,40"})),e.on("dirChanged",n)}}})}(),function(){function e(e,t,n,i){for(var r=CKEDITOR.plugins.list.listToArray(t.root,n),o=[],a=0;a<t.contents.length;a++){var s=t.contents[a];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(o.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}var l,u;for(s=t.root.getDocument(),a=0;a<o.length;a++){var c=o[a].getCustomData("listarray_index");l=r[c].parent,l.is(this.type)||(u=s.createElement(this.type),l.copyAttributes(u,{start:1,type:1}),u.removeStyle("list-style-type"),r[c].parent=u)}n=CKEDITOR.plugins.list.arrayToList(r,n,null,e.config.enterMode);var d;for(r=n.listNode.getChildCount(),a=0;a<r&&(d=n.listNode.getChild(a));a++)d.getName()==this.type&&i.push(d);n.listNode.replace(t.root),e.fire("contentDomInvalidated")}function t(e,t,n){var i,r,o=t.contents,a=t.root.getDocument(),s=[];if(1==o.length&&o[0].equals(t.root)){var l=a.createElement("div");o[0].moveChildren&&o[0].moveChildren(l),o[0].append(l),o[0]=l}for(t=t.contents[0].getParent(),l=0;l<o.length;l++)t=t.getCommonAncestor(o[l].getParent());for(e=e.config.useComputedState,e=void 0===e||e,l=0;l<o.length;l++)for(var u,c=o[l];u=c.getParent();){if(u.equals(t)){s.push(c),!r&&c.getDirection()&&(r=1),c=c.getDirection(e),null!==i&&(i=i&&i!=c?null:c);break}c=u}if(!(1>s.length)){for(o=s[s.length-1].getNext(),l=a.createElement(this.type),n.push(l);s.length;)n=s.shift(),e=a.createElement("li"),c=n,c.is("pre")||p.test(c.getName())||"false"==c.getAttribute("contenteditable")?n.appendTo(e):(n.copyAttributes(e),i&&n.getDirection()&&(e.removeStyle("direction"),e.removeAttribute("dir")),n.moveChildren(e),n.remove()),e.appendTo(l);i&&r&&l.setAttribute("dir",i),o?l.insertBefore(o):l.appendTo(t)}}function n(e,t,n){function i(n){!(l=c[n?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(u=t.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||u.is&&u.isBlockBoundary({br:1})||e.document.createElement("br")[n?"insertBefore":"insertAfter"](l)}for(var r=CKEDITOR.plugins.list.listToArray(t.root,n),o=[],a=0;a<t.contents.length;a++){var s=t.contents[a];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(o.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}for(s=null,a=0;a<o.length;a++)s=o[a].getCustomData("listarray_index"),r[s].indent=-1;for(a=s+1;a<r.length;a++)if(r[a].indent>r[a-1].indent+1){for(o=r[a-1].indent+1-r[a].indent,s=r[a].indent;r[a]&&r[a].indent>=s;)r[a].indent+=o,a++;a--}var l,u,c=CKEDITOR.plugins.list.arrayToList(r,n,null,e.config.enterMode,t.root.getAttribute("dir")).listNode;i(!0),i(),c.replace(t.root),e.fire("contentDomInvalidated")}function i(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function r(e,t,n,i){for(var r,o;r=e[i?"getLast":"getFirst"](m);)(o=r.getDirection(1))!==t.getDirection(1)&&r.setAttribute("dir",o),r.remove(),n?r[i?"insertBefore":"insertAfter"](n):t.append(r,i)}function o(e){function t(t){var n=e[t?"getPrevious":"getNext"](f);n&&n.type==CKEDITOR.NODE_ELEMENT&&n.is(e.getName())&&(r(e,n,null,!t),e.remove(),e=n)}t(),t(1)}function a(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function s(e,t,n){e.fire("saveSnapshot"),n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var i=n.extractContents();t.trim(!1,!0);var a=t.createBookmark(),s=new CKEDITOR.dom.elementPath(t.startContainer),u=s.block,c=(s=s.lastElement.getAscendant("li",1)||u,new CKEDITOR.dom.elementPath(n.startContainer)),d=c.contains(CKEDITOR.dtd.$listItem);c=c.contains(CKEDITOR.dtd.$list);for(u?(u=u.getBogus())&&u.remove():c&&(u=c.getPrevious(f))&&h(u)&&u.remove(),(u=i.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&u.is("br")&&u.remove(),(u=t.startContainer.getChild(t.startOffset))?i.insertBefore(u):t.startContainer.append(i),d&&(i=l(d))&&(s.contains(d)?(r(i,d.getParent(),d),i.remove()):s.append(i));n.checkStartOfBlock()&&n.checkEndOfBlock();){if(c=n.startPath(),i=c.block,!i)break;i.is("li")&&(s=i.getParent(),i.equals(s.getLast(f))&&i.equals(s.getFirst(f))&&(i=s)),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove()}n=n.clone(),i=e.editable(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=new CKEDITOR.dom.walker(n),n.evaluator=function(e){return f(e)&&!h(e)},(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&o(n),t.moveToBookmark(a),t.select(),e.fire("saveSnapshot")}function l(e){return(e=e.getLast(f))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in u?e:null}var u={ol:1,ul:1},c=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),f=function(e){return!(c(e)||d(e))},h=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,i,r){if(!u[e.getName()])return[];i||(i=0),n||(n=[]);for(var o=0,a=e.getChildCount();o<a;o++){var s=e.getChild(o);if(s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(s,t,n,i+1),"li"==s.$.nodeName.toLowerCase()){var l={parent:e,indent:i,element:s,contents:[]};r?l.grandparent=r:(l.grandparent=e.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,s,"listarray_index",n.length),n.push(l);for(var c,d=0,f=s.getChildCount();d<f;d++)c=s.getChild(d),c.type==CKEDITOR.NODE_ELEMENT&&u[c.getName()]?CKEDITOR.plugins.list.listToArray(c,t,n,i+1,l.grandparent):l.contents.push(c)}}return n},arrayToList:function(e,t,n,i,r){if(n||(n=0),!e||e.length<n+1)return null;for(var o,a,s,l=e[n].parent.getDocument(),c=new CKEDITOR.dom.documentFragment(l),h=null,p=n,m=Math.max(e[n].indent,0),g=null,E=i==CKEDITOR.ENTER_P?"p":"div";;){var v=e[p];if(o=v.grandparent,a=v.element.getDirection(1),v.indent==m){for(h&&e[p].parent.getName()==h.getName()||(h=e[p].parent.clone(!1,1),r&&h.setAttribute("dir",r),c.append(h)),g=h.append(v.element.clone(0,1)),a!=h.getDirection(1)&&g.setAttribute("dir",a),o=0;o<v.contents.length;o++)g.append(v.contents[o].clone(1,1));p++}else if(v.indent==Math.max(m,0)+1)v=e[p-1].element.getDirection(1),p=CKEDITOR.plugins.list.arrayToList(e,null,p,i,v!=a?a:null),!g.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&g.append(l.createText("")),g.append(p.listNode),p=p.nextIndex;else{if(-1!=v.indent||n||!o)return null;u[o.getName()]?(g=v.element.clone(!1,!0),a!=o.getDirection(1)&&g.setAttribute("dir",a)):g=new CKEDITOR.dom.documentFragment(l);h=o.getDirection(1)!=a;var y,b,T=v.element,C=T.getAttribute("class"),O=T.getAttribute("style"),I=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(i!=CKEDITOR.ENTER_BR||h||O||C),_=v.contents.length;for(o=0;o<_;o++)if(y=v.contents[o],d(y)&&1<_)I?b=y.clone(1,1):g.append(y.clone(1,1));else if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){h&&!y.getDirection()&&y.setAttribute("dir",a),s=y;var D=T.getAttribute("style");D&&s.setAttribute("style",D.replace(/([^;])$/,"$1;")+(s.getAttribute("style")||"")),C&&y.addClass(C),s=null,b&&(g.append(b),b=null),g.append(y.clone(1,1))}else I?(s||(s=l.createElement(E),g.append(s),h&&s.setAttribute("dir",a)),O&&s.setAttribute("style",O),C&&s.setAttribute("class",C),b&&(s.append(b),b=null),s.append(y.clone(1,1))):g.append(y.clone(1,1));b&&((s||g).append(b),b=null),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&p!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(a=g.getLast())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br")&&a.remove(),(a=g.getLast(f))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$block)||g.append(l.createElement("br"))),a=g.$.nodeName.toLowerCase(),"div"!=a&&"p"!=a||g.appendBogus(),c.append(g),h=null,p++}if(s=null,e.length<=p||Math.max(e[p].indent,0)<m)break}if(t)for(e=c.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(n=e,l=r=i=void 0,i=n.getDirection()))){for(r=n.getParent();r&&!(l=r.getDirection());)r=r.getParent();i==l&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:c,nextIndex:p}}};var p=/^h[1-6]$/,m=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);i.prototype={exec:function(i){function r(e){return u[e.root.getName()]&&!a(e.root,[CKEDITOR.NODE_COMMENT])}function a(e,t){return CKEDITOR.tools.array.filter(e.getChildren().toArray(),(function(e){return-1===CKEDITOR.tools.array.indexOf(t,e.type)})).length}function s(e){var t=!0;return 0!==e.getChildCount()&&(e.forEach((function(e){if(e.type!==CKEDITOR.NODE_COMMENT)return t=!1}),null,!0),t)}this.refresh(i,i.elementPath());var l=i.config,c=i.getSelection(),d=c&&c.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var h=i.editable();if(h.getFirst(f)){var p=1==d.length&&d[0];(l=p&&p.getEnclosedNode())&&l.is&&this.type==l.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else l.enterMode==CKEDITOR.ENTER_BR?h.appendBogus():d[0].fixBlock(1,l.enterMode==CKEDITOR.ENTER_P?"p":"div"),c.selectRanges(d)}l=c.createBookmarks(!0),h=[];for(var m={},g=(d=d.createIterator(),0);(p=d.getNextRange())&&++g;){var E=p.getBoundaryNodes(),v=E.startNode,y=E.endNode;for(v.type==CKEDITOR.NODE_ELEMENT&&"td"==v.getName()&&p.setStartAt(E.startNode,CKEDITOR.POSITION_AFTER_START),y.type==CKEDITOR.NODE_ELEMENT&&"td"==y.getName()&&p.setEndAt(E.endNode,CKEDITOR.POSITION_BEFORE_END),p=p.createIterator(),p.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;E=p.getNextParagraph();)if(!E.getCustomData("list_block")&&!s(E)){CKEDITOR.dom.element.setMarker(m,E,"list_block",1);for(var b,T=i.elementPath(E),C=(v=T.elements,y=0,T=T.blockLimit,v.length-1);0<=C&&(b=v[C]);C--)if(u[b.getName()]&&T.contains(b)){T.removeCustomData("list_group_object_"+g),(v=b.getCustomData("list_group_object"))?v.contents.push(E):(v={root:b,contents:[E]},h.push(v),CKEDITOR.dom.element.setMarker(m,b,"list_group_object",v)),y=1;break}y||(y=T,y.getCustomData("list_group_object_"+g)?y.getCustomData("list_group_object_"+g).contents.push(E):(v={root:y,contents:[E]},CKEDITOR.dom.element.setMarker(m,y,"list_group_object_"+g,v),h.push(v)))}}for(b=[];0<h.length;)v=h.shift(),this.state==CKEDITOR.TRISTATE_OFF?r(v)||(u[v.root.getName()]?e.call(this,i,v,m,b):t.call(this,i,v,b)):this.state==CKEDITOR.TRISTATE_ON&&u[v.root.getName()]&&!r(v)&&n.call(this,i,v,m);for(C=0;C<b.length;C++)o(b[C]);CKEDITOR.dom.element.clearAllMarkers(m),c.selectBookmarks(l),i.focus()},refresh:function(e,t){var n=t.contains(u,1),i=t.blockLimit||t.root;n&&i.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(e){e.blockless||(e.addCommand("numberedlist",new i("numberedlist","ol")),e.addCommand("bulletedlist",new i("bulletedlist","ul")),e.ui.addButton&&(e.ui.addButton("NumberedList",{label:e.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),e.ui.addButton("BulletedList",{label:e.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),e.on("key",(function(t){var n,i=t.data.domEvent.getKey();if("wysiwyg"==e.mode&&i in{8:1,46:1}){var r=e.getSelection().getRanges()[0],o=r&&r.startPath();if(r&&r.collapsed){var c,d=8==i,p=e.editable(),m=new CKEDITOR.dom.walker(r.clone());if(m.evaluator=function(e){return f(e)&&!h(e)},m.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},i=r.clone(),d)if((c=o.contains(u))&&r.checkBoundaryOfElement(c,CKEDITOR.START)&&(c=c.getParent())&&c.is("li")&&(c=l(c))?(n=c,c=c.getPrevious(f),i.moveToPosition(c&&h(c)?c:n,CKEDITOR.POSITION_BEFORE_START)):(m.range.setStartAt(p,CKEDITOR.POSITION_AFTER_START),m.range.setEnd(r.startContainer,r.startOffset),(c=m.previous())&&c.type==CKEDITOR.NODE_ELEMENT&&(c.getName()in u||c.is("li"))&&(c.is("li")||(m.range.selectNodeContents(c),m.reset(),m.evaluator=a,c=m.previous()),n=c,i.moveToElementEditEnd(n),i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END))),n)s(e,i,r),t.cancel();else{var g=o.contains(u);g&&r.checkBoundaryOfElement(g,CKEDITOR.START)&&(n=g.getFirst(f),r.checkBoundaryOfElement(n,CKEDITOR.START)&&(c=g.getPrevious(f),l(n)?c&&(r.moveToElementEditEnd(c),r.select()):e.execCommand("outdent"),t.cancel()))}else if(n=o.contains("li")){if(m.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),d=(p=n.getLast(f))&&a(p)?p:n,o=0,(c=m.next())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in u&&c.equals(p)?(o=1,c=m.next()):r.checkBoundaryOfElement(d,CKEDITOR.END)&&(o=2),o&&c){if(r=r.clone(),r.moveToElementEditStart(c),1==o&&(i.optimize(),!i.startContainer.equals(n))){for(n=i.startContainer;n.is(CKEDITOR.dtd.$inline);)g=n,n=n.getParent();g&&i.moveToPosition(g,CKEDITOR.POSITION_AFTER_END)}2==o&&(i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END),r.endPath().block&&r.moveToPosition(r.endPath().block,CKEDITOR.POSITION_AFTER_START)),s(e,i,r),t.cancel()}}else m.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(c=m.next())&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(u)&&(c=c.getFirst(f),o.block&&r.checkStartOfBlock()&&r.checkEndOfBlock()?(o.block.remove(),r.moveToElementEditStart(c),r.select()):l(c)?(r.moveToElementEditStart(c),r.select()):(r=r.clone(),r.moveToElementEditStart(c),s(e,i,r)),t.cancel());setTimeout((function(){e.selectionChange(1)}))}}})))}})}(),function(){function e(e,t,n){var i=CKEDITOR.cleanWord;return i?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,n,null,!0)),!i}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(t){function n(e){var t,n=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,i=[];if(n&&e.editor.filter.check("img[src]")&&(t=n.extractTagsFromHtml(e.data.dataValue),0!==t.length&&(n=n.extractFromRtf(e.data.dataTransfer["text/rtf"]),0!==n.length&&(CKEDITOR.tools.array.forEach(n,(function(e){i.push(e.type?"data:"+e.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(e.hex)):null)}),this),t.length===i.length))))for(n=0;n<t.length;n++)0===t[n].indexOf("file://")&&i[n]&&(e.data.dataValue=e.data.dataValue.replace(t[n],i[n]))}var i=0,r=this.path,o=void 0===t.config.pasteFromWord_inlineImages||t.config.pasteFromWord_inlineImages;t.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e,t){i=1,e.execCommand("paste",{type:"html",notification:!t||"undefined"===typeof t.notification||t.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(t,"PasteFromWord",{label:t.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),t.on("paste",(function(n){var o=n.data,a=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?o.dataTransfer.getData("text/html",!0):null,s=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?o.dataTransfer.getData("text/rtf"):null,l=(a=a||o.dataValue,{dataValue:a,dataTransfer:{"text/rtf":s}});s=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,s=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(a)||s.test(a);if(a&&(i||s)&&(!1!==t.fire("pasteFromWord",l)||i)){o.dontFilter=!0;var u=e(t,r,(function(){u?t.fire("paste",o):(!t.config.pasteFromWordPromptCleanup||i||confirm(t.lang.pastefromword.confirmCleanup))&&(l.dataValue=CKEDITOR.cleanWord(l.dataValue,t),t.fire("afterPasteFromWord",l),o.dataValue=l.dataValue,!0===t.config.forcePasteAsPlainText?o.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==t.config.forcePasteAsPlainText||(o.type="html")),i=0}));u&&n.cancel()}}),null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&o&&t.on("afterPasteFromWord",n)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,n=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),i=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),r=CKEDITOR.plugins.removeformat.filter,o=e.getSelection().getRanges().createIterator(),a=function(e){return e.type==CKEDITOR.NODE_ELEMENT},s=[];t=o.getNextRange();){var l=t.createBookmark();t=e.createRange(),t.setStartBefore(l.startNode),l.endNode&&t.setEndAfter(l.endNode),t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var u=t.createBookmark(),c=u.startNode,d=u.endNode,f=function(t){for(var i,o=e.elementPath(t),a=o.elements,s=1;(i=a[s])&&!i.equals(o.block)&&!i.equals(o.blockLimit);s++)n.test(i.getName())&&r(e,i)&&t.breakParent(i)};if(f(c),d)for(f(d),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(d);)if(c.isReadOnly()){if(c.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(a)}else f=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||c.hasAttribute("data-cke-bookmark")||!r(e,c)||(n.test(c.getName())?c.remove(1):(c.removeAttributes(i),e.fire("removeFormatCleanup",c))),c=f;u.startNode.remove(),u.endNode&&u.endNode.remove(),t.moveToBookmark(l),s.push(t)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(s)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],i=0;i<n.length;i++)if(!1===n[i](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){function e(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(t){if(t.editable().hasFocus){var n,i=t.getSelection();if(n=new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root).contains({td:1,th:1},1)){i=t.createRange();var r=CKEDITOR.tools.tryThese((function(){var t=n.getParent().$.cells[n.$.cellIndex+(e?-1:1)];return t.parentNode.parentNode,t}),(function(){var t=n.getParent();t=t.getAscendant("table").$.rows[t.$.rowIndex+(e?-1:1)];return t.cells[e?t.cells.length-1:0]}));if(r||e){if(!r)return!0;r=new CKEDITOR.dom.element(r),i.moveToElementEditStart(r),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(r)}else{for(var o=n.getAscendant("table").$,a=(r=n.getParent().$.cells,o=new CKEDITOR.dom.element(o.insertRow(-1),t.document),0),s=r.length;a<s;a++)o.append(new CKEDITOR.dom.element(r[a],t.document).clone(!1,!1)).appendBogus();i.moveToElementEditStart(o)}return i.select(!0),!0}}return!1}}}var t={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},i={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(r){for(var o=!1!==r.config.enableTabKeyTools,a=r.config.tabSpaces||0,s="";a--;)s+="";s&&r.on("key",(function(e){9==e.data.keyCode&&(r.insertText(s),e.cancel())})),o&&r.on("key",(function(e){(9==e.data.keyCode&&r.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&r.execCommand("selectPreviousCell"))&&e.cancel()})),r.addCommand("blur",CKEDITOR.tools.extend(n,t)),r.addCommand("blurBack",CKEDITOR.tools.extend(i,t)),r.addCommand("selectNextCell",e()),r.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n,i,r,o,a,s,l=void 0===t?this.getTabIndex():t;if(0>=l)for(a=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);a;){if(a.isVisible()&&0===a.getTabIndex()){r=a;break}a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(a=this.getDocument().getBody().getFirst();a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&a.equals(this)){if(i=!0,e){if(!(a=a.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(a)&&(n=1);if(a.isVisible()&&!(0>(s=a.getTabIndex()))){if(n&&s==l){r=a;break}s>l&&(!r||!o||s<o)?(r=a,o=s):r||0!==s||(r=a,o=s)}}r&&r.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n,i,r,o,a=void 0===t?this.getTabIndex():t,s=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&l.equals(this)){if(i=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(l)&&(n=1);if(l.isVisible()&&!(0>(o=l.getTabIndex())))if(0>=a){if(n&&0===o){r=l;break}o>s&&(r=l,s=o)}else{if(n&&o==a){r=l;break}o<a&&(!r||o>s)&&(r=l,s=o)}}r&&r.focus()},function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],t={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(t){function i(e){a.enabled&&!1!==e.data.command.canUndo&&a.save()}function r(){a.enabled=!t.readOnly&&"wysiwyg"==t.mode,a.onChange()}var a=t.undoManager=new n(t),s=a.editingHandler=new o(a),l=t.addCommand("undo",{exec:function(){a.undo()&&(t.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),u=t.addCommand("redo",{exec:function(){a.redo()&&(t.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});t.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),a.onChange=function(){l.setState(a.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),u.setState(a.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},t.on("beforeCommandExec",i),t.on("afterCommandExec",i),t.on("saveSnapshot",(function(e){a.save(e.data&&e.data.contentOnly)})),t.on("contentDom",s.attachListeners,s),t.on("instanceReady",(function(){t.fire("saveSnapshot")})),t.on("beforeModeUnload",(function(){"wysiwyg"==t.mode&&a.save(!0)})),t.on("mode",r),t.on("readOnly",r),t.ui.addButton&&(t.ui.addButton("Undo",{label:t.lang.undo.undo,command:"undo",toolbar:"undo,10"}),t.ui.addButton("Redo",{label:t.lang.undo.redo,command:"redo",toolbar:"undo,20"})),t.resetUndo=function(){a.reset(),t.fire("saveSnapshot")},t.on("updateSnapshot",(function(){a.currentImage&&a.update()})),t.on("lockSnapshot",(function(e){e=e.data,a.lock(e&&e.dontUpdate,e&&e.forceUpdate)})),t.on("unlockSnapshot",a.unlock,a)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(e){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=e.config.undoStackSize||20,this.strokesLimit=25,this.editor=e,this.reset()};n.prototype={type:function(e,t){var i=n.getKeyGroup(e),r=this.strokesRecorded[i]+1;t=t||r>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),t?(r=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[i]=r,this.previousKeyGroup=i},keyGroupChanged:function(e){return n.getKeyGroup(e)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){var r=this.editor;if(this.locked||"ready"!=r.status||"wysiwyg"!=r.mode)return!1;var o=r.editable();if(!o||"ready"!=o.status)return!1;if(o=this.snapshots,t||(t=new i(r)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else!1!==n&&r.fire("change");return o.splice(this.index+1,o.length-this.index-1),o.length==this.limit&&o.shift(),this.index=o.push(t)-1,this.currentImage=t,!1!==n&&this.refreshState(),!0},restoreImage:function(e){var t,n=this.editor;e.bookmarks&&(n.focus(),t=n.getSelection()),this.locked={level:999},this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(t=this.editor.document.getBody().$.createTextRange(),t.collapse(!0),t.select()),this.locked=null,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),n.fire("change")},getNextImage:function(e){var t,n=this.snapshots,i=this.currentImage;if(i)if(e){for(t=this.index-1;0<=t;t--)if(e=n[t],!i.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<n.length;t++)if(e=n[t],!i.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new i(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)--t;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},updateSelection:function(e){if(!this.snapshots.length)return!1;var t=this.snapshots,n=t[t.length-1];return!(!n.equalsContent(e)||n.equalsSelection(e))&&(this.currentImage=t[t.length-1]=e,!0)},lock:function(e,t){if(this.locked)this.locked.level++;else if(e)this.locked={level:1};else{var n=null;if(t)n=!0;else{var r=new i(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(r)&&(n=r)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update;if(this.locked=null,!0===e)this.update();else if(e){var t=new i(this.editor,!0);e.equalsContent(t)||this.update()}}}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(e){return!!n.navigationKeyCodes[e]},n.getKeyGroup=function(e){var i=n.keyGroups;return t[e]?i.FUNCTIONAL:i.PRINTABLE},n.getOppositeKeyGroup=function(e){var t=n.keyGroups;return e==t.FUNCTIONAL?t.PRINTABLE:t.FUNCTIONAL},n.ieFunctionalKeysBug=function(e){return CKEDITOR.env.ie&&n.getKeyGroup(e)==n.keyGroups.FUNCTIONAL};var i=CKEDITOR.plugins.undo.Image=function(e,t){this.editor=e,e.fire("beforeUndoImage");var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},r=/\b(?:href|src|name)="[^"]*?"/gi;i.prototype={equalsContent:function(e){var t=this.contents;return e=e.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(t=t.replace(r,""),e=e.replace(r,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;if(e=e.bookmarks,t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i.startOffset!=r.startOffset||i.endOffset!=r.endOffset||!CKEDITOR.tools.arrayCompare(i.start,r.start)||!CKEDITOR.tools.arrayCompare(i.end,r.end))return!1}}return!0}};var o=CKEDITOR.plugins.undo.NativeEditingHandler=function(e){this.undoManager=e,this.ignoreInputEvent=!1,this.keyEventsStack=new a,this.lastKeydownImage=null};o.prototype={onKeydown:function(t){var r=t.data.getKey();229!==r&&(-1<CKEDITOR.tools.indexOf(e,t.data.getKeystroke())?t.data.preventDefault():(this.keyEventsStack.cleanUp(t),t=this.undoManager,this.keyEventsStack.getLast(r)||this.keyEventsStack.push(r),this.lastKeydownImage=new i(t.editor),(n.isNavigationKey(r)||this.undoManager.keyGroupChanged(r))&&(t.strokesRecorded[0]||t.strokesRecorded[1])&&(t.save(!1,this.lastKeydownImage,!1),t.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var e=this.keyEventsStack.getLast();e||(e=this.keyEventsStack.push(0)),this.keyEventsStack.increment(e.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(e.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(e){var t=this.undoManager;e=e.data.getKey();var r=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(e),n.ieFunctionalKeysBug(e)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new i(t.editor,!0))||(0<r?t.type(e):n.isNavigationKey(e)&&this.onNavigationKey(!0))},onNavigationKey:function(e){var t=this.undoManager;!e&&t.save(!0,null,!1)||t.updateSelection(new i(t.editor)),t.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var e=this.undoManager.editor,t=e.editable(),i=this;t.attachListener(t,"keydown",(function(e){i.onKeydown(e),n.ieFunctionalKeysBug(e.data.getKey())&&i.onInput()}),null,null,999),t.attachListener(t,CKEDITOR.env.ie?"keypress":"input",i.onInput,i,null,999),t.attachListener(t,"keyup",i.onKeyup,i,null,999),t.attachListener(t,"paste",i.ignoreInputEventListener,i,null,999),t.attachListener(t,"drop",i.ignoreInputEventListener,i,null,999),e.on("afterPaste",i.activateInputEventListener,i,null,999),t.attachListener(t.isInline()?t:e.document.getDocumentElement(),"click",(function(){i.onNavigationKey()}),null,null,999),t.attachListener(this.undoManager.editor,"blur",(function(){i.keyEventsStack.remove(9)}),null,null,999)}};var a=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};a.prototype={push:function(e){return e=this.stack.push({keyCode:e,inputs:0}),this.stack[e-1]},getLastIndex:function(e){if("number"!=typeof e)return this.stack.length-1;for(var t=this.stack.length;t--;)if(this.stack[t].keyCode==e)return t;return-1},getLast:function(e){return e=this.getLastIndex(e),-1!=e?this.stack[e]:null},increment:function(e){this.getLast(e).inputs++},remove:function(e){e=this.getLastIndex(e),-1!=e&&this.stack.splice(e,1)},resetInputs:function(e){if("number"==typeof e)this.getLast(e).inputs=0;else for(e=this.stack.length;e--;)this.stack[e].inputs=0},getTotalInputs:function(){for(var e=this.stack.length,t=0;e--;)t+=this.stack[e].inputs;return t},cleanUp:function(e){e=e.data.$,e.ctrlKey||e.metaKey||this.remove(17),e.shiftKey||this.remove(16),e.altKey||this.remove(18)}}}(),function(){function e(e,t){CKEDITOR.tools.extend(this,{editor:e,editable:e.editable(),doc:e.document,win:e.window},t,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function t(e,t){CKEDITOR.tools.extend(this,t,{editor:e},!0)}function n(e,t){var n=e.editable();CKEDITOR.tools.extend(this,{editor:e,editable:n,inline:n.isInline(),doc:e.document,win:e.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},t,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var i=CKEDITOR.tools.bind(this.queryViewport,this),a=CKEDITOR.tools.bind(this.hideVisible,this),s=CKEDITOR.tools.bind(this.removeAll,this);n.attachListener(this.winTop,"resize",i),n.attachListener(this.winTop,"scroll",i),n.attachListener(this.winTop,"resize",a),n.attachListener(this.win,"scroll",a),n.attachListener(this.inline?n:this.frame,"mouseout",(function(e){var t=e.data.$.clientX;e=e.data.$.clientY,this.queryViewport(),(t<=this.rect.left||t>=this.rect.right||e<=this.rect.top||e>=this.rect.bottom)&&this.hideVisible(),(0>=t||t>=this.winTopPane.width||0>=e||e>=this.winTopPane.height)&&this.hideVisible()}),this),n.attachListener(e,"resize",i),n.attachListener(e,"mode",s),e.on("destroy",s),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},r,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function i(e){var t;return(t=e&&e.type==CKEDITOR.NODE_ELEMENT)&&(t=!(a[e.getComputedStyle("float")]||a[e.getAttribute("align")])),t&&!s[e.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(e){var t,n,i,r,o=this,a=this.editor,s=this.doc,l=CKEDITOR.tools.eventsBuffer(50,(function(){a.readOnly||"wysiwyg"!=a.mode||(o.relations={},(n=s.$.elementFromPoint(i,r))&&n.nodeType&&(t=new CKEDITOR.dom.element(n),o.traverseSearch(t),isNaN(i+r)||o.pixelSearch(t,i,r),e&&e(o.relations,i,r)))}));this.listener=this.editable.attachListener(this.target,"mousemove",(function(e){i=e.data.$.clientX,r=e.data.$.clientY,l.input()})),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",(function(){l.reset()}))},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var e={};return e[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,e[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,e[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(t){var n=this.editor.createRange();return n.moveToPosition(this.relations[t.uid].element,e[t.type]),n}}(),store:function(){function e(e,t,n){var i=e.getUniqueId();i in n?n[i].type|=t:n[i]={element:e,type:t}}return function(t,n){var r;n&CKEDITOR.LINEUTILS_AFTER&&i(r=t.getNext())&&r.isVisible()&&(e(r,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),n&CKEDITOR.LINEUTILS_INSIDE&&i(r=t.getFirst())&&r.isVisible()&&(e(r,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),e(t,n,this.relations)}}(),traverseSearch:function(e){var t,n,r;do{if(r=e.$["data-cke-expando"],!r||!(r in this.relations)){if(e.equals(this.editable))break;if(i(e))for(t in this.lookups)(n=this.lookups[t](e))&&this.store(e,n)}}while((!e||e.type!=CKEDITOR.NODE_ELEMENT||"true"!=e.getAttribute("contenteditable"))&&(e=e.getParent()))},pixelSearch:function(){function e(e,n,r,o,a){for(var s,l=0;a(r);){if(r+=o,25==++l)break;if(s=this.doc.$.elementFromPoint(n,r))if(s==e)l=0;else if(t(e,s)&&(l=0,i(s=new CKEDITOR.dom.element(s))))return s}}var t=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(t,n,r){var o=this.win.getViewPaneSize().height,a=e.call(this,t.$,n,r,-1,(function(e){return 0<e}));if(n=e.call(this,t.$,n,r,1,(function(e){return e<o})),a)for(this.traverseSearch(a);!a.getParent().equals(t);)a=a.getParent();if(n)for(this.traverseSearch(n);!n.getParent().equals(t);)n=n.getParent();for(;a||n;){if(a&&(a=a.getNext(i)),!a||a.equals(n))break;if(this.traverseSearch(a),n&&(n=n.getPrevious(i)),!n||n.equals(a))break;this.traverseSearch(n)}}}(),greedySearch:function(){this.relations={};for(var e,t,n,r=this.editable.getElementsByTag("*"),o=0;e=r.getItem(o++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&i(e)&&e.isVisible())for(n in this.lookups)(t=this.lookups[n](e))&&this.store(e,t);return this.relations}},t.prototype={locate:function(){function e(e,t){var n=e.element[t===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return n&&i(n)?(e.siblingRect=n.getClientRect(),t==CKEDITOR.LINEUTILS_BEFORE?(e.siblingRect.bottom+e.elementRect.top)/2:(e.elementRect.bottom+e.siblingRect.top)/2):t==CKEDITOR.LINEUTILS_BEFORE?e.elementRect.top:e.elementRect.bottom}return function(t){var n;for(var i in this.locations={},t)n=t[i],n.elementRect=n.element.getClientRect(),n.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(i,CKEDITOR.LINEUTILS_BEFORE,e(n,CKEDITOR.LINEUTILS_BEFORE)),n.type&CKEDITOR.LINEUTILS_AFTER&&this.store(i,CKEDITOR.LINEUTILS_AFTER,e(n,CKEDITOR.LINEUTILS_AFTER)),n.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(i,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){var e,t,n,i;return function(r,o){for(var a in e=this.locations,t=[],e)for(var s in e[a])if(n=Math.abs(r-e[a][s]),t.length){for(i=0;i<t.length;i++)if(n<t[i].dist){t.splice(i,0,{uid:+a,type:s,dist:n});break}i==t.length&&t.push({uid:+a,type:s,dist:n})}else t.push({uid:+a,type:s,dist:n});return"undefined"!=typeof o?t.slice(0,o):t}}(),store:function(e,t,n){this.locations[e]||(this.locations[e]={}),this.locations[e][t]=n}};var r={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},o={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};n.prototype={removeAll:function(){for(var e in this.hidden)this.hidden[e].remove(),delete this.hidden[e];for(e in this.visible)this.visible[e].remove(),delete this.visible[e]},hideLine:function(e){var t=e.getUniqueId();e.hide(),this.hidden[t]=e,delete this.visible[t]},showLine:function(e){var t=e.getUniqueId();e.show(),this.visible[t]=e,delete this.hidden[t]},hideVisible:function(){for(var e in this.visible)this.hideLine(this.visible[e])},placeLine:function(e,t){var n,i,r;if(n=this.getStyle(e.uid,e.type)){for(r in this.visible)if(this.visible[r].getCustomData("hash")!==this.hash){i=this.visible[r];break}if(!i)for(r in this.hidden)if(this.hidden[r].getCustomData("hash")!==this.hash){this.showLine(i=this.hidden[r]);break}i||this.showLine(i=this.addLine()),i.setCustomData("hash",this.hash),this.visible[i.getUniqueId()]=i,i.setStyles(n),t&&t(i)}},getStyle:function(e,t){var n=this.relations[e],i=this.locations[e][t],r={};if(r.width=n.siblingRect?Math.max(n.siblingRect.width,n.elementRect.width):n.elementRect.width,r.top=this.inline?i+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+i,r.top-this.winTopScroll.y<this.rect.top||r.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var o in this.inline?r.left=n.elementRect.left-this.rect.relativeX:(0<n.elementRect.left?r.left=this.rect.left+n.elementRect.left:(r.width+=n.elementRect.left,r.left=this.rect.left),0<(n=r.left+r.width-(this.rect.left+this.winPane.width))&&(r.width-=n)),r.left+=this.winTopScroll.x,r)r[o]=CKEDITOR.tools.cssLength(r[o]);return r},addLine:function(){var e=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return e.appendTo(this.container),e},prepare:function(e,t){this.relations=e,this.locations=t,this.hash=Math.random()},cleanup:function(){var e,t;for(t in this.visible)e=this.visible[t],e.getCustomData("hash")!==this.hash&&this.hideLine(e)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(e){e=e.getClientRect();var t=this.container.getDocumentPosition(),n=this.container.getComputedStyle("position");return e.relativeX=e.relativeY=0,"static"!=n&&(e.relativeY=t.y,e.relativeX=t.x,e.top-=e.relativeY,e.bottom-=e.relativeY,e.left-=e.relativeX,e.right-=e.relativeX),e}};var a={left:1,right:1,center:1},s={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:t,liner:n}}(),function(){function e(e){return e.getName&&!e.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(e){if(CKEDITOR.env.webkit){var t=CKEDITOR.plugins.widgetselection;e.on("contentDom",(function(e){e=e.editor;var n=e.editable();n.attachListener(n,"keydown",(function(e){e.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout((function(){t.addFillers(n)||t.removeFillers(n)}),0)}),null,null,-1),e.on("selectionCheck",(function(e){t.removeFillers(e.editor.editable())})),e.on("paste",(function(e){e.data.dataValue=t.cleanPasteData(e.data.dataValue)})),"selectall"in e.plugins&&t.addSelectAllIntegration(e)}))}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(t){var n=t.editor;if(!this.isWholeContentSelected(t)&&0<t.getChildCount()){var i=t.getFirst(e),r=t.getLast(e);if(i&&i.type==CKEDITOR.NODE_ELEMENT&&!i.isEditable()&&(this.startFiller=this.createFiller(),t.append(this.startFiller,1)),r&&r.type==CKEDITOR.NODE_ELEMENT&&!r.isEditable()&&(this.endFiller=this.createFiller(!0),t.append(this.endFiller,0)),this.hasFiller(t))return n=n.createRange(),n.selectNodeContents(t),n.select(),!0}return!1},removeFillers:function(e){if(this.hasFiller(e)&&!this.isWholeContentSelected(e)){var t=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),n=e.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&t&&this.startFiller.equals(t)?this.removeFiller(this.startFiller,e):this.startFiller=t,this.endFiller&&n&&this.endFiller.equals(n)?this.removeFiller(this.endFiller,e):this.endFiller=n}},cleanPasteData:function(e){return e&&e.length&&(e=e.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),e},isWholeContentSelected:function(e){var t=e.editor.getSelection().getRanges()[0];return!(!t||t&&t.collapsed)&&(t=t.clone(),t.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(t&&e&&t.startContainer&&t.endContainer&&0===t.startOffset&&t.endOffset===e.getChildCount()&&t.startContainer.equals(e)&&t.endContainer.equals(e)))},hasFiller:function(e){return 0<e.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(e){var t=new CKEDITOR.dom.element(this.fillerTagName);return t.setHtml(this.fillerContent),t.setAttribute(this.fillerAttribute,e?"end":"start"),t.setAttribute("data-cke-temp",1),t.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),t},removeFiller:function(e,t){if(e){var n,i,r=t.editor,o=t.editor.getSelection().getRanges()[0].startPath(),a=r.createRange();o.contains(e)&&(n=e.getHtml(),i=!0),o="start"==e.getAttribute(this.fillerAttribute),e.remove(),n&&0<n.length&&n!=this.fillerContent?(t.insertHtmlIntoRange(n,r.getSelection().getRanges()[0]),a.setStartAt(t.getChild(t.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),r.getSelection().selectRanges([a])):i&&(o?a.setStartAt(t.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):a.setEndAt(t.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),t.editor.getSelection().selectRanges([a]))}},createFillerRegex:function(e){var t=this.createFiller(e).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((e?"":"^")+t+(e?"$":""))},addSelectAllIntegration:function(e){var t=this;e.editable().attachListener(e,"beforeCommandExec",(function(n){var i=e.editable();"selectAll"==n.data.name&&i&&t.addFillers(i)}),null,null,9999)}}}(),function(){function e(e){this.editor=e,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},_(this),I(this),this.on("checkWidgets",a),this.editor.on("contentDomInvalidated",this.checkWidgets,this),O(this),b(this),T(this),y(this),C(this)}function t(e,n,i,r,o){var a=e.editor;CKEDITOR.tools.extend(this,r,{editor:a,id:n,inline:"span"==i.getParent().getName(),element:i,data:CKEDITOR.tools.extend({},"function"==typeof r.defaults?r.defaults():r.defaults),dataReady:!1,inited:!1,ready:!1,edit:t.prototype.edit,focusedEditable:null,definition:r,repository:e,draggable:!1!==r.draggable,_:{downcastFn:r.downcast&&"string"==typeof r.downcast?r.downcasts[r.downcast]:r.downcast}},!0),e.fire("instanceCreated",this),j(this,r),this.init&&this.init(),this.inited=!0,(e=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(e))),o&&this.setData(o),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,H(this),this.fire("data",this.data),this.isInited()&&a.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function n(e,t,n){CKEDITOR.dom.element.call(this,t.$),this.editor=e,this._={},t=this.filter=n.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=t?t.getAllowedEnterMode(e.enterMode):e.enterMode,this.shiftEnterMode=t?t.getAllowedEnterMode(e.shiftEnterMode,!0):e.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function i(e,t){e.addCommand(t.name,{exec:function(e,n){function i(){e.widgets.finalizeCreation(s)}var r=e.widgets.focused;if(r&&r.name==t.name)r.edit();else if(t.insert)t.insert({editor:e,commandData:n});else if(t.template){r="function"==typeof t.defaults?t.defaults():t.defaults,r=CKEDITOR.dom.element.createFromHtml(t.template.output(r));var o,a=e.widgets.wrapElement(r,t.name),s=new CKEDITOR.dom.documentFragment(a.getDocument());s.append(a),(o=e.widgets.initOn(r,t,n&&n.startupData))?(r=o.once("edit",(function(t){t.data.dialog?o.once("dialog",(function(t){var n,r;t=t.data,n=t.once("ok",i,null,null,20),r=t.once("cancel",(function(t){t.data&&!1===t.data.hide||e.widgets.destroy(o,!0)})),t.once("hide",(function(){n.removeListener(),r.removeListener()}))})):i()}),null,null,999),o.edit(),r.removeListener()):i()}},allowedContent:t.allowedContent,requiredContent:t.requiredContent,contentForms:t.contentForms,contentTransformations:t.contentTransformations})}function r(e,t){function n(e,n){var i,r,o=t.upcast.split(",");for(r=0;r<o.length;r++)if(i=o[r],i===e.name)return t.upcasts[i].call(this,e,n);return!1}function i(t,n,i){var r=CKEDITOR.tools.getIndex(e._.upcasts,(function(e){return e[2]>i}));0>r&&(r=e._.upcasts.length),e._.upcasts.splice(r,0,[CKEDITOR.tools.bind(t,n),n.name,i])}var r=t.upcast,o=t.upcastPriority||10;r&&i("string"==typeof r?n:r,t,o)}function o(e,t){if(e.focused=null,t.isInited()){var n=t.editor.checkDirty();e.fire("widgetBlurred",{widget:t}),t.setFocused(!1),!n&&t.editor.resetDirty()}}function a(e){if(e=e.data,"wysiwyg"==this.editor.mode){var n,i,r,o,a=this.editor.editable(),s=this.instances;if(a){for(n in s)s[n].isReady()&&!a.contains(s[n].wrapper)&&this.destroy(s[n],!0);if(e&&e.initOnlyNew)s=this.initOnAll();else{var l=a.find(".cke_widget_wrapper");s=[];for(n=0,i=l.count();n<i;n++){if(r=l.getItem(n),o=!this.getByElement(r,!0)){e:{o=m;for(var u=r;u=u.getParent();)if(o(u)){o=!0;break e}o=!1}o=!o}o&&a.contains(r)&&(r.addClass("cke_widget_new"),s.push(this.initOn(r.getFirst(t.isDomWidgetElement))))}}e&&e.focusInited&&1==s.length&&s[0].focus()}}}function s(e){if("undefined"!=typeof e.attributes&&e.attributes["data-widget"]){var t=l(e),n=u(e),i=!1;t&&t.value&&t.value.match(/^\s/g)&&(t.parent.attributes["data-cke-white-space-first"]=1,t.value=t.value.replace(/^\s/g,"&nbsp;"),i=!0),n&&n.value&&n.value.match(/\s$/g)&&(n.parent.attributes["data-cke-white-space-last"]=1,n.value=n.value.replace(/\s$/g,"&nbsp;"),i=!0),i&&(e.attributes["data-cke-widget-white-space"]=1)}}function l(e){return e.find((function(e){return 3===e.type}),!0).shift()}function u(e){return e.find((function(e){return 3===e.type}),!0).pop()}function c(e,t,n){if(!n.allowedContent&&!n.disallowedContent)return null;var i=this._.filters[e];return i||(this._.filters[e]=i={}),e=i[t],e||(e=n.allowedContent?new CKEDITOR.filter(n.allowedContent):this.editor.filter.clone(),i[t]=e,n.disallowedContent&&e.disallow(n.disallowedContent)),e}function d(e){var n=[],i=e._.upcasts,r=e._.upcastCallbacks;return{toBeWrapped:n,iterator:function(e){var o,a,s,l,u;if("data-cke-widget-wrapper"in e.attributes)return(e=e.getFirst(t.isParserWidgetElement))&&n.push([e]),!1;if("data-widget"in e.attributes)return n.push([e]),!1;if(u=i.length){if(e.attributes["data-cke-widget-upcasted"])return!1;for(l=0,o=r.length;l<o;++l)if(!1===r[l](e))return;for(l=0;l<u;++l)if(o=i[l],s={},a=o[0](e,s))return a instanceof CKEDITOR.htmlParser.element&&(e=a),e.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(s)),e.attributes["data-cke-widget-upcasted"]=1,n.push([e,o[1]]),!1}}}}function f(e,t){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(e?"inline":"block")+(t?" cke_widget_"+t:"")}}function h(e,t,n){if(e.type==CKEDITOR.NODE_ELEMENT){var i=CKEDITOR.dtd[e.name];if(i&&!i[n.name]){i=e.split(t);var r=e.parent;return t=i.getIndex(),e.children.length||(--t,e.remove()),i.children.length||i.remove(),h(r,t,n)}}e.add(n,t)}function p(e,t){return"boolean"==typeof e.inline?e.inline:!!CKEDITOR.dtd.$inline[t]}function m(e){return e.hasAttribute("data-cke-temp")}function g(e,t,n,i){var r=e.editor;r.fire("lockSnapshot"),n?(i=n.data("cke-widget-editable"),i=t.editables[i],e.widgetHoldingFocusedEditable=t,t.focusedEditable=i,n.addClass("cke_widget_editable_focused"),i.filter&&r.setActiveFilter(i.filter),r.setActiveEnterMode(i.enterMode,i.shiftEnterMode)):(i||t.focusedEditable.removeClass("cke_widget_editable_focused"),t.focusedEditable=null,e.widgetHoldingFocusedEditable=null,r.setActiveFilter(null),r.setActiveEnterMode(null,null)),r.fire("unlockSnapshot")}function E(e){e.contextMenu&&e.contextMenu.addListener((function(t){if(t=e.widgets.getByElement(t,!0))return t.fire("contextMenu",{})}))}function v(e,t){return CKEDITOR.tools.trim(t)}function y(e){var n=e.editor,i=CKEDITOR.plugins.lineutils;n.on("dragstart",(function(i){var r=i.data.target;t.isDomDragHandler(r)&&(r=e.getByElement(r),i.data.dataTransfer.setData("cke/widget-id",r.id),n.focus(),r.focus())})),n.on("drop",(function(t){var i=t.data.dataTransfer,r=i.getData("cke/widget-id"),o=i.getTransferType(n);i=n.createRange();""!==r&&o===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?t.cancel():""!==r&&o==CKEDITOR.DATA_TRANSFER_INTERNAL&&(r=e.instances[r])&&(i.setStartBefore(r.wrapper),i.setEndAfter(r.wrapper),t.data.dragRange=i,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,t.data.dataTransfer.setData("text/html",n.editable().getHtmlFromRange(i).getHtml()),n.widgets.destroy(r,!0))})),n.on("contentDom",(function(){var r=n.editable();CKEDITOR.tools.extend(e,{finder:new i.finder(n,{lookups:{default:function(n){if(!n.is(CKEDITOR.dtd.$listItem)&&n.is(CKEDITOR.dtd.$block)&&!t.isDomNestedEditable(n)&&!e._.draggedWidget.wrapper.contains(n)){var i=t.getNestedEditable(r,n);if(i){if(n=e._.draggedWidget,e.getByElement(i)==n)return;if(i=CKEDITOR.filter.instances[i.data("cke-filter")],n=n.requiredContent,i&&n&&!i.check(n))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new i.locator(n),liner:new i.liner(n,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)}))}function b(e){var n=e.editor;n.on("contentDom",(function(){var i,r,o=n.editable(),a=o.isInline()?o:n.document;o.attachListener(a,"mousedown",(function(o){var a=o.data.getTarget();i=a instanceof CKEDITOR.dom.element?e.getByElement(a):null,r=0,i&&(i.inline&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")?(r=1,e.focused!=i&&n.getSelection().removeAllRanges()):t.getNestedEditable(i.wrapper,a)?i=null:(o.data.preventDefault(),CKEDITOR.env.ie||i.focus()))})),o.attachListener(a,"mouseup",(function(){r&&i&&i.wrapper&&(r=0,i.focus())})),CKEDITOR.env.ie&&o.attachListener(a,"mouseup",(function(){setTimeout((function(){i&&i.wrapper&&o.contains(i.wrapper)&&(i.focus(),i=null)}))}))})),n.on("doubleclick",(function(n){var i=e.getByElement(n.data.element);if(i&&!t.getNestedEditable(i.wrapper,n.data.element))return i.fire("doubleclick",{element:n.data.element})}),null,null,1)}function T(e){e.editor.on("key",(function(t){var n,i=e.focused,r=e.widgetHoldingFocusedEditable;return i?n=i.fire("key",{keyCode:t.data.keyCode}):r&&(i=t.data.keyCode,t=r.focusedEditable,i==CKEDITOR.CTRL+65?(i=t.getBogus(),r=r.editor.createRange(),r.selectNodeContents(t),i&&r.setEndAt(i,CKEDITOR.POSITION_BEFORE_START),r.select(),n=!1):8==i||46==i?(n=r.editor.getSelection().getRanges(),r=n[0],n=!(1==n.length&&r.collapsed&&r.checkBoundaryOfElement(t,CKEDITOR[8==i?"START":"END"]))):n=void 0),n}),null,null,1)}function C(e){function t(t){e.focused&&w(e.focused,"cut"==t.name)}var n=e.editor;n.on("contentDom",(function(){var e=n.editable();e.attachListener(e,"copy",t),e.attachListener(e,"cut",t)}))}function O(e){var n=e.editor;n.on("selectionCheck",(function(){e.fire("checkSelection")})),e.on("checkSelection",e.checkSelection,e),n.on("selectionChange",(function(i){var r=(i=t.getNestedEditable(n.editable(),i.data.selection.getStartElement()))&&e.getByElement(i),o=e.widgetHoldingFocusedEditable;o?o===r&&o.focusedEditable.equals(i)||(g(e,o,null),r&&i&&g(e,r,i)):r&&i&&g(e,r,i)})),n.on("dataReady",(function(){D(e).commit()})),n.on("blur",(function(){var t;(t=e.focused)&&o(e,t),(t=e.widgetHoldingFocusedEditable)&&g(e,t,null)}))}function I(e){var n=e.editor,i={};n.on("toDataFormat",(function(n){var r=CKEDITOR.tools.getNextNumber(),o=[];n.data.downcastingSessionId=r,i[r]=o,n.data.dataValue.forEach((function(n){var i,r=n.attributes;if("data-cke-widget-white-space"in r){i=l(n);var a=u(n);i.parent.attributes["data-cke-white-space-first"]&&(i.value=i.value.replace(/^&nbsp;/g," ")),a.parent.attributes["data-cke-white-space-last"]&&(a.value=a.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in r)(r=e.instances[r["data-cke-widget-id"]])&&(i=n.getFirst(t.isParserWidgetElement),o.push({wrapper:n,element:i,widget:r,editables:{}}),"1"!=i.attributes["data-cke-widget-keep-attr"]&&delete i.attributes["data-widget"]);else if("data-cke-widget-editable"in r)return o[o.length-1].editables[r["data-cke-widget-editable"]]=n,!1}),CKEDITOR.NODE_ELEMENT,!0)}),null,null,8),n.on("toDataFormat",(function(e){if(e.data.downcastingSessionId){e=i[e.data.downcastingSessionId];for(var t,n,r,o,a,s;t=e.shift();){for(s in n=t.widget,r=t.element,o=n._.downcastFn&&n._.downcastFn.call(n,r),t.editables)a=t.editables[s],delete a.attributes.contenteditable,a.setHtml(n.editables[s].getData());o||(o=r),t.wrapper.replaceWith(o)}}}),null,null,13),n.on("contentDomUnload",(function(){e.destroyAll(!0)}))}function _(e){var n,i,r=e.editor;r.on("toHtml",(function(i){var r,o=d(e);for(i.data.dataValue.forEach(o.iterator,CKEDITOR.NODE_ELEMENT,!0);r=o.toBeWrapped.pop();){var a=r[0],s=a.parent;s.type==CKEDITOR.NODE_ELEMENT&&s.attributes["data-cke-widget-wrapper"]&&s.replaceWith(a),e.wrapElement(r[0],r[1])}n=i.data.protectedWhitespaces?3==i.data.dataValue.children.length&&t.isParserWidgetWrapper(i.data.dataValue.children[1]):1==i.data.dataValue.children.length&&t.isParserWidgetWrapper(i.data.dataValue.children[0])}),null,null,8),r.on("dataReady",(function(){if(i)for(var n,o,a=r.editable().find(".cke_widget_wrapper"),s=0,l=a.count();s<l;++s)n=a.getItem(s),o=n.getFirst(t.isDomWidgetElement),o.type==CKEDITOR.NODE_ELEMENT&&o.data("widget")?(o.replace(n),e.wrapElement(o)):n.remove();i=0,e.destroyAll(!0),e.initOnAll()})),r.on("loadSnapshot",(function(t){/data-cke-widget/.test(t.data)&&(i=1),e.destroyAll(!0)}),null,null,9),r.on("paste",(function(e){e=e.data,e.dataValue=e.dataValue.replace(q,v),e.range&&(e=t.getNestedEditable(r.editable(),e.range.startContainer))&&(e=CKEDITOR.filter.instances[e.data("cke-filter")])&&r.setActiveFilter(e)})),r.on("afterInsertHtml",(function(t){t.data.intoRange?e.checkWidgets({initOnlyNew:!0}):(r.fire("lockSnapshot"),e.checkWidgets({initOnlyNew:!0,focusInited:n}),r.fire("unlockSnapshot"))}))}function D(e){var t=e.selected,n=[],i=t.slice(0),r=null;return{select:function(e){return 0>CKEDITOR.tools.indexOf(t,e)&&n.push(e),e=CKEDITOR.tools.indexOf(i,e),0<=e&&i.splice(e,1),this},focus:function(e){return r=e,this},commit:function(){var a,s,l=e.focused!==r;for(e.editor.fire("lockSnapshot"),l&&(a=e.focused)&&o(e,a);a=i.pop();)t.splice(CKEDITOR.tools.indexOf(t,a),1),a.isInited()&&(s=a.editor.checkDirty(),a.setSelected(!1),!s&&a.editor.resetDirty());for(l&&r&&(s=e.editor.checkDirty(),e.focused=r,e.fire("widgetFocused",{widget:r}),r.setFocused(!0),!s&&e.editor.resetDirty());a=n.pop();)t.push(a),a.setSelected(!0);e.editor.fire("unlockSnapshot")}}}function R(e,t,n){var i=0;t=K(t);var r,o=e.data.classes||{};if(t){for(o=CKEDITOR.tools.clone(o);r=t.pop();)n?o[r]||(i=o[r]=1):o[r]&&(delete o[r],i=1);i&&e.setData("classes",o)}}function k(e){e.cancel()}function w(e,t){var n=e.editor,i=n.document,r=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!i.getById("cke_copybin")){var o=!n.blockless&&!CKEDITOR.env.ie||r?"div":"span",a=(r=i.createElement(o),i.createElement(o));o=CKEDITOR.env.ie&&9>CKEDITOR.env.version;a.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),r.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),r.setStyle("ltr"==n.config.contentsLangDirection?"left":"right","-5000px");var s=n.createRange();s.setStartBefore(e.wrapper),s.setEndAfter(e.wrapper),r.setHtml('<span data-cke-copybin-start="1"></span>'+n.editable().getHtmlFromRange(s).getHtml()+'<span data-cke-copybin-end="1"></span>'),n.fire("saveSnapshot"),n.fire("lockSnapshot"),a.append(r),n.editable().append(a);var l=n.on("selectionChange",k,null,null,0),u=e.repository.on("checkSelection",k,null,null,0);if(o)var c=i.getDocumentElement().$,d=c.scrollTop;s=n.createRange(),s.selectNodeContents(r),s.select(),o&&(c.scrollTop=d),setTimeout((function(){t||e.focus(),a.remove(),l.removeListener(),u.removeListener(),n.fire("unlockSnapshot"),t&&!n.readOnly&&(e.repository.del(e),n.fire("saveSnapshot"))}),100)}}function K(e){return(e=(e=e.getDefinition().attributes)&&e["class"])?e.split(/\s+/):null}function S(){var e=CKEDITOR.document.getActive(),t=this.editor,n=t.editable();(n.isInline()?n:t.document.getWindow().getFrame()).equals(e)&&t.focusManager.focus(n)}function x(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function N(e){var t=null;e.on("data",(function(){var e,n=this.data.classes;if(t!=n){for(e in t)n&&n[e]||this.removeClass(e);for(e in n)this.addClass(e);t=n}}))}function P(e){e.on("data",(function(){if(e.wrapper){var t=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());e.wrapper.setAttribute("role","region"),e.wrapper.setAttribute("aria-label",t)}}),null,null,9999)}function A(e){if(e.draggable){var n,i=e.editor,r=e.wrapper.getLast(t.isDomDragHandlerContainer);r?n=r.findOne("img"):(r=new CKEDITOR.dom.element("span",i.document),r.setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+i.plugins.widget.path+"images/handle.png)"}),n=new CKEDITOR.dom.element("img",i.document),n.setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:i.lang.widget.move,height:15,role:"presentation"}),e.inline&&n.setAttribute("draggable","true"),r.append(n),e.wrapper.append(r)),e.wrapper.on("dragover",(function(e){e.data.preventDefault()})),e.wrapper.on("mouseenter",e.updateDragHandlerPosition,e),setTimeout((function(){e.on("data",e.updateDragHandlerPosition,e)}),50),!e.inline&&(n.on("mousedown",L,e),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&n.on("dragstart",(function(e){e.data.preventDefault(!0)})),e.dragHandlerContainer=r}}function L(e){function t(){var t;for(f.reset();t=u.pop();)t.removeListener();var n=c;t=e.sender;var i=this.repository.finder,r=this.repository.liner,o=this.editor,a=this.editor.editable();CKEDITOR.tools.isEmpty(r.visible)||(n=i.getRange(n[0]),this.focus(),o.fire("drop",{dropRange:n,target:n.startContainer})),a.removeClass("cke_widget_dragging"),r.hideVisible(),o.fire("dragend",{target:t})}if(CKEDITOR.tools.getMouseButton(e)===CKEDITOR.MOUSE_BUTTON_LEFT){var n,i,r=this.repository.finder,o=this.repository.locator,a=this.repository.liner,s=this.editor,l=s.editable(),u=[],c=[];this.repository._.draggedWidget=this;var d=r.greedySearch(),f=CKEDITOR.tools.eventsBuffer(50,(function(){n=o.locate(d),c=o.sort(i,1),c.length&&(a.prepare(d,n),a.placeLine(c[0]),a.cleanup())}));l.addClass("cke_widget_dragging"),u.push(l.on("mousemove",(function(e){i=e.data.$.clientY,f.input()}))),s.fire("dragstart",{target:e.sender}),u.push(s.document.once("mouseup",t,this)),l.isInline()||u.push(CKEDITOR.document.once("mouseup",t,this))}}function F(e){var t,n,i=e.editables;if(e.editables={},e.editables)for(t in i)n=i[t],e.initEditable(t,"string"==typeof n?{selector:n}:n)}function B(e){if(e.mask){var t=e.wrapper.findOne(".cke_widget_mask");t||(t=new CKEDITOR.dom.element("img",e.editor.document),t.setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),e.wrapper.append(t)),e.mask=t}}function M(e){if(e.parts){var t,n,i={};for(n in e.parts)t=e.wrapper.findOne(e.parts[n]),i[n]=t;e.parts=i}}function j(e,n){$(e),M(e),F(e),B(e),A(e),N(e),P(e),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.wrapper.on("dragstart",(function(n){var i=n.data.getTarget();t.getNestedEditable(e,i)||e.inline&&t.isDomDragHandler(i)||n.data.preventDefault()})),e.wrapper.removeClass("cke_widget_new"),e.element.addClass("cke_widget_element"),e.on("key",(function(t){if(t=t.data.keyCode,13==t)e.edit();else{if(t==CKEDITOR.CTRL+67||t==CKEDITOR.CTRL+88)return void w(e,t==CKEDITOR.CTRL+88);if(t in U||CKEDITOR.CTRL&t||CKEDITOR.ALT&t)return}return!1}),null,null,999),e.on("doubleclick",(function(t){e.edit()&&t.cancel()})),n.data&&e.on("data",n.data),n.edit&&e.on("edit",n.edit)}function $(e){(e.wrapper=e.element.getParent()).setAttribute("data-cke-widget-id",e.id)}function H(e){e.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(e.data)))}function z(){function e(){}function n(e,t,n){return!(!n||!this.checkElement(e))&&((e=n.widgets.getByElement(e,!0))&&e.checkStyleActive(this))}var i={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(e){if(this.widget=e.widget,this.group="string"==typeof e.group?[e.group]:e.group){var t;e=this.widget,i[e]||(i[e]={});for(var n=0,r=this.group.length;n<r;n++)t=this.group[n],i[e][t]||(i[e][t]=[]),i[e][t].push(this)}},apply:function(e){var t;e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&(t=e.widgets.focused,this.group&&this.removeStylesFromSameGroup(e),t.applyStyle(this))},remove:function(e){e instanceof CKEDITOR.editor&&this.checkApplicable(e.elementPath(),e)&&e.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(e){var t,n,r=!1;if(!(e instanceof CKEDITOR.editor))return!1;if(n=e.elementPath(),this.checkApplicable(n,e))for(var o=0,a=this.group.length;o<a;o++){t=i[this.widget][this.group[o]];for(var s=0;s<t.length;s++)t[s]!==this&&t[s].checkActive(n,e)&&(e.widgets.focused.removeStyle(t[s]),r=!0)}return r},checkActive:function(e,t){return this.checkElementMatch(e.lastElement,0,t)},checkApplicable:function(e,t){return t instanceof CKEDITOR.editor&&this.checkElement(e.lastElement)},checkElementMatch:n,checkElementRemovable:n,checkElement:function(e){return!!t.isDomWidgetWrapper(e)&&((e=e.getFirst(t.isDomWidgetElement))&&e.data("widget")==this.widget)},buildPreview:function(e){return e||this._.definition.name},toAllowedContentRules:function(e){if(!e)return null;e=e.widgets.registered[this.widget];var t,n={};return e?e.styleableElements?(t=this.getClassesArray(),t?(n[e.styleableElements]={classes:t,propertiesOnly:!0},n):null):e.styleToAllowedContentRules?e.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var e=this._.definition.attributes&&this._.definition.attributes["class"];return e?CKEDITOR.tools.trim(e).split(/\s+/):null},applyToRange:e,removeFromRange:e,applyToObject:e})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),z())},beforeInit:function(t){void 0!==CKEDITOR.document.$.querySelectorAll&&(t.widgets=new e(t))},afterInit:function(e){if(void 0!==CKEDITOR.document.$.querySelectorAll){var t,n,i,r=e.widgets.registered;for(n in r)t=r[n],(i=t.button)&&e.ui.addButton&&e.ui.addButton(CKEDITOR.tools.capitalize(t.name,!0),{label:i,command:t.name,toolbar:"insert,10"});E(e)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(e,t){return t=CKEDITOR.tools.prototypedCopy(t),t.name=e,t._=t._||{},this.editor.fire("widgetDefinition",t),t.template&&(t.template=new CKEDITOR.template(t.template)),i(this.editor,t),r(this,t),this.registered[e]=t},addUpcastCallback:function(e){this._.upcastCallbacks.push(e)},checkSelection:function(){var e,n=this.editor.getSelection(),i=n.getSelectedElement(),r=D(this);if(i&&(e=this.getByElement(i,!0)))return r.focus(e).select(e).commit();if(n=n.getRanges()[0],!n||n.collapsed)return r.commit();for(n=new CKEDITOR.dom.walker(n),n.evaluator=t.isDomWidgetWrapper;i=n.next();)r.select(this.getByElement(i));r.commit()},checkWidgets:function(e){this.fire("checkWidgets",CKEDITOR.tools.copy(e||{}))},del:function(e){if(this.focused===e){var t,n=e.editor,i=n.createRange();(t=i.moveToClosestEditablePosition(e.wrapper,!0))||(t=i.moveToClosestEditablePosition(e.wrapper,!1)),t&&n.getSelection().selectRanges([i])}e.wrapper.remove(),this.destroy(e,!0)},destroy:function(e,t){this.widgetHoldingFocusedEditable===e&&g(this,e,null,t),e.destroy(t),delete this.instances[e.id],this.fire("instanceDestroyed",e)},destroyAll:function(e,t){var n,i,r=this.instances;if(t&&!e){i=t.find(".cke_widget_wrapper");r=i.count();for(var o=0;o<r;++o)(n=this.getByElement(i.getItem(o),!0))&&this.destroy(n)}else for(i in r)n=r[i],this.destroy(n,e)},finalizeCreation:function(e){(e=e.getFirst())&&t.isDomWidgetWrapper(e)&&(this.editor.insertElement(e),e=this.getByElement(e),e.ready=!0,e.fire("ready"),e.focus())},getByElement:function(){function e(e){return e.is(t)&&e.data("cke-widget-id")}var t={div:1,span:1};return function(t,n){if(!t)return null;var i=e(t);if(!n&&!i){var r=this.editor.editable();do{t=t.getParent()}while(t&&!t.equals(r)&&!(i=e(t)))}return this.instances[i]||null}}(),initOn:function(e,n,i){if(n?"string"==typeof n&&(n=this.registered[n]):n=this.registered[e.data("widget")],!n)return null;var r=this.wrapElement(e,n.name);return r?r.hasClass("cke_widget_new")?(e=new t(this,this._.nextId++,e,n,i),e.isInited()?this.instances[e.id]=e:null):this.getByElement(e):null},initOnAll:function(e){e=(e||this.editor.editable()).find(".cke_widget_new");for(var n,i=[],r=e.count();r--;)(n=this.initOn(e.getItem(r).getFirst(t.isDomWidgetElement)))&&i.push(n);return i},onWidget:function(e){var t=Array.prototype.slice.call(arguments);for(var n in t.shift(),this.instances){var i=this.instances[n];i.name==e&&i.on.apply(i,t)}this.on("instanceCreated",(function(n){n=n.data,n.name==e&&n.on.apply(n,t)}))},parseElementClasses:function(e){if(!e)return null;e=CKEDITOR.tools.trim(e).split(/\s+/);for(var t,n={},i=0;t=e.pop();)-1==t.indexOf("cke_")&&(n[t]=i=1);return i?n:null},wrapElement:function(e,t){var n,i,r=null;if(e instanceof CKEDITOR.dom.element){if(t=t||e.data("widget"),n=this.registered[t],!n)return null;if((r=e.getParent())&&r.type==CKEDITOR.NODE_ELEMENT&&r.data("cke-widget-wrapper"))return r;e.hasAttribute("data-cke-widget-keep-attr")||e.data("cke-widget-keep-attr",e.data("widget")?1:0),e.data("widget",t),(i=p(n,e.getName()))&&s(e),r=new CKEDITOR.dom.element(i?"span":"div"),r.setAttributes(f(i,t)),r.data("cke-display-name",n.pathName?n.pathName:e.getName()),e.getParent(!0)&&r.replace(e),e.appendTo(r)}else if(e instanceof CKEDITOR.htmlParser.element){if(t=t||e.attributes["data-widget"],n=this.registered[t],!n)return null;if((r=e.parent)&&r.type==CKEDITOR.NODE_ELEMENT&&r.attributes["data-cke-widget-wrapper"])return r;var o;"data-cke-widget-keep-attr"in e.attributes||(e.attributes["data-cke-widget-keep-attr"]=e.attributes["data-widget"]?1:0),t&&(e.attributes["data-widget"]=t),(i=p(n,e.name))&&s(e),r=new CKEDITOR.htmlParser.element(i?"span":"div",f(i,t)),r.attributes["data-cke-display-name"]=n.pathName?n.pathName:e.name,n=e.parent,n&&(o=e.getIndex(),e.remove()),r.add(e),n&&h(n,o,r)}return r},_tests_createEditableFilter:c},CKEDITOR.event.implementOn(e.prototype),t.prototype={addClass:function(e){this.element.addClass(e),this.wrapper.addClass(t.WRAPPER_CLASS_PREFIX+e)},applyStyle:function(e){R(this,e,1)},checkStyleActive:function(e){var t;if(e=K(e),!e)return!1;for(;t=e.pop();)if(!this.hasClass(t))return!1;return!0},destroy:function(e){if(this.fire("destroy"),this.editables)for(var t in this.editables)this.destroyEditable(t,e);e||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(e,t){var n=this.editables[e],i=!0;if(n.removeListener("focus",x),n.removeListener("blur",S),this.editor.focusManager.remove(n),n.filter){for(var r in this.repository.instances){var o=this.repository.instances[r];o.editables&&(o=o.editables[e])&&o!==n&&n.filter===o.filter&&(i=!1)}i&&(n.filter.destroy(),(i=this.repository._.filters[this.name])&&delete i[e])}t||(this.repository.destroyAll(!1,n),n.removeClass("cke_widget_editable"),n.removeClass("cke_widget_editable_focused"),n.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[e]},edit:function(){var e={dialog:this.dialog},t=this;return!(!1===this.fire("edit",e)||!e.dialog)&&(this.editor.openDialog(e.dialog,(function(e){var n,i;!1!==t.fire("dialog",e)&&(n=e.on("show",(function(){e.setupContent(t)})),i=e.on("ok",(function(){var n,i=t.on("data",(function(e){n=1,e.cancel()}),null,null,0);t.editor.fire("saveSnapshot"),e.commitContent(t),i.removeListener(),n&&(t.fire("data",t.data),t.editor.fire("saveSnapshot"))})),e.once("hide",(function(){n.removeListener(),i.removeListener()})))})),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(e){return this.element.hasClass(e)},initEditable:function(e,t){var i=this._findOneNotNested(t.selector);return!(!i||!i.is(CKEDITOR.dtd.$editable))&&(i=new n(this.editor,i,{filter:c.call(this.repository,this.name,e,t)}),this.editables[e]=i,i.setAttributes({contenteditable:"true","data-cke-widget-editable":e,"data-cke-enter-mode":i.enterMode}),i.filter&&i.data("cke-filter",i.filter.id),i.addClass("cke_widget_editable"),i.removeClass("cke_widget_editable_focused"),t.pathName&&i.data("cke-display-name",t.pathName),this.editor.focusManager.add(i),i.on("focus",x,this),CKEDITOR.env.ie&&i.on("blur",S,this),i._.initialSetData=!0,i.setData(i.getHtml()),!0)},_findOneNotNested:function(e){e=this.wrapper.find(e);for(var n,i,r=0;r<e.count();r++)if(n=e.getItem(r),i=n.getAscendant(t.isDomWidgetWrapper),this.wrapper.equals(i))return n;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var e=this.editor.getSelection();if(e){var t=this.editor.checkDirty();e.fake(this.wrapper),!t&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(e){this.element.removeClass(e),this.wrapper.removeClass(t.WRAPPER_CLASS_PREFIX+e)},removeStyle:function(e){R(this,e,0)},setData:function(e,t){var n=this.data,i=0;if("string"==typeof e)n[e]!==t&&(n[e]=t,i=1);else{var r=e;for(e in r)n[e]!==r[e]&&(i=1,n[e]=r[e])}return i&&this.dataReady&&(H(this),this.fire("data",n)),this},setFocused:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_focused"),this.fire(e?"focus":"blur"),this},setSelected:function(e){return this.wrapper[e?"addClass":"removeClass"]("cke_widget_selected"),this.fire(e?"select":"deselect"),this},updateDragHandlerPosition:function(){var e=this.editor,t=this.element.$,n=this._.dragHandlerOffset;t={x:t.offsetLeft,y:t.offsetTop-15};n&&t.x==n.x&&t.y==n.y||(n=e.checkDirty(),e.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:t.y+"px",left:t.x+"px",display:"block"}),e.fire("unlockSnapshot"),!n&&e.resetDirty(),this._.dragHandlerOffset=t)}},CKEDITOR.event.implementOn(t.prototype),t.getNestedEditable=function(e,n){return!n||n.equals(e)?null:t.isDomNestedEditable(n)?n:t.getNestedEditable(e,n.getParent())},t.isDomDragHandler=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-drag-handler")},t.isDomDragHandlerContainer=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasClass("cke_widget_drag_handler_container")},t.isDomNestedEditable=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-editable")},t.isDomWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-widget")},t.isDomWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("data-cke-widget-wrapper")},t.isDomWidget=function(e){return!!e&&(this.isDomWidgetWrapper(e)||this.isDomWidgetElement(e))},t.isParserWidgetElement=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-widget"]},t.isParserWidgetWrapper=function(e){return e.type==CKEDITOR.NODE_ELEMENT&&!!e.attributes["data-cke-widget-wrapper"]},t.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",n.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(e){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,e=this.editor.dataProcessor.toHtml(e,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(e),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var q=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,U={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=t,t.repository=e,t.nestedEditable=n}(),CKEDITOR.config.plugins="basicstyles,blockquote,dialogui,dialog,notification,button,toolbar,clipboard,panelbutton,panel,floatpanel,colorbutton,enterkey,listblock,richcombo,font,horizontalrule,indent,indentblock,indentlist,justify,list,pastefromword,removeformat,tab,undo,lineutils,widgetselection,widget",CKEDITOR.config.skin="moono",function(){var e=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var i=0;i<e.length;i++)CKEDITOR.skin.icons[e[i]]={path:n,offset:-e[++i],bgsize:e[++i]}};CKEDITOR.env.hidpi?e("bold,0,,italic,24,,strike,48,,subscript,72,,superscript,96,,underline,120,,blockquote,144,,copy-rtl,168,,copy,192,,cut-rtl,216,,cut,240,,paste-rtl,264,,paste,288,,bgcolor,312,,textcolor,336,,horizontalrule,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,justifyblock,480,,justifycenter,504,,justifyleft,528,,justifyright,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,pastefromword-rtl,672,,pastefromword,696,,removeformat,720,,redo-rtl,744,,redo,768,,undo-rtl,792,,undo,816,,simplebox,1680,auto","icons_hidpi.png"):e("bold,0,auto,italic,24,auto,strike,48,auto,subscript,72,auto,superscript,96,auto,underline,120,auto,blockquote,144,auto,copy-rtl,168,auto,copy,192,auto,cut-rtl,216,auto,cut,240,auto,paste-rtl,264,auto,paste,288,auto,bgcolor,312,auto,textcolor,336,auto,horizontalrule,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,justifyblock,480,auto,justifycenter,504,auto,justifyleft,528,auto,justifyright,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,pastefromword-rtl,672,auto,pastefromword,696,auto,removeformat,720,auto,redo-rtl,744,auto,redo,768,auto,undo-rtl,792,auto,undo,816,auto,simplebox,840,auto","icons.png")}(),CKEDITOR.lang.languages={af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1})})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return p(i).default}});var r=n(9);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return p(r).default}});var o=n(3);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return p(o).default}});var a=n(11);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return p(a).default}});var s=n(20);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return p(s).default}});var l=n(4);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return p(l).default}});var u=n(8);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return p(u).default}});var c=n(21);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return p(c).default}});var d=n(17);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return p(d).default}});var f=n(18);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return p(f).default}});var h=n(10);function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return p(h).default}})},function(e,t,n){"use strict";var i=n(24),r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function E(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function T(){}function C(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(E(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=b.prototype;var O=C.prototype=new T;O.constructor=C,i(O,b.prototype),O.isPureReactComponent=!0;var I={current:null},_=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,n){var i,r={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!D.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps,l)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:o,type:e,key:a,ref:s,props:r,_owner:I.current}}function k(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}function K(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}var S=/\/+/g,x=[];function N(e,t,n,i){if(x.length){var r=x.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>x.length&&x.push(e)}function A(e,t,n,i){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var s=!1;if(null===e)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(i,e,""===t?"."+F(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){r=e[l];var u=t+F(r,l);s+=A(r,u,n,i)}else if(null===e||"object"!==typeof e?u=null:(u=g&&e[g]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),l=0;!(r=e.next()).done;)r=r.value,u=t+F(r,l++),s+=A(r,u,n,i);else if("object"===r)throw n=""+e,Error(E(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function L(e,t,n){return null==e?0:A(e,"",t,n)}function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?K(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function M(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?j(e,i,n,(function(e){return e})):null!=e&&(w(e)&&(e=k(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(S,"$&/")+"/")+n)),i.push(e))}function j(e,t,n,i,r){var o="";null!=n&&(o=(""+n).replace(S,"$&/")+"/"),t=N(t,o,i,r),L(e,M,t),P(t)}var $={current:null};function H(){var e=$.current;if(null===e)throw Error(E(321));return e}var z={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:function(e,t,n){if(null==e)return e;var i=[];return j(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;t=N(null,null,t,n),L(e,B,t),P(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return j(e,t,null,(function(e){return e})),t},only:function(e){if(!w(e))throw Error(E(143));return e}},t.Component=b,t.Fragment=s,t.Profiler=u,t.PureComponent=C,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(E(267,e));var r=i({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!D.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:o,type:e.type,key:a,ref:s,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=R,t.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return H().useCallback(e,t)},t.useContext=function(e,t){return H().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return H().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return H().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return H().useLayoutEffect(e,t)},t.useMemo=function(e,t){return H().useMemo(e,t)},t.useReducer=function(e,t,n){return H().useReducer(e,t,n)},t.useRef=function(e){return H().useRef(e)},t.useState=function(e){return H().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var i=n(0),r=n(24),o=n(49);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));function s(e,t,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var l=!1,u=null,c=!1,d=null,f={onError:function(e){l=!0,u=e}};function h(e,t,n,i,r,o,a,c,d){l=!1,u=null,s.apply(f,arguments)}function p(e,t,n,i,r,o,s,f,p){if(h.apply(this,arguments),l){if(!l)throw Error(a(198));var m=u;l=!1,u=null,c||(c=!0,d=m)}}var m=null,g=null,E=null;function v(e,t,n){var i=e.type||"unknown-event";e.currentTarget=E(n),p(i,t,void 0,e),e.currentTarget=null}var y=null,b={};function T(){if(y)for(var e in b){var t=b[e],n=y.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!O[n]){if(!t.extractEvents)throw Error(a(97,e));for(var i in O[n]=t,n=t.eventTypes,n){var r=void 0,o=n[i],s=t,l=i;if(I.hasOwnProperty(l))throw Error(a(99,l));I[l]=o;var u=o.phasedRegistrationNames;if(u){for(r in u)u.hasOwnProperty(r)&&C(u[r],s,l);r=!0}else o.registrationName?(C(o.registrationName,s,l),r=!0):r=!1;if(!r)throw Error(a(98,i,e))}}}}function C(e,t,n){if(_[e])throw Error(a(100,e));_[e]=t,D[e]=t.eventTypes[n].dependencies}var O=[],I={},_={},D={};function R(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!b.hasOwnProperty(t)||b[t]!==i){if(b[t])throw Error(a(102,t));b[t]=i,n=!0}}n&&T()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),w=null,K=null,S=null;function x(e){if(e=g(e)){if("function"!==typeof w)throw Error(a(280));var t=e.stateNode;t&&(t=m(t),w(e.stateNode,e.type,t))}}function N(e){K?S?S.push(e):S=[e]:K=e}function P(){if(K){var e=K,t=S;if(S=K=null,x(e),t)for(e=0;e<t.length;e++)x(t[e])}}function A(e,t){return e(t)}function L(e,t,n,i,r){return e(t,n,i,r)}function F(){}var B=A,M=!1,j=!1;function $(){null===K&&null===S||(F(),P())}function H(e,t,n){if(j)return e(t,n);j=!0;try{return B(e,t,n)}finally{j=!1,$()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,U={},V={};function W(e){return!!q.call(V,e)||!q.call(U,e)&&(z.test(e)?V[e]=!0:(U[e]=!0,!1))}function G(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),"data-"!==e&&"aria-"!==e));default:return!1}}function X(e,t,n,i){if(null===t||"undefined"===typeof t||G(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Y(e,t,n,i,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Q[e]=new Y(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Q[t]=new Y(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Q[e]=new Y(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Q[e]=new Y(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Q[e]=new Y(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Q[e]=new Y(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Q[e]=new Y(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Q[e]=new Y(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Q[e]=new Y(e,5,!1,e.toLowerCase(),null,!1)}));var J=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(J,Z);Q[t]=new Y(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(J,Z);Q[t]=new Y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(J,Z);Q[t]=new Y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Q[e]=new Y(e,1,!1,e.toLowerCase(),null,!1)})),Q.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Q[e]=new Y(e,1,!1,e.toLowerCase(),null,!0)}));var ee=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function te(e,t,n,i){var r=Q.hasOwnProperty(t)?Q[t]:null,o=null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]));o||(X(t,n,r,i)&&(n=null),i||null===r?W(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(r=r.type,n=3===r||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}ee.hasOwnProperty("ReactCurrentDispatcher")||(ee.ReactCurrentDispatcher={current:null}),ee.hasOwnProperty("ReactCurrentBatchConfig")||(ee.ReactCurrentBatchConfig={suspense:null});var ne=/^(.*)[\\\/]/,ie="function"===typeof Symbol&&Symbol.for,re=ie?Symbol.for("react.element"):60103,oe=ie?Symbol.for("react.portal"):60106,ae=ie?Symbol.for("react.fragment"):60107,se=ie?Symbol.for("react.strict_mode"):60108,le=ie?Symbol.for("react.profiler"):60114,ue=ie?Symbol.for("react.provider"):60109,ce=ie?Symbol.for("react.context"):60110,de=ie?Symbol.for("react.concurrent_mode"):60111,fe=ie?Symbol.for("react.forward_ref"):60112,he=ie?Symbol.for("react.suspense"):60113,pe=ie?Symbol.for("react.suspense_list"):60120,me=ie?Symbol.for("react.memo"):60115,ge=ie?Symbol.for("react.lazy"):60116,Ee=ie?Symbol.for("react.block"):60121,ve="function"===typeof Symbol&&Symbol.iterator;function ye(e){return null===e||"object"!==typeof e?null:(e=ve&&e[ve]||e["@@iterator"],"function"===typeof e?e:null)}function be(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}function Te(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ae:return"Fragment";case oe:return"Portal";case le:return"Profiler";case se:return"StrictMode";case he:return"Suspense";case pe:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ce:return"Context.Consumer";case ue:return"Context.Provider";case fe:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case me:return Te(e.type);case Ee:return Te(e.render);case ge:if(e=1===e._status?e._result:null)return Te(e)}return null}function Ce(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,r=e._debugSource,o=Te(e.type);n=null,i&&(n=Te(i.type)),i=o,o="",r?o=" (at "+r.fileName.replace(ne,"")+":"+r.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+o}t+=n,e=e.return}while(e);return t}function Oe(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ie(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){var t=Ie(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function De(e){e._valueTracker||(e._valueTracker=_e(e))}function Re(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ie(e)?e.checked?"true":"false":e.value),e=i,e!==n&&(t.setValue(e),!0)}function ke(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function we(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Oe(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ke(e,t){t=t.checked,null!=t&&te(e,"checked",t,!1)}function Se(e,t){Ke(e,t);var n=Oe(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ne(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ne(e,t.type,Oe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function xe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ne(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pe(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}function Ae(e,t){return e=r({children:void 0},t),(t=Pe(t.children))&&(e.children=t),e}function Le(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Oe(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Fe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Be(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Oe(n)}}function Me(e,t){var n=Oe(t.value),i=Oe(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function je(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var $e={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function He(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?He(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qe,Ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n,i,r)}))}:e}((function(e,t){if(e.namespaceURI!==$e.svg||"innerHTML"in e)e.innerHTML=t;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ge={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Xe={},Ye={};function Qe(e){if(Xe[e])return Xe[e];if(!Ge[e])return e;var t,n=Ge[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ye)return Xe[e]=n[t];return e}k&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);var Je=Qe("animationend"),Ze=Qe("animationiteration"),et=Qe("animationstart"),tt=Qe("transitionend"),nt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),it=new("function"===typeof WeakMap?WeakMap:Map);function rt(e){var t=it.get(e);return void 0===t&&(t=new Map,it.set(e,t)),t}function ot(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{t=e,0!==(1026&t.effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function at(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(e=e.alternate,null!==e&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function st(e){if(ot(e)!==e)throw Error(a(188))}function lt(e){var t=e.alternate;if(!t){if(t=ot(e),null===t)throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(i=r.return,null!==i){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return st(r),e;if(o===i)return st(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function ut(e){if(e=lt(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function ct(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function dt(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ft=null;function ht(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)v(e,t[i],n[i]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function pt(e){if(null!==e&&(ft=ct(ft,e)),e=ft,ft=null,e){if(dt(e,ht),ft)throw Error(a(95));if(c)throw e=d,c=!1,d=null,e}}function mt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function gt(e){if(!k)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t}var Et=[];function vt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Et.length&&Et.push(e)}function yt(e,t,n,i){if(Et.length){var r=Et.pop();return r.topLevelType=e,r.eventSystemFlags=i,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,eventSystemFlags:i,nativeEvent:t,targetInst:n,ancestors:[]}}function bt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;t=n.tag,5!==t&&6!==t||e.ancestors.push(n),n=$n(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var r=mt(e.nativeEvent);i=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<O.length;l++){var u=O[l];u&&(u=u.extractEvents(i,t,o,r,a))&&(s=ct(s,u))}pt(s)}}function Tt(e,t,n){if(!n.has(e)){switch(e){case"scroll":rn(t,"scroll",!0);break;case"focus":case"blur":rn(t,"focus",!0),rn(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":gt(e)&&rn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===nt.indexOf(e)&&nn(e,t)}n.set(e,null)}}var Ct,Ot,It,_t=!1,Dt=[],Rt=null,kt=null,wt=null,Kt=new Map,St=new Map,xt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Pt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t){var n=rt(t);Nt.forEach((function(e){Tt(e,t,n)})),Pt.forEach((function(e){Tt(e,t,n)}))}function Lt(e,t,n,i,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r,container:i}}function Ft(e,t){switch(e){case"focus":case"blur":Rt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":Kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Bt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e=Lt(t,n,i,r,o),null!==t&&(t=Hn(t),null!==t&&Ot(t)),e):(e.eventSystemFlags|=i,e)}function Mt(e,t,n,i,r){switch(t){case"focus":return Rt=Bt(Rt,e,t,n,i,r),!0;case"dragenter":return kt=Bt(kt,e,t,n,i,r),!0;case"mouseover":return wt=Bt(wt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Kt.set(o,Bt(Kt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,St.set(o,Bt(St.get(o)||null,e,t,n,i,r)),!0}return!1}function jt(e){var t=$n(e.target);if(null!==t){var n=ot(t);if(null!==n)if(t=n.tag,13===t){if(t=at(n),null!==t)return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;var t=ln(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Hn(t);return null!==n&&Ot(n),e.blockedOn=t,!1}return!0}function Ht(e,t,n){$t(e)&&n.delete(t)}function zt(){for(_t=!1;0<Dt.length;){var e=Dt[0];if(null!==e.blockedOn){e=Hn(e.blockedOn),null!==e&&Ct(e);break}var t=ln(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:Dt.shift()}null!==Rt&&$t(Rt)&&(Rt=null),null!==kt&&$t(kt)&&(kt=null),null!==wt&&$t(wt)&&(wt=null),Kt.forEach(Ht),St.forEach(Ht)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return qt(t,e)}if(0<Dt.length){qt(Dt[0],e);for(var n=1;n<Dt.length;n++){var i=Dt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Rt&&qt(Rt,e),null!==kt&&qt(kt,e),null!==wt&&qt(wt,e),Kt.forEach(t),St.forEach(t),n=0;n<xt.length;n++)i=xt[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<xt.length&&(n=xt[0],null===n.blockedOn);)jt(n),null===n.blockedOn&&xt.shift()}var Vt={},Wt=new Map,Gt=new Map,Xt=["abort","abort",Je,"animationEnd",Ze,"animationIteration",et,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",tt,"transitionEnd","waiting","waiting"];function Yt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1],o="on"+(r[0].toUpperCase()+r.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[i],eventPriority:t},Gt.set(i,t),Wt.set(i,o),Vt[r]=o}}Yt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Yt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Yt(Xt,2);for(var Qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Jt=0;Jt<Qt.length;Jt++)Gt.set(Qt[Jt],0);var Zt=o.unstable_UserBlockingPriority,en=o.unstable_runWithPriority,tn=!0;function nn(e,t){rn(t,e,!1)}function rn(e,t,n){var i=Gt.get(t);switch(void 0===i?2:i){case 0:i=on.bind(null,t,1,e);break;case 1:i=an.bind(null,t,1,e);break;default:i=sn.bind(null,t,1,e)}n?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function on(e,t,n,i){M||F();var r=sn,o=M;M=!0;try{L(r,e,t,n,i)}finally{(M=o)||$()}}function an(e,t,n,i){en(Zt,sn.bind(null,e,t,n,i))}function sn(e,t,n,i){if(tn)if(0<Dt.length&&-1<Nt.indexOf(e))e=Lt(null,e,t,n,i),Dt.push(e);else{var r=ln(e,t,n,i);if(null===r)Ft(e,i);else if(-1<Nt.indexOf(e))e=Lt(r,e,t,n,i),Dt.push(e);else if(!Mt(r,e,t,n,i)){Ft(e,i),e=yt(e,i,null,t);try{H(bt,e)}finally{vt(e)}}}}function ln(e,t,n,i){if(n=mt(i),n=$n(n),null!==n){var r=ot(n);if(null===r)n=null;else{var o=r.tag;if(13===o){if(n=at(r),null!==n)return n;n=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}e=yt(e,i,n,t);try{H(bt,e)}finally{vt(e)}return null}var un={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cn=["Webkit","ms","Moz","O"];function dn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||un.hasOwnProperty(e)&&un[e]?(""+t).trim():t+"px"}function fn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=dn(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(un).forEach((function(e){cn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),un[t]=un[e]}))}));var hn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pn(e,t){if(t){if(hn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function mn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gn=$e.html;function En(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=rt(e);t=D[t];for(var i=0;i<t.length;i++)Tt(t[i],e,n)}function vn(){}function yn(e){if(e=e||("undefined"!==typeof document?document:void 0),"undefined"===typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}function bn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tn(e,t){var n,i=bn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=bn(i)}}function Cn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Cn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function On(){for(var e=window,t=yn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;e=t.contentWindow,t=yn(e.document)}return t}function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var _n="$",Dn="/$",Rn="$?",kn="$!",wn=null,Kn=null;function Sn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Nn="function"===typeof setTimeout?setTimeout:void 0,Pn="function"===typeof clearTimeout?clearTimeout:void 0;function An(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ln(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===_n||n===kn||n===Rn){if(0===t)return e;t--}else n===Dn&&t++}e=e.previousSibling}return null}var Fn=Math.random().toString(36).slice(2),Bn="__reactInternalInstance$"+Fn,Mn="__reactEventHandlers$"+Fn,jn="__reactContainere$"+Fn;function $n(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jn]||n[Bn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ln(e);null!==e;){if(n=e[Bn])return n;e=Ln(e)}return t}e=n,n=e.parentNode}return null}function Hn(e){return e=e[Bn]||e[jn],!e||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function zn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function qn(e){return e[Mn]||null}function Un(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Vn(e,t){var n=e.stateNode;if(!n)return null;var i=m(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}function Wn(e,t,n){(t=Vn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=ct(n._dispatchListeners,t),n._dispatchInstances=ct(n._dispatchInstances,e))}function Gn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Un(t);for(t=n.length;0<t--;)Wn(n[t],"captured",e);for(t=0;t<n.length;t++)Wn(n[t],"bubbled",e)}}function Xn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Vn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ct(n._dispatchListeners,t),n._dispatchInstances=ct(n._dispatchInstances,e))}function Yn(e){e&&e.dispatchConfig.registrationName&&Xn(e._targetInst,null,e)}function Qn(e){dt(e,Gn)}var Jn=null,Zn=null,ei=null;function ti(){if(ei)return ei;var e,t,n=Zn,i=n.length,r="value"in Jn?Jn.value:Jn.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return ei=r.slice(e,1<t?1-t:void 0)}function ni(){return!0}function ii(){return!1}function ri(e,t,n,i){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface,e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ni:ii,this.isPropagationStopped=ii,this}function oi(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function ai(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function si(e){e.eventPool=[],e.getPooled=oi,e.release=ai}r(ri.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){this.isPersistent=ni},isPersistent:ii,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ii,this._dispatchInstances=this._dispatchListeners=null}}),ri.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ri.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var o=new t;return r(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=r({},i.Interface,e),n.extend=i.extend,si(n),n},si(ri);var li=ri.extend({data:null}),ui=ri.extend({data:null}),ci=[9,13,27,32],di=k&&"CompositionEvent"in window,fi=null;k&&"documentMode"in document&&(fi=document.documentMode);var hi=k&&"TextEvent"in window&&!fi,pi=k&&(!di||fi&&8<fi&&11>=fi),mi=String.fromCharCode(32),gi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ei=!1;function vi(e,t){switch(e){case"keyup":return-1!==ci.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function yi(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}var bi=!1;function Ti(e,t){switch(e){case"compositionend":return yi(t);case"keypress":return 32!==t.which?null:(Ei=!0,mi);case"textInput":return e=t.data,e===mi&&Ei?null:e;default:return null}}function Ci(e,t){if(bi)return"compositionend"===e||!di&&vi(e,t)?(e=ti(),ei=Zn=Jn=null,bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pi&&"ko"!==t.locale?null:t.data;default:return null}}var Oi={eventTypes:gi,extractEvents:function(e,t,n,i){var r;if(di)e:{switch(e){case"compositionstart":var o=gi.compositionStart;break e;case"compositionend":o=gi.compositionEnd;break e;case"compositionupdate":o=gi.compositionUpdate;break e}o=void 0}else bi?vi(e,n)&&(o=gi.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=gi.compositionStart);return o?(pi&&"ko"!==n.locale&&(bi||o!==gi.compositionStart?o===gi.compositionEnd&&bi&&(r=ti()):(Jn=i,Zn="value"in Jn?Jn.value:Jn.textContent,bi=!0)),o=li.getPooled(o,t,n,i),r?o.data=r:(r=yi(n),null!==r&&(o.data=r)),Qn(o),r=o):r=null,(e=hi?Ti(e,n):Ci(e,n))?(t=ui.getPooled(gi.beforeInput,t,n,i),t.data=e,Qn(t)):t=null,null===r?t:null===t?r:[r,t]}},Ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ii[e.type]:"textarea"===t}var Di={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ri(e,t,n){return e=ri.getPooled(Di.change,e,t,n),e.type="change",N(n),Qn(e),e}var ki=null,wi=null;function Ki(e){pt(e)}function Si(e){var t=zn(e);if(Re(t))return e}function xi(e,t){if("change"===e)return t}var Ni=!1;function Pi(){ki&&(ki.detachEvent("onpropertychange",Ai),wi=ki=null)}function Ai(e){if("value"===e.propertyName&&Si(wi))if(e=Ri(wi,e,mt(e)),M)pt(e);else{M=!0;try{A(Ki,e)}finally{M=!1,$()}}}function Li(e,t,n){"focus"===e?(Pi(),ki=t,wi=n,ki.attachEvent("onpropertychange",Ai)):"blur"===e&&Pi()}function Fi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Si(wi)}function Bi(e,t){if("click"===e)return Si(t)}function Mi(e,t){if("input"===e||"change"===e)return Si(t)}k&&(Ni=gt("input")&&(!document.documentMode||9<document.documentMode));var ji={eventTypes:Di,_isInputEventSupported:Ni,extractEvents:function(e,t,n,i){var r=t?zn(t):window,o=r.nodeName&&r.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===r.type)var a=xi;else if(_i(r))if(Ni)a=Mi;else{a=Fi;var s=Li}else(o=r.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(a=Bi);if(a&&(a=a(e,t)))return Ri(a,n,i);s&&s(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Ne(r,"number",r.value)}},$i=ri.extend({view:null,detail:null}),Hi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Hi[e])&&!!t[e]}function qi(){return zi}var Ui=0,Vi=0,Wi=!1,Gi=!1,Xi=$i.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qi,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ui;return Ui=e.screenX,Wi?"mousemove"===e.type?e.screenX-t:0:(Wi=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Vi;return Vi=e.screenY,Gi?"mousemove"===e.type?e.screenY-t:0:(Gi=!0,0)}}),Yi=Xi.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ji={eventTypes:Qi,extractEvents:function(e,t,n,i,r){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&r)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,a){if(a=t,t=(t=n.relatedTarget||n.toElement)?$n(t):null,null!==t){var s=ot(t);(t!==s||5!==t.tag&&6!==t.tag)&&(t=null)}}else a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var l=Xi,u=Qi.mouseLeave,c=Qi.mouseEnter,d="mouse";else"pointerout"!==e&&"pointerover"!==e||(l=Yi,u=Qi.pointerLeave,c=Qi.pointerEnter,d="pointer");if(e=null==a?o:zn(a),o=null==t?o:zn(t),u=l.getPooled(u,a,n,i),u.type=d+"leave",u.target=e,u.relatedTarget=o,n=l.getPooled(c,t,n,i),n.type=d+"enter",n.target=o,n.relatedTarget=e,i=a,d=t,i&&d)e:{for(l=i,c=d,a=0,e=l;e;e=Un(e))a++;for(e=0,t=c;t;t=Un(t))e++;for(;0<a-e;)l=Un(l),a--;for(;0<e-a;)c=Un(c),e--;for(;a--;){if(l===c||l===c.alternate)break e;l=Un(l),c=Un(c)}l=null}else l=null;for(c=l,l=[];i&&i!==c;){if(a=i.alternate,null!==a&&a===c)break;l.push(i),i=Un(i)}for(i=[];d&&d!==c;){if(a=d.alternate,null!==a&&a===c)break;i.push(d),d=Un(d)}for(d=0;d<l.length;d++)Xn(l[d],"bubbled",u);for(d=i.length;0<d--;)Xn(i[d],"captured",n);return 0===(64&r)?[u]:[u,n]}};function Zi(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var er="function"===typeof Object.is?Object.is:Zi,tr=Object.prototype.hasOwnProperty;function nr(e,t){if(er(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!tr.call(t,n[i])||!er(e[n[i]],t[n[i]]))return!1;return!0}var ir=k&&"documentMode"in document&&11>=document.documentMode,rr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},or=null,ar=null,sr=null,lr=!1;function ur(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return lr||null==or||or!==yn(n)?null:(n=or,"selectionStart"in n&&In(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sr&&nr(sr,n)?null:(sr=n,e=ri.getPooled(rr.select,ar,e,t),e.type="select",e.target=or,Qn(e),e))}var cr={eventTypes:rr,extractEvents:function(e,t,n,i,r,o){if(r=o||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument),!(o=!r)){e:{r=rt(r),o=D.onSelect;for(var a=0;a<o.length;a++)if(!r.has(o[a])){r=!1;break e}r=!0}o=!r}if(o)return null;switch(r=t?zn(t):window,e){case"focus":(_i(r)||"true"===r.contentEditable)&&(or=r,ar=t,sr=null);break;case"blur":sr=ar=or=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":return lr=!1,ur(n,i);case"selectionchange":if(ir)break;case"keydown":case"keyup":return ur(n,i)}return null}},dr=ri.extend({animationName:null,elapsedTime:null,pseudoElement:null}),fr=ri.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hr=$i.extend({relatedTarget:null});function pr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,0===e&&13===t&&(e=13)):e=t,10===e&&(e=13),32<=e||13===e?e:0}var mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er=$i.extend({key:function(e){if(e.key){var t=mr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=pr(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?gr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qi,charCode:function(e){return"keypress"===e.type?pr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?pr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),vr=Xi.extend({dataTransfer:null}),yr=$i.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qi}),br=ri.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Tr=Xi.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Cr={eventTypes:Vt,extractEvents:function(e,t,n,i){var r=Wt.get(e);if(!r)return null;switch(e){case"keypress":if(0===pr(n))return null;case"keydown":case"keyup":e=Er;break;case"blur":case"focus":e=hr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=yr;break;case Je:case Ze:case et:e=dr;break;case tt:e=br;break;case"scroll":e=$i;break;case"wheel":e=Tr;break;case"copy":case"cut":case"paste":e=fr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Yi;break;default:e=ri}return t=e.getPooled(r,t,n,i),Qn(t),t}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T();var Or=Hn;m=qn,g=Or,E=zn,R({SimpleEventPlugin:Cr,EnterLeaveEventPlugin:Ji,ChangeEventPlugin:ji,SelectEventPlugin:cr,BeforeInputEventPlugin:Oi});var Ir=[],_r=-1;function Dr(e){0>_r||(e.current=Ir[_r],Ir[_r]=null,_r--)}function Rr(e,t){_r++,Ir[_r]=e.current,e.current=t}var kr={},wr={current:kr},Kr={current:!1},Sr=kr;function xr(e,t){var n=e.type.contextTypes;if(!n)return kr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Nr(e){return e=e.childContextTypes,null!==e&&void 0!==e}function Pr(){Dr(Kr),Dr(wr)}function Ar(e,t,n){if(wr.current!==kr)throw Error(a(168));Rr(wr,t),Rr(Kr,n)}function Lr(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext(),i)if(!(o in e))throw Error(a(108,Te(t)||"Unknown",o));return r({},n,{},i)}function Fr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,Sr=wr.current,Rr(wr,e),Rr(Kr,Kr.current),!0}function Br(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Lr(e,t,Sr),i.__reactInternalMemoizedMergedChildContext=e,Dr(Kr),Dr(wr),Rr(wr,e)):Dr(Kr),Rr(Kr,n)}var Mr=o.unstable_runWithPriority,jr=o.unstable_scheduleCallback,$r=o.unstable_cancelCallback,Hr=o.unstable_requestPaint,zr=o.unstable_now,qr=o.unstable_getCurrentPriorityLevel,Ur=o.unstable_ImmediatePriority,Vr=o.unstable_UserBlockingPriority,Wr=o.unstable_NormalPriority,Gr=o.unstable_LowPriority,Xr=o.unstable_IdlePriority,Yr={},Qr=o.unstable_shouldYield,Jr=void 0!==Hr?Hr:function(){},Zr=null,eo=null,to=!1,no=zr(),io=1e4>no?zr:function(){return zr()-no};function ro(){switch(qr()){case Ur:return 99;case Vr:return 98;case Wr:return 97;case Gr:return 96;case Xr:return 95;default:throw Error(a(332))}}function oo(e){switch(e){case 99:return Ur;case 98:return Vr;case 97:return Wr;case 96:return Gr;case 95:return Xr;default:throw Error(a(332))}}function ao(e,t){return e=oo(e),Mr(e,t)}function so(e,t,n){return e=oo(e),jr(e,t,n)}function lo(e){return null===Zr?(Zr=[e],eo=jr(Ur,co)):Zr.push(e),Yr}function uo(){if(null!==eo){var e=eo;eo=null,$r(e)}co()}function co(){if(!to&&null!==Zr){to=!0;var e=0;try{var t=Zr;ao(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Zr=null}catch(t){throw null!==Zr&&(Zr=Zr.slice(e+1)),jr(Ur,uo),t}finally{to=!1}}}function fo(e,t,n){return n/=10,1073741821-(1+((1073741821-e+t/10)/n|0))*n}function ho(e,t){if(e&&e.defaultProps)for(var n in t=r({},t),e=e.defaultProps,e)void 0===t[n]&&(t[n]=e[n]);return t}var po={current:null},mo=null,go=null,Eo=null;function vo(){Eo=go=mo=null}function yo(e){var t=po.current;Dr(po),e.type._context._currentValue=t}function bo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function To(e,t){mo=e,Eo=go=null,e=e.dependencies,null!==e&&null!==e.firstContext&&(e.expirationTime>=t&&(Ga=!0),e.firstContext=null)}function Co(e,t){if(Eo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===go){if(null===mo)throw Error(a(308));go=t,mo.dependencies={expirationTime:0,firstContext:t,responders:null}}else go=go.next=t;return e._currentValue}var Oo=!1;function Io(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function _o(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Do(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Ro(e,t){if(e=e.updateQueue,null!==e){e=e.shared;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ko(e,t){var n=e.alternate;null!==n&&_o(n,e),e=e.updateQueue,n=e.baseQueue,null===n?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function wo(e,t,n,i){var o=e.updateQueue;Oo=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,l=e.alternate,null!==l&&(l=l.updateQueue,null!==l&&(l.baseQueue=s))}if(null!==a){l=a.next;var u=o.baseState,c=0,d=null,f=null,h=null;if(null!==l){var p=l;do{if(s=p.expirationTime,s<i){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===h?(f=h=m,d=u):h=h.next=m,s>c&&(c=s)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),Ll(s,p.suspenseConfig);e:{var g=e,E=p;switch(s=t,m=n,E.tag){case 1:if(g=E.payload,"function"===typeof g){u=g.call(m,u,s);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(g=E.payload,s="function"===typeof g?g.call(m,u,s):g,null===s||void 0===s)break e;u=r({},u,s);break e;case 2:Oo=!0}}null!==p.callback&&(e.effectTag|=32,s=o.effects,null===s?o.effects=[p]:s.push(p))}if(p=p.next,null===p||p===l){if(s=o.shared.pending,null===s)break;p=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}while(1)}null===h?d=u:h.next=f,o.baseState=d,o.baseQueue=h,Fl(c),e.expirationTime=c,e.memoizedState=u}}function Ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=r,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var So=ee.ReactCurrentBatchConfig,xo=(new i.Component).refs;function No(e,t,n,i){t=e.memoizedState,n=n(i,t),n=null===n||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var Po={isMounted:function(e){return!!(e=e._reactInternalFiber)&&ot(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=Cl(),r=So.suspense;i=Ol(i,e,r),r=Do(i,r),r.payload=t,void 0!==n&&null!==n&&(r.callback=n),Ro(e,r),Il(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=Cl(),r=So.suspense;i=Ol(i,e,r),r=Do(i,r),r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),Ro(e,r),Il(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Cl(),i=So.suspense;n=Ol(n,e,i),i=Do(n,i),i.tag=2,void 0!==t&&null!==t&&(i.callback=t),Ro(e,i),Il(e,n)}};function Ao(e,t,n,i,r,o,a){return e=e.stateNode,"function"===typeof e.shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!nr(n,i)||!nr(r,o))}function Lo(e,t,n){var i=!1,r=kr,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(r=Nr(t)?Sr:wr.current,i=t.contextTypes,o=(i=null!==i&&void 0!==i)?xr(e,r):kr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Po,e.stateNode=t,t._reactInternalFiber=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function Fo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function Bo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=xo,Io(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Co(o):(o=Nr(t)?Sr:wr.current,r.context=xr(e,o)),wo(e,n,r,i),r.state=e.memoizedState,o=t.getDerivedStateFromProps,"function"===typeof o&&(No(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Po.enqueueReplaceState(r,r.state,null),wo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.effectTag|=4)}var Mo=Array.isArray;function jo(e,t,n){if(e=n.ref,null!==e&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner,n){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=i.refs;t===xo&&(t=i.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function $o(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ho(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return e=ou(e,t),e.index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?(i=t.alternate,null!==i?(i=i.index,i<n?(t.effectTag=2,n):i):(t.effectTag=2,n)):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,i){return null===t||6!==t.tag?(t=lu(n,e.mode,i),t.return=e,t):(t=r(t,n),t.return=e,t)}function u(e,t,n,i){return null!==t&&t.elementType===n.type?(i=r(t,n.props),i.ref=jo(e,t,n),i.return=e,i):(i=au(n.type,n.key,n.props,null,e.mode,i),i.ref=jo(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=uu(n,e.mode,i),t.return=e,t):(t=r(t,n.children||[]),t.return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?(t=su(n,e.mode,i,o),t.return=e,t):(t=r(t,n),t.return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return t=lu(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case re:return n=au(t.type,t.key,t.props,null,e.mode,n),n.ref=jo(e,null,t),n.return=e,n;case oe:return t=uu(t,e.mode,n),t.return=e,t}if(Mo(t)||ye(t))return t=su(t,e.mode,n,null),t.return=e,t;$o(e,t)}return null}function h(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case re:return n.key===r?n.type===ae?d(e,t,n.props.children,i,r):u(e,t,n,i):null;case oe:return n.key===r?c(e,t,n,i):null}if(Mo(n)||ye(n))return null!==r?null:d(e,t,n,i,null);$o(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return e=e.get(n)||null,l(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case re:return e=e.get(null===i.key?n:i.key)||null,i.type===ae?d(t,e,i.props.children,r,i.key):u(t,e,i,r);case oe:return e=e.get(null===i.key?n:i.key)||null,c(t,e,i,r)}if(Mo(i)||ye(i))return e=e.get(n)||null,d(t,e,i,r,null);$o(t,i)}return null}function m(r,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var E=h(r,d,s[m],l);if(null===E){null===d&&(d=g);break}e&&d&&null===E.alternate&&t(r,d),a=o(E,a,m),null===c?u=E:c.sibling=E,c=E,d=g}if(m===s.length)return n(r,d),u;if(null===d){for(;m<s.length;m++)d=f(r,s[m],l),null!==d&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=i(r,d);m<s.length;m++)g=p(d,r,m,s[m],l),null!==g&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(r,e)})),u}function g(r,s,l,u){var c=ye(l);if("function"!==typeof c)throw Error(a(150));if(l=c.call(l),null==l)throw Error(a(151));for(var d=c=null,m=s,g=s=0,E=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(E=m,m=null):E=m.sibling;var y=h(r,m,v.value,u);if(null===y){null===m&&(m=E);break}e&&m&&null===y.alternate&&t(r,m),s=o(y,s,g),null===d?c=y:d.sibling=y,d=y,m=E}if(v.done)return n(r,m),c;if(null===m){for(;!v.done;g++,v=l.next())v=f(r,v.value,u),null!==v&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return c}for(m=i(r,m);!v.done;g++,v=l.next())v=p(m,r,g,v.value,u),null!==v&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(r,e)})),c}return function(e,i,o,l){var u="object"===typeof o&&null!==o&&o.type===ae&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case re:e:{for(c=o.key,u=i;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===ae){n(e,u.sibling),i=r(u,o.props.children),i.return=e,e=i;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),i=r(u,o.props),i.ref=jo(e,u,o),i.return=e,e=i;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===ae?(i=su(o.props.children,e.mode,l,o.key),i.return=e,e=i):(l=au(o.type,o.key,o.props,null,e.mode,l),l.ref=jo(e,i,o),l.return=e,e=l)}return s(e);case oe:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(e,i.sibling),i=r(i,o.children||[]),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=uu(o,e.mode,l),i.return=e,e=i}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(e,i.sibling),i=r(i,o),i.return=e,e=i):(n(e,i),i=lu(o,e.mode,l),i.return=e,e=i),s(e);if(Mo(o))return m(e,i,o,l);if(ye(o))return g(e,i,o,l);if(c&&$o(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,i)}}var zo=Ho(!0),qo=Ho(!1),Uo={},Vo={current:Uo},Wo={current:Uo},Go={current:Uo};function Xo(e){if(e===Uo)throw Error(a(174));return e}function Yo(e,t){switch(Rr(Go,t),Rr(Wo,e),Rr(Vo,Uo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ze(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ze(t,e)}Dr(Vo),Rr(Vo,t)}function Qo(){Dr(Vo),Dr(Wo),Dr(Go)}function Jo(e){Xo(Go.current);var t=Xo(Vo.current),n=ze(t,e.type);t!==n&&(Rr(Wo,e),Rr(Vo,n))}function Zo(e){Wo.current===e&&(Dr(Vo),Dr(Wo))}var ea={current:0};function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(n=n.dehydrated,null===n||n.data===Rn||n.data===kn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function na(e,t){return{responder:e,props:t}}var ia=ee.ReactCurrentDispatcher,ra=ee.ReactCurrentBatchConfig,oa=0,aa=null,sa=null,la=null,ua=!1;function ca(){throw Error(a(321))}function da(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!er(e[n],t[n]))return!1;return!0}function fa(e,t,n,i,r,o){if(oa=o,aa=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,ia.current=null===e||null===e.memoizedState?Aa:La,e=n(i,r),t.expirationTime===oa){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,la=sa=null,t.updateQueue=null,ia.current=Fa,e=n(i,r)}while(t.expirationTime===oa)}if(ia.current=Pa,t=null!==sa&&null!==sa.next,oa=0,la=sa=aa=null,ua=!1,t)throw Error(a(300));return e}function ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function pa(){if(null===sa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=sa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,sa=e;else{if(null===e)throw Error(a(310));sa=e,e={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ma(e,t){return"function"===typeof t?t(e):t}function ga(e){var t=pa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=sa,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=s=o=null,u=r;do{var c=u.expirationTime;if(c<oa){var d={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,o=i):l=l.next=d,c>aa.expirationTime&&(aa.expirationTime=c,Fl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),Ll(c,u.suspenseConfig),i=u.eagerReducer===e?u.eagerState:e(i,u.action);u=u.next}while(null!==u&&u!==r);null===l?o=i:l.next=s,er(i,t.memoizedState)||(Ga=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function Ea(e){var t=pa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);er(o,t.memoizedState)||(Ga=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function va(e){var t=ha();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e},e=e.dispatch=Na.bind(null,aa,e),[t.memoizedState,e]}function ya(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=aa.updateQueue,null===t?(t={lastEffect:null},aa.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,null===n?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function ba(){return pa().memoizedState}function Ta(e,t,n,i){var r=ha();aa.effectTag|=e,r.memoizedState=ya(1|t,n,void 0,void 0===i?null:i)}function Ca(e,t,n,i){var r=pa();i=void 0===i?null:i;var o=void 0;if(null!==sa){var a=sa.memoizedState;if(o=a.destroy,null!==i&&da(i,a.deps))return void ya(t,n,o,i)}aa.effectTag|=e,r.memoizedState=ya(1|t,n,o,i)}function Oa(e,t){return Ta(516,4,e,t)}function Ia(e,t){return Ca(516,4,e,t)}function _a(e,t){return Ca(4,2,e,t)}function Da(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ra(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ca(4,2,Da.bind(null,t,e),n)}function ka(){}function wa(e,t){return ha().memoizedState=[e,void 0===t?null:t],e}function Ka(e,t){var n=pa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&da(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Sa(e,t){var n=pa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&da(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function xa(e,t,n){var i=ro();ao(98>i?98:i,(function(){e(!0)})),ao(97<i?97:i,(function(){var i=ra.suspense;ra.suspense=void 0===t?null:t;try{e(!1),n()}finally{ra.suspense=i}}))}function Na(e,t,n){var i=Cl(),r=So.suspense;i=Ol(i,e,r),r={expirationTime:i,suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),t.pending=r,o=e.alternate,e===aa||null!==o&&o===aa)ua=!0,r.expirationTime=oa,aa.expirationTime=oa;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&(o=t.lastRenderedReducer,null!==o))try{var a=t.lastRenderedState,s=o(a,n);if(r.eagerReducer=o,r.eagerState=s,er(s,a))return}catch(e){}Il(e,i)}}var Pa={readContext:Co,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useLayoutEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useResponder:ca,useDeferredValue:ca,useTransition:ca},Aa={readContext:Co,useCallback:wa,useContext:Co,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ta(4,2,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ta(4,2,e,t)},useMemo:function(e,t){var n=ha();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ha();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Na.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){var t=ha();return e={current:e},t.memoizedState=e},useState:va,useDebugValue:ka,useResponder:na,useDeferredValue:function(e,t){var n=va(e),i=n[0],r=n[1];return Oa((function(){var n=ra.suspense;ra.suspense=void 0===t?null:t;try{r(e)}finally{ra.suspense=n}}),[e,t]),i},useTransition:function(e){var t=va(!1),n=t[0];return t=t[1],[wa(xa.bind(null,t,e),[t,e]),n]}},La={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Ia,useImperativeHandle:Ra,useLayoutEffect:_a,useMemo:Sa,useReducer:ga,useRef:ba,useState:function(){return ga(ma)},useDebugValue:ka,useResponder:na,useDeferredValue:function(e,t){var n=ga(ma),i=n[0],r=n[1];return Ia((function(){var n=ra.suspense;ra.suspense=void 0===t?null:t;try{r(e)}finally{ra.suspense=n}}),[e,t]),i},useTransition:function(e){var t=ga(ma),n=t[0];return t=t[1],[Ka(xa.bind(null,t,e),[t,e]),n]}},Fa={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Ia,useImperativeHandle:Ra,useLayoutEffect:_a,useMemo:Sa,useReducer:Ea,useRef:ba,useState:function(){return Ea(ma)},useDebugValue:ka,useResponder:na,useDeferredValue:function(e,t){var n=Ea(ma),i=n[0],r=n[1];return Ia((function(){var n=ra.suspense;ra.suspense=void 0===t?null:t;try{r(e)}finally{ra.suspense=n}}),[e,t]),i},useTransition:function(e){var t=Ea(ma),n=t[0];return t=t[1],[Ka(xa.bind(null,t,e),[t,e]),n]}},Ba=null,Ma=null,ja=!1;function $a(e,t){var n=nu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ha(e,t){switch(e.tag){case 5:var n=e.type;return t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,null!==t&&(e.stateNode=t,!0);case 6:return t=""===e.pendingProps||3!==t.nodeType?null:t,null!==t&&(e.stateNode=t,!0);case 13:return!1;default:return!1}}function za(e){if(ja){var t=Ma;if(t){var n=t;if(!Ha(e,t)){if(t=An(n.nextSibling),!t||!Ha(e,t))return e.effectTag=-1025&e.effectTag|2,ja=!1,void(Ba=e);$a(Ba,n)}Ba=e,Ma=An(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,ja=!1,Ba=e}}function qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ba=e}function Ua(e){if(e!==Ba)return!1;if(!ja)return qa(e),ja=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xn(t,e.memoizedProps))for(t=Ma;t;)$a(e,t),t=An(t.nextSibling);if(qa(e),13===e.tag){if(e=e.memoizedState,e=null!==e?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Dn){if(0===t){Ma=An(e.nextSibling);break e}t--}else n!==_n&&n!==kn&&n!==Rn||t++}e=e.nextSibling}Ma=null}}else Ma=Ba?An(e.stateNode.nextSibling):null;return!0}function Va(){Ma=Ba=null,ja=!1}var Wa=ee.ReactCurrentOwner,Ga=!1;function Xa(e,t,n,i){t.child=null===e?qo(t,null,n,i):zo(t,e.child,n,i)}function Ya(e,t,n,i,r){n=n.render;var o=t.ref;return To(t,r),i=fa(e,t,n,i,o,r),null===e||Ga?(t.effectTag|=1,Xa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),hs(e,t,r))}function Qa(e,t,n,i,r,o){if(null===e){var a=n.type;return"function"!==typeof a||iu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=au(n.type,null,i,null,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ja(e,t,a,i,r,o))}return a=e.child,r<o&&(r=a.memoizedProps,n=n.compare,n=null!==n?n:nr,n(r,i)&&e.ref===t.ref)?hs(e,t,o):(t.effectTag|=1,e=ou(a,i),e.ref=t.ref,e.return=t,t.child=e)}function Ja(e,t,n,i,r,o){return null!==e&&nr(e.memoizedProps,i)&&e.ref===t.ref&&(Ga=!1,r<o)?(t.expirationTime=e.expirationTime,hs(e,t,o)):es(e,t,n,i,o)}function Za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function es(e,t,n,i,r){var o=Nr(n)?Sr:wr.current;return o=xr(t,o),To(t,r),n=fa(e,t,n,i,o,r),null===e||Ga?(t.effectTag|=1,Xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),hs(e,t,r))}function ts(e,t,n,i,r){if(Nr(n)){var o=!0;Fr(t)}else o=!1;if(To(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Lo(t,n,i),Bo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Co(u):(u=Nr(n)?Sr:wr.current,u=xr(t,u));var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==u)&&Fo(t,a,i,u),Oo=!1;var f=t.memoizedState;a.state=f,wo(t,i,a,r),l=t.memoizedState,s!==i||f!==l||Kr.current||Oo?("function"===typeof c&&(No(t,n,c,i),l=t.memoizedState),(s=Oo||Ao(t,n,s,i,f,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),i=!1)}else a=t.stateNode,_o(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:ho(t.type,s),l=a.context,u=n.contextType,"object"===typeof u&&null!==u?u=Co(u):(u=Nr(n)?Sr:wr.current,u=xr(t,u)),c=n.getDerivedStateFromProps,(d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==u)&&Fo(t,a,i,u),Oo=!1,l=t.memoizedState,a.state=l,wo(t,i,a,r),f=t.memoizedState,s!==i||l!==f||Kr.current||Oo?("function"===typeof c&&(No(t,n,c,i),f=t.memoizedState),(c=Oo||Ao(t,n,s,i,l,f,u))?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,u)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=u,i=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),i=!1);return ns(e,t,n,i,o,r)}function ns(e,t,n,i,r,o){Za(e,t);var a=0!==(64&t.effectTag);if(!i&&!a)return r&&Br(t,n,!1),hs(e,t,o);i=t.stateNode,Wa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&a?(t.child=zo(t,e.child,null,o),t.child=zo(t,null,s,o)):Xa(e,t,s,o),t.memoizedState=i.state,r&&Br(t,n,!0),t.child}function is(e){var t=e.stateNode;t.pendingContext?Ar(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ar(e,t.context,!1),Yo(e,t.containerInfo)}var rs,os,as,ss,ls={dehydrated:null,retryTime:0};function us(e,t,n){var i,r=t.mode,o=t.pendingProps,a=ea.current,s=!1;if((i=0!==(64&t.effectTag))||(i=0!==(2&a)&&(null===e||null!==e.memoizedState)),i?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Rr(ea,1&a),null===e){if(void 0!==o.fallback&&za(t),s){if(s=o.fallback,o=su(null,r,0,null),o.return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return n=su(s,r,n,null),n.return=t,o.sibling=n,t.memoizedState=ls,t.child=o,n}return r=o.children,t.memoizedState=null,t.child=qo(t,null,r,n)}if(null!==e.memoizedState){if(e=e.child,r=e.sibling,s){if(o=o.fallback,n=ou(e,e.pendingProps),n.return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child,s!==e.child))for(n.child=s;null!==s;)s.return=n,s=s.sibling;return r=ou(r,o),r.return=t,n.sibling=r,n.childExpirationTime=0,t.memoizedState=ls,t.child=n,r}return n=zo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,o=su(null,r,0,null),o.return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return n=su(s,r,n,null),n.return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=ls,t.child=o,n}return t.memoizedState=null,t.child=zo(t,e,o.children,n)}function cs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),bo(e.return,t)}function ds(e,t,n,i,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailExpiration=0,a.tailMode=r,a.lastEffect=o)}function fs(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Xa(e,t,i.children,n),i=ea.current,0!==(2&i))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&cs(e,n);else if(19===e.tag)cs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Rr(ea,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)e=n.alternate,null!==e&&null===ta(e)&&(r=n),n=n.sibling;n=r,null===n?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ds(t,!1,r,n,o,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(e=r.alternate,null!==e&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ds(t,!0,n,null,o,t.lastEffect);break;case"together":ds(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function hs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&Fl(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(e=t.child,n=ou(e,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=ou(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ps(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ms(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Nr(t.type)&&Pr(),null;case 3:return Qo(),Dr(Kr),Dr(wr),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ua(t)||(t.effectTag|=4),os(t),null;case 5:Zo(t),n=Xo(Go.current);var o=t.type;if(null!==e&&null!=t.stateNode)as(e,t,o,i,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!i){if(null===t.stateNode)throw Error(a(166));return null}if(e=Xo(Vo.current),Ua(t)){i=t.stateNode,o=t.type;var s=t.memoizedProps;switch(i[Bn]=t,i[Mn]=s,o){case"iframe":case"object":case"embed":nn("load",i);break;case"video":case"audio":for(e=0;e<nt.length;e++)nn(nt[e],i);break;case"source":nn("error",i);break;case"img":case"image":case"link":nn("error",i),nn("load",i);break;case"form":nn("reset",i),nn("submit",i);break;case"details":nn("toggle",i);break;case"input":we(i,s),nn("invalid",i),En(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!s.multiple},nn("invalid",i),En(n,"onChange");break;case"textarea":Be(i,s),nn("invalid",i),En(n,"onChange")}for(var l in pn(o,s),e=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?i.textContent!==u&&(e=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(e=["children",""+u]):_.hasOwnProperty(l)&&null!=u&&En(n,l)}switch(o){case"input":De(i),xe(i,s,!0);break;case"textarea":De(i),je(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=vn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===gn&&(e=He(o)),e===gn?"script"===o?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(o,{is:i.is}):(e=l.createElement(o),"select"===o&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,o),e[Bn]=t,e[Mn]=i,rs(e,t,!1,!1),t.stateNode=e,l=mn(o,i),o){case"iframe":case"object":case"embed":nn("load",e),u=i;break;case"video":case"audio":for(u=0;u<nt.length;u++)nn(nt[u],e);u=i;break;case"source":nn("error",e),u=i;break;case"img":case"image":case"link":nn("error",e),nn("load",e),u=i;break;case"form":nn("reset",e),nn("submit",e),u=i;break;case"details":nn("toggle",e),u=i;break;case"input":we(e,i),u=ke(e,i),nn("invalid",e),En(n,"onChange");break;case"option":u=Ae(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},u=r({},i,{value:void 0}),nn("invalid",e),En(n,"onChange");break;case"textarea":Be(e,i),u=Fe(e,i),nn("invalid",e),En(n,"onChange");break;default:u=i}pn(o,u);var c=u;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?fn(e,d):"dangerouslySetInnerHTML"===s?(d=d?d.__html:void 0,null!=d&&Ue(e,d)):"children"===s?"string"===typeof d?("textarea"!==o||""!==d)&&Ve(e,d):"number"===typeof d&&Ve(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(_.hasOwnProperty(s)?null!=d&&En(n,s):null!=d&&te(e,s,d,l))}switch(o){case"input":De(e),xe(e,i,!1);break;case"textarea":De(e),je(e);break;case"option":null!=i.value&&e.setAttribute("value",""+Oe(i.value));break;case"select":e.multiple=!!i.multiple,n=i.value,null!=n?Le(e,!!i.multiple,n,!1):null!=i.defaultValue&&Le(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=vn)}Sn(o,i)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)ss(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));n=Xo(Go.current),Xo(Vo.current),Ua(t)?(n=t.stateNode,i=t.memoizedProps,n[Bn]=t,n.nodeValue!==i&&(t.effectTag|=4)):(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i),n[Bn]=t,t.stateNode=n)}return null;case 13:return Dr(ea),i=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==i,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Ua(t):(o=e.memoizedState,i=null!==o,n||null===o||(o=e.child.sibling,null!==o&&(s=t.firstEffect,null!==s?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8))),n&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&ea.current)?nl===Vs&&(nl=Xs):(nl!==Vs&&nl!==Xs||(nl=Ys),0!==sl&&null!==Zs&&(fu(Zs,tl),hu(Zs,sl)))),(n||i)&&(t.effectTag|=4),null);case 4:return Qo(),os(t),null;case 10:return yo(t),null;case 17:return Nr(t.type)&&Pr(),null;case 19:if(Dr(ea),i=t.memoizedState,null===i)return null;if(o=0!==(64&t.effectTag),s=i.rendering,null===s){if(o)ps(i,!1);else if(nl!==Vs||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(e=ta(s),null!==e){for(t.effectTag|=64,ps(i,!1),o=e.updateQueue,null!==o&&(t.updateQueue=o,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=t.child;null!==i;)o=i,s=n,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,e=o.alternate,null===e?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),i=i.sibling;return Rr(ea,1&ea.current|2),t.child}s=s.sibling}}else{if(!o)if(e=ta(s),null!==e){if(t.effectTag|=64,o=!0,n=e.updateQueue,null!==n&&(t.updateQueue=n,t.effectTag|=4),ps(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate)return t=t.lastEffect=i.lastEffect,null!==t&&(t.nextEffect=null),null}else 2*io()-i.renderingStartTime>i.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,ps(i,!1),t.expirationTime=t.childExpirationTime=n-1);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,null!==n?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=io()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=io(),n.sibling=null,t=ea.current,Rr(ea,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function gs(e){switch(e.tag){case 1:Nr(e.type)&&Pr();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Qo(),Dr(Kr),Dr(wr),t=e.effectTag,0!==(64&t))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Zo(e),null;case 13:return Dr(ea),t=e.effectTag,4096&t?(e.effectTag=-4097&t|64,e):null;case 19:return Dr(ea),null;case 4:return Qo(),null;case 10:return yo(e),null;default:return null}}function Es(e,t){return{value:e,source:t,stack:Ce(t)}}rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},os=function(){},as=function(e,t,n,i,o){var a=e.memoizedProps;if(a!==i){var s,l,u=t.stateNode;switch(Xo(Vo.current),e=null,n){case"input":a=ke(u,a),i=ke(u,i),e=[];break;case"option":a=Ae(u,a),i=Ae(u,i),e=[];break;case"select":a=r({},a,{value:void 0}),i=r({},i,{value:void 0}),e=[];break;case"textarea":a=Fe(u,a),i=Fe(u,i),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(u.onclick=vn)}for(s in pn(n,i),n=null,a)if(!i.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in u=a[s],u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(_.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in i){var c=i[s];if(u=null!=a?a[s]:void 0,i.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(s,c)):"children"===s?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(_.hasOwnProperty(s)?(null!=c&&En(o,s),e||u===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},ss=function(e,t,n,i){n!==i&&(t.effectTag|=4)};var vs="function"===typeof WeakSet?WeakSet:Set;function ys(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=Ce(n)),null!==n&&Te(n.type),t=t.value,null!==e&&1===e.tag&&Te(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function bs(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Xl(e,t)}}function Ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){Xl(e,t)}else t.current=null}function Cs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:ho(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function Os(e,t){if(t=t.updateQueue,t=null!==t?t.lastEffect:null,null!==t){var n=t=t.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}n=n.next}while(n!==t)}}function Is(e,t){if(t=t.updateQueue,t=null!==t?t.lastEffect:null,null!==t){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function _s(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Is(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:ho(n.type,t.memoizedProps);e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return t=n.updateQueue,void(null!==t&&Ko(n,t,e));case 3:if(t=n.updateQueue,null!==t){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Ko(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Sn(n.type,n.memoizedProps)&&e.focus());case 6:return;case 4:return;case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ut(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function Ds(e,t,n){switch("function"===typeof Zl&&Zl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,null!==e&&(e=e.lastEffect,null!==e)){var i=e.next;ao(97<n?97:n,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var r=t;try{n()}catch(e){Xl(r,e)}}e=e.next}while(e!==i)}))}break;case 1:Ts(t),n=t.stateNode,"function"===typeof n.componentWillUnmount&&bs(t,n);break;case 5:Ts(t);break;case 4:xs(e,t,n)}}function Rs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&Rs(t)}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ks(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:t=t.containerInfo,i=!0;break;case 4:t=t.containerInfo,i=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ve(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}i?Ks(e,n,t):Ss(e,n,t)}function Ks(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,null!==n&&void 0!==n||null!==t.onclick||(t.onclick=vn));else if(4!==i&&(e=e.child,null!==e))for(Ks(e,t,n),e=e.sibling;null!==e;)Ks(e,t,n),e=e.sibling}function Ss(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(e=e.child,null!==e))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function xs(e,t,n){for(var i,r,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break e;case 3:i=i.containerInfo,r=!0;break e;case 4:i=i.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,d=u;;)if(Ds(l,d,c),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===u)break e;for(;null===d.sibling;){if(null===d.return||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r?(l=i,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):i.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(Ds(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return,4===o.tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Ns(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Os(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,r=null!==e?e.memoizedProps:i;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Mn]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Ke(n,i),mn(e,r),t=mn(e,i),r=0;r<o.length;r+=2){var s=o[r],l=o[r+1];"style"===s?fn(n,l):"dangerouslySetInnerHTML"===s?Ue(n,l):"children"===s?Ve(n,l):te(n,s,l,t)}switch(e){case"input":Se(n,i);break;case"textarea":Me(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,e=i.value,null!=e?Le(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Le(n,!!i.multiple,i.defaultValue,!0):Le(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return t=t.stateNode,void(t.hydrate&&(t.hydrate=!1,Ut(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,ul=io()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,i?(o=o.style,"function"===typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(o=e.stateNode,r=e.memoizedProps.style,r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,o.style.display=dn("display",r));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){o=e.child.sibling,o.return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void Ps(t);case 19:return void Ps(t);case 17:return}throw Error(a(163))}function Ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new vs),t.forEach((function(t){var i=Ql.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}var As="function"===typeof WeakMap?WeakMap:Map;function Ls(e,t,n){n=Do(n,null),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){fl||(fl=!0,hl=i),ys(e,t)},n}function Fs(e,t,n){n=Do(n,null),n.tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return ys(e,t),i(r)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===pl?pl=new Set([this]):pl.add(this),ys(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Bs,Ms=Math.ceil,js=ee.ReactCurrentDispatcher,$s=ee.ReactCurrentOwner,Hs=0,zs=8,qs=16,Us=32,Vs=0,Ws=1,Gs=2,Xs=3,Ys=4,Qs=5,Js=Hs,Zs=null,el=null,tl=0,nl=Vs,il=null,rl=1073741823,ol=1073741823,al=null,sl=0,ll=!1,ul=0,cl=500,dl=null,fl=!1,hl=null,pl=null,ml=!1,gl=null,El=90,vl=null,yl=0,bl=null,Tl=0;function Cl(){return(Js&(qs|Us))!==Hs?1073741821-(io()/10|0):0!==Tl?Tl:Tl=1073741821-(io()/10|0)}function Ol(e,t,n){if(t=t.mode,0===(2&t))return 1073741823;var i=ro();if(0===(4&t))return 99===i?1073741823:1073741822;if((Js&qs)!==Hs)return tl;if(null!==n)e=fo(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=fo(e,150,100);break;case 97:case 96:e=fo(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Zs&&e===tl&&--e,e}function Il(e,t){if(50<yl)throw yl=0,bl=null,Error(a(185));if(e=_l(e,t),null!==e){var n=ro();1073741823===t?(Js&zs)!==Hs&&(Js&(qs|Us))===Hs?wl(e):(Rl(e),Js===Hs&&uo()):Rl(e),(4&Js)===Hs||98!==n&&99!==n||(null===vl?vl=new Map([[e,t]]):(n=vl.get(e),(void 0===n||n>t)&&vl.set(e,t)))}}function _l(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,r=null;if(null===i&&3===e.tag)r=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(Zs===r&&(Fl(t),nl===Ys&&fu(r,tl)),hu(r,t)),r}function Dl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(t=e.firstPendingTime,!du(e,t))return t;var n=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=n>e?n:e,2>=e&&t!==e?0:e}function Rl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=lo(wl.bind(null,e));else{var t=Dl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=Cl();if(1073741823===t?i=99:1===t||2===t?i=95:(i=10*(1073741821-t)-10*(1073741821-i),i=0>=i?99:250>=i?98:5250>=i?97:95),null!==n){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=i)return;n!==Yr&&$r(n)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?lo(wl.bind(null,e)):so(i,kl.bind(null,e),{timeout:10*(1073741821-t)-io()}),e.callbackNode=t}}}function kl(e,t){if(Tl=0,t)return t=Cl(),pu(e,t),Rl(e),null;var n=Dl(e);if(0!==n){if(t=e.callbackNode,(Js&(qs|Us))!==Hs)throw Error(a(327));if(Vl(),e===Zs&&n===tl||Nl(e,n),null!==el){var i=Js;Js|=qs;var r=Al();do{try{Ml();break}catch(t){Pl(e,t)}}while(1);if(vo(),Js=i,js.current=r,nl===Ws)throw t=il,Nl(e,n),fu(e,n),Rl(e),t;if(null===el)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=nl,Zs=null,i){case Vs:case Ws:throw Error(a(345));case Gs:pu(e,2<n?2:n);break;case Xs:if(fu(e,n),i=e.lastSuspendedTime,n===i&&(e.nextKnownPendingLevel=Hl(r)),1073741823===rl&&(r=ul+cl-io(),10<r)){if(ll){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,Nl(e,n);break}}if(o=Dl(e),0!==o&&o!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=Nn(zl.bind(null,e),r);break}zl(e);break;case Ys:if(fu(e,n),i=e.lastSuspendedTime,n===i&&(e.nextKnownPendingLevel=Hl(r)),ll&&(r=e.lastPingedTime,0===r||r>=n)){e.lastPingedTime=n,Nl(e,n);break}if(r=Dl(e),0!==r&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==ol?i=10*(1073741821-ol)-io():1073741823===rl?i=0:(i=10*(1073741821-rl)-5e3,r=io(),n=10*(1073741821-n)-r,i=r-i,0>i&&(i=0),i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ms(i/1960))-i,n<i&&(i=n)),10<i){e.timeoutHandle=Nn(zl.bind(null,e),i);break}zl(e);break;case Qs:if(1073741823!==rl&&null!==al){o=rl;var s=al;if(i=0|s.busyMinDurationMs,0>=i?i=0:(r=0|s.busyDelayMs,o=io()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)),i=o<=r?0:r+i-o),10<i){fu(e,n),e.timeoutHandle=Nn(zl.bind(null,e),i);break}}zl(e);break;default:throw Error(a(329))}if(Rl(e),e.callbackNode===t)return kl.bind(null,e)}}return null}function wl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Js&(qs|Us))!==Hs)throw Error(a(327));if(Vl(),e===Zs&&t===tl||Nl(e,t),null!==el){var n=Js;Js|=qs;var i=Al();do{try{Bl();break}catch(t){Pl(e,t)}}while(1);if(vo(),Js=n,js.current=i,nl===Ws)throw n=il,Nl(e,t),fu(e,t),Rl(e),n;if(null!==el)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Zs=null,zl(e),Rl(e)}return null}function Kl(){if(null!==vl){var e=vl;vl=null,e.forEach((function(e,t){pu(t,e),Rl(t)})),uo()}}function Sl(e,t){var n=Js;Js|=1;try{return e(t)}finally{Js=n,Js===Hs&&uo()}}function xl(e,t){var n=Js;Js&=-2,Js|=zs;try{return e(t)}finally{Js=n,Js===Hs&&uo()}}function Nl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Pn(n)),null!==el)for(n=el.return;null!==n;){var i=n;switch(i.tag){case 1:i=i.type.childContextTypes,null!==i&&void 0!==i&&Pr();break;case 3:Qo(),Dr(Kr),Dr(wr);break;case 5:Zo(i);break;case 4:Qo();break;case 13:Dr(ea);break;case 19:Dr(ea);break;case 10:yo(i)}n=n.return}Zs=e,el=ou(e.current,null),tl=t,nl=Vs,il=null,ol=rl=1073741823,al=null,sl=0,ll=!1}function Pl(e,t){do{try{if(vo(),ia.current=Pa,ua)for(var n=aa.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}if(oa=0,la=sa=aa=null,ua=!1,null===el||null===el.return)return nl=Ws,il=t,el=null;e:{var r=e,o=el.return,a=el,s=t;if(t=tl,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var l=s;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!==(1&ea.current),d=o;do{var f;if(f=13===d.tag){var h=d.memoizedState;if(null!==h)f=null!==h.dehydrated;else{var p=d.memoizedProps;f=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(l),d.updateQueue=g}else m.add(l);if(0===(2&d.mode)){if(d.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var E=Do(1073741823,null);E.tag=2,Ro(a,E)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=r.pingCache;if(null===v?(v=r.pingCache=new As,s=new Set,v.set(l,s)):(s=v.get(l),void 0===s&&(s=new Set,v.set(l,s))),!s.has(a)){s.add(a);var y=Yl.bind(null,r,l,a);l.then(y,y)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((Te(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ce(a))}nl!==Qs&&(nl=Gs),s=Es(s,a),d=o;do{switch(d.tag){case 3:l=s,d.effectTag|=4096,d.expirationTime=t;var b=Ls(d,l,t);ko(d,b);break e;case 1:l=s;var T=d.type,C=d.stateNode;if(0===(64&d.effectTag)&&("function"===typeof T.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===pl||!pl.has(C)))){d.effectTag|=4096,d.expirationTime=t;var O=Fs(d,l,t);ko(d,O);break e}}d=d.return}while(null!==d)}el=$l(el)}catch(e){t=e;continue}break}while(1)}function Al(){var e=js.current;return js.current=Pa,null===e?Pa:e}function Ll(e,t){e<rl&&2<e&&(rl=e),null!==t&&e<ol&&2<e&&(ol=e,al=t)}function Fl(e){e>sl&&(sl=e)}function Bl(){for(;null!==el;)el=jl(el)}function Ml(){for(;null!==el&&!Qr();)el=jl(el)}function jl(e){var t=Bs(e.alternate,e,tl);return e.memoizedProps=e.pendingProps,null===t&&(t=$l(e)),$s.current=null,t}function $l(e){el=e;do{var t=el.alternate;if(e=el.return,0===(2048&el.effectTag)){if(t=ms(t,el,tl),1===tl||1!==el.childExpirationTime){for(var n=0,i=el.child;null!==i;){var r=i.expirationTime,o=i.childExpirationTime;r>n&&(n=r),o>n&&(n=o),i=i.sibling}el.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=el.firstEffect),null!==el.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=el.firstEffect),e.lastEffect=el.lastEffect),1<el.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=el:e.firstEffect=el,e.lastEffect=el))}else{if(t=gs(el),null!==t)return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(t=el.sibling,null!==t)return t;el=e}while(null!==el);return nl===Vs&&(nl=Qs),null}function Hl(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function zl(e){var t=ro();return ao(99,ql.bind(null,e,t)),null}function ql(e,t){do{Vl()}while(null!==gl);if((Js&(qs|Us))!==Hs)throw Error(a(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Hl(n);if(e.firstPendingTime=r,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Zs&&(el=Zs=null,tl=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var o=Js;Js|=Us,$s.current=null,wn=tn;var s=On();if(In(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{l.nodeType,d.nodeType}catch(e){l=null;break e}var f=0,h=-1,p=-1,m=0,g=0,E=s,v=null;t:for(;;){for(var y;;){if(E!==l||0!==c&&3!==E.nodeType||(h=f+c),E!==d||0!==u&&3!==E.nodeType||(p=f+u),3===E.nodeType&&(f+=E.nodeValue.length),null===(y=E.firstChild))break;v=E,E=y}for(;;){if(E===s)break t;if(v===l&&++m===c&&(h=f),v===d&&++g===u&&(p=f),null!==(y=E.nextSibling))break;E=v,v=E.parentNode}E=y}l=-1===h||-1===p?null:{start:h,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;Kn={activeElementDetached:null,focusedElem:s,selectionRange:l},tn=!1,dl=r;do{try{Ul()}catch(e){if(null===dl)throw Error(a(330));Xl(dl,e),dl=dl.nextEffect}}while(null!==dl);dl=r;do{try{for(s=e,l=t;null!==dl;){var b=dl.effectTag;if(16&b&&Ve(dl.stateNode,""),128&b){var T=dl.alternate;if(null!==T){var C=T.ref;null!==C&&("function"===typeof C?C(null):C.current=null)}}switch(1038&b){case 2:ws(dl),dl.effectTag&=-3;break;case 6:ws(dl),dl.effectTag&=-3,Ns(dl.alternate,dl);break;case 1024:dl.effectTag&=-1025;break;case 1028:dl.effectTag&=-1025,Ns(dl.alternate,dl);break;case 4:Ns(dl.alternate,dl);break;case 8:c=dl,xs(s,c,l),Rs(c)}dl=dl.nextEffect}}catch(e){if(null===dl)throw Error(a(330));Xl(dl,e),dl=dl.nextEffect}}while(null!==dl);if(C=Kn,T=On(),b=C.focusedElem,l=C.selectionRange,T!==b&&b&&b.ownerDocument&&Cn(b.ownerDocument.documentElement,b)){null!==l&&In(b)&&(T=l.start,C=l.end,void 0===C&&(C=T),"selectionStart"in b?(b.selectionStart=T,b.selectionEnd=Math.min(C,b.value.length)):(C=(T=b.ownerDocument||document)&&T.defaultView||window,C.getSelection&&(C=C.getSelection(),c=b.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!C.extend&&s>l&&(c=l,l=s,s=c),c=Tn(b,s),d=Tn(b,l),c&&d&&(1!==C.rangeCount||C.anchorNode!==c.node||C.anchorOffset!==c.offset||C.focusNode!==d.node||C.focusOffset!==d.offset)&&(T=T.createRange(),T.setStart(c.node,c.offset),C.removeAllRanges(),s>l?(C.addRange(T),C.extend(d.node,d.offset)):(T.setEnd(d.node,d.offset),C.addRange(T)))))),T=[];for(C=b;C=C.parentNode;)1===C.nodeType&&T.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<T.length;b++)C=T[b],C.element.scrollLeft=C.left,C.element.scrollTop=C.top}tn=!!wn,Kn=wn=null,e.current=n,dl=r;do{try{for(b=e;null!==dl;){var O=dl.effectTag;if(36&O&&_s(b,dl.alternate,dl),128&O){T=void 0;var I=dl.ref;if(null!==I){var _=dl.stateNode;switch(dl.tag){case 5:T=_;break;default:T=_}"function"===typeof I?I(T):I.current=T}}dl=dl.nextEffect}}catch(e){if(null===dl)throw Error(a(330));Xl(dl,e),dl=dl.nextEffect}}while(null!==dl);dl=null,Jr(),Js=o}else e.current=n;if(ml)ml=!1,gl=e,El=t;else for(dl=r;null!==dl;)t=dl.nextEffect,dl.nextEffect=null,dl=t;if(t=e.firstPendingTime,0===t&&(pl=null),1073741823===t?e===bl?yl++:(yl=0,bl=e):yl=0,"function"===typeof Jl&&Jl(n.stateNode,i),Rl(e),fl)throw fl=!1,e=hl,hl=null,e;return(Js&zs)!==Hs||uo(),null}function Ul(){for(;null!==dl;){var e=dl.effectTag;0!==(256&e)&&Cs(dl.alternate,dl),0===(512&e)||ml||(ml=!0,so(97,(function(){return Vl(),null}))),dl=dl.nextEffect}}function Vl(){if(90!==El){var e=97<El?97:El;return El=90,ao(e,Wl)}}function Wl(){if(null===gl)return!1;var e=gl;if(gl=null,(Js&(qs|Us))!==Hs)throw Error(a(331));var t=Js;for(Js|=Us,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Os(5,n),Is(5,n)}}catch(t){if(null===e)throw Error(a(330));Xl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Js=t,uo(),!0}function Gl(e,t,n){t=Es(n,t),t=Ls(e,t,1073741823),Ro(e,t),e=_l(e,1073741823),null!==e&&Rl(e)}function Xl(e,t){if(3===e.tag)Gl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Gl(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===pl||!pl.has(i))){e=Es(t,e),e=Fs(n,e,1073741823),Ro(n,e),n=_l(n,1073741823),null!==n&&Rl(n);break}}n=n.return}}function Yl(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),Zs===e&&tl===n?nl===Ys||nl===Xs&&1073741823===rl&&io()-ul<cl?Nl(e,tl):ll=!0:du(e,n)&&(t=e.lastPingedTime,0!==t&&t<n||(e.lastPingedTime=n,Rl(e)))}function Ql(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=0,0===t&&(t=Cl(),t=Ol(t,e,null)),e=_l(e,t),null!==e&&Rl(e)}Bs=function(e,t,n){var i=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||Kr.current)Ga=!0;else{if(i<n){switch(Ga=!1,t.tag){case 3:is(t),Va();break;case 5:if(Jo(t),4&t.mode&&1!==n&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Nr(t.type)&&Fr(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,r=t.type._context,Rr(po,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return i=t.child.childExpirationTime,0!==i&&i>=n?us(e,t,n):(Rr(ea,1&ea.current),t=hs(e,t,n),null!==t?t.sibling:null);Rr(ea,1&ea.current);break;case 19:if(i=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(i)return fs(e,t,n);t.effectTag|=64}if(r=t.memoizedState,null!==r&&(r.rendering=null,r.tail=null),Rr(ea,ea.current),!i)return null}return hs(e,t,n)}Ga=!1}}else Ga=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=xr(t,wr.current),To(t,n),r=fa(null,t,i,e,r,n),t.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nr(i)){var o=!0;Fr(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Io(t);var s=i.getDerivedStateFromProps;"function"===typeof s&&No(t,i,s,e),r.updater=Po,t.stateNode=r,r._reactInternalFiber=t,Bo(t,i,e,n),t=ns(null,t,i,!0,o,n)}else t.tag=0,Xa(null,t,r,n),t=t.child;return t;case 16:e:{if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,be(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,o=t.tag=ru(r),e=ho(r,e),o){case 0:t=es(null,t,r,e,n);break e;case 1:t=ts(null,t,r,e,n);break e;case 11:t=Ya(null,t,r,e,n);break e;case 14:t=Qa(null,t,r,ho(r.type,e),i,n);break e}throw Error(a(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ho(i,r),es(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ho(i,r),ts(e,t,i,r,n);case 3:if(is(t),i=t.updateQueue,null===e||null===i)throw Error(a(282));if(i=t.pendingProps,r=t.memoizedState,r=null!==r?r.element:null,_o(e,t),wo(t,i,null,n),i=t.memoizedState.element,i===r)Va(),t=hs(e,t,n);else{if((r=t.stateNode.hydrate)&&(Ma=An(t.stateNode.containerInfo.firstChild),Ba=t,r=ja=!0),r)for(n=qo(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Xa(e,t,i,n),Va();t=t.child}return t;case 5:return Jo(t),null===e&&za(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,xn(i,r)?s=null:null!==o&&xn(i,o)&&(t.effectTag|=16),Za(e,t),4&t.mode&&1!==n&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Xa(e,t,s,n),t=t.child),t;case 6:return null===e&&za(t),null;case 13:return us(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=zo(t,null,i,n):Xa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ho(i,r),Ya(e,t,i,r,n);case 7:return Xa(e,t,t.pendingProps,n),t.child;case 8:return Xa(e,t,t.pendingProps.children,n),t.child;case 12:return Xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value;var l=t.type._context;if(Rr(po,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,o=er(l,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,o):1073741823),0===o){if(s.children===r.children&&!Kr.current){t=hs(e,t,n);break e}}else for(l=t.child,null!==l&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&o)){1===l.tag&&(c=Do(n,null),c.tag=2,Ro(l,c)),l.expirationTime<n&&(l.expirationTime=n),c=l.alternate,null!==c&&c.expirationTime<n&&(c.expirationTime=n),bo(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(l=s.sibling,null!==l){l.return=s.return,s=l;break}s=s.return}l=s}Xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps,i=o.children,To(t,n),r=Co(r,o.unstable_observedBits),i=i(r),t.effectTag|=1,Xa(e,t,i,n),t.child;case 14:return r=t.type,o=ho(r,t.pendingProps),o=ho(r.type,o),Qa(e,t,r,o,i,n);case 15:return Ja(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ho(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Nr(i)?(e=!0,Fr(t)):e=!1,To(t,n),Lo(t,i,r),Bo(t,i,r,n),ns(null,t,i,!0,e,n);case 19:return fs(e,t,n)}throw Error(a(156,t.tag))};var Jl=null,Zl=null;function eu(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Jl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(e){}},Zl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function tu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function nu(e,t,n,i){return new tu(e,t,n,i)}function iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ru(e){if("function"===typeof e)return iu(e)?1:0;if(void 0!==e&&null!==e){if(e=e.$$typeof,e===fe)return 11;if(e===me)return 14}return 2}function ou(e,t){var n=e.alternate;return null===n?(n=nu(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function au(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)iu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ae:return su(n.children,r,o,t);case de:s=8,r|=7;break;case se:s=8,r|=1;break;case le:return e=nu(12,n,t,8|r),e.elementType=le,e.type=le,e.expirationTime=o,e;case he:return e=nu(13,n,t,r),e.type=he,e.elementType=he,e.expirationTime=o,e;case pe:return e=nu(19,n,t,r),e.elementType=pe,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ue:s=10;break e;case ce:s=9;break e;case fe:s=11;break e;case me:s=14;break e;case ge:s=16,i=null;break e;case Ee:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return t=nu(s,n,t,r),t.elementType=e,t.type=i,t.expirationTime=o,t}function su(e,t,n,i){return e=nu(7,e,i,t),e.expirationTime=n,e}function lu(e,t,n){return e=nu(6,e,null,t),e.expirationTime=n,e}function uu(e,t,n){return t=nu(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function du(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function fu(e,t){var n=e.firstSuspendedTime,i=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(i>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function hu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function pu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function mu(e,t,n,i){var r=t.current,o=Cl(),s=So.suspense;o=Ol(o,r,s);e:if(n){n=n._reactInternalFiber;t:{if(ot(n)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Nr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(Nr(u)){n=Lr(n,u,l);break e}}n=l}else n=kr;return null===t.context?t.context=n:t.pendingContext=n,t=Do(o,s),t.payload={element:e},i=void 0===i?null:i,null!==i&&(t.callback=i),Ro(r,t),Il(r,o),o}function gu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Eu(e,t){e=e.memoizedState,null!==e&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function vu(e,t){Eu(e,t),(e=e.alternate)&&Eu(e,t)}function yu(e,t,n){n=null!=n&&!0===n.hydrate;var i=new cu(e,t,n),r=nu(3,null,null,2===t?7:1===t?3:0);i.current=r,r.stateNode=i,Io(r),e[jn]=i.current,n&&0!==t&&At(e,9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function bu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Tu(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new yu(e,0,t?{hydrate:!0}:void 0)}function Cu(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=gu(a);s.call(e)}}mu(t,a,e,r)}else{if(o=n._reactRootContainer=Tu(n,i),a=o._internalRoot,"function"===typeof r){var l=r;r=function(){var e=gu(a);l.call(e)}}xl((function(){mu(t,a,e,r)}))}return gu(a)}function Ou(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:oe,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bu(t))throw Error(a(200));return Ou(e,t,null,n)}yu.prototype.render=function(e){mu(e,this._internalRoot,null,null)},yu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;mu(null,e,null,(function(){t[jn]=null}))},Ct=function(e){if(13===e.tag){var t=fo(Cl(),150,100);Il(e,t),vu(e,t)}},Ot=function(e){13===e.tag&&(Il(e,3),vu(e,3))},It=function(e){if(13===e.tag){var t=Cl();t=Ol(t,e,null),Il(e,t),vu(e,t)}},w=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=qn(i);if(!r)throw Error(a(90));Re(i),Se(i,r)}}}break;case"textarea":Me(e,n);break;case"select":t=n.value,null!=t&&Le(e,!!n.multiple,t,!1)}},A=Sl,L=function(e,t,n,i,r){var o=Js;Js|=4;try{return ao(98,e.bind(null,t,n,i,r))}finally{Js=o,Js===Hs&&uo()}},F=function(){(Js&(1|qs|Us))===Hs&&(Kl(),Vl())},B=function(e,t){var n=Js;Js|=2;try{return e(t)}finally{Js=n,Js===Hs&&uo()}};var _u={Events:[Hn,zn,qn,R,I,Qn,function(e){dt(e,Yn)},N,P,sn,pt,Vl,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;eu(r({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ut(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:$n,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_u,t.createPortal=Iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=ut(t),e=null===e?null:e.stateNode,e},t.flushSync=function(e,t){if((Js&(qs|Us))!==Hs)throw Error(a(187));var n=Js;Js|=1;try{return ao(99,e.bind(null,t))}finally{Js=n,uo()}},t.hydrate=function(e,t,n){if(!bu(t))throw Error(a(200));return Cu(null,e,t,!0,n)},t.render=function(e,t,n){if(!bu(t))throw Error(a(200));return Cu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!bu(e))throw Error(a(40));return!!e._reactRootContainer&&(xl((function(){Cu(null,null,e,!1,(function(){e._reactRootContainer=null,e[jn]=null}))})),!0)},t.unstable_batchedUpdates=Sl,t.unstable_createPortal=function(e,t){return Iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!bu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Cu(e,t,n,!1,i)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(50)},function(e,t,n){"use strict";var i,r,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(c,0),e}},d=Date.now();t.unstable_now=function(){return Date.now()-d},i=function(e){null!==l?setTimeout(i,0,e):(l=e,setTimeout(c,0))},r=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var E=h.now();t.unstable_now=function(){return h.now()-E}}var v=!1,y=null,b=-1,T=5,C=0;a=function(){return t.unstable_now()>=C},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):5};var O=new MessageChannel,I=O.port2;O.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();C=e+T;try{y(!0,e)?I.postMessage(null):(v=!1,y=null)}catch(e){throw I.postMessage(null),e}}else v=!1},i=function(e){y=e,v||(v=!0,I.postMessage(null))},r=function(e,n){b=p((function(){e(t.unstable_now())}),n)},o=function(){m(b),b=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<k(r,t)))break e;e[i]=t,e[n]=r,n=i}}function D(e){return e=e[0],void 0===e?null:e}function R(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var o=2*(i+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>k(a,n))void 0!==l&&0>k(l,a)?(e[i]=l,e[s]=n,i=s):(e[i]=a,e[o]=n,i=o);else{if(!(void 0!==l&&0>k(l,n)))break e;e[i]=l,e[s]=n,i=s}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var w=[],K=[],S=1,x=null,N=3,P=!1,A=!1,L=!1;function F(e){for(var t=D(K);null!==t;){if(null===t.callback)R(K);else{if(!(t.startTime<=e))break;R(K),t.sortIndex=t.expirationTime,_(w,t)}t=D(K)}}function B(e){if(L=!1,F(e),!A)if(null!==D(w))A=!0,i(M);else{var t=D(K);null!==t&&r(B,t.startTime-e)}}function M(e,n){A=!1,L&&(L=!1,o()),P=!0;var i=N;try{for(F(n),x=D(w);null!==x&&(!(x.expirationTime>n)||e&&!a());){var s=x.callback;if(null!==s){x.callback=null,N=x.priorityLevel;var l=s(x.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?x.callback=l:x===D(w)&&R(w),F(n)}else R(w);x=D(w)}if(null!==x)var u=!0;else{var c=D(K);null!==c&&r(B,c.startTime-n),u=!1}return u}finally{x=null,N=i,P=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var $=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||P||(A=!0,i(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return D(w)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=$,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var l=a.delay;l="number"===typeof l&&0<l?s+l:s,a="number"===typeof a.timeout?a.timeout:j(e)}else a=j(e),l=s;return a=l+a,e={id:S++,callback:n,priorityLevel:e,startTime:l,expirationTime:a,sortIndex:-1},l>s?(e.sortIndex=l,_(K,e),null===D(w)&&e===D(K)&&(L?o():L=!0,r(B,l-s))):(e.sortIndex=a,_(w,e),A||P||(A=!0,i(M))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=D(w);return n!==x&&null!==x&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<x.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),o=It(r),a=n(53),s=It(a),l=n(56),u=It(l),c=n(28),d=It(c),f=n(57),h=It(f),p=n(58),m=It(p),g=n(59),E=It(g),v=n(29),y=It(v),b=n(13),T=It(b),C=n(12),O=It(C),I=n(30),_=It(I),D=n(31),R=It(D),k=n(60),w=It(k),K=n(61),S=It(K),x=n(62),N=It(x),P=n(63),A=It(P),L=n(64),F=It(L),B=n(65),M=It(B),j=n(68),$=It(j),H=n(69),z=It(H),q=n(70),U=It(q),V=n(71),W=It(V),G=n(72),X=It(G),Y=n(73),Q=It(Y),J=n(74),Z=It(J),ee=n(75),te=It(ee),ne=n(76),ie=It(ne),re=n(33),oe=It(re),ae=n(77),se=It(ae),le=n(34),ue=It(le),ce=n(19),de=It(ce),fe=n(35),he=It(fe),pe=n(37),me=It(pe),ge=n(78),Ee=It(ge),ve=n(79),ye=It(ve),be=n(80),Te=It(be),Ce=n(81),Oe=It(Ce),Ie=n(82),_e=It(Ie),De=n(83),Re=It(De),ke=n(84),we=It(ke),Ke=n(85),Se=It(Ke),xe=n(86),Ne=It(xe),Pe=n(87),Ae=It(Pe),Le=n(88),Fe=It(Le),Be=n(89),Me=It(Be),je=n(90),$e=It(je),He=n(25),ze=It(He),qe=n(26),Ue=It(qe),Ve=n(27),We=It(Ve),Ge=n(16),Xe=It(Ge),Ye=n(91),Qe=It(Ye),Je=n(92),Ze=It(Je),et=n(93),tt=It(et),nt=n(94),it=It(nt),rt=n(95),ot=It(rt),at=n(38),st=It(at),lt=n(96),ut=It(lt),ct=n(97),dt=It(ct),ft=n(98),ht=It(ft),pt=n(99),mt=It(pt),gt=n(36),Et=It(gt),vt=n(100),yt=It(vt),bt=n(101),Tt=It(bt),Ct=n(102),Ot=It(Ct);function It(e){return e&&e.__esModule?e:{default:e}}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(i={},_t(i,o.default.key,o.default),_t(i,s.default.key,s.default),_t(i,u.default.key,u.default),_t(i,d.default.key,d.default),_t(i,h.default.key,h.default),_t(i,m.default.key,m.default),_t(i,E.default.key,E.default),_t(i,y.default.key,y.default),_t(i,T.default.key,T.default),_t(i,O.default.key,O.default),_t(i,_.default.key,_.default),_t(i,S.default.key,S.default),_t(i,R.default.key,R.default),_t(i,w.default.key,w.default),_t(i,N.default.key,N.default),_t(i,A.default.key,A.default),_t(i,F.default.key,F.default),_t(i,M.default.key,M.default),_t(i,$.default.key,$.default),_t(i,z.default.key,z.default),_t(i,U.default.key,U.default),_t(i,W.default.key,W.default),_t(i,X.default.key,X.default),_t(i,Q.default.key,Q.default),_t(i,Z.default.key,Z.default),_t(i,te.default.key,te.default),_t(i,ie.default.key,ie.default),_t(i,oe.default.key,oe.default),_t(i,se.default.key,se.default),_t(i,ue.default.key,ue.default),_t(i,de.default.key,de.default),_t(i,he.default.key,he.default),_t(i,me.default.key,me.default),_t(i,Ee.default.key,Ee.default),_t(i,ye.default.key,ye.default),_t(i,_e.default.key,_e.default),_t(i,Te.default.key,Te.default),_t(i,Oe.default.key,Oe.default),_t(i,Re.default.key,Re.default),_t(i,we.default.key,we.default),_t(i,Se.default.key,Se.default),_t(i,Ne.default.key,Ne.default),_t(i,Ae.default.key,Ae.default),_t(i,Fe.default.key,Fe.default),_t(i,Me.default.key,Me.default),_t(i,$e.default.key,$e.default),_t(i,ze.default.key,ze.default),_t(i,Ue.default.key,Ue.default),_t(i,We.default.key,We.default),_t(i,Xe.default.key,Xe.default),_t(i,Qe.default.key,Qe.default),_t(i,Ze.default.key,Ze.default),_t(i,tt.default.key,tt.default),_t(i,it.default.key,it.default),_t(i,ot.default.key,ot.default),_t(i,st.default.key,st.default),_t(i,ut.default.key,ut.default),_t(i,dt.default.key,dt.default),_t(i,ht.default.key,ht.default),_t(i,mt.default.key,mt.default),_t(i,Et.default.key,Et.default),_t(i,yt.default.key,yt.default),_t(i,Tt.default.key,Tt.default),_t(i,Ot.default.key,Ot.default),i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(6),s=f(a),l=n(2),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));E.call(n);var i=e.context.editor.get("nativeEditor").getSelection(),r=i.getSelectedElement()||i.getStartElement();n._element=r;var o=n._element.findOne("img"),a=o?o.getAttribute("alt"):n._element.getAttribute("alt");return n.state={imageAlt:a},n}return m(t,e),i(t,[{key:"render",value:function(){return this.props.renderExclusive?o.default.createElement("div",{className:"ae-container-edit-link"},o.default.createElement("div",{className:"ae-container-input xxl"},o.default.createElement("input",{"aria-label":"alt",className:"ae-input",onChange:this._handleAltChange,onKeyDown:this._handleKeyDown,placeholder:"alt",ref:"refAltInput",title:"alt",type:"text",value:this.state.imageAlt})),o.default.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",onClick:this._updateImageAlt,title:AlloyEditor.Strings.confirm},o.default.createElement(d.default,{symbol:"check"}))):o.default.createElement("button",{className:"ae-button",onClick:this._requestExclusive,tabIndex:this.props.tabIndex},o.default.createElement("small",{className:"ae-icon small"},"Alt"))}},{key:"_focusAltInput",value:function(){var e=this,t=function(){s.default.findDOMNode(e.refs.refAltInput).focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)}}]),t}(o.default.Component);g.contextType=u.default,g.key="imageAlt";var E=function(){var e=this;this._handleAltChange=function(t){e.setState({imageAlt:t.target.value}),e._focusAltInput()},this._handleKeyDown=function(t){13===t.keyCode&&(t.preventDefault(),e._updateImageAlt())},this._requestExclusive=function(){e.props.requestExclusive(g.key)},this._updateImageAlt=function(){var t=e.context.editor.get("nativeEditor"),n=e.refs.refAltInput.value;e.setState({imageAlt:n});var i=e._element.findOne("img"),r=i||e._element;r.setAttribute("alt",n),t.fire("actionPerformed",e),e.props.cancelExclusive()}};t.default=u.default.toProps(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=p(r),a=n(0),s=p(a),l=n(2),u=p(l),c=n(1),d=p(c),f=n(16),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n="",i=this._getColors(),r={element:"span",attributes:{class:""}};i.forEach((function(i){r.attributes.class=i.styleClass,e._checkActive(r)&&(t=i.name,n=i.style.attributes.class)}));var o=this.props,a=o.expanded,l=o.tabIndex,u=o.toggleDropdown,c={activeStyle:t,onDismiss:u,showRemoveStylesItem:!1,styles:i};return s.default.createElement("div",{className:"ae-container ae-has-dropdown"},s.default.createElement("button",{"aria-expanded":a,className:"ae-toolbar-element",onClick:u,role:"combobox",tabIndex:l},s.default.createElement("span",{className:n},s.default.createElement(d.default,{symbol:"textbox"}))),a&&s.default.createElement(h.default,c))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),i={element:"span",attributes:{class:e}};n.getSelection().lock(),this._getColors().forEach((function(e){i.attributes.class=e.styleClass,t._checkActive(i)&&n.removeStyle(new CKEDITOR.style(i))})),i.attributes.class=e;var r=new CKEDITOR.style(i);n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.normal,style:{element:"span",attributes:{class:"text-body"}},styleClass:"",styleFn:this._applyStyle.bind(this,"")},{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleClass:"bg-primary",styleFn:this._applyStyle.bind(this,"bg-primary")},{name:AlloyEditor.Strings.disabled,style:{element:"span",attributes:{class:"text-secondary"}},styleClass:"bg-secondary",styleFn:this._applyStyle.bind(this,"bg-secondary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleClass:"bg-success",styleFn:this._applyStyle.bind(this,"bg-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleClass:"bg-danger",styleFn:this._applyStyle.bind(this,"bg-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleClass:"bg-warning",styleFn:this._applyStyle.bind(this,"bg-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleClass:"bg-info",styleFn:this._applyStyle.bind(this,"bg-info")}]}}]),t}(s.default.Component);v.contextType=u.default,v.key="backgroundColor",v.propTypes={expanded:o.default.bool,label:o.default.string,showRemoveStylesItem:o.default.bool,styles:o.default.arrayOf(o.default.object),tabIndex:o.default.number,toggleDropdown:o.default.func},t.default=v},function(e,t,n){"use strict";var i=n(55);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=g(r),a=n(3),s=g(a),l=n(11),u=g(l),c=n(4),d=g(c),f=n(8),h=g(f),p=n(1),m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return E(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),i(t,[{key:"render",value:function(){var e="ae-button  "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.bold,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-bold",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bold},o.default.createElement(m.default,{symbol:"bold"}))}}]),t}(o.default.Component);b.defaultProps={command:"bold",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+66,name:"bold"},style:"coreStyles_bold"},b.key="bold",t.default=(0,s.default)((0,u.default)((0,d.default)((0,h.default)(b))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(28),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){if(this.props.renderExclusive)return o.default.createElement(s.default,this.props);var e=!(navigator.getUserMedia||navigator.webkitGetUserMedia&&"https"===location.protocol||navigator.mozGetUserMedia||navigator.msGetUserMedia),n=e?AlloyEditor.Strings.cameraDisabled:AlloyEditor.Strings.camera;return o.default.createElement("button",{"aria-label":n,className:"ae-button","data-type":"button-image-camera",disabled:e,onClick:this.props.requestExclusive.bind(t.key),tabIndex:this.props.tabIndex,title:n},o.default.createElement(u.default,{symbol:"camera"}))}}]),t}(o.default.Component);p.key="camera",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(15),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.code,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-code",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.code},o.default.createElement(h.default,{symbol:"code"}))}}]),t}(o.default.Component);v.defaultProps={style:{element:"pre"}},v.key="code",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=p(r),a=n(0),s=p(a),l=n(2),u=p(l),c=n(1),d=p(c),f=n(16),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getColors();n.some((function(n){e._checkActive(n.style)&&(t=n.name)}));var i=this.props,r=i.expanded,o=i.tabIndex,a=i.toggleDropdown,l={activeStyle:t,onDismiss:a,showRemoveStylesItem:!1,styles:n};return s.default.createElement("div",{className:"ae-container ae-has-dropdown"},s.default.createElement("button",{"aria-expanded":r,className:"ae-toolbar-element",onClick:a,role:"combobox",tabIndex:o},s.default.createElement("span",null,s.default.createElement(d.default,{symbol:"color-picker"}))),r&&s.default.createElement(h.default,l))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),i={element:"span",attributes:{class:e}},r=new CKEDITOR.style(i);n.getSelection().lock(),this._getColors().forEach((function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))})),n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getColors",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.primary,style:{element:"span",attributes:{class:"text-primary"}},styleFn:this._applyStyle.bind(this,"text-primary")},{name:AlloyEditor.Strings.success,style:{element:"span",attributes:{class:"text-success"}},styleFn:this._applyStyle.bind(this,"text-success")},{name:AlloyEditor.Strings.danger,style:{element:"span",attributes:{class:"text-danger"}},styleFn:this._applyStyle.bind(this,"text-danger")},{name:AlloyEditor.Strings.warning,style:{element:"span",attributes:{class:"text-warning"}},styleFn:this._applyStyle.bind(this,"text-warning")},{name:AlloyEditor.Strings.info,style:{element:"span",attributes:{class:"text-info"}},styleFn:this._applyStyle.bind(this,"text-info")},{name:AlloyEditor.Strings.dark,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-dark")},{name:AlloyEditor.Strings.darkGray,style:{element:"span",attributes:{class:"text-gray-dark"}},styleFn:this._applyStyle.bind(this,"text-gray-dark")},{name:AlloyEditor.Strings.secondary,style:{element:"span",attributes:{class:"text-secondary"}},styleFn:this._applyStyle.bind(this,"text-secondary")},{name:AlloyEditor.Strings.light,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-light")},{name:AlloyEditor.Strings.lighter,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-lighter")},{name:AlloyEditor.Strings.white,style:{element:"span",attributes:{class:"text-dark"}},styleFn:this._applyStyle.bind(this,"text-white")}]}}]),t}(s.default.Component);v.contextType=u.default,v.key="color",v.propTypes={expanded:o.default.bool,label:o.default.string,showRemoveStylesItem:o.default.bool,styles:o.default.arrayOf(o.default.object),tabIndex:o.default.number,toggleDropdown:o.default.func},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=f(r),a=n(0),s=f(a),l=n(31),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"render",value:function(){return this.props.renderExclusive?s.default.createElement(u.default,this.props):s.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-embed-video",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},s.default.createElement(d.default,{symbol:"video"}))}}]),t}(s.default.Component);g.key="embedVideo",g.propTypes={label:o.default.string,tabIndex:o.default.number},t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(11),s=f(a),l=n(30),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){var e,n,i,r;h(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._requestExclusive=function(){i.props.requestExclusive(t.key)},r=n,p(i,r)}return m(t,e),i(t,[{key:"render",value:function(){return this.props.renderExclusive?o.default.createElement(u.default,this.props):o.default.createElement("button",{"aria-label":AlloyEditor.Strings.link,className:"ae-button","data-type":"button-embed",onClick:this._requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.link},o.default.createElement(d.default,{symbol:"plus"}))}}]),t}(o.default.Component);g.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,name:"embed"}},g.key="embed",t.default=(0,s.default)(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(15),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.h1,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h1",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h1},o.default.createElement(h.default,{symbol:"h1"}))}}]),t}(o.default.Component);v.defaultProps={style:{element:"h1"}},v.key="h1",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(15),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.h2,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-h2",onClick:this.applyStyle,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.h2},o.default.createElement(h.default,{symbol:"h2"}))}}]),t}(o.default.Component);v.defaultProps={style:{element:"h2"}},v.key="h2",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.horizontalrule,className:"ae-button","data-type":"button-hline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.horizontalrule},o.default.createElement(u.default,{symbol:"hr"}))}}]),t}(o.default.Component);p.defaultProps={command:"horizontalrule"},p.key="hline",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(66),o=f(r),a=n(0),s=f(a),l=n(3),u=f(l),c=n(2),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e){e.className;var t=e.iconFile;return s.default.createElement(d.default.Consumer,null,(function(e){var n=e.editor,i=n.get("nativeEditor"),r=i.config.spritemap||"",a=o.default.dirname(r),l=o.default.join(a,t),u="ae-svg-icon";return s.default.createElement("svg",{className:u,height:"18",width:"18"},s.default.createElement("use",{href:l}))}))}var E=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("button",{"aria-label":"Smiles",className:"ae-button","data-type":"button-smiley",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:"Smiles"},s.default.createElement(g,{iconFile:"smiley.svg#smiley"}))}}]),t}(s.default.Component);E.defaultProps={command:"smiley"},E.key="smiley",t.default=(0,u.default)(E)},function(e,t,n){(function(e){function n(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e){"string"!==typeof e&&(e+="");var t,n=0,i=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===i&&(r=!1,i=t+1);return-1===i?"":e.slice(n,i)}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===o(e,-1);return e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"),e||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=i(e.split("/")),o=i(n.split("/")),a=Math.min(r.length,o.length),s=a,l=0;l<a;l++)if(r[l]!==o[l]){s=l;break}var u=[];for(l=s;l<r.length;l++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,r=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var n=i(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,i=-1,r=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===i&&(r=!1,i=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=a+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(67))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"===typeof clearTimeout?clearTimeout:a}catch(e){i=a}})();var u,c=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!d){var e=s(h);d=!0;var t=c.length;while(t){u=c,c=[];while(++f<t)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,l(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||d||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},o.default.createElement(h.default,{symbol:"align-image-center"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifycenter"},v.key="imageCenter",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},o.default.createElement(h.default,{symbol:"align-image-left"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifyleft"},v.key="imageLeft",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},o.default.createElement(h.default,{symbol:"align-image-right"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifyright"},v.key="imageRight",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=d(r),a=n(2),s=d(a),l=n(1),u=d(l),c=n(32);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(s)}return i("next")}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(e){var n=this;h(this,t);var i=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleClick=function(){i.fileInput.current.click()},i._onInputChange=function(){var e=i.fileInput.current;if(e.files.length){var t=new FileReader,r=e.files[0];t.onload=function(){var e=f(regeneratorRuntime.mark((function e(t){var o,a,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=i.context.editor.get("nativeEditor"),a=o.fire("beforeImageAdd",{imageFiles:r}),!a){e.next=17;break}return e.prev=3,e.next=6,(0,c.fitImage)(t.target.result,r.type);case 6:s=e.sent,l=CKEDITOR.dom.element.createFromHtml('<img src="'+s+'">'),o.insertElement(l),o.fire("actionPerformed",i),u={el:l,file:r},o.fire("imageAdd",u),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.warn("Failed to fit image with error",e.t0);case 17:case"end":return e.stop()}}),e,n,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),t.readAsDataURL(r),e.value=""}},i.fileInput=o.default.createRef(),i}return m(t,e),i(t,[{key:"render",value:function(){var e={display:"none"};return o.default.createElement("div",null,o.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},o.default.createElement(u.default,{symbol:"document-image"})),o.default.createElement("input",{accept:"image/*",onChange:this._onInputChange,ref:this.fileInput,style:e,type:"file"}))}}]),t}(o.default.Component);g.contextType=s.default,g.key="imageFromFile",t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.indent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-indent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.indent},o.default.createElement(h.default,{symbol:"indent-less"}))}}]),t}(o.default.Component);v.defaultProps={command:"indent"},v.key="indentBlock",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=g(r),a=n(3),s=g(a),l=n(11),u=g(l),c=n(4),d=g(c),f=n(8),h=g(f),p=n(1),m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return E(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.italic,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-italic",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.italic},o.default.createElement(m.default,{symbol:"italic"}))}}]),t}(o.default.Component);b.defaultProps={command:"italic",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+73,name:"italic"},style:"coreStyles_italic"},b.key="italic",t.default=(0,s.default)((0,u.default)((0,d.default)((0,h.default)(b))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){var e,n,i,r;d(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._handleClick=function(){i.execCommand(null)},r=n,f(i,r)}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.audio,className:"ae-button","data-type":"button-audio",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.audio},o.default.createElement(u.default,{symbol:"audio"}))}}]),t}(o.default.Component);p.defaultProps={command:"audioselector"},p.key="audio",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){var e,n,i,r;d(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._handleClick=function(){i.execCommand(null)},r=n,f(i,r)}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.image,className:"ae-button","data-type":"button-image",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.image},o.default.createElement(u.default,{symbol:"picture"}))}}]),t}(o.default.Component);p.defaultProps={command:"imageselector"},p.key="image",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){var e,n,i,r;d(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._handleClick=function(){i.execCommand(null)},r=n,f(i,r)}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.video,className:"ae-button","data-type":"button-video",onClick:this._handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.video},o.default.createElement(u.default,{symbol:"video"}))}}]),t}(o.default.Component);p.defaultProps={command:"videoselector"},p.key="video",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=g(r),a=n(0),s=g(a),l=n(11),u=g(l),c=n(20),d=g(c),f=n(34),h=g(f),p=n(37),m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return E(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),i(t,[{key:"render",value:function(){return this.props.renderExclusive?(this.props=this.mergeButtonCfgProps(),s.default.createElement(h.default,this.props)):s.default.createElement(m.default,this.props)}},{key:"_requestExclusive",value:function(){this.props.requestExclusive(t.key)}}]),t}(s.default.Component);b.defaultProps={keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76,name:"linkBrowse"}},b.key="linkBrowse",b.propTypes={label:o.default.string,tabIndex:o.default.number},t.default=(0,d.default)((0,u.default)(b))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.numberedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ol",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.numberedlist},o.default.createElement(h.default,{symbol:"list-ol"}))}}]),t}(o.default.Component);v.defaultProps={command:"numberedlist",style:{element:"ol"}},v.key="ol",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.outdent,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-outdent-block",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.outdent},o.default.createElement(h.default,{symbol:"indent-more"}))}}]),t}(o.default.Component);v.defaultProps={command:"outdent"},v.key="outdentBlock",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},o.default.createElement(h.default,{symbol:"align-left"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifyleft"},v.key="paragraphLeft",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},o.default.createElement(h.default,{symbol:"align-right"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifyright"},v.key="paragraphRight",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(13),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=o.default.createElement(u.default,{commands:this._getCommands(),inlineIcons:!1,listId:n,onDismiss:this.props.toggleDropdown}));var i=this.context.editor.get("nativeEditor"),r=this._getCommands().filter((function(e){var t=i.getCommand(e.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON})).pop()||this._getCommands()[0],a=r.icon;return o.default.createElement("div",{className:"ae-container-dropdown ae-container-dropdown-xsmall ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":r.label,"aria-owns":n,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},o.default.createElement("div",{className:"ae-container"},o.default.createElement(d.default,{symbol:a}),o.default.createElement(d.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"justifyleft",icon:"align-left",label:AlloyEditor.Strings.alignLeft},{command:"justifycenter",icon:"align-center",label:AlloyEditor.Strings.alignCenter},{command:"justifyright",icon:"align-right",label:AlloyEditor.Strings.alignRight},{command:"justifyblock",icon:"align-justify",label:AlloyEditor.Strings.alignJustify}]}}]),t}(o.default.Component);g.contextType=s.default,g.key="paragraphAlign",t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},o.default.createElement(h.default,{symbol:"align-center"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifycenter"},v.key="paragraphCenter",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(9),u=p(l),c=n(4),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.alignJustify,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-paragraph-justify",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignJustify},o.default.createElement(h.default,{symbol:"align-justify"}))}}]),t}(o.default.Component);v.defaultProps={command:"justifyblock"},v.key="paragraphJustify",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.quote,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-quote",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.quote},o.default.createElement(h.default,{symbol:"quote-right"}))}}]),t}(o.default.Component);v.defaultProps={command:"blockquote",style:{element:"blockquote"}},v.key="quote",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeformat,className:"ae-button","data-type":"button-removeformat",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.removeformat},o.default.createElement(u.default,{symbol:"remove-style"}))}}]),t}(o.default.Component);p.defaultProps={command:"removeFormat"},p.key="removeFormat",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(3),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.removeImage,"aria-pressed":!1,className:"ae-button",onClick:this.execCommand,title:AlloyEditor.Strings.removeImage},o.default.createElement(u.default,{symbol:"times-circle"}))}}]),t}(o.default.Component);p.defaultProps={command:"removeImage"},p.key="removeImage",t.default=(0,s.default)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return r.default.createElement("span",{className:"ae-separator"})}a.key="separator",t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=p(r),a=n(0),s=p(a),l=n(2),u=p(l),c=n(1),d=p(c),f=n(16),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e=this,t="1.0x",n=this._getSpacings();n.forEach((function(n){e._checkActive(n.style)&&(t=n.name)}));var i=this.props,r=i.editor,o=i.expanded,a=i.tabIndex,l=i.toggleDropdown,u={activeStyle:t,editor:r,onDismiss:l,showRemoveStylesItem:!1,styles:n};return s.default.createElement("div",{className:"ae-container ae-container-dropdown-small ae-has-dropdown"},s.default.createElement("button",{"aria-expanded":o,className:"ae-toolbar-element",onClick:l,role:"combobox",tabIndex:a},s.default.createElement("span",null,s.default.createElement(d.default,{symbol:"separator"}),"",t)),o&&s.default.createElement(h.default,u))}},{key:"_applyStyle",value:function(e){var t=this,n=this.context.editor.get("nativeEditor"),i={element:"div",attributes:{class:e}},r=new CKEDITOR.style(i);n.getSelection().lock(),this._getSpacings().forEach((function(e){t._checkActive(e.style)&&n.removeStyle(new CKEDITOR.style(e.style))})),n.applyStyle(r),n.getSelection().unlock(),n.fire("actionPerformed",this)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor"),n=!0,i=t.elementPath();return i&&i.lastElement?e.attributes.class.split(" ").forEach((function(e){n=n&&i.lastElement.hasClass(e)})):n=!1,n}},{key:"_getSpacings",value:function(){return this.props.styles||[{name:"1.0x",style:{element:"div",attributes:{class:""},type:1},styleFn:this._applyStyle.bind(this,"")},{name:"1.5x",style:{element:"div",attributes:{class:"mt-1 mb-1"},type:1},styleFn:this._applyStyle.bind(this,"mt-1 mb-1")},{name:"2.0x",style:{element:"div",attributes:{class:"mt-2 mb-2"},type:1},styleFn:this._applyStyle.bind(this,"mt-2 mb-2")},{name:"3.0x",style:{element:"div",attributes:{class:"mt-3 mb-3"},type:1},styleFn:this._applyStyle.bind(this,"mt-3 mb-3")},{name:"4.0x",style:{element:"div",attributes:{class:"mt-4 mb-4"},type:1},styleFn:this._applyStyle.bind(this,"mt-4 mb-4")},{name:"5.0x",style:{element:"div",attributes:{class:"mt-5 mb-5"},type:1},styleFn:this._applyStyle.bind(this,"mt-5 mb-5")}]}}]),t}(s.default.Component);v.contextType=u.default,v.key="spacing",v.propTypes={expanded:o.default.bool,label:o.default.string,showRemoveStylesItem:o.default.bool,styles:o.default.arrayOf(o.default.object),tabIndex:o.default.number,toggleDropdown:o.default.func},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.strike,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-strike",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.strike},o.default.createElement(h.default,{symbol:"strikethrough"}))}}]),t}(o.default.Component);v.defaultProps={command:"strike",style:"coreStyles_strike"},v.key="strike",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(1),u=f(l),c=n(16),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"render",value:function(){var e=this,t=AlloyEditor.Strings.normal,n=this._getStyles();n.forEach((function(n){e._checkActive(n.style)&&(t=n.name)}));var i=void 0;return this.props.expanded&&(i=o.default.createElement(d.default,{activeStyle:t,onDismiss:this.props.toggleDropdown,showRemoveStylesItem:this.props.showRemoveStylesItem,styles:n})),o.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.styles+" "+t,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.styles+" "+t},o.default.createElement("div",{className:"ae-container"},o.default.createElement("span",{className:"ae-container-dropdown-selected-item"},t),o.default.createElement(u.default,{symbol:"caret-bottom"}))),i)}},{key:"_checkActive",value:function(e){var t=this.context.editor.get("nativeEditor");e=CKEDITOR.tools.merge({element:"span"},e);var n=new CKEDITOR.style(e);return n.checkActive(t.elementPath(),t)}},{key:"_getStyles",value:function(){return this.props.styles||[{name:AlloyEditor.Strings.h1,style:{element:"h1"}},{name:AlloyEditor.Strings.h2,style:{element:"h2"}},{name:AlloyEditor.Strings.formatted,style:{element:"pre"}},{name:AlloyEditor.Strings.cite,style:{element:"cite"}},{name:AlloyEditor.Strings.code,style:{element:"code"}}]}}]),t}(o.default.Component);g.contextType=s.default,g.key="styles",t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.subscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-subscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.subscript},o.default.createElement(h.default,{symbol:"subscript"}))}}]),t}(o.default.Component);v.defaultProps={command:"subscript",style:"coreStyles_subscript"},v.key="subscript",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.superscript,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-superscript",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.superscript},o.default.createElement(h.default,{symbol:"superscript"}))}}]),t}(o.default.Component);v.defaultProps={command:"superscript",style:"coreStyles_superscript"},v.key="superscript",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(13),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=o.default.createElement(s.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),o.default.createElement("div",{className:"ae-container ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.cell,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.cell},o.default.createElement(u.default,{symbol:"add-cell"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"cellInsertBefore",label:AlloyEditor.Strings.cellInsertBefore},{command:"cellInsertAfter",label:AlloyEditor.Strings.cellInsertAfter},{command:"cellDelete",label:AlloyEditor.Strings.cellDelete},{command:"cellMerge",label:AlloyEditor.Strings.cellMerge},{command:"cellMergeDown",label:AlloyEditor.Strings.cellMergeDown},{command:"cellMergeRight",label:AlloyEditor.Strings.cellMergeRight},{command:"cellHorizontalSplit",label:AlloyEditor.Strings.cellSplitHorizontal},{command:"cellVerticalSplit",label:AlloyEditor.Strings.cellSplitVertical}]}}]),t}(o.default.Component);p.key="tableCell",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(13),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=o.default.createElement(s.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),o.default.createElement("div",{className:"ae-container ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.column,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"listbox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.column},o.default.createElement(u.default,{symbol:"add-column"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"columnInsertBefore",label:AlloyEditor.Strings.columnInsertBefore},{command:"columnInsertAfter",label:AlloyEditor.Strings.columnInsertAfter},{command:"columnDelete",label:AlloyEditor.Strings.columnDelete}]}}]),t}(o.default.Component);p.key="tableColumn",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(13),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"render",value:function(){var e=void 0,n=void 0;this.props.expanded&&(n=t.key+"List",e=o.default.createElement(u.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown}));var i=new CKEDITOR.Table(this.context.editor.get("nativeEditor")).getHeading(),r=AlloyEditor.Strings.headers+":",a=AlloyEditor.Strings["headers"+i];return o.default.createElement("div",{className:"ae-container-dropdown-xl ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":"",className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:""},o.default.createElement("div",{className:"ae-container"},o.default.createElement("span",{className:"ae-container-dropdown-selected-item"},r," ",o.default.createElement("strong",null,a)),o.default.createElement(d.default,{symbol:"caret-bottom"}))),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"tableHeadingNone",label:AlloyEditor.Strings.headersNone},{command:"tableHeadingRow",label:AlloyEditor.Strings.headersRow},{command:"tableHeadingColumn",label:AlloyEditor.Strings.headersColumn},{command:"tableHeadingBoth",label:AlloyEditor.Strings.headersBoth}]}}]),t}(o.default.Component);g.contextType=s.default,g.key="tableHeading",t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(2),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){var e,n,i,r;d(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i._removeTable=function(){var e=i.context.editor.get("nativeEditor"),t=new CKEDITOR.Table(e);t.remove(),e.fire("actionPerformed",i)},r=n,f(i,r)}return h(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.deleteTable,className:"ae-button","data-type":"button-table-remove",onClick:this._removeTable,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.deleteTable},o.default.createElement(u.default,{symbol:"trash"}))}}]),t}(o.default.Component);p.contextType=s.default,p.key="tableRemove",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(13),s=c(a),l=n(1),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){var e=void 0,n=void 0;return this.props.expanded&&(n=t.key+"List",e=o.default.createElement(s.default,{commands:this._getCommands(),listId:n,onDismiss:this.props.toggleDropdown})),o.default.createElement("div",{className:"ae-container ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":AlloyEditor.Strings.row,"aria-owns":n,className:"ae-button",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.row},o.default.createElement(u.default,{symbol:"add-row"})),e)}},{key:"_getCommands",value:function(){return this.props.commands||[{command:"rowInsertBefore",label:AlloyEditor.Strings.rowInsertBefore},{command:"rowInsertAfter",label:AlloyEditor.Strings.rowInsertAfter},{command:"rowDelete",label:AlloyEditor.Strings.rowDelete}]}}]),t}(o.default.Component);p.key="tableRow",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(1),s=c(a),l=n(38),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),i(t,[{key:"render",value:function(){return this.props.renderExclusive?o.default.createElement(u.default,this.props):o.default.createElement("button",{"aria-label":AlloyEditor.Strings.table,className:"ae-button","data-type":"button-table",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.table},o.default.createElement(s.default,{symbol:"table"}))}}]),t}(o.default.Component);p.key="table",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(4),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=280,E=function(e){function t(){var e,n,i,r;h(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return i=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n=i,i.handleClick=function(){var e=i.context.editor.get("nativeEditor"),t=new CKEDITOR.Link(e);i.isActive()?t.remove(t.getFromSelection()):t.create(i._getHref(),{class:"ae-twitter-link",target:"_blank"}),e.fire("actionPerformed",i)},r=n,p(i,r)}return m(t,e),i(t,[{key:"isActive",value:function(){var e=new CKEDITOR.Link(this.context.editor.get("nativeEditor")).getFromSelection();return e&&-1!==e.getAttribute("href").indexOf("twitter.com/intent/tweet")}},{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.twitter,className:e,"data-type":"button-twitter",onClick:this.handleClick,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.twitter},o.default.createElement(d.default,{symbol:"twitter"}))}},{key:"_getHref",value:function(){var e=this.context.editor.get("nativeEditor"),t=e.getSelection().getSelectedText().substring(0,g),n=this.props.url,i=this.props.via,r="https://twitter.com/intent/tweet?text="+t;return n&&(r+="&url="+n),i&&(r+="&via="+i),r}}]),t}(o.default.Component);E.contextType=s.default,E.key="twitter",t.default=(0,u.default)(E)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=p(r),a=n(3),s=p(a),l=n(4),u=p(l),c=n(8),d=p(c),f=n(1),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.bulletedlist,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-ul",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.bulletedlist},o.default.createElement(h.default,{symbol:"list-ul"}))}}]),t}(o.default.Component);v.defaultProps={command:"bulletedlist",style:{element:"ul"}},v.key="ul",t.default=(0,s.default)((0,u.default)((0,d.default)(v)))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=g(r),a=n(3),s=g(a),l=n(11),u=g(l),c=n(4),d=g(c),f=n(8),h=g(f),p=n(1),m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return E(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),i(t,[{key:"render",value:function(){var e="ae-button "+this.getStateClasses();return o.default.createElement("button",{"aria-label":AlloyEditor.Strings.underline,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-underline",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.underline},o.default.createElement(m.default,{symbol:"underline"}))}}]),t}(o.default.Component);b.defaultProps={command:"underline",keystroke:{fn:"execCommand",keys:CKEDITOR.CTRL+85,name:"underline"},style:"coreStyles_underline"},b.key="underline",t.default=(0,s.default)((0,u.default)((0,d.default)((0,h.default)(b))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(104);Object.defineProperty(t,"ButtonActionStyle",{enumerable:!0,get:function(){return E(i).default}});var r=n(105);Object.defineProperty(t,"ButtonCommandActive",{enumerable:!0,get:function(){return E(r).default}});var o=n(106);Object.defineProperty(t,"ButtonCommand",{enumerable:!0,get:function(){return E(o).default}});var a=n(107);Object.defineProperty(t,"ButtonKeystroke",{enumerable:!0,get:function(){return E(a).default}});var s=n(108);Object.defineProperty(t,"ButtonProps",{enumerable:!0,get:function(){return E(s).default}});var l=n(109);Object.defineProperty(t,"ButtonStateClasses",{enumerable:!0,get:function(){return E(l).default}});var u=n(110);Object.defineProperty(t,"ButtonStyle",{enumerable:!0,get:function(){return E(u).default}});var c=n(111);Object.defineProperty(t,"ToolbarButtons",{enumerable:!0,get:function(){return E(c).default}});var d=n(112);Object.defineProperty(t,"WidgetArrowBox",{enumerable:!0,get:function(){return E(d).default}});var f=n(113);Object.defineProperty(t,"WidgetDropdown",{enumerable:!0,get:function(){return E(f).default}});var h=n(114);Object.defineProperty(t,"WidgetExclusive",{enumerable:!0,get:function(){return E(h).default}});var p=n(115);Object.defineProperty(t,"WidgetFocusManager",{enumerable:!0,get:function(){return E(p).default}});var m=n(39);Object.defineProperty(t,"WidgetInteractionPoint",{enumerable:!0,get:function(){return E(m).default}});var g=n(116);function E(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"WidgetPosition",{enumerable:!0,get:function(){return E(g).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={applyStyle:function(){if(r.default.isFunction(this.isActive)&&r.default.isFunction(this.getStyle)){var e=this.props.editor.get("nativeEditor");e.getSelection().lock(),this.isActive()?e.removeStyle(this.getStyle()):e.applyStyle(this.getStyle()),e.getSelection().unlock(),e.fire("actionPerformed",this)}}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={isActive:function(){var e=this.props.editor.get("nativeEditor"),t=e.getCommand(this.props.command);return!!t&&t.state===CKEDITOR.TRISTATE_ON}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={propTypes:{command:r.default.string.isRequired,modifiesSelection:r.default.bool},execCommand:function(e){var t=this.props.editor.get("nativeEditor");t.execCommand(this.props.command,e),this.props.modifiesSelection&&t.selectionChange(!0),t.fire("actionPerformed",this)}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=s(i),o=n(5),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l={propTypes:{keystroke:r.default.object.isRequired},componentWillMount:function(){var e=this.props.editor.get("nativeEditor"),t=this.props.keystroke,n=t.name||(1e9*Math.random()>>>0).toString(),i=e.getCommand(n);i||(i=new CKEDITOR.command(e,{exec:function(e){var n=t.fn;a.default.isString(n)?this[n].call(this,e):a.default.isFunction(n)&&n.call(this,e)}.bind(this)}),e.addCommand(n,i)),this._defaultKeystrokeCommand=e.keystrokeHandler.keystrokes[t.keys],e.setKeystroke(t.keys,n)},componentWillUnmount:function(){this.props.editor.get("nativeEditor").setKeystroke(this.props.keystroke.keys,this._defaultKeystrokeCommand)}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=s(i),o=n(19),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l={propTypes:{editor:r.default.object.isRequired},mergeButtonCfgProps:function(e){e=e||this.props;var t=this.props.editor.get("nativeEditor"),n=t.config.buttonCfg||{},i=CKEDITOR.tools.merge(e,n[a.default.key]);return i}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={getStateClasses:function(){var e="";return r.default.isFunction(this.isActive)&&this.isActive()&&(e+="ae-button-pressed"),r.default.isFunction(this.isDisabled)&&this.isDisabled()&&(e+=" ae-button-disabled"),e}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=s(i),o=n(5),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l={propTypes:{style:r.default.oneOfType([r.default.object,r.default.string]),styleFn:r.default.func},componentWillMount:function(){var e=this.props.style;if(a.default.isString(e)){var t=e.split("."),n=this.props.editor.get("nativeEditor").config,i=t.shift();while(i&&a.default.isObject(n)&&a.default.isObject(n[i]))n=n[i],i=t.shift();a.default.isObject(n)&&(e=n)}this._style=new CKEDITOR.style(e)},componentWillUnmount:function(){this._style=null},getStyle:function(){return this._style},isActive:function(){var e=this.props.editor.get("nativeEditor"),t=e.elementPath();return this.getStyle().checkActive(t,e)}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=s(i),o=n(5),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l={getToolbarButtonGroups:function(e,t){var n=this;return a.default.isFunction(e)&&(e=e.call(this)||[]),e.reduce((function(i,r){return Array.isArray(r)?(i.push(n.getToolbarButtons(r,t)),i):n.getToolbarButtons(e,t)}),[])},getToolbarButtons:function(e,t){var n={},i=this.props.editor.get("nativeEditor"),o=i.config.buttonCfg||{};a.default.isFunction(e)&&(e=e.call(this)||[]);var s=this.filterExclusive(e.filter((function(e){return e&&(AlloyEditor.Buttons[e]||AlloyEditor.Buttons[e.name])})).map((function(e){return a.default.isString(e)?(n[e]=o[e],e=AlloyEditor.Buttons[e]):a.default.isString(e.name)&&(n[AlloyEditor.Buttons[e.name].key]=CKEDITOR.tools.merge(o[e],e.cfg),e=AlloyEditor.Buttons[e.name]),e}))).map((function(e,i){var o=this.mergeExclusiveProps({editor:this.props.editor,key:"separator"!==e.key?e.key:e.key+"-"+i,tabKey:e.key,tabIndex:this.props.trigger&&this.props.trigger.props.tabKey===e.key?0:-1,trigger:this.props.trigger},e.key);return o=this.mergeDropdownProps(o,e.key),t&&(o=CKEDITOR.tools.merge(o,t)),o=CKEDITOR.tools.merge(o,n[e.key]),r.default.createElement(e,o)}),this);return s}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={getArrowBoxClasses:function(){var e="ae-arrow-box";return r.default.isFunction(this.getInteractionPoint)&&this.getInteractionPoint()&&(this.getInteractionPoint().direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?e+=" ae-arrow-box-top":e+=" ae-arrow-box-bottom"),e}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var a={componentWillReceiveProps:function(e){this.setState({dropdownTrigger:null,itemDropdown:null})},getInitialState:function(){return{dropdownTrigger:null,itemDropdown:null}},mergeDropdownProps:function(e,t){return CKEDITOR.tools.merge(e,{expanded:this.state.itemDropdown===t,tabIndex:this.state.dropdownTrigger===t?0:-1,toggleDropdown:this.toggleDropdown.bind(this,t)})},toggleDropdown:function(e,t){this.setState({dropdownTrigger:e,itemDropdown:e!==this.state.itemDropdown?e:null},(function(){this.state.itemDropdown||(this.moveFocus?this.moveFocus(t):r.default.findDOMNode(this).focus())}))}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={cancelExclusive:function(e){this.state.itemExclusive===e&&this.setState({itemExclusive:null})},componentWillReceiveProps:function(e){this.setState({itemExclusive:null})},filterExclusive:function(e){var t=this;return e.filter((function(e){return t.state.itemExclusive?t.state.itemExclusive===e.key?e:void 0:e}))},mergeExclusiveProps:function(e,t){return CKEDITOR.tools.merge(e,{cancelExclusive:this.cancelExclusive.bind(this,t),renderExclusive:this.state.itemExclusive===t,requestExclusive:this.requestExclusive.bind(this,t)})},requestExclusive:function(e){this.setState({itemExclusive:e})}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=u(i),o=n(6),a=u(o),s=n(5),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var c=0,d=1,f=-1,h=0,p=1,m=2,g={propTypes:{onDismiss:r.default.func,circular:r.default.bool.isRequired,focusFirstChild:r.default.bool,descendants:r.default.string.isRequired,keys:r.default.object.isRequired},componentDidMount:function(){this._refresh()},componentDidUpdate:function(){this._refresh()},focus:function(e){if((!e||this._isValidTarget(e.target))&&this._descendants&&this._descendants.length){var t=this._descendants[this._activeDescendant];document.activeElement===t||this.props.focusFirstChild||-1===this._descendants.indexOf(document.activeElement)&&t.focus(),e&&(e.stopPropagation(),e.preventDefault())}},handleKey:function(e){if(this._isValidTarget(e.target)&&this._descendants){var t=this._getFocusAction(e);t.type&&(e.stopPropagation(),e.preventDefault(),t.type===p&&this._moveFocus(t.direction),t.type===m&&this.props.onDismiss(t.direction))}},moveFocus:function(e){e=l.default.isNumber(e)?e:0,this._moveFocus(e)},_getFocusAction:function(e){var t={type:h};if(this.props.keys){var n=this._getFocusMoveDirection(e);n&&(t.direction=n,t.type=p);var i=this._getFocusDismissAction(e,n);i.dismiss&&(t.direction=i.direction,t.type=m)}return t},_getFocusDismissAction:function(e,t){var n={direction:t,dismiss:!1};return this.props.onDismiss&&(this._isValidKey(e.keyCode,this.props.keys.dismiss)&&(n.dismiss=!0),this._isValidKey(e.keyCode,this.props.keys.dismissNext)&&(n.dismiss=!0,n.direction=d),this._isValidKey(e.keyCode,this.props.keys.dismissPrev)&&(n.dismiss=!0,n.direction=f),n.dismiss||this.props.circular||!t||(n.dismiss=t===f&&0===this._activeDescendant||t===d&&this._activeDescendant===this._descendants.length-1)),n},_getFocusMoveDirection:function(e){var t=c;return this._isValidKey(e.keyCode,this.props.keys.next)&&(t=d),this._isValidKey(e.keyCode,this.props.keys.prev)&&(t=f),e.shifKey&&(t*=-1),t},_isValidKey:function(e,t){return l.default.isArray(t)?-1!==t.indexOf(e):e===t},_isValidTarget:function(e){var t=e.tagName.toLowerCase();return"input"!==t&&"select"!==t&&"textarea"!==t},_moveFocus:function(e){var t=this._descendants.length,n=this._descendants[this._activeDescendant];n.setAttribute("tabIndex",-1),this._activeDescendant+=e,this.props.circular?this._activeDescendant=(this._activeDescendant%t+t)%t:this._activeDescendant=Math.max(Math.min(this._activeDescendant,t-1),0),n=this._descendants[this._activeDescendant],n.setAttribute("tabIndex",0),n.focus()},_refresh:function(){var e=this,t=a.default.findDOMNode(this);if(t){var n=t.querySelectorAll(this.props.descendants),i=[];this._descendants=[],Array.prototype.slice.call(n).forEach((function(t){var n=t.getAttribute("data-tabindex");n?i.push(t):e._descendants.push(t)})),i=i.sort((function(e,t){return l.default.toInt(e.getAttribute("data-tabindex"))>l.default.toInt(t.getAttribute("data-tabindex"))})),this._descendants=i.concat(this._descendants),this._activeDescendant=0,this._descendants.some((function(t,n){if("0"===t.getAttribute("tabindex"))return e._activeDescendant=n,e.focus(),!0}))}}};t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=u(i),o=n(6),a=u(o),s=n(39),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var c={mixins:[l.default],propTypes:{constrainToViewport:r.default.bool,gutter:r.default.object},getDefaultProps:function(){return{gutter:{left:0,top:10},constrainToViewport:!0}},cancelAnimation:function(){window.cancelAnimationFrame&&window.cancelAnimationFrame(this._animationFrameId)},getConstrainedPosition:function(e,t){t=t||new CKEDITOR.dom.window(window).getViewPaneSize();var n=e.left,i=e.top;return e.left+e.width>t.width&&(n-=e.left+e.width-t.width),i<0&&(i=0),{x:n,y:i}},getWidgetXYPoint:function(e,t,n){var i=a.default.findDOMNode(this),r=this.props.gutter,o=i.offsetWidth,s=o/2;return n===CKEDITOR.SELECTION_TOP_TO_BOTTOM||n===CKEDITOR.SELECTION_BOTTOM_TO_TOP?(e=e-r.left-s,t=n===CKEDITOR.SELECTION_TOP_TO_BOTTOM?t+r.top:t-i.offsetHeight-r.top):n!==CKEDITOR.SELECTION_LEFT_TO_RIGHT&&n!==CKEDITOR.SELECTION_RIGHT_TO_LEFT||(e=n===CKEDITOR.SELECTION_LEFT_TO_RIGHT?e+r.left+i.offsetHeight/2:e-3*i.offsetHeight/2-r.left,t=t-r.top-i.offsetHeight/2),e<0&&(e=0),e>document.body.offsetWidth-s&&(e=document.body.offsetWidth-s),t<0&&(t=0),[e,t]},isVisible:function(){var e=a.default.findDOMNode(this);if(e){var t=new CKEDITOR.dom.element(e);return t.hasClass("alloy-editor-visible")}return!1},moveToPoint:function(e,t){var n=new CKEDITOR.dom.element(a.default.findDOMNode(this));n.setStyles({left:e[0]+"px",top:e[1]+"px",opacity:0,pointerEvents:"none"}),n.removeClass("alloy-editor-invisible"),this._animate((function(){n.addClass("ae-toolbar-transition"),n.addClass("alloy-editor-visible"),n.setStyles({left:t[0]+"px",top:t[1]+"px",opacity:1}),setTimeout((function(){n.setStyles({pointerEvents:""})}),150)}))},show:function(){var e=a.default.findDOMNode(this),t=this.props.editor.get("uiNode"),n=t?t.scrollTop:0;if(!this.isVisible()&&e){var i=this.getInteractionPoint();if(i){var r=new CKEDITOR.dom.element(e),o=void 0,s=void 0,l=void 0,u=void 0;if(o=l=parseFloat(r.getStyle("left")),s=u=parseFloat(r.getStyle("top")),this.props.constrainToViewport){var c=this.getConstrainedPosition({height:parseFloat(e.offsetHeight),left:o,top:s,width:parseFloat(e.offsetWidth)});o=c.x,s=c.y}u=i.direction===CKEDITOR.SELECTION_TOP_TO_BOTTOM?this.props.selectionData.region.bottom+n:this.props.selectionData.region.top+n,this.moveToPoint([l,u],[o,s])}}},updatePosition:function(){var e=this.getInteractionPoint(),t=a.default.findDOMNode(this);if(e&&t){var n=this.props.editor.get("uiNode")||document.body,i=getComputedStyle(n),r=parseInt(i.getPropertyValue("margin-left"),10),o=parseInt(i.getPropertyValue("margin-right"),10),s=r+n.clientWidth+o,l="BODY"!==n.tagName?n.scrollTop:0,u=this.getWidgetXYPoint(e.x,e.y,e.direction);u[1]+=l,u[0]<0&&(u[0]=0),u[0]>s-t.offsetWidth&&(u[0]=s-t.offsetWidth),new CKEDITOR.dom.element(t).setStyles({left:u[0]+"px",top:u[1]+"px"})}},_animate:function(e){window.requestAnimationFrame?this._animationFrameId=window.requestAnimationFrame(e):e()}};t.default=c},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});var r=n(118),o=l(r),a=n(119),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(i={},u(i,o.default.key,o.default),u(i,s.default.key,s.default),i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=b(r),a=n(6),s=b(a),l=n(2),u=b(l),c=n(21),d=b(c),f=n(17),h=b(f),p=n(18),m=b(p),g=n(10),E=b(g),v=n(1),y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=1,_=2,D=function(e){function t(e){T(this,t);var n=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return O(t,e),i(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition(),this.props.renderExclusive&&this.focus()}},{key:"render",value:function(){if(!this.state.itemExclusive&&this.props.editorEvent&&this.props.editorEvent.data.nativeEvent.target&&!this.props.editorEvent.data.nativeEvent.target.isContentEditable)return null;var e=this._getButtons(),t=this._getToolbarClassName();return o.default.createElement("div",{"aria-label":AlloyEditor.Strings.add,className:t,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},o.default.createElement("div",{className:"ae-container"},e))}},{key:"_getButtons",value:function(){var e=void 0;return this.props.renderExclusive?e=this.getToolbarButtons(this.props.config.buttons):this.props.selectionData&&this.props.selectionData.region&&(e=o.default.createElement("button",{"aria-label":AlloyEditor.Strings.add,className:"ae-button ae-button-add",onClick:this.props.requestExclusive.bind(this,t.key),title:AlloyEditor.Strings.add},o.default.createElement(y.default,{symbol:"plus"}))),e}},{key:"_getToolbarClassName",value:function(){var e="ae-toolbar-add";return this.props.renderExclusive&&(e="ae-toolbar "+this.getArrowBoxClasses()),e}},{key:"_updatePosition",value:function(){var e=void 0;if(s.default.findDOMNode(this))if(this.props.renderExclusive)this.updatePosition(),this.show();else if(this.props.selectionData&&(e=this.props.selectionData.region),e){var t=s.default.findDOMNode(this),n=new CKEDITOR.dom.element(t),i=e.startRect||e,r=this.context.editor.get("nativeEditor"),o=r.editable().getClientRect(),a=void 0,l=this.props.config.position||this.props.position;a=l===I?o.left-t.offsetWidth-this.props.gutterExclusive.left+"px":o.right+this.props.gutterExclusive.left+"px",t.style.left=a,t.style.top=Math.floor((e.bottom+e.top)/2)+"px";var u=this.context.editor.get("uiNode"),c=u?u.scrollTop:0;"auto"!==r.element.getStyle("overflow")?t.style.top=Math.floor(e.top-t.offsetHeight/2+i.height/2+c)+"px":t.style.top=Math.floor(r.element.$.offsetTop+i.height/2-t.offsetHeight/2)+"px",t.style.opacity=1,n.removeClass("ae-arrow-box"),this.cancelAnimation()}}}]),t}(o.default.Component);D.contextType=u.default,D.key="add",D.left=I,D.right=_,D.defaultProps={circular:!0,descendants:".ae-button",gutterExclusive:{left:10,top:0},keys:{dismiss:[27],next:[39,40],prev:[37,38]},position:I},t.default=(0,h.default)((0,m.default)((0,E.default)((0,d.default)(D))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=T(o),s=n(6),l=T(s),u=n(2),c=T(u),d=n(5),f=T(d),h=n(21),p=T(h),m=n(17),g=T(m),E=n(18),v=T(E),y=n(10),b=T(y);function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(e){C(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return I(t,e),r(t,[{key:"componentDidMount",value:function(){this._updatePosition()}},{key:"componentDidUpdate",value:function(e,t){this._updatePosition()}},{key:"render",value:function(){var e=this._getCurrentSelection();if(e){var t=this._getSelectionFunction(e.getArrowBoxClasses),n=void 0;n=t?t():this.getArrowBoxClasses();var r="ae-toolbar-styles "+n,o=e.buttons;"object"!==("undefined"===typeof o?"undefined":i(o))||Array.isArray(o)||(o=o[this.context.editor.get("mode")]||o["simple"]);var s=this.getToolbarButtonGroups(o,{manualSelection:this.props.editorEvent?this.props.editorEvent.data.manualSelection:null,selectionType:e.name}),l=s.filter((function(e){return Array.isArray(e)})).length>0,u="ae-container";return l&&(u+=" ae-container-column"),a.default.createElement("div",{"aria-label":AlloyEditor.Strings.styles,className:r,"data-tabindex":this.props.config.tabIndex||0,onFocus:this.focus.bind(this),onKeyDown:this.handleKey.bind(this),role:"toolbar",tabIndex:"-1"},a.default.createElement("div",{className:u},s.map((function(e,t){return Array.isArray(e)?a.default.createElement("div",{className:"ae-row",key:t},e.map((function(e){return e}))):e}))))}return null}},{key:"_getSelectionFunction",value:function(e){var t=void 0;if(f.default.isFunction(e))t=e;else if(f.default.isString(e)){var n=e.split("."),i=window,r=n.shift();while(r&&f.default.isObject(i)&&f.default.isObject(i[r]))i=i[r],r=n.shift();f.default.isFunction(i)&&(t=i)}return t}},{key:"_getCurrentSelection",value:function(){var e=this.props.editorEvent?this.props.editorEvent.data:null,t=void 0;return e&&this.props.config.selections.some((function(n){var i=this._getSelectionFunction(n.test),r=void 0;return i&&(r=e.manualSelection===n.name||i({data:e,editor:this.context.editor})),r&&(t=n),r}),this),t}},{key:"_updatePosition",value:function(){if(l.default.findDOMNode(this)){var e=this._getCurrentSelection(),t=void 0;if(e){var n=this._getSelectionFunction(e.setPosition);n&&(t=n.call(this,{editor:this.context.editor,editorEvent:this.props.editorEvent,selectionData:this.props.selectionData}))}t||(this.updatePosition(),this.show())}}}]),t}(a.default.Component);_.contextType=c.default,_.defaultProps={circular:!0,descendants:".ae-input, .ae-button:not([disabled]), .ae-toolbar-element",keys:{dismiss:[27],next:[39,40],prev:[37,38]}},_.key="styles",t.default=(0,g.default)((0,v.default)((0,b.default)((0,p.default)(_))))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(121),n(44),n(147);var i=n(0),r=b(i),o=n(6),a=b(o),s=n(154),l=n(156),u=b(l),c=n(157),d=b(c),f=n(5),h=b(f),p=n(22),m=b(p),g=n(43),E=b(g),v=n(2),y=b(v);function b(e){return e&&e.__esModule?e:{default:e}}var T=560,C=315;function O(e){O.superclass.constructor.call(this,e)}(0,m.default)(O,d.default,{initializer:function(e){var t=this,n=this.get("srcNode");this.get("enableContentEditable")&&n.setAttribute("contenteditable","true");var i=CKEDITOR.inline(n);if(i.config.allowedContent=this.get("allowedContent"),i.config.toolbars=this.get("toolbars"),i.config.removePlugins=this.get("removePlugins"),i.config.extraPlugins=this.get("extraPlugins"),i.config.embedProviders=this.get("embedProviders"),i.config.placeholderClass=this.get("placeholderClass"),i.config.pasteFromWordRemoveStyles=!1,i.config.pasteFromWordRemoveFontStyles=!1,i.config.selectionKeystrokes=this.get("selectionKeystrokes"),i.config.spritemap=this.get("spritemap"),h.default.mix(i.config,e),CKEDITOR.env.ie&&!CKEDITOR.env.edge){var r=11===CKEDITOR.env.version?"ae_dragresize_ie11":"ae_dragresize_ie";i.config.extraPlugins=i.config.extraPlugins.replace("ae_dragresize",r),i.config.removePlugins=i.config.removePlugins.replace("ae_dragresize",r)}i.once("contentDom",(function(){t._addReadOnlyLinkClickListener(i);for(var e=i.editable(),n=t.get("extraCommands"),r=Object.keys(n),o=0;o<r.length;o++){var a=r[o];i.commands[a]||i.addCommand(a,n[a])}e.addClass("ae-editable")})),this._editor=i,AlloyEditor.loadLanguageResources(this._renderUI.bind(this))},destructor:function(){this._destroyed=!0,this._editorUIElement&&(a.default.unmountComponentAtNode(this._editorUIElement),this._editorUIElement.parentNode.removeChild(this._editorUIElement));var e=this.get("nativeEditor");if(e){var t=e.editable();for(var n in t&&(t.removeClass("ae-editable"),this.get("enableContentEditable")&&this.get("srcNode").setAttribute("contenteditable","false")),this._clearSelections(),e.destroy(),CKEDITOR.instances)n.destroy()}},_clearSelections:function(){var e=this.get("nativeEditor"),t="function"!=typeof window.getSelection;t?e.document.$.selection.empty():e.document.getWindow().$.getSelection().removeAllRanges()},_addReadOnlyLinkClickListener:function(e){e.editable().on("click",this._defaultReadOnlyClickFn,this,{editor:e})},_defaultReadOnlyClickFn:function(e){var t=e.data.$,n=t.ctrlKey||t.metaKey,i=this._editor.config.readOnly||n;if(t.preventDefault(),i&&!1!==e.listenerData.editor.editable().editor.fire("readOnlyClick",e.data)){var r=new CKEDITOR.dom.elementPath(e.data.getTarget(),this),o=r.lastElement;if(o){var a=o.$.attributes.href?o.$.attributes.href.value:null,s=n?"_blank":o.$.attributes.target?o.$.attributes.target.value:null;this._redirectLink(a,s)}}},_getNativeEditor:function(){return this._editor},_redirectLink:function(e,t){t&&e?window.open(e,t):e&&(window.location.href=e)},_renderUI:function(){var e=this;if(!this._destroyed){var t=document.createElement("div");t.className="ae-ui";var n=this.get("uiNode")||document.body;n.appendChild(t);var i=function(t){!e._mainUI&&t&&(e._mainUI=t,e.get("nativeEditor").fire("uiReady"))};a.default.render(r.default.createElement(y.default.Provider,{value:{editor:this}},r.default.createElement(u.default,{eventsDelay:this.get("eventsDelay"),ref:i,toolbars:this.get("toolbars")})),t),this._editorUIElement=t}},_toElement:function(e){return h.default.isString(e)&&(e=document.getElementById(e)),e},_validateAllowedContent:function(e){return h.default.isString(e)||h.default.isObject(e)||h.default.isBoolean(e)},_validateToolbars:function(e){return h.default.isObject(e)||h.default.isNull(e)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},documentBrowseLinkCallback:{validator:h.default.isFunction,value:void 0},documentBrowseLinkUrl:{validator:h.default.isString,value:void 0},embedProviders:{validator:h.default.isArray,value:[{id:"facebook",tpl:'<iframe allowFullScreen="true" allowTransparency="true"\n\t\t\t\t\t\t\t\t\t\t\t\t frameborder="0" height="'+C+'"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.facebook.com/plugins/video.php?href={embedId}\'\n\t\t\t\t\t\t\t\t\t\t\t\t &show_text=0&width='+T+"&height="+C+'" scrolling="no"\n\t\t\t\t\t\t\t\t\t\t\t\t style="border:none;overflow:hidden" width="'+T+'}"></iframe>',type:"video",urlSchemes:["(https?:\\/\\/(?:www\\.)?facebook.com\\/\\S*\\/videos\\/\\S*)"]},{id:"twitch",tpl:'<iframe allowfullscreen="true" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t height="'+C+'"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://player.twitch.tv/?autoplay=false&video={embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t scrolling="no" width="'+T+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?twitch.tv\\/videos\\/(\\S*)$"]},{id:"vimeo",tpl:'<iframe allowfullscreen frameborder="0" height="'+C+'"\n\t\t\t\t\t\t\t\t\t\t\t\t mozallowfullscreen src="https://player.vimeo.com/video/{embedId}"\n\t\t\t\t\t\t\t\t\t\t\t\t webkitallowfullscreen width="'+T+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?vimeo\\.com\\/album\\/.*\\/video\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/channels\\/.*\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/groups\\/.*\\/videos\\/(\\S*)","https?:\\/\\/(?:www\\.)?vimeo\\.com\\/(\\S*)$"]},{id:"youtube",tpl:'<iframe allow="autoplay; encrypted-media" allowfullscreen\n\t\t\t\t\t\t\t\t\t\t\t\t height="'+C+'" frameborder="0"\n\t\t\t\t\t\t\t\t\t\t\t\t src="https://www.youtube.com/embed/{embedId}?rel=0"\n\t\t\t\t\t\t\t\t\t\t\t\t width="'+T+'"></iframe>',type:"video",urlSchemes:["https?:\\/\\/(?:www\\.)?youtube.com\\/watch\\?v=(\\S*)$"]}]},enableContentEditable:{validator:h.default.isBoolean,value:!0,writeOnce:!0},eventsDelay:{validator:h.default.isNumber,value:100},extraCommands:{validator:h.default.isObject,value:{removeImage:s.removeImageCommand},writeOnce:!0},extraPlugins:{validator:h.default.isString,value:"ae_uicore,ae_selectionregion,ae_selectionkeystrokes,ae_imagealignment,ae_addimages,ae_placeholder,ae_tabletools,ae_tableresize,ae_autolink,ae_embed,ae_autolist,ae_dragresize,ae_uibridge,ae_richcombobridge,ae_panelmenubuttonbridge,ae_menubridge,ae_menubuttonbridge,ae_buttonbridge,font,colorbutton,smiley",writeOnce:!0},mode:{validator:h.default.isString,value:"simple"},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:h.default.isString,value:"ae-placeholder",writeOnce:!0},removePlugins:{validator:h.default.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,link",writeOnce:!0},selectionKeystrokes:{validator:h.default.isArray,value:[{keys:CKEDITOR.CTRL+76,selection:"link"},{keys:CKEDITOR.CTRL+CKEDITOR.SHIFT+76,selection:"embed"}]},spritemap:{validator:h.default.isString,value:"alloy-editor/assets/icons/icons.svg",writeOnce:!0},srcNode:{setter:"_toElement",writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:{buttons:["imageFromFile","embed","camera","hline","table","smiley"],tabIndex:2},styles:{selections:E.default,tabIndex:1}}},uiNode:{setter:"_toElement",writeOnce:!0}}}),CKEDITOR.event.implementOn(O),t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var i=n(122),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}n(123),n(124),n(125),n(126),n(127),n(128),t.debounce=r.default},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,a=function(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=n||this;clearTimeout(o),o=setTimeout((function(){e.apply(u,[].concat(s,i(r)))}),t)};return a.detach=function(){clearTimeout(o)},a}Object.defineProperty(t,"__esModule",{value:!0}),CKEDITOR.tools.debounce=CKEDITOR.tools.debounce||r,t.default=r},function(e,t,n){"use strict";var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=/^#.*/i,o=/^[a-z0-9\u0430-\u044F._-]+@/i,a=/^(?:[a-z][a-z0-9+\-.]*):|^\//i;function s(e,t){this._editor=e,this.appendProtocol=!t||!1!==t.appendProtocol}s.prototype={constructor:s,advanceSelection:function(e){e=e||this.getFromSelection();var t=this._editor.getSelection(),n=t?t.getRanges()[0]:null;if(e&&n){n.moveToElementEditEnd(e);var i=n.getNextEditableNode();if(i&&!this._editor.element.equals(i.getCommonAncestor(e))){var r=/\s/.exec(i.getText()),o=r?r.index+1:0;n.setStart(i,o),n.setEnd(i,o)}}this._editor.getSelection().selectRanges([n])},create:function(e,t,n){var i=this._editor.getSelection(),r=i?i.getRanges()[0]:null;if(r&&r.collapsed){var o=new CKEDITOR.dom.text(e,this._editor.document);r.insertNode(o),r.selectNodeContents(o)}e=this._getCompleteURI(e);var a=CKEDITOR.tools.merge({"data-cke-saved-href":e,href:e},t),s=new CKEDITOR.style({attributes:a,element:"a"});s.type=CKEDITOR.STYLE_INLINE,s.applyToRange(r,this._editor),n&&n.advance?this.advanceSelection():r.select()},getFromSelection:function(){var e=this._editor.getSelection(),t=e.getSelectedElement();if(t&&t.is("a"))return t;if(t&&CKEDITOR.env.ie)for(var n=t.getChildren(),i=n.count(),r=0;r<i;r++){var o=n.getItem(r);if(o.is("a"))return o}var a=e?e.getRanges()[0]:null;return a?(a.shrink(CKEDITOR.SHRINK_TEXT),this._editor.elementPath(a.getCommonAncestor()).contains("a",1)):null},remove:function(e,t){var n=this._editor;if(e)t&&t.advance&&this.advanceSelection(),e.remove(n);else{var i=new CKEDITOR.style({alwaysRemoveElement:1,element:"a",type:CKEDITOR.STYLE_INLINE}),r=n.getSelection();r.selectElement(r.getStartElement()),n.removeStyle(i)}},update:function(e,t,n){var r=this;if(t=t||this.getFromSelection(),"string"===typeof e){var o=r._getCompleteURI(e);t.setAttributes({"data-cke-saved-href":o,href:o})}else if("object"===("undefined"===typeof e?"undefined":i(e))){var a=[],s={};Object.keys(e).forEach((function(t){if(null===e[t])"href"===t&&a.push("data-cke-saved-href"),a.push(t);else if("href"===t){var n=r._getCompleteURI(e[t]);s["data-cke-saved-href"]=n,s[t]=n}else s[t]=e[t]})),t.removeAttributes(a),t.setAttributes(s)}n&&n.advance&&this.advanceSelection(t)},_getCompleteURI:function(e){return r.test(e)||(o.test(e)?e="mailto:"+e:a.test(e)||(e=this.appendProtocol?"http://"+e:e)),e}},CKEDITOR.Link=CKEDITOR.Link||s},function(e,t,n){"use strict";var i=function(e){var t=["beforeInit","init","afterInit"];t.forEach((function(t){e[t]&&(e[t]=CKEDITOR.tools.override(e[t],(function(n){var i={phase:t,plugin:e};return function(e){e.__processingPlugin__=i,n.call(this,e),e.__processingPlugin__=null}})))}))},r=function(e){return"string"===typeof e&&(e=e.split(",")),e.filter((function(e){return"toolbar"!==e}))};CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,(function(e){return function(t,n,o){e.call(this,t,(function(e){n&&(Object.keys(e).forEach((function(t){var n=e[t];n.requires&&(n.requires=r(n.requires)),i(n)})),n.call(o,e))}))}}))},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_selectionregion")){function i(){}CKEDITOR.SELECTION_TOP_TO_BOTTOM=0,CKEDITOR.SELECTION_BOTTOM_TO_TOP=1,CKEDITOR.SELECTION_LEFT_TO_RIGHT=2,CKEDITOR.SELECTION_RIGHT_TO_LEFT=3,i.prototype={constructor:i,createSelectionFromPoint:function(e,t){this.createSelectionFromRange(e,t,e,t)},createSelectionFromRange:function(e,t,n,i){var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0;if("function"===typeof document.caretPositionFromPoint?(l=document.caretPositionFromPoint(e,t),r=document.caretPositionFromPoint(n,i),u=l.offsetNode,o=r.offsetNode,c=l.offset,a=r.offset,s=this.createRange()):"function"===typeof document.caretRangeFromPoint&&(l=document.caretRangeFromPoint(e,t),r=document.caretRangeFromPoint(n,i),u=l.startContainer,o=r.startContainer,c=l.startOffset,a=r.startOffset,s=this.createRange()),s&&document.getSelection)s.setStart(new CKEDITOR.dom.node(u),c),s.setEnd(new CKEDITOR.dom.node(o),a),this.getSelection().selectRanges([s]);else if("function"===typeof document.body.createTextRange){var d=this.getSelection();d.unlock(),s=document.body.createTextRange(),s.moveToPoint(e,t);var f=s.duplicate();f.moveToPoint(n,i),s.setEndPoint("EndToEnd",f),s.select(),this.getSelection().lock()}},getCaretRegion:function(){var e=this.getSelection(),t={bottom:0,left:0,right:0,top:0},n=e.createBookmarks();if(!n.length)return t;var i=n[0].startNode.$;i.style.display="inline-block",t=new CKEDITOR.dom.element(i).getClientRect(),i.parentNode.removeChild(i);var r=new CKEDITOR.dom.window(window).getScrollPosition();return t.bottom=r.y+t.bottom,t.left=r.x+t.left,t.right=r.x+t.right,t.top=r.y+t.top,t},getSelectionData:function(){var e=this.getSelection();if(!e.getNative())return null;var t={element:e.getSelectedElement(),text:e.getSelectedText()};return t.region=this.getSelectionRegion(e),t},getSelectionRegion:function(){var e=this.getClientRectsRegion();return e.direction=this.getSelectionDirection(),e.height=e.bottom-e.top,e.width=e.right-e.left,e},isSelectionEmpty:function(){var e=this.getSelection();if(e.getType()===CKEDITOR.SELECTION_NONE)return!0;var t=e?e.getRanges():null;return t&&1===t.length&&t[0].collapsed},getClientRectsRegion:function(){var e=this.getSelection(),t=e.getNative(),n={bottom:0,height:0,left:0,right:0,top:0,width:0},i={bottom:0,endRect:n,left:0,right:0,top:0,startRect:n};if(!t)return i;var r=0,o=void 0,a=1/0,s=-1/0,l=1/0;if(o=t.createRange?t.createRange().getClientRects():t.rangeCount>0?t.getRangeAt(0).getClientRects():[],0===o.length)i=this.getCaretRegion();else{for(var u=0,c=o.length;u<c;u++){var d=o[u];d.left<a&&(a=d.left),d.right>s&&(s=d.right),d.top<l&&(l=d.top),d.bottom>r&&(r=d.bottom)}var f=new CKEDITOR.dom.window(window).getScrollPosition();if(i.bottom=f.y+r,i.left=f.x+a,i.right=f.x+s,i.top=f.y+l,o.length){var h=o[o.length-1],p=o[0];i.endRect={bottom:f.y+h.bottom,height:h.height,left:f.x+h.left,right:f.x+h.right,top:f.y+h.top,width:h.width},i.startRect={bottom:f.y+p.bottom,height:p.height,left:f.x+p.left,right:f.x+p.right,top:f.y+p.top,width:p.width}}}return i},getSelectionDirection:function(){var e=CKEDITOR.SELECTION_TOP_TO_BOTTOM,t=this.getSelection(),n=t.getNative();if(!n)return e;var i=void 0;if((i=n.anchorNode)&&i.compareDocumentPosition){var r=i.compareDocumentPosition(n.focusNode);(!r&&n.anchorOffset>n.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(e=CKEDITOR.SELECTION_BOTTOM_TO_TOP)}return e}},CKEDITOR.plugins.add("ae_selectionregion",{init:function(e){var t=void 0,n=Object.prototype.hasOwnProperty;for(t in i.prototype)n.call(i.prototype,t)&&"undefined"===typeof e[t]&&(e[t]=i.prototype[t])}})}},function(e,t,n){"use strict";var i={table:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1};function r(e){this._editor=e}r.HEADING_BOTH="Both",r.HEADING_COL="Column",r.HEADING_NONE="None",r.HEADING_ROW="Row",r.prototype={constructor:r,create:function(e){var t=this._editor,n=this._createElement("table");e=e||{};for(var i=n.append(this._createElement("tbody")),r=e.rows||1,o=e.cols||1,a=0;a<r;a++)for(var s=i.append(this._createElement("tr")),l=0;l<o;l++){var u=s.append(this._createElement("td"));u.appendBogus()}this.setAttributes(n,e.attrs),this.setHeading(n,e.heading),t.insertElement(n);var c=new CKEDITOR.dom.element(n.$.rows[0].cells[0]),d=t.createRange();return d.moveToPosition(c,CKEDITOR.POSITION_AFTER_START),d.select(),n},getFromSelection:function(){var e=void 0,t=this._editor.getSelection(),n=t.getSelectedElement();if(n&&n.is("table"))e=n;else{var i=t?t.getRanges():null;i&&i.length>0&&(CKEDITOR.env.webkit&&i[0].shrink(CKEDITOR.NODE_ELEMENT),e=this._editor.elementPath(i[0].getCommonAncestor(!0)).contains("table",1))}return e},isEditable:function(e){return CKEDITOR.env.ie&&e.is(i)?e.hasAttribute("contenteditable")?"false"!==e.getAttribute("contenteditable"):this.isEditable(e.getParent()):!e.isReadOnly()},getHeading:function(e){if(e=e||this.getFromSelection(),!e)return null;for(var t=null!==e.$.tHead,n=!0,i=0;i<e.$.rows.length;i++){var o=e.$.rows[i].cells[0];if(o&&"th"!==o.nodeName.toLowerCase()){n=!1;break}}var a=r.HEADING_NONE;return t&&(a=r.HEADING_ROW),n&&(a=a===r.HEADING_ROW?r.HEADING_BOTH:r.HEADING_COL),a},remove:function(e){var t=this._editor;if(e)e.remove();else if(e=t.elementPath().contains("table",1),e){var n=e.getParent(),i=t.editable();1!==n.getChildCount()||n.is("td","th")||n.equals(i)||(e=n);var r=t.createRange();r.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove()}},setAttributes:function(e,t){t&&Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))},setHeading:function(e,t){e=e||this.getFromSelection();var n=void 0,i=void 0,o=void 0,a=e.getElementsByTag("tbody").getItem(0),s=this.getHeading(e),l=s===r.HEADING_COL||s===r.HEADING_BOTH,u=t===r.HEADING_COL||t===r.HEADING_BOTH,c=t===r.HEADING_ROW||t===r.HEADING_BOTH;if(!e.$.tHead&&c){var d=a.getElementsByTag("tr").getItem(0),f=d.getChildCount();for(n=0;n<f;n++){var h=d.getChild(n);h.type!==CKEDITOR.NODE_ELEMENT||h.data("cke-bookmark")||(h.renameNode("th"),h.setAttribute("scope","col"))}o=this._createElement(e.$.createTHead()),o.append(d.remove())}if(null!==e.$.tHead&&!c){o=this._createElement(e.$.tHead);var p=a.getFirst();while(o.getChildCount()>0){var m=o.getFirst(),g=m.getChildCount();for(n=0;n<g;n++)i=m.getChild(n),i.type===CKEDITOR.NODE_ELEMENT&&(i.renameNode("td"),i.removeAttribute("scope"));m.insertBefore(p)}o.remove()}s=this.getHeading(e);var E=s===r.HEADING_COL||s===r.HEADING_BOTH;if(!E&&u)for(n=0;n<e.$.rows.length;n++)"th"!==e.$.rows[n].cells[0].nodeName.toLowerCase()&&(i=new CKEDITOR.dom.element(e.$.rows[n].cells[0]),i.renameNode("th"),i.setAttribute("scope","row"));if(l&&!u)for(n=0;n<e.$.rows.length;n++){var v=new CKEDITOR.dom.element(e.$.rows[n]);"tbody"===v.getParent().getName()&&(i=new CKEDITOR.dom.element(v.$.cells[0]),i.renameNode("td"),i.removeAttribute("scope"))}},_createElement:function(e){return new CKEDITOR.dom.element(e,this._editor.document)}},CKEDITOR.on("instanceReady",(function(e){var t=[r.HEADING_NONE,r.HEADING_ROW,r.HEADING_COL,r.HEADING_BOTH],n=new r(e.editor);t.forEach((function(t){e.editor.addCommand("tableHeading"+t,{exec:function(e){n.setHeading(null,t)}})}))})),CKEDITOR.Table=CKEDITOR.Table||r},function(e,t,n){"use strict";CKEDITOR.tools.jsonp=function(e,t,n,i){var r=CKEDITOR.tools.getNextNumber();t=t||{},t.callback="CKEDITOR._.jsonpCallbacks["+r+"]",CKEDITOR._.jsonpCallbacks||(CKEDITOR._.jsonpCallbacks={}),CKEDITOR._.jsonpCallbacks[r]=function(e){setTimeout((function(){a(),n(e)}))};var o=new CKEDITOR.dom.element("script");function a(){o&&(o.remove(),delete CKEDITOR._.jsonpCallbacks[r],o=null)}return o.setAttribute("src",e.output(t)),o.on("error",(function(){a(),i&&i()})),CKEDITOR.document.getBody().append(o),{cancel:a,id:r}},CKEDITOR.tools.merge=CKEDITOR.tools.merge||function(){for(var e={},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0;r<n.length;++r){var o=n[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},CKEDITOR.tools.simulate=function(e,t){var n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uicore")||CKEDITOR.plugins.add("ae_uicore",{init:function(e){var t=[],n=this._createAriaElement(e.id),i=e.config.uicore?e.config.uicore.timeout:50,r=CKEDITOR.tools.debounce((function(n){if(t=[],"keyup"!==n.name||27!==n.data.$.keyCode||e.config.allowEsc){var i=e.getSelectionData();i&&e.fire("editorInteraction",{nativeEvent:n.data.$,selectionData:i})}}),i),o=CKEDITOR.tools.debounce((function(e){n.innerHTML=t.join(". ")}),i),a=CKEDITOR.tools.debounce((function(e){for(var t=document.querySelectorAll(".ae-ui"),n=void 0,i=0;i<t.length;i++)if(t[i].contains(e.data.$.relatedTarget)){n=!0;break}n||r(e)}),i);e.on("ariaUpdate",(function(e){t.push(e.data.message),o()})),e.once("contentDom",(function(){var t=e.editable(),n=t.attachListener(t,"focus",(function(e){n.removeListener(),t.attachListener(t,"keyup",r),t.attachListener(t,"mouseup",r),t.attachListener(t,"mouseleave",a),r(e)}))})),e.on("destroy",(function(e){n.parentNode.removeChild(n),r.detach()}))},_createAriaElement:function(e){var t=document.createElement("div");return t.className="ae-sr-only",t.setAttribute("aria-live","polite"),t.setAttribute("role","status"),t.setAttribute("id",e+"LiveRegion"),document.body.appendChild(t),t}})},function(e,t,n){"use strict";var i=n(130),r=a(i),o=n(32);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){function i(r,o){try{var a=t[r](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(s)}return i("next")}))}}var l=CKEDITOR.env.ie;CKEDITOR.plugins.get("ae_addimages")||CKEDITOR.plugins.add("ae_addimages",{init:function(e){var t=this;this.fitImageMaxWidth=e.config.fitImageMaxWidth,this.fitImageMaxHeight=e.config.fitImageMaxHeight,e.once("contentDom",(function(){var n=e.editable();n.attachListener(n,"dragenter",t._onDragEnter,t,{editor:e}),n.attachListener(n,"dragover",t._onDragOver,t,{editor:e}),n.attachListener(n,"drop",t._onDragDrop,t,{editor:e}),n.attachListener(n,"paste",t._onPaste,t,{editor:e})}))},_handleFiles:function(e,t){var n=void 0,i=void 0,r=[];for(i=0;i<e.length;i++)n=e[i],0===n.type.indexOf("image")&&r.push(n);var o=t.fire("beforeImageAdd",{imageFiles:r});if(o)for(i=0;i<r.length;i++)n=r[i],this._processFile(n,t);return!1},_onDragDrop:function(e){var t=e.data.$,n=t.dataTransfer.files;if(n.length>0){new CKEDITOR.dom.event(t).preventDefault();var i=e.listenerData.editor;e.listenerData.editor.createSelectionFromPoint(t.clientX,t.clientY),this._handleFiles(n,i)}},_onDragEnter:function(e){l&&this._preventEvent(e)},_onDragOver:function(e){l&&this._preventEvent(e)},_onPaste:function(e){if(e.data&&e.data.$&&e.data.$.clipboardData&&e.data.$.clipboardData.items&&e.data.$.clipboardData.items.length>0){var t=e.data.$.clipboardData.items[0];if(0===t.type.indexOf("image")){var n=t.getAsFile();this._processFile(n,e.listenerData.editor)}}},_preventEvent:function(e){e=new CKEDITOR.dom.event(e.data.$),e.preventDefault(),e.stopPropagation()},_processFile:function(e,t){var n=this,i=new FileReader;i.addEventListener("loadend",function(){var i=s(r.default.mark((function i(a){var s,l,u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.fitImage)(a.target.result,e.type);case 3:s=n.sent,l=CKEDITOR.dom.element.createFromHtml('<img src="'+s+'">'),t.insertElement(l),u={el:l,file:e},t.fire("imageAdd",u),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),console.warn("Failed to fit image with error",n.t0);case 13:case"end":return n.stop()}}),i,n,[[0,10]])})));return function(e){return i.apply(this,arguments)}}()),i.readAsDataURL(e)}})},function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n,i){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),a=new k(i||[]);return o._invoke=I(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c="suspendedStart",d="suspendedYield",f="executing",h="completed",p={};function m(){}function g(){}function E(){}var v={};v[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(w([])));b&&b!==n&&i.call(b,o)&&(v=b);var T=E.prototype=m.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function O(e,t){function n(r,o,a,s){var l=u(e[r],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var r;function o(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function I(e,t,n){var i=c;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===h){if("throw"===r)throw o;return K()}n.method=r,n.arg=o;while(1){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?h:d,l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=h,n.method="throw",n.arg=l.arg)}}}function _(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,p;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function w(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){while(++r<e.length)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:K}}function K(){return{value:t,done:!0}}return g.prototype=T.constructor=E,E.constructor=g,E[s]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},C(O.prototype),O.prototype[a]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new O(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(T),T[s]="Generator",T[o]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=w,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;R(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:w(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolink")){/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/.test(navigator.userAgent)&&document.execCommand("AutoUrlDetect",!1,!1);var i=8,r=188,o=13,a=186,s=32,l=[r,o,a,s],u=/[^\s]+/gim,c="^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$",d=/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/i;CKEDITOR.plugins.add("ae_autolink",{init:function(e){var t=this;e.once("contentDom",(function(){var n=e.editable();n.attachListener(n,"keyup",t._onKeyUp,t,{editor:e})})),e.on("paste",(function(e){if("paste"===e.data.method){if(e.data.dataValue.indexOf("<")>-1||e.data.dataValue.indexOf("&lt;")>-1)return void(e.data.dataValue.indexOf('<u><font color="')>-1&&(e.data.dataValue=e.data.dataValue.replace(/<u><font color="#(.*?)">|<\/font><\/u>/g,"")));var n=t;e.data.dataValue=e.data.dataValue.replace(RegExp(c,"gim"),(function(e){if(n._isValidURL(e))return n._isValidEmail(e)?'<a href="mailto:'+e+'">'+e+"</a>":'<a href="'+e+'">'+e+"</a>"}))}}))},_getLastWord:function(e){var t=e.getSelection(),n=t?t.getRanges()[0]:null;if(n){var i=n.startOffset,r="";if(this._currentKeyCode===o){var a=n.startContainer.getPrevious(),s=void 0;if(a){while(!a.getLast)a=a.getPrevious();s=a.getLast();while(s&&!s.getText())s=s.getPrevious()}s&&s.$.href||(this._startContainer=s,r=s?s.getText():"",this._offset=r.length)}else this._startContainer=n.startContainer,r=this._startContainer.getText().substring(0,i-1),this._offset=i-1;var l="",c=r.match(u);return c&&(l=c.pop()),l}},_isValidEmail:function(e){return d.test(e)},_isValidURL:function(e){return RegExp(c,"i").test(e)},_onKeyDown:function(e){var t=e.data.$,n=e.listenerData.editor,r=n.editable();r.removeListener("keydown",this._onKeyDown),t.keyCode===i&&(e.cancel(),e.data.preventDefault(),this._removeLink(n)),this._ckLink=null},_onKeyUp:function(e){var t=e.data.$;if(this._currentKeyCode=t.keyCode,-1!==l.indexOf(this._currentKeyCode)){var n=e.listenerData.editor,i=this._getLastWord(n);this._isValidURL(i)&&this._replaceContentByLink(n,i)}},_replaceContentByLink:function(e,t){var n=e.createRange(),i=CKEDITOR.dom.element.get(this._startContainer),r=this._offset;n.setStart(i,r-t.length),n.setEnd(i,r),n.select();var a=new CKEDITOR.Link(e);a.create(t),this._ckLink=a;var s=a.getFromSelection();e.fire("autolinkAdd",s),this._subscribeToKeyEvent(e);var l=e.getSelection();if(n=l?l.getRanges()[0]:null,!n)return null;if(this._currentKeyCode===o){var u=n.getNextEditableNode();n.setStart(u,0),n.setEnd(u,0)}else{var c=n.getEnclosedNode();n.setStart(c,0),n.setEnd(c,0)}n.select()},_removeLink:function(e){var t=e.getSelection(),n=t?t.getRanges()[0]:null;if(!n)return null;var i=n.startOffset,r=this._startContainer.getNext()||this._startContainer,o=e.createRange();o.setStart(r,0),o.setEndAfter(r),o.select(),this._ckLink.remove(),n.setEnd(n.startContainer,i),n.setStart(n.startContainer,i),n.select()},_subscribeToKeyEvent:function(e){var t=e.editable();t.attachListener(t,"keydown",this._onKeyDown,this,{editor:e},1)}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_autolist")){var i=8,r=32,o=[{regex:/^\*$/,type:"bulletedlist"},{regex:/^1\.$/,type:"numberedlist"}];CKEDITOR.plugins.add("ae_autolist",{init:function(e){var t=this;e.once("contentDom",(function(){var n=e.editable();n.attachListener(n,"keydown",t._onKeyDown,t,{editor:e})}))},_checkForBackspaceAndUndo:function(e){var t=e.listenerData.editor,n=e.data.$,r=t.editable();r.removeListener("keydown",this._checkForBackspaceAndUndo),n.keyCode===i&&(t.execCommand("undo"),t.insertHtml(e.listenerData.bullet+"&nbsp;"),e.data.preventDefault())},_getListConfig:function(e){var t=e.config.autolist||o,n=e.getSelection(),i=n?n.getRanges()[0]:null;if(!i)return null;var r=i.endContainer.getText(),a=r.substring(0,i.startOffset),s=r.substring(i.startOffset,r.length),l=0,u=t.length,c=null;while(!c&&u>l){var d=t[l];if(d.regex.test(a)){c={bullet:a,editor:e,text:s,type:d.type};break}l++}return c},_createList:function(e){var t=e.editor,n=t.getSelection(),i=n?n.getRanges()[0]:null;if(!i)return null;i.endContainer.setText(e.text),t.execCommand(e.type);var r=t.editable();r.attachListener(r,"keydown",this._checkForBackspaceAndUndo,this,{editor:t,bullet:e.bullet},1)},_onKeyDown:function(e){var t=e.data.$;if(t.keyCode===r){var n=this._getListConfig(e.listenerData.editor);n&&(e.data.preventDefault(),this._createList(n))}}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_dragresize")){var i={both:["tl","tm","tr","lm","rm","bl","bm","br"],height:["tl","tm","tr","bl","bm","br"],scale:["tl","tr","bl","br"],width:["tl","tr","lm","rm","bl","br"]},r={bl:function(e,t,n,i){p(e,-3+t,i.height-4+n)},bm:function(e,t,n,i){p(e,Math.round(i.width/2)-3+t,i.height-4+n)},br:function(e,t,n,i){p(e,i.width-4+t,i.height-4+n)},lm:function(e,t,n,i){p(e,-3+t,Math.round(i.height/2)-3+n)},tl:function(e,t,n,i){p(e,t-3,n-3)},tm:function(e,t,n,i){p(e,Math.round(i.width/2)-3+t,-3+n)},tr:function(e,t,n,i){p(e,i.width-4+t,-3+n)},rm:function(e,t,n,i){p(e,i.width-4+t,Math.round(i.height/2)-3+n)}},o=7,a="MozAppearance"in document.documentElement.style,s="WebkitAppearance"in document.documentElement.style,l=s||a;function u(e){var t=e.window.$,n=e.document.$;a&&n.execCommand("enableObjectResizing",!1,!1);var i="undefined"===typeof o?null:o;e.config.imageScaleResize=e.config.imageScaleResize||"both";var r=new c(e,{imageScaleResize:e.config.imageScaleResize,snapToSize:i}),s=function(e){r.isHandle(e.target)&&r.initDrag(e)};function l(){var n=e.getSelection();n&&(n.getType()!==CKEDITOR.SELECTION_NONE&&n.getStartElement().is("img")?t.event&&t.event.button&&0!==t.event.button||r.show(n.getStartElement().$):r.hide())}n.addEventListener("mousedown",s,!1),e.on("selectionChange",l),e.on("getData",(function(e){var t=e.data.dataValue||"";t=t.replace(/<div id="ckimgrsz"([\s\S]*?)<\/div>/i,""),t=t.replace(/\b(ckimgrsz)\b/g,""),e.data.dataValue=t})),e.on("beforeUndoImage",(function(){r.hide()})),e.on("afterUndoImage",(function(){l()})),e.on("blur",(function(){r.hide()})),e.on("beforeModeUnload",(function t(){e.removeListener("beforeModeUnload",t),r.hide()})),e.on("destroy",(function(){var e=n.getElementById("ckimgrsz");e&&e.remove(),a&&n.execCommand("enableObjectResizing",!1,!0),n.removeEventListener("mousedown",s)}));var u=void 0;e.window.on("resize",(function(){clearTimeout(u),u=setTimeout(l,50)}))}function c(e,t){this.editor=e,this.window=e.window.$,this.document=e.document.$,this.cfg=t||{},this.init()}function d(e,t){this.window=e,this.document=t,this.events={mousemove:h(this.mousemove,this),keydown:h(this.keydown,this),mouseup:h(this.mouseup,this)}}function f(e){for(var t=e.length,n=new Array(t),i=0;i<t;i++)n[i]=e[i];return n}function h(e,t){return e.bind?e.bind(t):function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(t,i)}}function p(e,t,n){e.style.left=String(t)+"px",e.style.top=String(n)+"px"}function m(e,t,n){var i=this.editor.config.imageScaleResize;"both"===i?(e.style.width=String(t)+"px",e.style.height=String(n)+"px"):"width"===i||"scale"===i?(e.style.height="auto",e.style.width=String(t)+"px"):"height"===i&&(e.style.height=String(n)+"px",e.style.width="auto")}function g(e,t){var n=t.getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width,height:n.height}}l&&CKEDITOR.addCss("img::selection{color:rgba(0,0,0,0)}img.ckimgrsz{outline:1px dashed #000}#ckimgrsz{position:absolute;width:0;height:0;cursor:default;z-index:10001}#ckimgrsz span{display:none;position:absolute;top:0;left:0;width:0;height:0;background-size:100% 100%;opacity:.65;outline:1px dashed #000}#ckimgrsz i{position:absolute;display:block;width:5px;height:5px;background:#fff;border:1px solid #000}#ckimgrsz i.active,#ckimgrsz i:hover{background:#000}#ckimgrsz i.br,#ckimgrsz i.tl{cursor:nwse-resize}#ckimgrsz i.bm,#ckimgrsz i.tm{cursor:ns-resize}#ckimgrsz i.bl,#ckimgrsz i.tr{cursor:nesw-resize}#ckimgrsz i.lm,#ckimgrsz i.rm{cursor:ew-resize}body.dragging-br,body.dragging-br *,body.dragging-tl,body.dragging-tl *{cursor:nwse-resize!important}body.dragging-bm,body.dragging-bm *,body.dragging-tm,body.dragging-tm *{cursor:ns-resize!important}body.dragging-bl,body.dragging-bl *,body.dragging-tr,body.dragging-tr *{cursor:nesw-resize!important}body.dragging-lm,body.dragging-lm *,body.dragging-rm,body.dragging-rm *{cursor:ew-resize!important}"),CKEDITOR.plugins.add("ae_dragresize",{onLoad:function(){},init:function(e){l&&e.once("contentDom",(function(t){u(e)}))}}),c.prototype={init:function(){var e=this,t=this.container=this.document.createElement("div");t.id="ckimgrsz",this.preview=this.document.createElement("span"),t.appendChild(this.preview);var n=this.handles={};for(var r in i[this.cfg.imageScaleResize].forEach((function(t){n[t]=e.handles[t]=e.createHandle(t)})),n)Object.prototype.hasOwnProperty.call(n,r)&&t.appendChild(n[r])},createHandle:function(e){var t=this.document.createElement("i");return t.classList.add(e),t},isHandle:function(e){var t=this.handles;for(var n in t)if(t[n]===e)return!0;return!1},show:function(e){var t=this.editor.config.uiNode,n=t?t.scrollTop:0;this.el=e,this.cfg.snapToSize&&(this.otherImages=f(this.document.getElementsByTagName("img")),this.otherImages.splice(this.otherImages.indexOf(e),1));var i=this.box=g(this.window,e);p(this.container,i.left,i.top+n),t=t||document.body,t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()},hide:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;++t)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)},initDrag:function(e){if(0===e.button){var t=this,n=new d(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(this),t.updatePreview();var e=t.previewBox;t.updateHandles(e,e.left,e.top)},n.onRelease=function(){t.isDragging=!1,t.hidePreview(),t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}},updateHandles:function(e,t,n){t=t||0,n=n||0;var i=this.handles;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r[o](i[o],t,n,e)},showHandles:function(){var e=this.handles;for(var t in this.updateHandles(this.box),e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="block")},hideHandles:function(){var e=this.handles;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].style.display="none")},showPreview:function(){this.preview.style.backgroundImage='url("'+this.el.src+'")',this.calculateSize(),this.updatePreview(),this.preview.style.display="block"},updatePreview:function(){var e=this.previewBox;p(this.preview,e.left,e.top),this.preview.style.width=this.previewBox.width+"px",this.preview.style.height=this.previewBox.height+"px"},hidePreview:function(){var e=g(this.window,this.preview);this.result={width:e.width,height:e.height},this.preview.style.display="none"},calculateSize:function(e){var t=this.previewBox={top:0,left:0,width:this.box.width,height:this.box.height};if(e){var n=e.target.className;if(~n.indexOf("r")&&(t.width=Math.max(32,this.box.width+e.delta.x)),~n.indexOf("b")&&(t.height=Math.max(32,this.box.height+e.delta.y)),~n.indexOf("l")&&(t.width=Math.max(32,this.box.width-e.delta.x)),~n.indexOf("t")&&(t.height=Math.max(32,this.box.height-e.delta.y)),n.indexOf("m")<0&&!e.keys.shift){var i=this.box.width/this.box.height;t.width/t.height>i?t.height=Math.round(t.width/i):t.width=Math.round(t.height*i)}var r=this.cfg.snapToSize;if(r)for(var o=this.otherImages,a=0;a<o.length;a++){var s=g(this.window,o[a]);if(Math.abs(t.width-s.width)<=r&&Math.abs(t.height-s.height)<=r){t.width=s.width,t.height=s.height;break}}~n.indexOf("l")&&(t.left=this.box.width-t.width),~n.indexOf("t")&&(t.top=this.box.height-t.height)}},resizeComplete:function(){m.call(this,this.el,this.result.width,this.result.height)}},d.prototype={start:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.attr=e.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e);var t=this.events;this.document.addEventListener("mousemove",t.mousemove,!1),this.document.addEventListener("keydown",t.keydown,!1),this.document.addEventListener("mouseup",t.mouseup,!1),this.document.body.classList.add("dragging-"+this.attr),this.onStart&&this.onStart()},update:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey}},mousemove:function(e){this.update(e),this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)},keydown:function(e){27===e.keyCode&&this.release()},mouseup:function(e){this.update(e),this.release(),this.onComplete&&this.onComplete()},release:function(){this.document.body.classList.remove("dragging-"+this.attr);var e=this.events;this.document.removeEventListener("mousemove",e.mousemove,!1),this.document.removeEventListener("keydown",e.keydown,!1),this.document.removeEventListener("mouseup",e.mouseup,!1),this.onRelease&&this.onRelease()}}}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_dragresize_ie")){var i={center:1,left:0,right:2},r={both:"nwse-resize",height:"ns-resize",scale:"nwse-resize",width:"ew-resize"},o=/^\s*(\d+%)\s*$/i,a='<img alt="" src="" />';function s(e){e.config.imageScaleResize=e.config.imageScaleResize||"both",e.on("imageAdd",(function(t){e.widgets.initOn(t.data.el,"image")}));var t=e.config.image2_alignClasses,n=e.config.image2_captionedClass;return{init:function(){var n=CKEDITOR.plugins.image2,r=this.parts.image,o={alt:r.getAttribute("alt")||"",hasCaption:!!this.parts.caption,height:r.getAttribute("height")||"",lock:!this.ready||n.checkHasNaturalRatio(r),src:r.getAttribute("src"),width:r.getAttribute("width")||""},a=r.getAscendant("a");if(a&&this.wrapper.contains(a)&&(this.parts.link=a),!o.align){var s=o.hasCaption?this.element:r;t?(s.hasClass(t[0])?o.align="left":s.hasClass(t[2])&&(o.align="right"),o.align?s.removeClass(t[i[o.align]]):o.align="none"):(o.align=s.getStyle("float")||"none",s.removeStyle("float"))}this.wrapper[(o.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(o),!0!==e.config.image2_disableResizer&&h(this)},addClass:function(e){g(this).addClass(e)},allowedContent:p(e),contentTransformations:[["img[width]: sizeToAttribute"]],data:function(){var t=this.features;if(this.data.hasCaption&&!e.filter.checkFeature(t.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||e.filter.checkFeature(t.align)||(this.data.align="none"),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({alt:this.data.alt,contenteditable:!this.parts.image.getAttribute("contenteditable")||this.parts.image.getAttribute("contenteditable"),"data-cke-saved-src":this.data.src,src:this.data.src}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)Object.prototype.hasOwnProperty.call(this.data.classes,n)&&this.parts.image.removeClass(n);e.filter.checkFeature(t.dimension)&&f(this),this.oldData=CKEDITOR.tools.extend({},this.data)},downcast:u(e),draggable:!1,editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},features:m(e),getClasses:function(){var e=new RegExp("^("+[].concat(n,t).join("|")+")$");return function(){var t=this.repository.parseElementClasses(g(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),getLabel:function(){var e=(this.data.alt||"")+" "+this.pathName;return e},hasClass:function(e){return g(this).hasClass(e)},parts:{caption:"figcaption",image:"img"},removeClass:function(e){g(this).removeClass(e)},requiredContent:"img[src,alt]",styleableElements:"img figure",template:a,upcast:l(e)}}function l(e){var t=c(e),n=e.config.image2_captionedClass;return function(e,i){var r={height:1,width:1},a=e.name,s=void 0;if(!e.attributes["data-cke-realelement"]){if(t(e)){if("div"==a){var l=e.getFirst("figure");l&&(e.replaceWith(l),e=l)}i.align="center",s=e.getFirst("img")||e.getFirst("a").getFirst("img")}else"figure"==a&&e.hasClass(n)?s=e.getFirst("img")||e.getFirst("a").getFirst("img"):d(e)&&(s="a"==e.name?e.children[0]:e);if(s){for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var c=s.attributes[u];c&&c.match(o)&&delete s.attributes[u]}return e}}}}function u(e){var t=e.config.image2_alignClasses;return function(e){var n="a"==e.name?e.getFirst():e;delete n.attributes.contenteditable;var r=n.attributes,o=this.data.align;if(!this.inline){var a=e.getFirst("span");a&&a.replaceWith(a.getFirst({a:1,img:1}))}if(o&&"none"!=o){var s=CKEDITOR.tools.parseCssText(r.style||"");"center"==o&&"figure"==e.name?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{class:t[1]}:{style:"text-align:center"})):o in{left:1,right:1}&&(t?n.addClass(t[i[o]]):s["float"]=o),t||CKEDITOR.tools.isEmpty(s)||(r.style=CKEDITOR.tools.writeCssText(s))}return e}}function c(e){var t=e.config.image2_captionedClass,n=e.config.image2_alignClasses,i={a:1,figure:1,img:1};return function(r){if(!(r.name in{div:1,p:1}))return!1;var o=r.children;if(1!==o.length)return!1;var a=o[0];if(!(a.name in i))return!1;if("p"==r.name){if(!d(a))return!1}else if("figure"==a.name){if(!a.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!d(a))return!1}return!!(n?r.hasClass(n[1]):"center"==CKEDITOR.tools.parseCssText(r.attributes.style||"",!0)["text-align"])}}function d(e){return"img"==e.name||"a"==e.name&&(1==e.children.length&&e.getFirst("img"))}function f(e){var t=e.data,n={height:t.height,width:t.width},i=e.parts.image;for(var r in n)n[r]?i.setAttribute(r,n[r]):i.removeAttribute(r)}function h(e){var t=e.editor,n=t.editable(),i=t.document,o=e.resizer=i.createElement("span");if(o.addClass("cke_image_resizer"),o.addClass("cke_image_resizer_"+r[t.config.imageScaleResize]),o.append(new CKEDITOR.dom.text("",i)),e.inline)e.wrapper.append(o);else{var a=e.parts.link||e.parts.image,s=a.getParent(),l=i.createElement("span");l.addClass("cke_image_resizer_wrapper"),l.append(a),l.append(o),e.element.append(l,!0),s.is("span")&&s.remove()}o.on("mousedown",(function(r){var a=e.parts.image,s="right"==e.data.align?-1:1,l=r.data.$.screenX,u=r.data.$.screenY,c=a.$.clientWidth,d=a.$.clientHeight,f=[],h="cke_image_s"+(~s?"e":"w"),p=void 0,m=void 0,g=void 0,E=void 0,v=void 0,y=void 0;function b(e,t,n){var r=CKEDITOR.document,o=[];if(i.equals(r)||o.push(r.on(e,t)),o.push(i.on(e,t)),n)for(var a=o.length;a--;)n.push(o.pop())}function T(e){var n=t.config.imageScaleResize;p=e.data.$,v=p.screenX-l,y=u-p.screenY,"width"!==n&&"both"!==n&&"scale"!==n||(m=c+s*v),"height"!==n&&"both"!==n||(g=d-y),"scale"===n&&(g="auto"),m=m||c,g=g||d,m>=15&&(g>=15||"auto"===g)?(a.$.style.width=m+"px",a.$.style.height=g+"px",E=!0):E=!1}function C(){var i=void 0;while(i=f.pop())i.removeListener();n.removeClass(h),o.removeClass("cke_image_resizing"),E&&(e.setData({height:g,width:m}),t.fire("saveSnapshot")),E=!1}t.fire("saveSnapshot"),b("mousemove",T,f),b("mouseup",C,f),n.addClass(h),o.addClass("cke_image_resizing")})),e.on("data",(function(){o["right"==e.data.align?"addClass":"removeClass"]("cke_image_resizer_left")})),e.parts.image.on("click",(function(){var e=t.getSelection();if(e){var n=e.getStartElement();if(n){var i=n.findOne("img");if(i){var r=n.getClientRect(),o=new CKEDITOR.dom.window(window).getScrollPosition();r.left-=o.x,r.top+=o.y,r.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,t.fire("editorInteraction",{nativeEvent:event,selectionData:{element:i,region:r}})}}}}))}function p(e){var t={figcaption:!0,figure:{classes:"!"+e.config.image2_captionedClass},img:{attributes:"!src,alt,width,height"}};return t}function m(e){var t=e.config.image2_alignClasses,n={align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"},dimension:{requiredContent:"img[width,height]"}};return n}function g(e){return e.data.hasCaption?e.element:e.parts.image}CKEDITOR.plugins.add("ae_dragresize_ie",{hidpi:!0,icons:"image",init:function(e){var t=s(e);e.widgets.add("image",t)},onLoad:function(){CKEDITOR.addCss(".cke_image_resizer_nwse-resize{cursor: nwse-resize;}.cke_image_resizer_ns-resize{cursor: ns-resize;}.cke_image_resizer_nwse-resize{cursor: nwse-resize;}.cke_image_resizer_ew-resize{cursor: ew-resize;}.cke_image_nocaption{line-height:0}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;bottom:-5px;right:-5px;background:#000;outline:1px solid #fff;line-height:0;cursor:nwse-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizer.cke_image_resizing{display:block}")},requires:"widget"}),CKEDITOR.plugins.image2={checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t=void 0;if(e.$.naturalWidth)t={height:e.$.naturalHeigh,width:e.$.naturalWidth};else{var n=new Image;n.src=e.getAttribute("src"),t={height:n.heigh,width:n.width}}return t}}}CKEDITOR.config.image2_captionedClass="image"},function(e,t,n){"use strict";(function(){if(!CKEDITOR.plugins.get("ae_dragresize_ie11")){var e='<img alt="" src="" />',t=new CKEDITOR.template('<figure class="{captionedClass}">'+e+"<figcaption>{captionPlaceholder}</figcaption></figure>"),n={left:0,center:1,right:2},i=/^\s*(\d+%)\s*$/i;CKEDITOR.plugins.add("ae_dragresize_ie11",{requires:"widget",onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_ne, .cke_editable.cke_image_ne *{cursor:ne-resize !important}.cke_editable.cke_image_nw, .cke_editable.cke_image_nw *{cursor:nw-resize !important}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_ne{cursor:ne-resize;left:auto;right:-5px;top:-5px;}.cke_image_resizer.cke_image_resizer_nw{cursor:nw-resize;left:-5px;right:auto;top:-5px;}.cke_image_resizer.cke_image_resizer_se{bottom:-5px;cursor:se-resize;left:auto;right:-5px;}.cke_image_resizer.cke_image_resizer_sw{bottom:-5px;cursor:sw-resize;left:-5px;right:auto;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizing>.cke_image_resizer{display:block}.cke_widget_wrapper>a{display:inline-block}")},init:function(e){var t=o(e);e.widgets.add("image",t),e.on("selectionChange",(function(t){var n=e.getSelection();if(n){var i=n.getSelectedElement();if(i){var r=i.findOne("img");if(r){var o=i.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();o.left-=a.x,o.top+=a.y,o.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:o}})}}}}))},afterInit:function(e){var t={left:1,right:1,center:1,block:1},n=h(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n(i)}}),CKEDITOR.plugins.ae_dragresize_ie11={stateShifter:function(e){var n=e.document,i=e.config.ae_dragresize_ie11_alignClasses,r=e.config.ae_dragresize_ie11_captionedClass,o=e.editable(),a=["hasCaption","align","link"],s={align:function(t,n,r){var o=t.element;t.changed.align||"auto"===o.$.style.marginLeft&&"auto"===o.$.style.marginRight?t.newData.hasCaption||(("center"==r||"auto"===o.$.style.marginLeft&&"auto"===o.$.style.marginRight)&&(t.deflate(),t.element=l(e,o)),t.changed.hasCaption||"center"!=n||"center"==r||(t.deflate(),t.element=u(o))):"center"==r&&t.changed.hasCaption&&!t.newData.hasCaption&&(t.deflate(),t.element=l(e,o)),!i&&o.is("figure")&&("center"==r?o.setStyle("display","inline-block"):o.removeStyle("display"))},hasCaption:function(i,o,a){if(i.changed.hasCaption){var s=void 0;if(s=i.element.is({img:1,a:1})?i.element:i.element.findOne("a,img"),i.deflate(),a){var l=CKEDITOR.dom.element.createFromHtml(t.output({captionedClass:r,captionPlaceholder:e.lang.ae_dragresize_ie11.captionPlaceholder}),n);f(l,i.element),s.replace(l.findOne("img")),i.element=l}else s.replace(i.element),i.element=s}},link:function(t,n,i){if(t.changed.link){var r=t.element.is("img")?t.element:t.element.findOne("img"),o=t.element.is("a")?t.element:t.element.findOne("a"),a=t.element.is("a")&&!i||t.element.is("img")&&i,s=void 0;if(a&&t.deflate(),i){n||(s=c(r,t.newData.link));var l=CKEDITOR.plugins.ae_dragresize_ie11.getLinkAttributesGetter()(e,i);CKEDITOR.tools.isEmpty(l.set)||(s||o).setAttributes(l.set),l.removed.length&&(s||o).removeAttributes(l.removed)}else s=d(o);a&&(t.element=s)}}};function l(e,t){var r={};i?r.attributes={class:i[1]}:r.styles={"text-align":"center"};var o=n.createElement(e.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",r);return f(o,t),t.move(o),o}function u(e){var t=e.findOne("a,img");return t.replace(e),t}function c(e,t){var i=n.createElement("a",{attributes:{href:t.url}});return i.replace(e),e.move(i),i}function d(e){var t=e.findOne("img");return t.replace(e),t}function f(t,n){if(n.getParent()){var i=e.createRange();i.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),o.insertElementIntoRange(t,i)}else t.replace(n)}return function(e){var t=void 0,n=void 0;for(e.changed={},n=0;n<a.length;n++)t=a[n],e.changed[t]=!!e.oldData&&e.oldData[t]!==e.newData[t];for(n=0;n<a.length;n++)t=a[n],s[t](e,e.oldData?e.oldData[t]:null,e.newData[t]);e.inflate()}},checkHasNaturalRatio:function(e){var t=e.$,n=this.getNatural(e);return Math.round(t.clientWidth/n.width*n.height)==t.clientHeight||Math.round(t.clientHeight/n.height*n.width)==t.clientWidth},getNatural:function(e){var t=void 0;if(e.$.naturalWidth)t={width:e.$.naturalWidth,height:e.$.naturalHeight};else{var n=new Image;n.src=e.getAttribute("src"),t={width:n.width,height:n.height}}return t},getLinkAttributesGetter:function(){return CKEDITOR.plugins.link.getLinkAttributes},getLinkAttributesParser:function(){return CKEDITOR.plugins.link.parseLinkAttributes}};var r=function(e,t){"left"===t||"right"===t?e.wrapper.removeStyle("float"):"center"===t&&(e.editor.execCommand("justifyleft"),e.editor.execCommand("justifyleft"))}}function o(t){var i=t.config.ae_dragresize_ie11_alignClasses,r=t.config.ae_dragresize_ie11_captionedClass;function o(){this.deflated||(t.widgets.focused==this.widget&&(this.focused=!0),t.widgets.destroy(this.widget),this.deflated=!0)}function u(){var e=t.editable(),n=t.document;if(this.deflated){if(this.widget=t.widgets.initOn(this.element,"image",this.widget.data),this.widget.inline&&!new CKEDITOR.dom.elementPath(this.widget.wrapper,e).block){var r=n.createElement(t.activeEnterMode==CKEDITOR.ENTER_P?"p":"div");r.replace(this.widget.wrapper),this.widget.wrapper.move(r)}this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated}else a(this.widget,i)}return{allowedContent:m(t),requiredContent:"img[src,alt]",features:g(t),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},parts:{image:"img",caption:"figcaption"},template:e,data:function(){var e=this.features;if(this.data.hasCaption&&!t.filter.checkFeature(e.caption)&&(this.data.hasCaption=!1),"none"==this.data.align||t.filter.checkFeature(e.align)||(this.data.align="none"),this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:o,inflate:u}),this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link,this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt}),this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var n in this.data.classes)Object.prototype.hasOwnProperty.call(this.data.classes,n)&&this.parts.image.removeClass(n);t.filter.checkFeature(e.dimension)&&d(this),this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var e=CKEDITOR.plugins.ae_dragresize_ie11,r=this.parts.image,o={hasCaption:!!this.parts.caption,src:r.getAttribute("src"),alt:r.getAttribute("alt")||"",width:r.getAttribute("width")||"",height:r.getAttribute("height")||"",lock:!this.ready||e.checkHasNaturalRatio(r)},a=r.getAscendant("a");if(a&&this.wrapper.contains(a)&&(this.parts.link=a),!o.align){var s=o.hasCaption?this.element:r;i?(s.hasClass(i[0])?o.align="left":s.hasClass(i[2])&&(o.align="right"),o.align?s.removeClass(i[n[o.align]]):o.align="none"):(o.align=s.getStyle("float")||"none",s.removeStyle("float"))}if(t.plugins.link&&this.parts.link){o.link=e.getLinkAttributesParser()(t,this.parts.link);var l=o.link.advanced;l&&l.advCSSClasses&&(l.advCSSClasses=CKEDITOR.tools.trim(l.advCSSClasses.replace(/cke_\S+/,"")))}this.wrapper[(o.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption"),this.setData(o),t.filter.checkFeature(this.features.dimension)&&!0!==t.config.ae_dragresize_ie11_disableResizer&&f(this);var u=this.dragHandlerContainer.$.style;u.setAttribute("backgroundColor","rgba(255, 255, 255, 1"),u.setAttribute("opacity","1"),this.shiftState=e.stateShifter(this.editor),this.on("contextMenu",(function(e){e.data.image=CKEDITOR.TRISTATE_OFF,(this.parts.link||this.wrapper.getAscendant("a"))&&(e.data.link=e.data.unlink=CKEDITOR.TRISTATE_OFF)}))},addClass:function(e){E(this).addClass(e)},hasClass:function(e){return E(this).hasClass(e)},removeClass:function(e){E(this).removeClass(e)},getClasses:function(){var e=new RegExp("^("+[].concat(r,i).join("|")+")$");return function(){var t=this.repository.parseElementClasses(E(this).getAttribute("class"));for(var n in t)e.test(n)&&delete t[n];return t}}(),upcast:s(t),downcast:l(t),getLabel:function(){var e=(this.data.alt||"")+" "+this.pathName;return this.editor.lang.widget.label.replace(/%1/,e)}}}function a(e,t){var i=e.wrapper,r=e.data.align,o=e.data.hasCaption;if(t){for(var a=3;a--;)i.removeClass(t[a]);"center"==r?o&&i.addClass(t[1]):"none"!=r&&i.addClass(t[n[r]])}else{"center"==r?(o?i.setStyle("text-align","center"):i.removeStyle("text-align"),i.removeStyle("float")):("none"==r?i.removeStyle("float"):i.setStyle("float",r),i.removeStyle("text-align"));var s=i.$.querySelector("img"),l=s.getAttribute("style");if(l){var u="",c=/(height:.+?;)/.exec(l);c&&(u+=c[0]);var d=/(width:.+?;)/.exec(l);d&&(u+=d[0]),s.setAttribute("style",u)}}}function s(e){var t=u(e),n=e.config.ae_dragresize_ie11_captionedClass;return function(e,r){var o={width:1,height:1},a=e.name,s=void 0;if(!e.attributes["data-cke-realelement"]){if(t(e)){if("div"==a){var l=e.getFirst("figure");l&&(e.replaceWith(l),e=l)}r.align="center",s=e.getFirst("img")||e.getFirst("a").getFirst("img")}else"figure"==a&&e.hasClass(n)?s=e.getFirst("img")||e.getFirst("a").getFirst("img"):c(e)&&(s="a"==e.name?e.children[0]:e);if(s){for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var d=s.attributes[u];d&&d.match(i)&&delete s.attributes[u]}return e}}}}function l(e){var t=e.config.ae_dragresize_ie11_alignClasses;return function(e){var i="a"==e.name?e.getFirst():e,r=i.attributes,o=this.data.align;if(!this.inline){var a=e.getFirst("span");a&&a.replaceWith(a.getFirst({img:1,a:1}))}if(o&&"none"!=o){var s=CKEDITOR.tools.parseCssText(r.style||"");"center"==o&&"figure"==e.name?e=e.wrapWith(new CKEDITOR.htmlParser.element("div",t?{class:t[1]}:{style:"text-align:center"})):o in{left:1,right:1}&&(t?i.addClass(t[n[o]]):s["float"]=o),t||CKEDITOR.tools.isEmpty(s)||(r.style=CKEDITOR.tools.writeCssText(s)+";")}return e}}function u(e){var t=e.config.ae_dragresize_ie11_captionedClass,n=e.config.ae_dragresize_ie11_alignClasses,i={figure:1,a:1,img:1};return function(r){if(!(r.name in{div:1,p:1}))return!1;var o=r.children;if(1!==o.length)return!1;var a=o[0];if(!(a.name in i))return!1;if("p"==r.name){if(!c(a))return!1}else if("figure"==a.name){if(!a.hasClass(t))return!1}else{if(e.enterMode==CKEDITOR.ENTER_P)return!1;if(!c(a))return!1}return!!(n?r.hasClass(n[1]):"center"==CKEDITOR.tools.parseCssText(r.attributes.style||"",!0)["text-align"])}}function c(e){return"img"==e.name||"a"==e.name&&(1==e.children.length&&e.getFirst("img"))}function d(e){var t=e.data,n={width:t.width,height:t.height},i=e.parts.image;for(var r in n)n[r]?i.setAttribute(r,n[r]):i.removeAttribute(r)}function f(e){var t=e.editor,n=t.editable(),i=t.document,r=e.resizer=i.createElement("span"),o=i.createElement("span"),a=i.createElement("span"),s=i.createElement("span"),l=i.createElement("span");if(o.addClass("cke_image_resizer"),o.addClass("cke_image_resizer_ne"),a.addClass("cke_image_resizer"),a.addClass("cke_image_resizer_nw"),s.addClass("cke_image_resizer"),s.addClass("cke_image_resizer_se"),l.addClass("cke_image_resizer"),l.addClass("cke_image_resizer_sw"),r.append(o),r.append(a),r.append(s),r.append(l),r.append(new CKEDITOR.dom.text("",i)),e.inline)e.wrapper.append(r);else{var u=e.parts.link||e.parts.image,c=u.getParent(),d=i.createElement("span");d.addClass("cke_image_resizer_wrapper"),d.append(u),d.append(r),e.element.append(d,!0),c.is("span")&&c.remove()}r.on("mousedown",(function(o){var a=e.parts.image,s=o.data.$.screenX,l=o.data.$.screenY,u=a.$.clientWidth,c=a.$.clientHeight,d=u/c,f=[],h=o.data.getTarget(),p=void 0,m=void 0,g=void 0,E=void 0,v=void 0,y=void 0,b=void 0,T=void 0;h.hasClass("cke_image_resizer_ne")?(p=1,m=1):h.hasClass("cke_image_resizer_nw")?(p=-1,m=1):h.hasClass("cke_image_resizer_se")?(p=1,m=-1):h.hasClass("cke_image_resizer_sw")&&(p=-1,m=-1);var C="cke_image_"+(~m?"n":"s")+(~p?"e":"w");function O(e,t,n){var r=CKEDITOR.document,o=[];if(i.equals(r)||o.push(r.on(e,t)),o.push(i.on(e,t)),n)for(var a=o.length;a--;)n.push(o.pop())}function I(){b=u+p*g,y=Math.round(b/d)}function _(){y=c+m*E,b=Math.round(y*d)}function D(e){v=e.data.$,g=v.screenX-s,E=l-v.screenY,1==p?g<=0?_():I():g<=0?I():_(),b>=15&&y>=15?(a.$.style.width=b+"px",a.$.style.height=y+"px",T=!0):T=!1}function R(){var i=void 0;while(i=f.pop())i.removeListener();n.removeClass(C),r.removeClass("cke_image_resizing"),T&&(e.setData({height:y,width:b}),t.fire("saveSnapshot")),T=!1}t.fire("saveSnapshot"),O("mousemove",D,f),O("mouseup",R,f),n.addClass(C),r.addClass("cke_image_resizing")}))}function h(e){var t=[],n=void 0;return function(i){var o=e.getCommand("justify"+i);o&&(t.push((function(){o.refresh(e,e.elementPath())})),i in{right:1,left:1,center:1}&&o.on("exec",(function(n){var o=p(e);if(o){o.data.align===i?(r(o,i),delete o.data.align):o.setData("align",i);for(var a=t.length;a--;)t[a]();n.cancel()}})),o.on("refresh",(function(t){var r=p(e),o={right:1,left:1,center:1};r&&(void 0===n&&(n=e.filter.checkFeature(e.widgets.registered.image.features.align)),n?this.setState(r.data.align==i?CKEDITOR.TRISTATE_ON:i in o?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),t.cancel())})))}}function p(e){var t=e.widgets.focused;return t&&"image"==t.name?t:null}function m(e){var t=e.config.ae_dragresize_ie11_alignClasses,n={div:{match:u(e)},p:{match:u(e)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+e.config.ae_dragresize_ie11_captionedClass},figcaption:!0};return t?(n.div.classes=t[1],n.p.classes=n.div.classes,n.img.classes=t[0]+","+t[2],n.figure.classes+=","+n.img.classes):(n.div.styles="text-align",n.p.styles="text-align",n.img.styles="float",n.figure.styles="float,display"),n}function g(e){var t=e.config.ae_dragresize_ie11_alignClasses,n={dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(t?"("+t[0]+")":"{float}")},caption:{requiredContent:"figcaption"}};return n}function E(e){return e.data.hasCaption?e.element:e.parts.image}})(),CKEDITOR.config.ae_dragresize_ie11_captionedClass="image"},function(e,t,n){"use strict";var i=n(137);if(!CKEDITOR.plugins.get("ae_embed")){var r=/^https?/,o=/<a href=/;CKEDITOR.DEFAULT_AE_EMBED_URL_TPL="http://alloy.iframe.ly/api/oembed?url={url}&callback={callback}",CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL='<div data-ae-embed-url="{url}"></div>',CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL='<a href="{url}">{url}</a>',CKEDITOR.plugins.add("ae_embed",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedUrlTemplate||CKEDITOR.DEFAULT_AE_EMBED_URL_TPL),n=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_AE_EMBED_WIDGET_TPL),a=new CKEDITOR.template(e.config.embedLinkDefaultTpl||CKEDITOR.DEFAULT_AE_EMBED_DEFAULT_LINK_TPL),s=function(e,t){if("div"===e.name&&e.attributes["data-ae-embed-url"])return t.url=e.attributes["data-ae-embed-url"],!0};e.addCommand("embedUrl",{exec:function(e,t){e.insertHtml(n.output({url:t.url}))}}),e.widgets.add("ae_embed",{mask:!0,requiredContent:"div[data-ae-embed-url]",data:function(e){var n=this,i=e.data.url;i&&CKEDITOR.tools.jsonp(t,{url:encodeURIComponent(i)},(function(e){e.html?o.test(e.html)?n.createATag(i):n.element.setHtml(e.html):n.createATag(i)}),(function(e){n.createATag(i)}))},createATag:function(e){this.editor.execCommand("undo");var t=a.output({url:e});this.editor.insertHtml(t),this.editor.fire("actionPerformed",this)},upcast:function(t,n){var i=e.config.embedWidgetUpcastFn||s;return i(t,n)}}),e.once("contentDom",(function(){e.on("paste",(function(t){var n=t.data.dataValue;r.test(n)&&(t.stop(),e.execCommand("embedUrl",{url:t.data.dataValue}))}),null,null,i.HIGH_PRIORITY)})),e.on("selectionChange",(function(t){var n=e.getSelection();if(n){var i=n.getSelectedElement();if(i){var r=i.findOne('[data-widget="ae_embed"]');if(r){var o=i.getClientRect(),a=new CKEDITOR.dom.window(window).getScrollPosition();o.left-=a.x,o.top+=a.y,o.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:o}})}}}})),e.filter.addElementCallback((function(e){if("data-ae-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE}))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_PRIORITY=10,t.HIGH_PRIORITY=5},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(139),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}if(!CKEDITOR.plugins.get("embedurl")){var a=/^https?/;CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL='<div data-embed-url="{url}" class="embed-responsive embed-responsive-16by9">{content}<div class="embed-help-message">{helpMessageIcon}<span> {helpMessage}</span></div></div><br>';var s={CENTER:"center",LEFT:"left",RIGHT:"right"},l=[s.CENTER,s.LEFT,s.RIGHT],u=[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}],c=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){var n=u.every((function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some((function(n){return e.getStyle(n+t.name)===t.value}))),n}));t=n?s.CENTER:null}return t},d=function(e,t){t===s.LEFT||t===s.RIGHT?(e.removeStyle("float"),t===c(e)&&e.removeAttribute("align")):t===s.CENTER&&u.forEach((function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach((function(n){return e.removeStyle(n+t.name)}))}))},f=function(e,t){d(e,c(e)),t===s.LEFT||t===s.RIGHT?e.setStyle("float",t):t===s.CENTER&&u.forEach((function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach((function(n){return e.setStyle(n+t.name,t.value)}))}))},h=function(e){var t={alignment:null,element:null},n=e.getSelection();if(n){var i=n.getSelectedElement();i&&i.getAttribute("data-cke-widget-wrapper")&&(t.alignment=c(i),t.element=i)}return t},p=function(e,t,n){var i=e.parentElement;if(i&&t>0&&n>0){var r=i.getBoundingClientRect(),o=t>=r.width?100:Math.floor(t/r.width*100),a="width:"+o+"%;";i.setAttribute("style",a);var s=i.querySelector('[data-widget="embedurl"]');if(s){var l=JSON.parse(s.getAttribute("data-styles"))||{};l.width=t+"px",l.height=n+"px",s.setAttribute("data-styles",JSON.stringify(l));var u=s.querySelector("iframe");u&&(u.setAttribute("width",t),u.setAttribute("height",n))}}},m=function(e){setTimeout((function(){var t=e.getSelection();if(t){var n=t.root.find("[data-cke-widget-wrapper]");if(n){var i=n.$;if(i.length>0){var r=new CKEDITOR.dom.element(i[i.length-1]),o=r.findOne("img"),a=r.findOne('[data-widget="embedurl"]');if(o&&a){var s=e.createRange();s.setStart(a,0),s.setEnd(o,1),t.selectRanges([s]),t.selectElement(r)}}}}}),0)},g=null,E=null,v=null;CKEDITOR.plugins.add("embedurl",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL),n=e.config.embedProviders||[];n=n.map((function(e){return{id:e.id,tpl:new CKEDITOR.template('<div data-embed-id="{embedId}">'+e.tpl+"</div>"),type:e.type,urlSchemes:e.urlSchemes.map((function(e){return new RegExp(e)}))}}));var i=function(e,n){return t.output({content:n,helpMessage:AlloyEditor.Strings.videoPlaybackDisabled,helpMessageIcon:Liferay.Util.getLexiconIconTpl("info-circle"),url:e})},o=function(e,t){var n=!1;if("div"===e.name&&e.attributes["data-embed-url"])t.url=e.attributes["data-embed-url"],n=!0;else if("div"===e.name&&e.attributes["data-embed-id"]){var r=e.children[0];t.url=r.attributes.src,delete e.attributes.style;var o=i(t.url,e.getOuterHtml()),a=new CKEDITOR.htmlParser.fragment.fromHtml(o);n=a.children[0],n.attributes["data-styles"]=e.attributes["data-styles"],n.removeClass("embed-responsive"),n.removeClass("embed-responsive-16by9"),e.replaceWith(n)}return n},s=function(t){e.fire("error",t),setTimeout((function(){e.getSelection().removeAllRanges(),e.focus(),v.hide()}),0)};e.addCommand("embedUrl",{exec:function(e,t){var r=t.type,o=t.url,l=void 0;if(a.test(o)){var u=n.filter((function(e){return!r||e.type===r})).some((function(e){var t=e.urlSchemes.find((function(e){return e.test(o)}));if(t){var n=t.exec(o)[1];l=e.tpl.output({embedId:n})}return t}));if(u){e._selectEmbedWidget=o;var c=i(o,l);e.insertHtml(c)}else s(AlloyEditor.Strings.platformNotSupported)}else s(AlloyEditor.Strings.enterValidUrl)}}),e.widgets.add("embedurl",{draggable:!1,mask:!0,requiredContent:"div[data-embed-url]",data:function(t){var n=this,i=n.element.getAttribute("data-styles"),r=i?JSON.parse(i):null;if(!r){var o=n.wrapper.findOne("iframe"),a=n.wrapper.$.getBoundingClientRect(),s=o.getAttribute("width"),l=s>=a.width?100:Math.round(s/a.width*100);r={width:l+"%"}}n.wrapper.setAttribute("style",CKEDITOR.tools.writeCssText(r)),e._selectEmbedWidget===t.data.url&&m(e)},downcast:function(e){var t=e.children[0];return t.attributes.class="embed-responsive embed-responsive-16by9",t.attributes["data-styles"]=JSON.stringify(CKEDITOR.tools.parseCssText(e.parent.attributes.style)),t.attributes.style=e.parent.attributes.style,t},upcast:function(t,n){var i=e.config.embedWidgetUpcastFn||o;return i(t,n)}}),window.addEventListener("resize",(function(){v.hide(),m(e)}),!1),e.on("selectionChange",(function(t){var n=e.getSelection();if(n){var i=n.getSelectedElement();if(i){var r=i.findOne('[data-widget="embedurl"]');if(r){var o=new CKEDITOR.dom.window(window).getScrollPosition(),a=i.getClientRect();a.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,a.left-=o.x,a.top+=o.y,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:r,region:a}})}var s=i.findOne("img.cke_widget_mask");s&&v.show(s.$)}else v.hide()}})),e.on("destroy",(function(){var e=document.getElementById("ckimgrsz");e&&e.remove(),document.removeEventListener("mousedown",l)})),e.on("blur",(function(){v.hide()})),e.filter.addElementCallback((function(e){if("data-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE}));var l=function(t){var n=h(e);g=n.alignment,E=n.element,v.isHandle(t.target)&&v.initDrag(t)};v=new r.default(e,{onComplete:function(t,n,i){p(t,n,i),g&&E&&f(E,g),m(e)}}),document.addEventListener("mousedown",l,!1)},afterInit:function(e){l.forEach((function(t){var n=e.getCommand("justify"+t);n&&(n.on("exec",(function(n){var i=e.getSelection().getSelectedElement();if(i&&i.getAttribute("data-cke-widget-wrapper")){var r=i.findOne('[data-widget="embedurl"] [data-embed-id]');if(r){var o=c(i);o===t?d(i,t):f(i,t),E=i,g=c(i);var a=i.findOne("img");a&&v.show(a.$),n.cancel();var s=new CKEDITOR.dom.elementPath(i);l.forEach((function(t){var n=e.getCommand("justify"+t);n&&n.refresh(e,s)}))}}})),n.on("refresh",(function(e){var n=e.data.path.lastElement;if(n&&n.getAttribute("data-cke-widget-wrapper")&&n.findOne("[data-widget] [data-embed-id]")){var i=c(n);e.sender.setState(i===t?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}})))}))}})}t.default=CKEDITOR.plugins.get("embedurl")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resizer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(140),o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["tl","tr","bl","br"],u={bl:function(e,t,n,i){c(e,-3+t,i.height-4+n)},br:function(e,t,n,i){c(e,i.width-4+t,i.height-4+n)},rm:function(e,t,n,i){c(e,i.width-4+t,Math.round(i.height/2)-3+n)},tl:function(e,t,n,i){c(e,t-3,n-3)},tr:function(e,t,n,i){c(e,i.width-4+t,-3+n)}},c=function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},d=function(e,t){var n=t.getBoundingClientRect();return{height:n.height,left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width}},f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),this.cfg=n,this.editor=t,this.document=t.document?t.document.$:document,this.window=t.window?t.window.$:window,this.box=null,this.container=null,this.handles={},this.preview=null,this.previewBox=null,this.result=null,this.init()}return i(e,[{key:"init",value:function(){var e=this;this.container=this.document.createElement("div"),this.container.id="ckimgrsz",this.preview=this.document.createElement("span"),this.container.appendChild(this.preview),this.handles={},l.forEach((function(t){e.handles[t]=e.createHandle(t)}));for(var t=Object.keys(this.handles),n=0;n<t.length;n++)this.container.appendChild(this.handles[t[n]])}},{key:"createHandle",value:function(e){var t=this.document.createElement("i");return t.classList.add(e),t}},{key:"isHandle",value:function(e){for(var t=Object.keys(this.handles),n=!1,i=0;i<t.length;i++)this.handles[t[i]]===e&&(n=!0);return n}},{key:"show",value:function(e){var t=this.editor.config.uiNode||document.body;this.el=e,this.box=d(this.window,this.el),c(this.container,this.box.left,this.box.top+t.scrollTop),t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()}},{key:"hide",value:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;t++)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"initDrag",value:function(e){var t=this;if(0===e.button){var n=new o.default(this.window,this.document);n.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},n.onDrag=function(){t.calculateSize(n);var e=t.editor.element.$.getBoundingClientRect();if(!(t.previewBox.width>=e.width)){t.updatePreview();var i=t.previewBox;t.updateHandles(i,i.left,i.top)}},n.onRelease=function(){t.hidePreview(),t.isDragging=!1,t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},n.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},n.start(e)}}},{key:"updateHandles",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Object.keys(this.handles),r=0;r<i.length;r++)u[i[r]](this.handles[i[r]],t,n,e)}},{key:"showHandles",value:function(){this.updateHandles(this.box);for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="block"}},{key:"hideHandles",value:function(){for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="none"}},{key:"showPreview",value:function(){this.calculateSize(),this.updatePreview(),this.preview.style.display="block"}},{key:"updatePreview",value:function(){c(this.preview,this.previewBox.left,this.previewBox.top),this.preview.style.height=this.previewBox.height+"px",this.preview.style.width=this.previewBox.width+"px"}},{key:"hidePreview",value:function(){var e=d(this.window,this.preview);this.result={height:e.height,width:e.width},this.preview.style.display="none"}},{key:"calculateSize",value:function(e){if(this.previewBox={height:this.box.height,left:0,top:0,width:this.box.width},e){var t=e.target.className;if(t.indexOf("r")>=0&&(this.previewBox.width=Math.max(32,this.box.width+e.delta.x)),t.indexOf("b")>=0&&(this.previewBox.height=Math.max(32,this.box.height+e.delta.y)),t.indexOf("l")>=0&&(this.previewBox.width=Math.max(32,this.box.width-e.delta.x)),t.indexOf("t")>=0&&(this.previewBox.height=Math.max(32,this.box.height-e.delta.y)),t.indexOf("m")<0&&!e.keys.shift){var n=this.box.width/this.box.height;this.previewBox.width/this.previewBox.height>n?this.previewBox.height=Math.round(this.previewBox.width/n):this.previewBox.width=Math.round(this.previewBox.height*n)}t.indexOf("l")>=0&&(this.previewBox.left=this.box.width-this.previewBox.width),t.indexOf("t")>=0&&(this.previewBox.top=this.box.height-this.previewBox.height)}}},{key:"resizeComplete",value:function(){this.cfg.onComplete(this.el,this.result.width,this.result.height)}}]),e}();t.Resizer=f,t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t,n){r(this,e),this.document=n,this.window=t,this.events={keydown:this.keydown.bind(this),mousemove:this.mousemove.bind(this),mouseup:this.mouseup.bind(this)}}return i(e,[{key:"start",value:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.className=this.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e),this.document.addEventListener("keydown",this.events.keydown,!1),this.document.addEventListener("mousemove",this.events.mousemove,!1),this.document.addEventListener("mouseup",this.events.mouseup,!1),this.document.body.classList.add("dragging-"+this.className),"function"===typeof this.onStart&&this.onStart()}},{key:"update",value:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey}}},{key:"mousemove",value:function(e){this.update(e),"function"===typeof this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)}},{key:"keydown",value:function(e){27===e.keyCode&&this.release()}},{key:"mouseup",value:function(e){this.update(e),this.release(),"function"===typeof this.onComplete&&this.onComplete()}},{key:"release",value:function(){this.document.body.classList.remove("dragging-"+this.className),this.document.removeEventListener("keydown",this.events.keydown,!1),this.document.removeEventListener("mousemove",this.events.mousemove,!1),this.document.removeEventListener("mouseup",this.events.mouseup,!1),"function"===typeof this.onRelease&&this.onRelease()}}]),e}();t.DragEvent=o,t.default=o},function(e,t,n){"use strict";var i=n(23),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}if(!CKEDITOR.plugins.get("ae_imagealignment")){var s,l={CENTER:"center",LEFT:"left",RIGHT:"right"},u=[l.LEFT,l.RIGHT,l.CENTER],c=(s={},a(s,l.LEFT,[{name:"display",value:"inline-block"},{name:"float",value:"left"},{name:"margin-right",value:"1.2rem"}]),a(s,l.CENTER,[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}]),a(s,l.RIGHT,[{name:"display",value:"inline-block"},{name:"float",value:"right"},{name:"margin-left",value:"1.2rem"}]),s),d=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){var n=c[l.CENTER].every((function(t){var n=e.getStyle(t.name)===t.value;return!n&&t.vendorPrefixes&&(n=t.vendorPrefixes.some((function(n){return e.getStyle(n+t.name)===t.value}))),n}));if(!t){var i=e.$.parentNode;i.style.textAlign==l.CENTER&&(c[l.CENTER].forEach((function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach((function(n){e.setStyle(n+t.name,t.value)}))})),n=!0,i.style.textAlign="")}t=n?l.CENTER:null}if(!CKEDITOR.env.edge&&CKEDITOR.env.ie){var r=e.findOne("p");r&&(t=r.getStyle("text-align"))}return t},f=function(e,t){if(t===l.LEFT||t===l.RIGHT)t===d(e)&&e.removeAttribute("align");else if(t===l.CENTER){var n=e.$.parentNode;n.style.textAlign==l.CENTER&&(n.style.textAlign="")}var i=c[t];i&&i.forEach((function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach((function(n){e.removeStyle(n+t.name)}))}))},h=function(e,t){f(e,d(e));var n=c[t];n&&n.forEach((function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach((function(n){e.setStyle(n+t.name,t.value)}))}))};CKEDITOR.plugins.add("ae_imagealignment",{afterInit:function(e){var t=this;u.forEach((function(n){var i=e.getCommand("justify"+n);i&&(i.on("exec",(function(i){var o=e.getSelectionData();if(o&&r.default.image({data:{selectionData:o}})){var a=o.element,s=d(a);s===n?f(a,n):h(a,n),i.cancel(),t.refreshCommands(e,new CKEDITOR.dom.elementPath(a))}})),i.on("refresh",(function(e){var t={element:e.data.path.lastElement};if(r.default.image({data:{selectionData:t}})){var i=d(t.element);this.setState(i===n?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}})))}))},refreshCommands:function(e,t){u.forEach((function(n){var i=e.getCommand("justify"+n);i&&i.refresh(e,t)}))}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_pasteimages")||CKEDITOR.plugins.add("ae_pasteimages",{init:function(e){var t=this;e.once("contentDom",(function(){var n=e.editable();n.attachListener(n,"paste",t._onPaste,t,{editor:e})}))},_onPaste:function(e){if(e.data.$.clipboardData){var t=e.data.$.clipboardData.items[0],n=e.listenerData.editor;if(0===t.type.indexOf("image")){var i=new FileReader,r=t.getAsFile();i.onload=function(e){var t=n.fire("beforeImageAdd",{imageFiles:r});if(t){var i=CKEDITOR.dom.element.createFromHtml('<img src="'+e.target.result+'">');n.insertElement(i);var o={el:i,file:r};n.fire("imageAdd",o)}},i.readAsDataURL(r)}}}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_placeholder")){var i=CKEDITOR.env.needsBrFiller?"<br>":"",r={1:["<p>"+i+"</p>"],2:[""," ",i],3:["<div>"+i+"</div>"]};CKEDITOR.plugins.add("ae_placeholder",{init:function(e){e.on("blur",this._checkEmptyData,this),e.on("change",this._checkEmptyData,this),e.on("focus",this._removePlaceholderClass,this),e.once("contentDom",this._checkEmptyData,this)},_checkEmptyData:function(e){var t=e.editor,n=t.editable(),i=n.$.innerHTML.trim(),o=r[t.config.enterMode].some((function(e){return i===e}));o?n.addClass(t.config.placeholderClass):n.removeClass(t.config.placeholderClass)},_removePlaceholderClass:function(e){var t=e.editor,n=new CKEDITOR.dom.element(t.element.$);n.removeClass(t.config.placeholderClass)}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_selectionkeystrokes")||CKEDITOR.plugins.add("ae_selectionkeystrokes",{requires:"ae_selectionregion",init:function(e){e.config.selectionKeystrokes&&e.config.selectionKeystrokes.forEach((function(t){var n=new CKEDITOR.command(e,{exec:function(e){e.fire("editorInteraction",{manualSelection:t.selection,nativeEvent:{},selectionData:e.getSelectionData()})}}),i="selectionKeystroke"+t.selection;e.addCommand(i,n),e.setKeystroke(t.keys,i)}))}})},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tableresize")){var i=CKEDITOR.tools.cssLength;function r(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function o(e,t){var n=e.getComputedStyle("border-"+t+"-width"),i={thin:"0px",medium:"1px",thick:"2px"};return n.indexOf("px")<0&&(n=n in i&&"none"!=e.getComputedStyle("border-style")?i[n]:0),parseInt(n,10)}function a(e){for(var t=e.$.rows,n=0,i=void 0,r=void 0,o=void 0,a=0,s=t.length;a<s;a++)o=t[a],i=o.cells.length,i>n&&(n=i,r=o);return r}function s(e){for(var t=[],n=-1,i="rtl"===e.getComputedStyle("direction"),r=a(e),s=new CKEDITOR.dom.element(e.$.tBodies[0]),l=s.getDocumentPosition(),u=0,c=r.cells.length;u<c;u++){var d=new CKEDITOR.dom.element(r.cells[u]),f=r.cells[u+1]&&new CKEDITOR.dom.element(r.cells[u+1]);n+=d.$.colSpan||1;var h=void 0,p=void 0,m=d.getDocumentPosition().x;i?p=m+o(d,"left"):h=m+d.$.offsetWidth-o(d,"right"),f?(m=f.getDocumentPosition().x,i?h=m+f.$.offsetWidth-o(f,"right"):p=m+o(f,"left")):(m=e.getDocumentPosition().x,i?h=m:p=m+e.$.offsetWidth);var g=Math.max(p-h,4);t.push({table:e,index:n,x:h,y:l.y,width:g,height:s.$.offsetHeight,rtl:i})}return t}function l(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t>=r.x&&t<=r.x+r.width)return r}return null}function u(e){(e.data||e).preventDefault()}function c(e,t){var n=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=void 0,h=e.document,p=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10"></div>',h),m=this.isResizing=function(){return l},g=this.move=function(e){var t=e-Math.round(p.$.offsetWidth/2);if(m){if(t===a||t===c)return;t=Math.max(t,a),t=Math.min(t,c),n=t-f}p.setStyle("left",i(t))};function E(){p.removeListener("mouseup",C),p.removeListener("mousedown",T),p.removeListener("mousemove",O)}function v(){for(var e=t.index,i=CKEDITOR.tools.buildTableMap(t.table),o=[],m=[],g=Number.MAX_VALUE,E=g,v=t.rtl,y=0,b=i.length;y<b;y++){var T=i[y],C=T[e+(v?1:0)],I=T[e+(v?0:1)];C=C&&new CKEDITOR.dom.element(C),I=I&&new CKEDITOR.dom.element(I),C&&I&&C.equals(I)||(C&&(g=Math.min(g,r(C))),I&&(E=Math.min(E,r(I))),o.push(C),m.push(I))}s=o,d=m,a=t.x-g,c=t.x+E,p.setOpacity(.5),f=parseInt(p.getStyle("left"),10),n=0,l=1,p.on("mousemove",O),h.on("dragstart",u)}function y(){l=0,p.setOpacity(0),n&&b();var e=t.table;setTimeout((function(){e.removeCustomData("_cke_table_pillars")}),0),h.removeListener("dragstart",u)}function b(){for(var e=this,a=t.rtl,l=a?d.length:s.length,u=function(l){var u=s[l],c=d[l],f=t.table;CKEDITOR.tools.setTimeout((function(e,t,n,r,o,s){e&&e.setStyle("width",i(Math.max(t+s,1))),n&&n.setStyle("width",i(Math.max(r-s,1))),o&&f.setStyle("width",i(o+s*(a?-1:1)))}),0,e,[u,u&&r(u),c,c&&r(c),(!u||!c)&&r(f)+o(f,"left")+o(f,"right"),n])},c=0;c<l;c++)u(c)}function T(e){u(e),v(),h.on("mouseup",C,this)}function C(e){e.removeListener(),y()}function O(e){g(e.data.getPageOffset().x)}e.on("destroy",(function(){E(),p.remove()})),h.getDocumentElement().append(p),p.setStyles({width:i(t.width),height:i(t.height),left:i(t.x),top:i(t.y)}),p.on("mousedown",T,this),h.getBody().setStyle("cursor","col-resize"),p.show(),this.destroy=function(){E(),h.getBody().setStyle("cursor","auto"),p.remove()}}function d(e){var t=e.data.getTarget();if("mouseout"===e.name){if(!t.is("table"))return;var n=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);while(n&&n.$&&!n.equals(t)&&!n.is("body"))n=n.getParent();if(!n||n.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}CKEDITOR.plugins.add("ae_tableresize",{requires:"ae_tabletools",init:function(e){e.on("contentDom",(function(){var t=void 0,n=e.editable();n.attachListener(n.isInline()?n:e.document,"mousemove",(function(n){n=n.data;var i=n.getTarget();if(i.type===CKEDITOR.NODE_ELEMENT){var r=n.getPageOffset().x;if(t){if(t.isResizing())return t.move(r),void u(n);t.destroy(),t=null}var o=void 0;if(i.is("table")||i.getAscendant("tbody",1)){var a=i.getAscendant("table",1);if(e.editable().contains(a)){(o=a.getCustomData("_cke_table_pillars"))||(a.setCustomData("_cke_table_pillars",o=s(a)),a.on("mouseout",d),a.on("mousedown",d));var f=l(o,r);f&&(t=new c(e,f))}}}}))}))}})}},function(e,t,n){"use strict";if(!CKEDITOR.plugins.get("ae_tabletools")){var i=/^(?:td|th)$/;function r(e){if(!e)return null;var t=e.getRanges(),n=[],r={};function o(e){n.length>0||e.type==CKEDITOR.NODE_ELEMENT&&i.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),n.push(e))}for(var a=0;a<t.length;a++){var s=t[a];if(s.collapsed){var l=s.getCommonAncestor(),u=l.getAscendant("td",!0)||l.getAscendant("th",!0);u&&n.push(u)}else{var c=new CKEDITOR.dom.walker(s),d=void 0;c.guard=o;while(d=c.next())if(d.type!=CKEDITOR.NODE_ELEMENT||!d.is(CKEDITOR.dtd.table)){var f=d.getAscendant("td",!0)||d.getAscendant("th",!0);f&&!f.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,f,"selected_cell",!0),n.push(f))}}}return CKEDITOR.dom.element.clearAllMarkers(r),n}function o(e){var t=0,n=e.length-1,i={},r=void 0,o=void 0,a=void 0;while(r=e[t++])CKEDITOR.dom.element.setMarker(i,r,"delete_cell",!0);t=0;while(r=e[t++])if((o=r.getPrevious())&&!o.getCustomData("delete_cell")||(o=r.getNext())&&!o.getCustomData("delete_cell"))return CKEDITOR.dom.element.clearAllMarkers(i),o;return CKEDITOR.dom.element.clearAllMarkers(i),a=e[0].getParent(),(a=a.getPrevious())?a.getLast():(a=e[n].getParent(),(a=a.getNext())?a.getChild(0):null)}function a(e,t){for(var n=r(e),i=n[0],o=i.getAscendant("table"),a=i.getDocument(),s=n[0].getParent(),l=s.$.rowIndex,u=n[n.length-1],c=u.getParent().$.rowIndex+u.$.rowSpan-1,d=new CKEDITOR.dom.element(o.$.rows[c]),f=t?l:c,h=t?s:d,p=CKEDITOR.tools.buildTableMap(o),m=p[f],g=t?p[f-1]:p[f+1],E=p[0].length,v=a.createElement("tr"),y=0;m[y]&&y<E;y++){var b=void 0;m[y].rowSpan>1&&g&&m[y]==g[y]?(b=m[y],b.rowSpan+=1):(b=new CKEDITOR.dom.element(m[y]).clone(),b.removeAttribute("rowSpan"),b.appendBogus(),v.append(b),b=b.$),y+=b.colSpan-1}t?v.insertBefore(h):v.insertAfter(h)}function s(e){if(e instanceof CKEDITOR.dom.selection){for(var t=r(e),n=t[0],i=n.getAscendant("table"),o=CKEDITOR.tools.buildTableMap(i),a=t[0].getParent(),l=a.$.rowIndex,u=t[t.length-1],c=u.getParent().$.rowIndex+u.$.rowSpan-1,d=[],f=l;f<=c;f++){for(var h=o[f],p=new CKEDITOR.dom.element(i.$.rows[f]),m=0;m<h.length;m++){var g=new CKEDITOR.dom.element(h[m]),E=g.getParent().$.rowIndex;if(1==g.$.rowSpan)g.remove();else if(g.$.rowSpan-=1,E==f){var v=o[f+1];v[m-1]?g.insertAfter(new CKEDITOR.dom.element(v[m-1])):new CKEDITOR.dom.element(i.$.rows[f+1]).append(g,1)}m+=g.$.colSpan-1}d.push(p)}for(var y=i.$.rows,b=new CKEDITOR.dom.element(y[c+1]||(l>0?y[l-1]:null)||i.$.parentNode),T=d.length;T>=0;T--)s(d[T]);return b}if(e instanceof CKEDITOR.dom.element){var C=e.getAscendant("table");1==C.$.rows.length?C.remove():e.remove()}return null}function l(e,t){for(var n=e.getParent(),i=n.$.cells,r=0,o=0;o<i.length;o++){var a=i[o];if(r+=t?1:a.colSpan,a==e.$)break}return r-1}function u(e,t){for(var n=t?1/0:0,i=0;i<e.length;i++){var r=l(e[i],t);(t?r<n:r>n)&&(n=r)}return n}function c(e,t){for(var n=r(e),i=n[0],o=i.getAscendant("table"),a=u(n,1),s=u(n),l=t?a:s,c=CKEDITOR.tools.buildTableMap(o),d=[],f=[],h=c.length,p=0;p<h;p++){d.push(c[p][l]);var m=t?c[p][l-1]:c[p][l+1];f.push(m)}for(var g=0;g<h;g++){var E=void 0;d[g]&&(d[g].colSpan>1&&f[g]==d[g]?(E=d[g],E.colSpan+=1):(E=new CKEDITOR.dom.element(d[g]).clone(),E.removeAttribute("colSpan"),E.appendBogus(),E[t?"insertBefore":"insertAfter"].call(E,new CKEDITOR.dom.element(d[g])),E=E.$),g+=E.rowSpan-1)}}function d(e){for(var t=r(e),n=t[0],i=t[t.length-1],o=n.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(o),s=void 0,l=void 0,u=[],c=void 0,d=0,f=a.length;d<f;d++)for(var h=0,p=a[d].length;h<p;h++)a[d][h]==n.$&&(s=h),a[d][h]==i.$&&(l=h);for(var m=s;m<=l;m++)for(var g=0;g<a.length;g++){var E=a[g],v=new CKEDITOR.dom.element(o.$.rows[g]),y=new CKEDITOR.dom.element(E[m]);y.$&&(1==y.$.colSpan?y.remove():y.$.colSpan-=1,g+=y.$.rowSpan-1,v.$.cells.length||u.push(v))}var b=o.$.rows[0]&&o.$.rows[0].cells,T=new CKEDITOR.dom.element(b[s]||(s?b[s-1]:o.$.parentNode));return u.length==c&&o.remove(),T}function f(e,t){var n=e.getStartElement(),i=n.getAscendant("td",1)||n.getAscendant("th",1);if(i){var r=i.clone();r.appendBogus(),t?r.insertBefore(i):r.insertAfter(i)}}function h(e){if(e instanceof CKEDITOR.dom.selection){for(var t=r(e),n=t[0]&&t[0].getAscendant("table"),i=o(t),a=t.length-1;a>=0;a--)h(t[a]);i?m(i,!0):n&&n.remove()}else if(e instanceof CKEDITOR.dom.element){var s=e.getParent();1==s.getChildCount()?s.remove():e.remove()}}function p(e){var t=e.getBogus();t&&t.remove(),e.trim()}function m(e,t){var n=e.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(i.focus(),n.focus());var r=new CKEDITOR.dom.range(n);r["moveToElementEdit"+(t?"End":"Start")](e)||(r.selectNodeContents(e),r.collapse(!t)),r.select(!0)}function g(e,t,n){var i=e[t];if("undefined"==typeof n)return i;for(var r=0;i&&r<i.length;r++){if(n.is&&i[r]==n.$)return r;if(r==n)return new CKEDITOR.dom.element(i[r])}return n.is?-1:null}function E(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i];n.push(r[t]),r[t].rowSpan>1&&(i+=r[t].rowSpan-1)}return n}function v(e,t,n){var i=r(e),o=void 0;if((t?1!=i.length:i.length<2)||(o=e.getCommonAncestor())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("table"))return!1;var a=void 0,s=i[0],l=s.getAscendant("table"),u=CKEDITOR.tools.buildTableMap(l),c=u.length,d=u[0].length,f=s.getParent().$.rowIndex,h=g(u,f,s);if(t){var m=void 0;try{var E=parseInt(s.getAttribute("rowspan"),10)||1,v=parseInt(s.getAttribute("colspan"),10)||1;m=u["up"==t?f-E:"down"==t?f+E:f]["left"==t?h-v:"right"==t?h+v:h]}catch(e){return!1}if(!m||s.$==m)return!1;i["up"==t||"left"==t?"unshift":"push"](new CKEDITOR.dom.element(m))}for(var y=s.getDocument(),b=f,T=0,C=0,O=!n&&new CKEDITOR.dom.documentFragment(y),I=0,_=0;_<i.length;_++){a=i[_];var D=a.getParent(),R=a.getFirst(),k=a.$.colSpan,w=a.$.rowSpan,K=D.$.rowIndex,S=g(u,K,a);if(I+=k*w,C=Math.max(C,S-h+k),T=Math.max(T,K-f+w),!n){if(p(a),a.getChildren().count()){if(K!=b&&R&&(!R.isBlockBoundary||!R.isBlockBoundary({br:1}))){var x=O.getLast(CKEDITOR.dom.walker.whitespaces(!0));!x||x.is&&x.is("br")||O.append("br")}a.moveChildren(O)}_?a.remove():a.setHtml("")}b=K}if(n)return T*C==I;O.moveChildren(s),s.appendBogus(),C>=d?s.removeAttribute("rowSpan"):s.$.rowSpan=T,T>=c?s.removeAttribute("colSpan"):s.$.colSpan=C;for(var N=new CKEDITOR.dom.nodeList(l.$.rows),P=N.count(),A=P-1;A>=0;A--){var L=N.getItem(A);L.$.cells.length||(L.remove(),P++)}return s}function y(e,t){var n=r(e);if(n.length>1)return!1;if(t)return!0;var i=n[0],o=i.getParent(),a=o.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(a),l=o.$.rowIndex,u=g(s,l,i),c=i.$.rowSpan,d=void 0,f=void 0,h=void 0,p=void 0;if(c>1){f=Math.ceil(c/2),h=Math.floor(c/2),p=l+f;var m=new CKEDITOR.dom.element(a.$.rows[p]),E=g(s,p),v=void 0;d=i.clone();for(var y=0;y<E.length;y++){if(v=E[y],v.parentNode==m.$&&y>u){d.insertBefore(new CKEDITOR.dom.element(v));break}v=null}v||m.append(d)}else{h=f=1;var b=o.clone();b.insertAfter(o),b.append(d=i.clone());for(var T=g(s,l),C=0;C<T.length;C++)T[C].rowSpan++}return d.appendBogus(),i.$.rowSpan=f,d.$.rowSpan=h,1==f&&i.removeAttribute("rowSpan"),1==h&&d.removeAttribute("rowSpan"),d}function b(e,t){var n=r(e);if(n.length>1)return!1;if(t)return!0;var i=n[0],o=i.getParent(),a=o.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(a),l=o.$.rowIndex,u=g(s,l,i),c=i.$.colSpan,d=void 0,f=void 0;if(c>1)d=Math.ceil(c/2),f=Math.floor(c/2);else{f=d=1;for(var h=E(s,u),p=0;p<h.length;p++)h[p].colSpan++}var m=i.clone();return m.insertAfter(i),m.appendBogus(),i.$.colSpan=d,m.$.colSpan=f,1==d&&i.removeAttribute("colSpan"),1==f&&m.removeAttribute("colSpan"),m}CKEDITOR.plugins.add("ae_tabletools",{init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function n(t,n){var i=e.getCommand(t);i||(i=e.addCommand(t,n),e.addFeature(i))}n("rowDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection();m(s(t))}})),n("rowInsertBefore",t({requiredContent:"table",exec:function(e){var t=e.getSelection();a(t,!0)}})),n("rowInsertAfter",t({requiredContent:"table",exec:function(e){var t=e.getSelection();a(t)}})),n("columnDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection(),n=d(t);n&&m(n,!0)}})),n("columnInsertBefore",t({requiredContent:"table",exec:function(e){var t=e.getSelection();c(t,!0)}})),n("columnInsertAfter",t({requiredContent:"table",exec:function(e){var t=e.getSelection();c(t)}})),n("cellDelete",t({requiredContent:"table",exec:function(e){var t=e.getSelection();h(t)}})),n("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){m(v(e.getSelection()),!0)}})),n("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){m(v(e.getSelection(),"right"),!0)}})),n("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){m(v(e.getSelection(),"down"),!0)}})),n("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){m(y(e.getSelection()))}})),n("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){m(b(e.getSelection()))}})),n("cellInsertBefore",t({requiredContent:"table",exec:function(e){var t=e.getSelection();f(t,!0)}})),n("cellInsertAfter",t({requiredContent:"table",exec:function(e){var t=e.getSelection();f(t)}}))},getSelectedCells:r})}CKEDITOR.tools.buildTableMap=function(e){for(var t=e.$.rows,n=-1,i=[],r=0;r<t.length;r++){n++,i[n]||(i[n]=[]);for(var o=-1,a=0;a<t[r].cells.length;a++){var s=t[r].cells[a];o++;while(i[n][o])o++;for(var l=isNaN(s.colSpan)?1:s.colSpan,u=isNaN(s.rowSpan)?1:s.rowSpan,c=0;c<u;c++){i[n+c]||(i[n+c]=[]);for(var d=0;d<l;d++)i[n+c][o+d]=t[r].cells[a]}o+=l-1}}return i}},function(e,t,n){"use strict";n(148),n(149),n(150),n(151),n(152),n(153)},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=l(r),a=n(2),s=l(a);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_buttonbridge")){var f={};function h(e,t,n){var r,a,l=AlloyEditor.Buttons[e];(f[n.name]=f[n.name]||{},f[n.name][e]=f[n.name][e]||t,l)||(a=r=function(t){function n(){var t,i,r,o;u(this,n);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=c(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(s))),i=r,r._handleClick=function(){var t=r.context.editor.get("nativeEditor"),n=f[t.name][e].command,i=f[t.name][e].onClick;i?i.call(r):t.execCommand(n),t.fire("actionPerformed",r)},o=i,c(r,o)}return d(n,t),i(n,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n="ae-button ae-button-bridge",i=f[t.name][e].name||f[t.name][e].command||e,r=f[t.name][e].label,a="button-"+i,s="ae-icon-"+i,l={},u=CKEDITOR.skin.getIconStyle(i);if(u){var c=u.split(";");l.backgroundImage=c[0].substring(c[0].indexOf(":")+1),l.backgroundPosition=c[1].substring(c[1].indexOf(":")+1),l.backgroundSize=c[2].substring(c[2].indexOf(":")+1)}return o.default.createElement("button",{"aria-label":r,className:n,"data-type":a,onClick:this._handleClick,tabIndex:this.props.tabIndex,title:r},o.default.createElement("span",{className:s,style:l}))}}]),n}(o.default.Component),r.contextType=s.default,r.displayName=e,r.key=e,l=a,AlloyEditor.Buttons[e]=l);return l}CKEDITOR.plugins.get("button")||(CKEDITOR.UI_BUTTON="button",CKEDITOR.plugins.add("button",{})),CKEDITOR.plugins.add("ae_buttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)},e.ui.addHandler(CKEDITOR.UI_BUTTON,{add:h,create:function(e){var t="buttonBridge"+(1e9*Math.random()>>>0),n=h(t,e);return new n}})}})}},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(2),s=c(a),l=n(12),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_menubuttonbridge")){var p={};function m(e,t,n){var r,a,l=AlloyEditor.Buttons[e];(p[n.name]=p[n.name]||{},p[n.name][e]=p[n.name][e]||t,l)||(a=r=function(n){function r(){return d(this,r),f(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return h(r,n),i(r,[{key:"toFeature",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=p[t.name][e].name||p[t.name][e].command||e,i="ae-button ae-button-bridge",r="ae-icon-"+n,a={},s=CKEDITOR.skin.getIconStyle(n);if(s){var l=s.split(";");a.backgroundImage=l[0].substring(l[0].indexOf(":")+1),a.backgroundPosition=l[1].substring(l[1].indexOf(":")+1),a.backgroundSize=l[2].substring(l[2].indexOf(":")+1)}return o.default.createElement("div",{className:"ae-container ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":p[t.name][e].label,className:i,onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:p[t.name][e].label},o.default.createElement("span",{className:r,style:a})),this.props.expanded&&o.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},this._getMenuItems()))}},{key:"_getMenuItems",value:function(){var e=this.context.editor.get("nativeEditor"),n=t.onMenu(),i=Object.keys(n).map((function(t){var i=e.getMenuItem(t);if(!i)return null;var r=i.definition||i,a=n[t],s="ae-toolbar-element "+(a===CKEDITOR.TRISTATE_ON?"active":""),l=a===CKEDITOR.TRISTATE_DISABLED,u=function(){r.command?e.execCommand(r.command):r.onClick&&r.onClick.apply(r)};return o.default.createElement("li",{key:i.name,role:"option"},o.default.createElement("button",{className:s,disabled:l,onClick:u},r.label))}));return i}}]),r}(o.default.Component),r.contextType=s.default,r.displayName=e,r.key=e,l=a,AlloyEditor.Buttons[e]=l);return l}CKEDITOR.plugins.get("menubutton")||(CKEDITOR.UI_MENU_BUTTON="menubutton",CKEDITOR.plugins.add("menubutton",{})),CKEDITOR.plugins.add("ae_menubuttonbridge",{requires:["ae_uibridge","ae_menubridge"],beforeInit:function(e){e.ui.addMenuButton=function(e,t){this.add(e,CKEDITOR.UI_MENUBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,{add:m,create:function(e){var t="buttonBridge"+(1e9*Math.random()>>>0),n=m(t,e);return new n}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_menubridge")||CKEDITOR.plugins.add("ae_menubridge",{beforeInit:function(e){if(!CKEDITOR.plugins.get("menu")){for(var t=[],n=e._.menuGroups={},i=e._.menuItems={},r=0;r<t.length;r++)n[t[r]]=r+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(i[e]={name:e,definition:t})},e.addMenuItems=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return i[e]},e.removeMenuItem=function(e){delete i[e]}}}})},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=c(r),a=n(2),s=c(a),l=n(12),u=c(l);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_panelmenubuttonbridge")){var p={},m=function(e,t,n){var r,a,l=AlloyEditor.Buttons[e];(p[n.name]=p[n.name]||{},p[n.name][e]=p[n.name][e]||t,l)||(a=r=function(t){function n(){return d(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return h(n,t),i(n,[{key:"createPanel",value:function(){}},{key:"render",value:function(){var t=this.context.editor.get("nativeEditor"),n=p[t.name][e].name||p[t.name][e].command||e,i="ae-button ae-button-bridge",r="ae-icon-"+n,a={},s=CKEDITOR.skin.getIconStyle(n);if(s){var l=s.split(";");a.backgroundImage=l[0].substring(l[0].indexOf(":")+1),a.backgroundPosition=l[1].substring(l[1].indexOf(":")+1),a.backgroundSize=l[2].substring(l[2].indexOf(":")+1)}var u=void 0;return this.props.expanded&&(u=this._getPanel()),o.default.createElement("div",{className:"ae-container ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":p[t.name][e].label,className:i,onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:p[t.name][e].label},o.default.createElement("span",{className:r,style:a})),u)}},{key:"_getPanel",value:function(){var t=this.context.editor.get("nativeEditor"),n=p[t.name][e].onBlock,i={hide:this.props.toggleDropdown,show:this.props.toggleDropdown},r=new CKEDITOR.dom.element("div"),a={element:r,keys:{}};return n&&n.call(this,i,a),o.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},o.default.createElement("div",{className:r.getAttribute("class"),dangerouslySetInnerHTML:{__html:r.getHtml()}}))}}]),n}(o.default.Component),r.contextType=s.default,r.displayName=e,r.key=e,l=a,AlloyEditor.Buttons[e]=l);return l};CKEDITOR.plugins.get("panelmenubutton")||(CKEDITOR.UI_PANELBUTTON="panelmenubutton",CKEDITOR.plugins.add("panelmenubutton",{})),CKEDITOR.plugins.get("panelbutton")||(CKEDITOR.UI_PANELBUTTON="panelbutton",CKEDITOR.plugins.add("panelbutton",{})),CKEDITOR.plugins.add("ae_panelmenubuttonbridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addPanelMenuButton=function(e,t){this.add(e,CKEDITOR.UI_PANELBUTTON,t)},e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,{add:m,create:function(e){var t="panelMenuButtonBridge"+(1e9*Math.random()>>>0),n=m(t,e);return new n}})}})}},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=f(r),a=n(2),s=f(a),l=n(12),u=f(l),c=n(1),d=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(!CKEDITOR.plugins.get("ae_richcombobridge")){var g={},E=function(e,t,n){var r,a,l=AlloyEditor.Buttons[e];(g[n.name]=g[n.name]||{},g[n.name][e]=g[n.name][e]||t,g[n.name][e].currentValue=void 0,l)||(a=r=function(r){function a(t){h(this,a);var i=p(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return i._onClick=function(t){var n=i.context.editor.get("nativeEditor"),r=g[n.name][e];if(r.onClick){var o=t.currentTarget.getAttribute("data-value");r.onClick.call(i,o),g[n.name][e].currentValue=o,n.fire("actionPerformed",i)}},i.state={value:g[n.name][e].currentValue},i}return m(a,r),i(a,[{key:"commit",value:function(){}},{key:"createPanel",value:function(){}},{key:"disable",value:function(){}},{key:"enable",value:function(){}},{key:"getState",value:function(){}},{key:"hideGroup",value:function(){}},{key:"hideItem",value:function(){}},{key:"mark",value:function(){}},{key:"showAll",value:function(){}},{key:"startGroup",value:function(){}},{key:"unmarkAll",value:function(){}},{key:"add",value:function(e,t,n){this._items.push({preview:t,title:n,value:e})}},{key:"componentWillMount",value:function(){var t=this.context.editor.get("nativeEditor"),n=g[t.name][e];this._items=[],this.setValue=this._setValue,n.init&&n.init.call(this),n.onRender&&n.onRender.call(this)}},{key:"componentWillUnmount",value:function(){this._cacheValue(this.state.value),this.setValue=this._cacheValue}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var n=this.context.editor.get("nativeEditor"),i=g[n.name][e].currentValue||t.label;return o.default.createElement("div",{className:"ae-container-dropdown ae-has-dropdown"},o.default.createElement("button",{"aria-expanded":this.props.expanded,"aria-label":i,className:"ae-toolbar-element",onClick:this.props.toggleDropdown,role:"combobox",tabIndex:this.props.tabIndex,title:i},o.default.createElement("div",{className:"ae-container"},o.default.createElement("span",{className:"ae-container-dropdown-selected-item"},i),o.default.createElement(d.default,{symbol:"caret-bottom"}))),this.props.expanded&&o.default.createElement(u.default,{onDismiss:this.props.toggleDropdown},this._getItems()))}},{key:"_cacheValue",value:function(t){var n=this.context.editor.get("nativeEditor");g[n.name][e].currentValue=t}},{key:"_getItems",value:function(){var e=this,t=this,n=this._items.map((function(n){var i="ae-toolbar-element "+(n.value===e.state.value?"active":"");return o.default.createElement("li",{key:n.title,role:"option"},o.default.createElement("button",{className:i,dangerouslySetInnerHTML:{__html:n.preview},"data-value":n.value,onClick:t._onClick}))}));return n}},{key:"_setValue",value:function(e){this._cacheValue(e),this.setState({value:e})}}]),a}(o.default.Component),r.contextType=s.default,r.displayName=e,r.key=e,l=a,AlloyEditor.Buttons[e]=l);return l};CKEDITOR.plugins.get("richcombo")||(CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.plugins.add("richcombo",{})),CKEDITOR.plugins.add("ae_richcombobridge",{requires:["ae_uibridge"],beforeInit:function(e){e.ui.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)},e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,{add:E,create:function(e){var t="richComboBridge"+(1e9*Math.random()>>>0),n=E(t,e);return new n}})}})}},function(e,t,n){"use strict";CKEDITOR.plugins.get("ae_uibridge")||CKEDITOR.plugins.add("ae_uibridge",{beforeInit:function(e){var t=e.ui.add;e.ui.add=function(n,i,r){t.call(this,n,i,r);var o=this._.handlers[i];o&&o.add&&(o.add(n,r,e),AlloyEditor.registerBridgeButton(n,e.__processingPlugin__.plugin.name))}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeImageCommand=void 0;var i=n(155),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}t.removeImageCommand=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={exec:function(e){var t=e.getSelection();if(t){var n=t.getRanges(),i=n[0].startContainer,r=new CKEDITOR.dom.range(i);r.setStart(i,0),r.setEnd(i,0);var o=t.getSelectedElement();if(o&&"img"===o.getName()){var a=t.getNative();a&&a.removeAllRanges(),t.selectRanges([r]),o.remove()}}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(7),o=g(r),a=n(0),s=g(a),l=n(6),u=g(l),c=n(2),d=g(c),f=n(18),h=g(f),p=n(10),m=g(p);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(e){E(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onDismissToolbarFocus=function(){var e=n.context.editor.get("nativeEditor");e.focus()},n.state={hidden:!1},n}return y(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.editor.get("nativeEditor");t.on("editorInteraction",this._onEditorInteraction,this),t.on("actionPerformed",this._onActionPerformed,this),t.on("key",this._onEditorKey,this),this._mousedownListener=function(t){e._setUIHidden(t.target)},this._keyDownListener=CKEDITOR.tools.debounce((function(t){e._setUIHidden(document.activeElement)}),this.props.eventsDelay,this),document.addEventListener("mousedown",this._mousedownListener),document.addEventListener("keydown",this._keyDownListener)}},{key:"componentDidUpdate",value:function(e,t){var n=u.default.findDOMNode(this),i=this.context.editor.get("nativeEditor");n&&i.fire("ariaUpdate",{message:this._getAvailableToolbarsMessage(n)}),i.fire("editorUpdate",{prevProps:e,prevState:t,props:this.props,state:this.state})}},{key:"_getAriaUpdateTemplate",value:function(e){return this._ariaUpdateTemplates||(this._ariaUpdateTemplates={}),this._ariaUpdateTemplates[e]||(this._ariaUpdateTemplates[e]=new CKEDITOR.template(this._getAriaUpdates()[e])),this._ariaUpdateTemplates[e]}},{key:"_getAriaUpdates",value:function(){return this.props.ariaUpdates||{noToolbar:AlloyEditor.Strings.ariaUpdateNoToolbar,oneToolbar:AlloyEditor.Strings.ariaUpdateOneToolbar,manyToolbars:AlloyEditor.Strings.ariaUpdateManyToolbars}}},{key:"_getAvailableToolbarsMessage",value:function(e){var t=e.querySelectorAll('[role="toolbar"]');if(t.length){var n=Array.prototype.slice.call(t).map((function(e){return e.getAttribute("aria-label")})),i=1===n.length?"oneToolbar":"manyToolbars";return this._getAriaUpdateTemplate(i).output({toolbars:n.join(",").replace(/,([^,]*)$/," and $1")})}return this._getAriaUpdates().noToolbar}},{key:"componentWillUnmount",value:function(){this._mousedownListener&&document.removeEventListener("mousedown",this._mousedownListener),this._keyDownListener&&(this._keyDownListener.detach(),document.removeEventListener("keydown",this._keyDownListener))}},{key:"render",value:function(){var e=this;if(this.state.hidden)return null;var t=Object.keys(this.props.toolbars).map((function(e){return AlloyEditor.Toolbars[e]||window[e]}));return t=this.filterExclusive(t).map((function(t){var n=e.mergeExclusiveProps({config:e.props.toolbars[t.key],editor:e.context.editor,editorEvent:e.state.editorEvent,key:t.key,onDismiss:e._onDismissToolbarFocus,selectionData:e.state.selectionData},t.key);return s.default.createElement(t,n)})),s.default.createElement("div",{className:"ae-toolbars",onKeyDown:this.handleKey},t)}},{key:"_onActionPerformed",value:function(e){var t=this.context.editor.get("nativeEditor");t.focus(),this.setState({itemExclusive:null,selectionData:t.getSelectionData()})}},{key:"_onEditorInteraction",value:function(e){this.setState({editorEvent:e,hidden:!1,itemExclusive:null,selectionData:e.data.selectionData})}},{key:"_onEditorKey",value:function(e){var t=e.data.domEvent.$;t.altKey&&121===t.keyCode&&this.focus()}},{key:"_setUIHidden",value:function(e){var t=u.default.findDOMNode(this);if(t){var n=this.context.editor.get("nativeEditor").editable(),i=e.parentNode,r=new CKEDITOR.dom.node(e);if(n){var o=n.$===e||n.contains(r)||new CKEDITOR.dom.element(t).contains(r);i&&(o=o||"ckimgrsz"===i.id),o||this.setState({hidden:!0})}else this.setState({hidden:!0})}}}]),t}(s.default.Component);b.contextType=d.default,b.defaultProps={circular:!0,descendants:"[class^=ae-toolbar-]",eventsDelay:0,keys:{next:9}},b.propTypes={ariaUpdates:o.default.object,eventsDelay:o.default.number,toolbars:o.default.object.isRequired},t.default=(0,h.default)((0,m.default)(b))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),r=u(i),o=n(5),a=u(o),s=n(22),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){c.superclass.constructor.call(this,e),this.init(e)}(0,l.default)(c,r.default,{init:function(e){this._callChain("initializer",e)},destroy:function(){this._callChain("destructor")},_callChain:function(e,t){var n=[],i=this.constructor;while(i)a.default.isFunction(i.prototype[e])&&n.push(i.prototype[e]),i=i.superclass?i.superclass.constructor:null;n=n.reverse(),t=a.default.isArray(t)?t:[t];for(var r=0;r<n.length;r++){var o=n[r];o.apply(this,t)}}}),t.default=c},function(e,t){e.exports="2.11.6"},function(e,t,n){"use strict";n.r(t),n.d(t,"AlloyEditor",(function(){return i}));var i={};n.r(i),n.d(i,"AlloyEditor",(function(){return r}));n(45);var r=n(14),o=n(0),a=n.n(o),s=n(7),l=n.n(s);"undefined"!==typeof window&&(window.CKEDITOR.disableAutoInline=!0,window.AlloyEditor=r,r["React"]=a.a,r["React"].PropTypes=l.a,r["VERSION"]=n(158))}]);
//# sourceMappingURL=alloy-editor-all-min.js.map